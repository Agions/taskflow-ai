#!/usr/bin/env node

/**
 * TaskFlow AI MCP 服务可执行文件
 * 
 * 这个文件是 TaskFlow AI 的 MCP (Model Context Protocol) 服务入口点。
 * 它被设计为通过编辑器配置文件自动启动，遵循标准 MCP 协议。
 * 
 * 使用方式：
 * 1. 通过编辑器配置自动启动：
 *    "command": "npx",
 *    "args": ["-y", "--package=taskflow-ai", "taskflow-mcp"]
 * 
 * 2. 直接运行（用于测试）：
 *    npx taskflow-ai taskflow-mcp
 *    或
 *    node bin/taskflow-mcp
 */

const path = require('path');
const fs = require('fs');

// 检查是否在开发环境
const isDevelopment = fs.existsSync(path.join(__dirname, '../src'));

if (isDevelopment) {
  // 开发环境：使用 ts-node 运行 TypeScript 源码
  require('ts-node/register');
  require('../src/mcp/taskflow-mcp.ts');
} else {
  // 生产环境：运行编译后的 JavaScript
  require('../dist/mcp/taskflow-mcp.js');
}
