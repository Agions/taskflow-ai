{
  "version": 3,
  "sources": ["../node_modules/mdurl/build/index.cjs.js", "../node_modules/uc.micro/build/index.cjs.js", "https://raw.githubusercontent.com/fb55/entities/61afd4701eaa736978b13c7351cd3de9a96b04bc/src/generated/decode-data-html.ts", "https://raw.githubusercontent.com/fb55/entities/61afd4701eaa736978b13c7351cd3de9a96b04bc/src/generated/decode-data-xml.ts", "https://raw.githubusercontent.com/fb55/entities/61afd4701eaa736978b13c7351cd3de9a96b04bc/src/decode_codepoint.ts", "https://raw.githubusercontent.com/fb55/entities/61afd4701eaa736978b13c7351cd3de9a96b04bc/src/decode.ts", "https://raw.githubusercontent.com/fb55/entities/61afd4701eaa736978b13c7351cd3de9a96b04bc/src/generated/encode-html.ts", "https://raw.githubusercontent.com/fb55/entities/61afd4701eaa736978b13c7351cd3de9a96b04bc/src/escape.ts", "https://raw.githubusercontent.com/fb55/entities/61afd4701eaa736978b13c7351cd3de9a96b04bc/src/encode.ts", "https://raw.githubusercontent.com/fb55/entities/61afd4701eaa736978b13c7351cd3de9a96b04bc/src/index.ts", "../node_modules/linkify-it/build/index.cjs.js", "../node_modules/punycode.js/punycode.js", "../node_modules/markdown-it/dist/index.cjs.js", "../node_modules/logform/format.js", "../node_modules/@colors/colors/lib/styles.js", "../node_modules/@colors/colors/lib/system/has-flag.js", "../node_modules/@colors/colors/lib/system/supports-colors.js", "../node_modules/@colors/colors/lib/custom/trap.js", "../node_modules/@colors/colors/lib/custom/zalgo.js", "../node_modules/@colors/colors/lib/maps/america.js", "../node_modules/@colors/colors/lib/maps/zebra.js", "../node_modules/@colors/colors/lib/maps/rainbow.js", "../node_modules/@colors/colors/lib/maps/random.js", "../node_modules/@colors/colors/lib/colors.js", "../node_modules/@colors/colors/safe.js", "../node_modules/triple-beam/config/cli.js", "../node_modules/triple-beam/config/npm.js", "../node_modules/triple-beam/config/syslog.js", "../node_modules/triple-beam/config/index.js", "../node_modules/triple-beam/index.js", "../node_modules/logform/colorize.js", "../node_modules/logform/levels.js", "../node_modules/logform/align.js", "../node_modules/logform/errors.js", "../node_modules/logform/pad-levels.js", "../node_modules/logform/cli.js", "../node_modules/logform/combine.js", "../node_modules/safe-stable-stringify/index.js", "../node_modules/logform/json.js", "../node_modules/logform/label.js", "../node_modules/logform/logstash.js", "../node_modules/logform/metadata.js", "../node_modules/ms/index.js", "../node_modules/logform/ms.js", "../node_modules/logform/pretty-print.js", "../node_modules/logform/printf.js", "../node_modules/logform/simple.js", "../node_modules/logform/splat.js", "../node_modules/fecha/src/fecha.ts", "../node_modules/logform/timestamp.js", "../node_modules/logform/uncolorize.js", "../node_modules/logform/index.js", "../node_modules/winston/lib/winston/common.js", "../node_modules/winston/package.json", "../node_modules/util-deprecate/node.js", "../node_modules/readable-stream/lib/internal/streams/stream.js", "../node_modules/readable-stream/lib/internal/streams/destroy.js", "../node_modules/readable-stream/errors.js", "../node_modules/readable-stream/lib/internal/streams/state.js", "../node_modules/inherits/inherits_browser.js", "../node_modules/inherits/inherits.js", "../node_modules/readable-stream/lib/internal/streams/buffer_list.js", "../node_modules/readable-stream/lib/internal/streams/end-of-stream.js", "../node_modules/readable-stream/lib/internal/streams/async_iterator.js", "../node_modules/readable-stream/lib/internal/streams/from.js", "../node_modules/readable-stream/lib/_stream_readable.js", "../node_modules/readable-stream/lib/_stream_duplex.js", "../node_modules/readable-stream/lib/_stream_writable.js", "../node_modules/winston-transport/modern.js", "../node_modules/winston-transport/legacy.js", "../node_modules/winston-transport/index.js", "../node_modules/winston/lib/winston/transports/console.js", "../node_modules/async/internal/isArrayLike.js", "../node_modules/async/internal/initialParams.js", "../node_modules/async/internal/setImmediate.js", "../node_modules/async/asyncify.js", "../node_modules/async/internal/wrapAsync.js", "../node_modules/async/internal/awaitify.js", "../node_modules/async/internal/parallel.js", "../node_modules/async/internal/once.js", "../node_modules/async/internal/getIterator.js", "../node_modules/async/internal/iterator.js", "../node_modules/async/internal/onlyOnce.js", "../node_modules/async/internal/breakLoop.js", "../node_modules/async/internal/asyncEachOfLimit.js", "../node_modules/async/internal/eachOfLimit.js", "../node_modules/async/eachOfLimit.js", "../node_modules/async/eachOfSeries.js", "../node_modules/async/series.js", "../node_modules/readable-stream/lib/_stream_transform.js", "../node_modules/readable-stream/lib/_stream_passthrough.js", "../node_modules/readable-stream/lib/internal/streams/pipeline.js", "../node_modules/readable-stream/readable.js", "../node_modules/@dabh/diagnostics/diagnostics.js", "../node_modules/@dabh/diagnostics/node/production.js", "../node_modules/@dabh/diagnostics/node/index.js", "../node_modules/winston/lib/winston/tail-file.js", "../node_modules/winston/lib/winston/transports/file.js", "../node_modules/winston/lib/winston/transports/http.js", "../node_modules/is-stream/index.js", "../node_modules/winston/lib/winston/transports/stream.js", "../node_modules/winston/lib/winston/transports/index.js", "../node_modules/winston/lib/winston/config/index.js", "../node_modules/async/eachOf.js", "../node_modules/async/internal/withoutIndex.js", "../node_modules/async/forEach.js", "../node_modules/fn.name/index.js", "../node_modules/one-time/index.js", "../node_modules/stack-trace/lib/stack-trace.js", "../node_modules/winston/lib/winston/exception-stream.js", "../node_modules/winston/lib/winston/exception-handler.js", "../node_modules/winston/lib/winston/rejection-stream.js", "../node_modules/winston/lib/winston/rejection-handler.js", "../node_modules/winston/lib/winston/profiler.js", "../node_modules/winston/lib/winston/logger.js", "../node_modules/winston/lib/winston/create-logger.js", "../node_modules/winston/lib/winston/container.js", "../node_modules/winston/lib/winston.js", "../src/index.ts", "../src/core/parser/prd-parser.ts", "../src/types/model.ts", "../src/core/parser/document-processor.ts", "../src/types/task.ts", "../src/core/parser/requirement-extractor.ts", "../src/core/planner/task-planner.ts", "../src/core/task/task-manager.ts", "../src/core/engine/taskflow-engine.ts", "../src/core/visualizer/task-visualizer.ts", "../src/infra/simple-config.ts", "../src/types/config.ts", "../src/infra/logger.ts", "../src/core/models/adapter/baidu.ts", "../src/core/models/adapter/base.ts", "../src/core/models/adapter/deepseek.ts", "../src/core/models/adapter/zhipu.ts", "../src/core/models/providers/qwen.ts", "../src/core/models/factory.ts", "../src/core/models/coordinator.ts", "../src/mcp/index.ts", "../src/mcp/protocol.ts", "../src/mcp/service.ts"],
  "sourcesContent": ["'use strict';\n\n/* eslint-disable no-bitwise */\n\nconst decodeCache = {};\n\nfunction getDecodeCache (exclude) {\n  let cache = decodeCache[exclude];\n  if (cache) { return cache }\n\n  cache = decodeCache[exclude] = [];\n\n  for (let i = 0; i < 128; i++) {\n    const ch = String.fromCharCode(i);\n    cache.push(ch);\n  }\n\n  for (let i = 0; i < exclude.length; i++) {\n    const ch = exclude.charCodeAt(i);\n    cache[ch] = '%' + ('0' + ch.toString(16).toUpperCase()).slice(-2);\n  }\n\n  return cache\n}\n\n// Decode percent-encoded string.\n//\nfunction decode (string, exclude) {\n  if (typeof exclude !== 'string') {\n    exclude = decode.defaultChars;\n  }\n\n  const cache = getDecodeCache(exclude);\n\n  return string.replace(/(%[a-f0-9]{2})+/gi, function (seq) {\n    let result = '';\n\n    for (let i = 0, l = seq.length; i < l; i += 3) {\n      const b1 = parseInt(seq.slice(i + 1, i + 3), 16);\n\n      if (b1 < 0x80) {\n        result += cache[b1];\n        continue\n      }\n\n      if ((b1 & 0xE0) === 0xC0 && (i + 3 < l)) {\n        // 110xxxxx 10xxxxxx\n        const b2 = parseInt(seq.slice(i + 4, i + 6), 16);\n\n        if ((b2 & 0xC0) === 0x80) {\n          const chr = ((b1 << 6) & 0x7C0) | (b2 & 0x3F);\n\n          if (chr < 0x80) {\n            result += '\\ufffd\\ufffd';\n          } else {\n            result += String.fromCharCode(chr);\n          }\n\n          i += 3;\n          continue\n        }\n      }\n\n      if ((b1 & 0xF0) === 0xE0 && (i + 6 < l)) {\n        // 1110xxxx 10xxxxxx 10xxxxxx\n        const b2 = parseInt(seq.slice(i + 4, i + 6), 16);\n        const b3 = parseInt(seq.slice(i + 7, i + 9), 16);\n\n        if ((b2 & 0xC0) === 0x80 && (b3 & 0xC0) === 0x80) {\n          const chr = ((b1 << 12) & 0xF000) | ((b2 << 6) & 0xFC0) | (b3 & 0x3F);\n\n          if (chr < 0x800 || (chr >= 0xD800 && chr <= 0xDFFF)) {\n            result += '\\ufffd\\ufffd\\ufffd';\n          } else {\n            result += String.fromCharCode(chr);\n          }\n\n          i += 6;\n          continue\n        }\n      }\n\n      if ((b1 & 0xF8) === 0xF0 && (i + 9 < l)) {\n        // 111110xx 10xxxxxx 10xxxxxx 10xxxxxx\n        const b2 = parseInt(seq.slice(i + 4, i + 6), 16);\n        const b3 = parseInt(seq.slice(i + 7, i + 9), 16);\n        const b4 = parseInt(seq.slice(i + 10, i + 12), 16);\n\n        if ((b2 & 0xC0) === 0x80 && (b3 & 0xC0) === 0x80 && (b4 & 0xC0) === 0x80) {\n          let chr = ((b1 << 18) & 0x1C0000) | ((b2 << 12) & 0x3F000) | ((b3 << 6) & 0xFC0) | (b4 & 0x3F);\n\n          if (chr < 0x10000 || chr > 0x10FFFF) {\n            result += '\\ufffd\\ufffd\\ufffd\\ufffd';\n          } else {\n            chr -= 0x10000;\n            result += String.fromCharCode(0xD800 + (chr >> 10), 0xDC00 + (chr & 0x3FF));\n          }\n\n          i += 9;\n          continue\n        }\n      }\n\n      result += '\\ufffd';\n    }\n\n    return result\n  })\n}\n\ndecode.defaultChars = ';/?:@&=+$,#';\ndecode.componentChars = '';\n\nconst encodeCache = {};\n\n// Create a lookup array where anything but characters in `chars` string\n// and alphanumeric chars is percent-encoded.\n//\nfunction getEncodeCache (exclude) {\n  let cache = encodeCache[exclude];\n  if (cache) { return cache }\n\n  cache = encodeCache[exclude] = [];\n\n  for (let i = 0; i < 128; i++) {\n    const ch = String.fromCharCode(i);\n\n    if (/^[0-9a-z]$/i.test(ch)) {\n      // always allow unencoded alphanumeric characters\n      cache.push(ch);\n    } else {\n      cache.push('%' + ('0' + i.toString(16).toUpperCase()).slice(-2));\n    }\n  }\n\n  for (let i = 0; i < exclude.length; i++) {\n    cache[exclude.charCodeAt(i)] = exclude[i];\n  }\n\n  return cache\n}\n\n// Encode unsafe characters with percent-encoding, skipping already\n// encoded sequences.\n//\n//  - string       - string to encode\n//  - exclude      - list of characters to ignore (in addition to a-zA-Z0-9)\n//  - keepEscaped  - don't encode '%' in a correct escape sequence (default: true)\n//\nfunction encode (string, exclude, keepEscaped) {\n  if (typeof exclude !== 'string') {\n    // encode(string, keepEscaped)\n    keepEscaped = exclude;\n    exclude = encode.defaultChars;\n  }\n\n  if (typeof keepEscaped === 'undefined') {\n    keepEscaped = true;\n  }\n\n  const cache = getEncodeCache(exclude);\n  let result = '';\n\n  for (let i = 0, l = string.length; i < l; i++) {\n    const code = string.charCodeAt(i);\n\n    if (keepEscaped && code === 0x25 /* % */ && i + 2 < l) {\n      if (/^[0-9a-f]{2}$/i.test(string.slice(i + 1, i + 3))) {\n        result += string.slice(i, i + 3);\n        i += 2;\n        continue\n      }\n    }\n\n    if (code < 128) {\n      result += cache[code];\n      continue\n    }\n\n    if (code >= 0xD800 && code <= 0xDFFF) {\n      if (code >= 0xD800 && code <= 0xDBFF && i + 1 < l) {\n        const nextCode = string.charCodeAt(i + 1);\n        if (nextCode >= 0xDC00 && nextCode <= 0xDFFF) {\n          result += encodeURIComponent(string[i] + string[i + 1]);\n          i++;\n          continue\n        }\n      }\n      result += '%EF%BF%BD';\n      continue\n    }\n\n    result += encodeURIComponent(string[i]);\n  }\n\n  return result\n}\n\nencode.defaultChars = \";/?:@&=+$,-_.!~*'()#\";\nencode.componentChars = \"-_.!~*'()\";\n\nfunction format (url) {\n  let result = '';\n\n  result += url.protocol || '';\n  result += url.slashes ? '//' : '';\n  result += url.auth ? url.auth + '@' : '';\n\n  if (url.hostname && url.hostname.indexOf(':') !== -1) {\n    // ipv6 address\n    result += '[' + url.hostname + ']';\n  } else {\n    result += url.hostname || '';\n  }\n\n  result += url.port ? ':' + url.port : '';\n  result += url.pathname || '';\n  result += url.search || '';\n  result += url.hash || '';\n\n  return result\n}\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n//\n// Changes from joyent/node:\n//\n// 1. No leading slash in paths,\n//    e.g. in `url.parse('http://foo?bar')` pathname is ``, not `/`\n//\n// 2. Backslashes are not replaced with slashes,\n//    so `http:\\\\example.org\\` is treated like a relative path\n//\n// 3. Trailing colon is treated like a part of the path,\n//    i.e. in `http://example.org:foo` pathname is `:foo`\n//\n// 4. Nothing is URL-encoded in the resulting object,\n//    (in joyent/node some chars in auth and paths are encoded)\n//\n// 5. `url.parse()` does not have `parseQueryString` argument\n//\n// 6. Removed extraneous result properties: `host`, `path`, `query`, etc.,\n//    which can be constructed using other parts of the url.\n//\n\nfunction Url () {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.pathname = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nconst protocolPattern = /^([a-z0-9.+-]+:)/i;\nconst portPattern = /:[0-9]*$/;\n\n// Special case for a simple path URL\n/* eslint-disable-next-line no-useless-escape */\nconst simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/;\n\n// RFC 2396: characters reserved for delimiting URLs.\n// We actually just auto-escape these.\nconst delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'];\n\n// RFC 2396: characters not allowed for various reasons.\nconst unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims);\n\n// Allowed by RFCs, but cause of XSS attacks.  Always escape these.\nconst autoEscape = ['\\''].concat(unwise);\n// Characters that are never ever allowed in a hostname.\n// Note that any invalid chars are also handled, but these\n// are the ones that are *expected* to be seen, so we fast-path\n// them.\nconst nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape);\nconst hostEndingChars = ['/', '?', '#'];\nconst hostnameMaxLen = 255;\nconst hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/;\nconst hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/;\n// protocols that can allow \"unsafe\" and \"unwise\" chars.\n// protocols that never have a hostname.\nconst hostlessProtocol = {\n  javascript: true,\n  'javascript:': true\n};\n// protocols that always contain a // bit.\nconst slashedProtocol = {\n  http: true,\n  https: true,\n  ftp: true,\n  gopher: true,\n  file: true,\n  'http:': true,\n  'https:': true,\n  'ftp:': true,\n  'gopher:': true,\n  'file:': true\n};\n\nfunction urlParse (url, slashesDenoteHost) {\n  if (url && url instanceof Url) return url\n\n  const u = new Url();\n  u.parse(url, slashesDenoteHost);\n  return u\n}\n\nUrl.prototype.parse = function (url, slashesDenoteHost) {\n  let lowerProto, hec, slashes;\n  let rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    const simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n      }\n      return this\n    }\n  }\n\n  let proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    lowerProto = proto.toLowerCase();\n    this.protocol = proto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  /* eslint-disable-next-line no-useless-escape */\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    let hostEnd = -1;\n    for (let i = 0; i < hostEndingChars.length; i++) {\n      hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd)) {\n        hostEnd = hec;\n      }\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    let auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = auth;\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (let i = 0; i < nonHostChars.length; i++) {\n      hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd)) {\n        hostEnd = hec;\n      }\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1) {\n      hostEnd = rest.length;\n    }\n\n    if (rest[hostEnd - 1] === ':') { hostEnd--; }\n    const host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost(host);\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    const ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      const hostparts = this.hostname.split(/\\./);\n      for (let i = 0, l = hostparts.length; i < l; i++) {\n        const part = hostparts[i];\n        if (!part) { continue }\n        if (!part.match(hostnamePartPattern)) {\n          let newpart = '';\n          for (let j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            const validParts = hostparts.slice(0, i);\n            const notHost = hostparts.slice(i + 1);\n            const bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    }\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n    }\n  }\n\n  // chop off from the tail first.\n  const hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  const qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    rest = rest.slice(0, qm);\n  }\n  if (rest) { this.pathname = rest; }\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '';\n  }\n\n  return this\n};\n\nUrl.prototype.parseHost = function (host) {\n  let port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) { this.hostname = host; }\n};\n\nexports.decode = decode;\nexports.encode = encode;\nexports.format = format;\nexports.parse = urlParse;\n", "'use strict';\n\nvar regex$5 = /[\\0-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\n\nvar regex$4 = /[\\0-\\x1F\\x7F-\\x9F]/;\n\nvar regex$3 = /[\\xAD\\u0600-\\u0605\\u061C\\u06DD\\u070F\\u0890\\u0891\\u08E2\\u180E\\u200B-\\u200F\\u202A-\\u202E\\u2060-\\u2064\\u2066-\\u206F\\uFEFF\\uFFF9-\\uFFFB]|\\uD804[\\uDCBD\\uDCCD]|\\uD80D[\\uDC30-\\uDC3F]|\\uD82F[\\uDCA0-\\uDCA3]|\\uD834[\\uDD73-\\uDD7A]|\\uDB40[\\uDC01\\uDC20-\\uDC7F]/;\n\nvar regex$2 = /[!-#%-\\*,-\\/:;\\?@\\[-\\]_\\{\\}\\xA1\\xA7\\xAB\\xB6\\xB7\\xBB\\xBF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061D-\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u09FD\\u0A76\\u0AF0\\u0C77\\u0C84\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1B7D\\u1B7E\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E4F\\u2E52-\\u2E5D\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]|\\uD800[\\uDD00-\\uDD02\\uDF9F\\uDFD0]|\\uD801\\uDD6F|\\uD802[\\uDC57\\uDD1F\\uDD3F\\uDE50-\\uDE58\\uDE7F\\uDEF0-\\uDEF6\\uDF39-\\uDF3F\\uDF99-\\uDF9C]|\\uD803[\\uDEAD\\uDF55-\\uDF59\\uDF86-\\uDF89]|\\uD804[\\uDC47-\\uDC4D\\uDCBB\\uDCBC\\uDCBE-\\uDCC1\\uDD40-\\uDD43\\uDD74\\uDD75\\uDDC5-\\uDDC8\\uDDCD\\uDDDB\\uDDDD-\\uDDDF\\uDE38-\\uDE3D\\uDEA9]|\\uD805[\\uDC4B-\\uDC4F\\uDC5A\\uDC5B\\uDC5D\\uDCC6\\uDDC1-\\uDDD7\\uDE41-\\uDE43\\uDE60-\\uDE6C\\uDEB9\\uDF3C-\\uDF3E]|\\uD806[\\uDC3B\\uDD44-\\uDD46\\uDDE2\\uDE3F-\\uDE46\\uDE9A-\\uDE9C\\uDE9E-\\uDEA2\\uDF00-\\uDF09]|\\uD807[\\uDC41-\\uDC45\\uDC70\\uDC71\\uDEF7\\uDEF8\\uDF43-\\uDF4F\\uDFFF]|\\uD809[\\uDC70-\\uDC74]|\\uD80B[\\uDFF1\\uDFF2]|\\uD81A[\\uDE6E\\uDE6F\\uDEF5\\uDF37-\\uDF3B\\uDF44]|\\uD81B[\\uDE97-\\uDE9A\\uDFE2]|\\uD82F\\uDC9F|\\uD836[\\uDE87-\\uDE8B]|\\uD83A[\\uDD5E\\uDD5F]/;\n\nvar regex$1 = /[\\$\\+<->\\^`\\|~\\xA2-\\xA6\\xA8\\xA9\\xAC\\xAE-\\xB1\\xB4\\xB8\\xD7\\xF7\\u02C2-\\u02C5\\u02D2-\\u02DF\\u02E5-\\u02EB\\u02ED\\u02EF-\\u02FF\\u0375\\u0384\\u0385\\u03F6\\u0482\\u058D-\\u058F\\u0606-\\u0608\\u060B\\u060E\\u060F\\u06DE\\u06E9\\u06FD\\u06FE\\u07F6\\u07FE\\u07FF\\u0888\\u09F2\\u09F3\\u09FA\\u09FB\\u0AF1\\u0B70\\u0BF3-\\u0BFA\\u0C7F\\u0D4F\\u0D79\\u0E3F\\u0F01-\\u0F03\\u0F13\\u0F15-\\u0F17\\u0F1A-\\u0F1F\\u0F34\\u0F36\\u0F38\\u0FBE-\\u0FC5\\u0FC7-\\u0FCC\\u0FCE\\u0FCF\\u0FD5-\\u0FD8\\u109E\\u109F\\u1390-\\u1399\\u166D\\u17DB\\u1940\\u19DE-\\u19FF\\u1B61-\\u1B6A\\u1B74-\\u1B7C\\u1FBD\\u1FBF-\\u1FC1\\u1FCD-\\u1FCF\\u1FDD-\\u1FDF\\u1FED-\\u1FEF\\u1FFD\\u1FFE\\u2044\\u2052\\u207A-\\u207C\\u208A-\\u208C\\u20A0-\\u20C0\\u2100\\u2101\\u2103-\\u2106\\u2108\\u2109\\u2114\\u2116-\\u2118\\u211E-\\u2123\\u2125\\u2127\\u2129\\u212E\\u213A\\u213B\\u2140-\\u2144\\u214A-\\u214D\\u214F\\u218A\\u218B\\u2190-\\u2307\\u230C-\\u2328\\u232B-\\u2426\\u2440-\\u244A\\u249C-\\u24E9\\u2500-\\u2767\\u2794-\\u27C4\\u27C7-\\u27E5\\u27F0-\\u2982\\u2999-\\u29D7\\u29DC-\\u29FB\\u29FE-\\u2B73\\u2B76-\\u2B95\\u2B97-\\u2BFF\\u2CE5-\\u2CEA\\u2E50\\u2E51\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFF\\u3004\\u3012\\u3013\\u3020\\u3036\\u3037\\u303E\\u303F\\u309B\\u309C\\u3190\\u3191\\u3196-\\u319F\\u31C0-\\u31E3\\u31EF\\u3200-\\u321E\\u322A-\\u3247\\u3250\\u3260-\\u327F\\u328A-\\u32B0\\u32C0-\\u33FF\\u4DC0-\\u4DFF\\uA490-\\uA4C6\\uA700-\\uA716\\uA720\\uA721\\uA789\\uA78A\\uA828-\\uA82B\\uA836-\\uA839\\uAA77-\\uAA79\\uAB5B\\uAB6A\\uAB6B\\uFB29\\uFBB2-\\uFBC2\\uFD40-\\uFD4F\\uFDCF\\uFDFC-\\uFDFF\\uFE62\\uFE64-\\uFE66\\uFE69\\uFF04\\uFF0B\\uFF1C-\\uFF1E\\uFF3E\\uFF40\\uFF5C\\uFF5E\\uFFE0-\\uFFE6\\uFFE8-\\uFFEE\\uFFFC\\uFFFD]|\\uD800[\\uDD37-\\uDD3F\\uDD79-\\uDD89\\uDD8C-\\uDD8E\\uDD90-\\uDD9C\\uDDA0\\uDDD0-\\uDDFC]|\\uD802[\\uDC77\\uDC78\\uDEC8]|\\uD805\\uDF3F|\\uD807[\\uDFD5-\\uDFF1]|\\uD81A[\\uDF3C-\\uDF3F\\uDF45]|\\uD82F\\uDC9C|\\uD833[\\uDF50-\\uDFC3]|\\uD834[\\uDC00-\\uDCF5\\uDD00-\\uDD26\\uDD29-\\uDD64\\uDD6A-\\uDD6C\\uDD83\\uDD84\\uDD8C-\\uDDA9\\uDDAE-\\uDDEA\\uDE00-\\uDE41\\uDE45\\uDF00-\\uDF56]|\\uD835[\\uDEC1\\uDEDB\\uDEFB\\uDF15\\uDF35\\uDF4F\\uDF6F\\uDF89\\uDFA9\\uDFC3]|\\uD836[\\uDC00-\\uDDFF\\uDE37-\\uDE3A\\uDE6D-\\uDE74\\uDE76-\\uDE83\\uDE85\\uDE86]|\\uD838[\\uDD4F\\uDEFF]|\\uD83B[\\uDCAC\\uDCB0\\uDD2E\\uDEF0\\uDEF1]|\\uD83C[\\uDC00-\\uDC2B\\uDC30-\\uDC93\\uDCA0-\\uDCAE\\uDCB1-\\uDCBF\\uDCC1-\\uDCCF\\uDCD1-\\uDCF5\\uDD0D-\\uDDAD\\uDDE6-\\uDE02\\uDE10-\\uDE3B\\uDE40-\\uDE48\\uDE50\\uDE51\\uDE60-\\uDE65\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDED7\\uDEDC-\\uDEEC\\uDEF0-\\uDEFC\\uDF00-\\uDF76\\uDF7B-\\uDFD9\\uDFE0-\\uDFEB\\uDFF0]|\\uD83E[\\uDC00-\\uDC0B\\uDC10-\\uDC47\\uDC50-\\uDC59\\uDC60-\\uDC87\\uDC90-\\uDCAD\\uDCB0\\uDCB1\\uDD00-\\uDE53\\uDE60-\\uDE6D\\uDE70-\\uDE7C\\uDE80-\\uDE88\\uDE90-\\uDEBD\\uDEBF-\\uDEC5\\uDECE-\\uDEDB\\uDEE0-\\uDEE8\\uDEF0-\\uDEF8\\uDF00-\\uDF92\\uDF94-\\uDFCA]/;\n\nvar regex = /[ \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000]/;\n\nexports.Any = regex$5;\nexports.Cc = regex$4;\nexports.Cf = regex$3;\nexports.P = regex$2;\nexports.S = regex$1;\nexports.Z = regex;\n", null, null, null, null, null, null, null, null, "'use strict';\n\nvar uc_micro = require('uc.micro');\n\nfunction reFactory (opts) {\n  const re = {};\n  opts = opts || {};\n\n  re.src_Any = uc_micro.Any.source;\n  re.src_Cc = uc_micro.Cc.source;\n  re.src_Z = uc_micro.Z.source;\n  re.src_P = uc_micro.P.source;\n\n  // \\p{\\Z\\P\\Cc\\CF} (white spaces + control + format + punctuation)\n  re.src_ZPCc = [re.src_Z, re.src_P, re.src_Cc].join('|');\n\n  // \\p{\\Z\\Cc} (white spaces + control)\n  re.src_ZCc = [re.src_Z, re.src_Cc].join('|');\n\n  // Experimental. List of chars, completely prohibited in links\n  // because can separate it from other part of text\n  const text_separators = '[><\\uff5c]';\n\n  // All possible word characters (everything without punctuation, spaces & controls)\n  // Defined via punctuation & spaces to save space\n  // Should be something like \\p{\\L\\N\\S\\M} (\\w but without `_`)\n  re.src_pseudo_letter = '(?:(?!' + text_separators + '|' + re.src_ZPCc + ')' + re.src_Any + ')';\n  // The same as abothe but without [0-9]\n  // var src_pseudo_letter_non_d = '(?:(?![0-9]|' + src_ZPCc + ')' + src_Any + ')';\n\n  re.src_ip4 =\n\n    '(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)';\n\n  // Prohibit any of \"@/[]()\" in user/pass to avoid wrong domain fetch.\n  re.src_auth = '(?:(?:(?!' + re.src_ZCc + '|[@/\\\\[\\\\]()]).)+@)?';\n\n  re.src_port =\n\n    '(?::(?:6(?:[0-4]\\\\d{3}|5(?:[0-4]\\\\d{2}|5(?:[0-2]\\\\d|3[0-5])))|[1-5]?\\\\d{1,4}))?';\n\n  re.src_host_terminator =\n\n    '(?=$|' + text_separators + '|' + re.src_ZPCc + ')' +\n    '(?!' + (opts['---'] ? '-(?!--)|' : '-|') + '_|:\\\\d|\\\\.-|\\\\.(?!$|' + re.src_ZPCc + '))';\n\n  re.src_path =\n\n    '(?:' +\n      '[/?#]' +\n        '(?:' +\n          '(?!' + re.src_ZCc + '|' + text_separators + '|[()[\\\\]{}.,\"\\'?!\\\\-;]).|' +\n          '\\\\[(?:(?!' + re.src_ZCc + '|\\\\]).)*\\\\]|' +\n          '\\\\((?:(?!' + re.src_ZCc + '|[)]).)*\\\\)|' +\n          '\\\\{(?:(?!' + re.src_ZCc + '|[}]).)*\\\\}|' +\n          '\\\\\"(?:(?!' + re.src_ZCc + '|[\"]).)+\\\\\"|' +\n          \"\\\\'(?:(?!\" + re.src_ZCc + \"|[']).)+\\\\'|\" +\n\n          // allow `I'm_king` if no pair found\n          \"\\\\'(?=\" + re.src_pseudo_letter + '|[-])|' +\n\n          // google has many dots in \"google search\" links (#66, #81).\n          // github has ... in commit range links,\n          // Restrict to\n          // - english\n          // - percent-encoded\n          // - parts of file path\n          // - params separator\n          // until more examples found.\n          '\\\\.{2,}[a-zA-Z0-9%/&]|' +\n\n          '\\\\.(?!' + re.src_ZCc + '|[.]|$)|' +\n          (opts['---']\n            ? '\\\\-(?!--(?:[^-]|$))(?:-*)|' // `---` => long dash, terminate\n            : '\\\\-+|'\n          ) +\n          // allow `,,,` in paths\n          ',(?!' + re.src_ZCc + '|$)|' +\n\n          // allow `;` if not followed by space-like char\n          ';(?!' + re.src_ZCc + '|$)|' +\n\n          // allow `!!!` in paths, but not at the end\n          '\\\\!+(?!' + re.src_ZCc + '|[!]|$)|' +\n\n          '\\\\?(?!' + re.src_ZCc + '|[?]|$)' +\n        ')+' +\n      '|\\\\/' +\n    ')?';\n\n  // Allow anything in markdown spec, forbid quote (\") at the first position\n  // because emails enclosed in quotes are far more common\n  re.src_email_name =\n\n    '[\\\\-;:&=\\\\+\\\\$,\\\\.a-zA-Z0-9_][\\\\-;:&=\\\\+\\\\$,\\\\\"\\\\.a-zA-Z0-9_]*';\n\n  re.src_xn =\n\n    'xn--[a-z0-9\\\\-]{1,59}';\n\n  // More to read about domain names\n  // http://serverfault.com/questions/638260/\n\n  re.src_domain_root =\n\n    // Allow letters & digits (http://test1)\n    '(?:' +\n      re.src_xn +\n      '|' +\n      re.src_pseudo_letter + '{1,63}' +\n    ')';\n\n  re.src_domain =\n\n    '(?:' +\n      re.src_xn +\n      '|' +\n      '(?:' + re.src_pseudo_letter + ')' +\n      '|' +\n      '(?:' + re.src_pseudo_letter + '(?:-|' + re.src_pseudo_letter + '){0,61}' + re.src_pseudo_letter + ')' +\n    ')';\n\n  re.src_host =\n\n    '(?:' +\n    // Don't need IP check, because digits are already allowed in normal domain names\n    //   src_ip4 +\n    // '|' +\n      '(?:(?:(?:' + re.src_domain + ')\\\\.)*' + re.src_domain/* _root */ + ')' +\n    ')';\n\n  re.tpl_host_fuzzy =\n\n    '(?:' +\n      re.src_ip4 +\n    '|' +\n      '(?:(?:(?:' + re.src_domain + ')\\\\.)+(?:%TLDS%))' +\n    ')';\n\n  re.tpl_host_no_ip_fuzzy =\n\n    '(?:(?:(?:' + re.src_domain + ')\\\\.)+(?:%TLDS%))';\n\n  re.src_host_strict =\n\n    re.src_host + re.src_host_terminator;\n\n  re.tpl_host_fuzzy_strict =\n\n    re.tpl_host_fuzzy + re.src_host_terminator;\n\n  re.src_host_port_strict =\n\n    re.src_host + re.src_port + re.src_host_terminator;\n\n  re.tpl_host_port_fuzzy_strict =\n\n    re.tpl_host_fuzzy + re.src_port + re.src_host_terminator;\n\n  re.tpl_host_port_no_ip_fuzzy_strict =\n\n    re.tpl_host_no_ip_fuzzy + re.src_port + re.src_host_terminator;\n\n  //\n  // Main rules\n  //\n\n  // Rude test fuzzy links by host, for quick deny\n  re.tpl_host_fuzzy_test =\n\n    'localhost|www\\\\.|\\\\.\\\\d{1,3}\\\\.|(?:\\\\.(?:%TLDS%)(?:' + re.src_ZPCc + '|>|$))';\n\n  re.tpl_email_fuzzy =\n\n      '(^|' + text_separators + '|\"|\\\\(|' + re.src_ZCc + ')' +\n      '(' + re.src_email_name + '@' + re.tpl_host_fuzzy_strict + ')';\n\n  re.tpl_link_fuzzy =\n      // Fuzzy link can't be prepended with .:/\\- and non punctuation.\n      // but can start with > (markdown blockquote)\n      '(^|(?![.:/\\\\-_@])(?:[$+<=>^`|\\uff5c]|' + re.src_ZPCc + '))' +\n      '((?![$+<=>^`|\\uff5c])' + re.tpl_host_port_fuzzy_strict + re.src_path + ')';\n\n  re.tpl_link_no_ip_fuzzy =\n      // Fuzzy link can't be prepended with .:/\\- and non punctuation.\n      // but can start with > (markdown blockquote)\n      '(^|(?![.:/\\\\-_@])(?:[$+<=>^`|\\uff5c]|' + re.src_ZPCc + '))' +\n      '((?![$+<=>^`|\\uff5c])' + re.tpl_host_port_no_ip_fuzzy_strict + re.src_path + ')';\n\n  return re\n}\n\n//\n// Helpers\n//\n\n// Merge objects\n//\nfunction assign (obj /* from1, from2, from3, ... */) {\n  const sources = Array.prototype.slice.call(arguments, 1);\n\n  sources.forEach(function (source) {\n    if (!source) { return }\n\n    Object.keys(source).forEach(function (key) {\n      obj[key] = source[key];\n    });\n  });\n\n  return obj\n}\n\nfunction _class (obj) { return Object.prototype.toString.call(obj) }\nfunction isString (obj) { return _class(obj) === '[object String]' }\nfunction isObject (obj) { return _class(obj) === '[object Object]' }\nfunction isRegExp (obj) { return _class(obj) === '[object RegExp]' }\nfunction isFunction (obj) { return _class(obj) === '[object Function]' }\n\nfunction escapeRE (str) { return str.replace(/[.?*+^$[\\]\\\\(){}|-]/g, '\\\\$&') }\n\n//\n\nconst defaultOptions = {\n  fuzzyLink: true,\n  fuzzyEmail: true,\n  fuzzyIP: false\n};\n\nfunction isOptionsObj (obj) {\n  return Object.keys(obj || {}).reduce(function (acc, k) {\n    /* eslint-disable-next-line no-prototype-builtins */\n    return acc || defaultOptions.hasOwnProperty(k)\n  }, false)\n}\n\nconst defaultSchemas = {\n  'http:': {\n    validate: function (text, pos, self) {\n      const tail = text.slice(pos);\n\n      if (!self.re.http) {\n        // compile lazily, because \"host\"-containing variables can change on tlds update.\n        self.re.http = new RegExp(\n          '^\\\\/\\\\/' + self.re.src_auth + self.re.src_host_port_strict + self.re.src_path, 'i'\n        );\n      }\n      if (self.re.http.test(tail)) {\n        return tail.match(self.re.http)[0].length\n      }\n      return 0\n    }\n  },\n  'https:': 'http:',\n  'ftp:': 'http:',\n  '//': {\n    validate: function (text, pos, self) {\n      const tail = text.slice(pos);\n\n      if (!self.re.no_http) {\n      // compile lazily, because \"host\"-containing variables can change on tlds update.\n        self.re.no_http = new RegExp(\n          '^' +\n          self.re.src_auth +\n          // Don't allow single-level domains, because of false positives like '//test'\n          // with code comments\n          '(?:localhost|(?:(?:' + self.re.src_domain + ')\\\\.)+' + self.re.src_domain_root + ')' +\n          self.re.src_port +\n          self.re.src_host_terminator +\n          self.re.src_path,\n\n          'i'\n        );\n      }\n\n      if (self.re.no_http.test(tail)) {\n        // should not be `://` & `///`, that protects from errors in protocol name\n        if (pos >= 3 && text[pos - 3] === ':') { return 0 }\n        if (pos >= 3 && text[pos - 3] === '/') { return 0 }\n        return tail.match(self.re.no_http)[0].length\n      }\n      return 0\n    }\n  },\n  'mailto:': {\n    validate: function (text, pos, self) {\n      const tail = text.slice(pos);\n\n      if (!self.re.mailto) {\n        self.re.mailto = new RegExp(\n          '^' + self.re.src_email_name + '@' + self.re.src_host_strict, 'i'\n        );\n      }\n      if (self.re.mailto.test(tail)) {\n        return tail.match(self.re.mailto)[0].length\n      }\n      return 0\n    }\n  }\n};\n\n// RE pattern for 2-character tlds (autogenerated by ./support/tlds_2char_gen.js)\n/* eslint-disable-next-line max-len */\nconst tlds_2ch_src_re = 'a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]';\n\n// DON'T try to make PRs with changes. Extend TLDs with LinkifyIt.tlds() instead\nconst tlds_default = 'biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444'.split('|');\n\nfunction resetScanCache (self) {\n  self.__index__ = -1;\n  self.__text_cache__ = '';\n}\n\nfunction createValidator (re) {\n  return function (text, pos) {\n    const tail = text.slice(pos);\n\n    if (re.test(tail)) {\n      return tail.match(re)[0].length\n    }\n    return 0\n  }\n}\n\nfunction createNormalizer () {\n  return function (match, self) {\n    self.normalize(match);\n  }\n}\n\n// Schemas compiler. Build regexps.\n//\nfunction compile (self) {\n  // Load & clone RE patterns.\n  const re = self.re = reFactory(self.__opts__);\n\n  // Define dynamic patterns\n  const tlds = self.__tlds__.slice();\n\n  self.onCompile();\n\n  if (!self.__tlds_replaced__) {\n    tlds.push(tlds_2ch_src_re);\n  }\n  tlds.push(re.src_xn);\n\n  re.src_tlds = tlds.join('|');\n\n  function untpl (tpl) { return tpl.replace('%TLDS%', re.src_tlds) }\n\n  re.email_fuzzy = RegExp(untpl(re.tpl_email_fuzzy), 'i');\n  re.link_fuzzy = RegExp(untpl(re.tpl_link_fuzzy), 'i');\n  re.link_no_ip_fuzzy = RegExp(untpl(re.tpl_link_no_ip_fuzzy), 'i');\n  re.host_fuzzy_test = RegExp(untpl(re.tpl_host_fuzzy_test), 'i');\n\n  //\n  // Compile each schema\n  //\n\n  const aliases = [];\n\n  self.__compiled__ = {}; // Reset compiled data\n\n  function schemaError (name, val) {\n    throw new Error('(LinkifyIt) Invalid schema \"' + name + '\": ' + val)\n  }\n\n  Object.keys(self.__schemas__).forEach(function (name) {\n    const val = self.__schemas__[name];\n\n    // skip disabled methods\n    if (val === null) { return }\n\n    const compiled = { validate: null, link: null };\n\n    self.__compiled__[name] = compiled;\n\n    if (isObject(val)) {\n      if (isRegExp(val.validate)) {\n        compiled.validate = createValidator(val.validate);\n      } else if (isFunction(val.validate)) {\n        compiled.validate = val.validate;\n      } else {\n        schemaError(name, val);\n      }\n\n      if (isFunction(val.normalize)) {\n        compiled.normalize = val.normalize;\n      } else if (!val.normalize) {\n        compiled.normalize = createNormalizer();\n      } else {\n        schemaError(name, val);\n      }\n\n      return\n    }\n\n    if (isString(val)) {\n      aliases.push(name);\n      return\n    }\n\n    schemaError(name, val);\n  });\n\n  //\n  // Compile postponed aliases\n  //\n\n  aliases.forEach(function (alias) {\n    if (!self.__compiled__[self.__schemas__[alias]]) {\n      // Silently fail on missed schemas to avoid errons on disable.\n      // schemaError(alias, self.__schemas__[alias]);\n      return\n    }\n\n    self.__compiled__[alias].validate =\n      self.__compiled__[self.__schemas__[alias]].validate;\n    self.__compiled__[alias].normalize =\n      self.__compiled__[self.__schemas__[alias]].normalize;\n  });\n\n  //\n  // Fake record for guessed links\n  //\n  self.__compiled__[''] = { validate: null, normalize: createNormalizer() };\n\n  //\n  // Build schema condition\n  //\n  const slist = Object.keys(self.__compiled__)\n    .filter(function (name) {\n      // Filter disabled & fake schemas\n      return name.length > 0 && self.__compiled__[name]\n    })\n    .map(escapeRE)\n    .join('|');\n  // (?!_) cause 1.5x slowdown\n  self.re.schema_test = RegExp('(^|(?!_)(?:[><\\uff5c]|' + re.src_ZPCc + '))(' + slist + ')', 'i');\n  self.re.schema_search = RegExp('(^|(?!_)(?:[><\\uff5c]|' + re.src_ZPCc + '))(' + slist + ')', 'ig');\n  self.re.schema_at_start = RegExp('^' + self.re.schema_search.source, 'i');\n\n  self.re.pretest = RegExp(\n    '(' + self.re.schema_test.source + ')|(' + self.re.host_fuzzy_test.source + ')|@',\n    'i'\n  );\n\n  //\n  // Cleanup\n  //\n\n  resetScanCache(self);\n}\n\n/**\n * class Match\n *\n * Match result. Single element of array, returned by [[LinkifyIt#match]]\n **/\nfunction Match (self, shift) {\n  const start = self.__index__;\n  const end = self.__last_index__;\n  const text = self.__text_cache__.slice(start, end);\n\n  /**\n   * Match#schema -> String\n   *\n   * Prefix (protocol) for matched string.\n   **/\n  this.schema = self.__schema__.toLowerCase();\n  /**\n   * Match#index -> Number\n   *\n   * First position of matched string.\n   **/\n  this.index = start + shift;\n  /**\n   * Match#lastIndex -> Number\n   *\n   * Next position after matched string.\n   **/\n  this.lastIndex = end + shift;\n  /**\n   * Match#raw -> String\n   *\n   * Matched string.\n   **/\n  this.raw = text;\n  /**\n   * Match#text -> String\n   *\n   * Notmalized text of matched string.\n   **/\n  this.text = text;\n  /**\n   * Match#url -> String\n   *\n   * Normalized url of matched string.\n   **/\n  this.url = text;\n}\n\nfunction createMatch (self, shift) {\n  const match = new Match(self, shift);\n\n  self.__compiled__[match.schema].normalize(match, self);\n\n  return match\n}\n\n/**\n * class LinkifyIt\n **/\n\n/**\n * new LinkifyIt(schemas, options)\n * - schemas (Object): Optional. Additional schemas to validate (prefix/validator)\n * - options (Object): { fuzzyLink|fuzzyEmail|fuzzyIP: true|false }\n *\n * Creates new linkifier instance with optional additional schemas.\n * Can be called without `new` keyword for convenience.\n *\n * By default understands:\n *\n * - `http(s)://...` , `ftp://...`, `mailto:...` & `//...` links\n * - \"fuzzy\" links and emails (example.com, foo@bar.com).\n *\n * `schemas` is an object, where each key/value describes protocol/rule:\n *\n * - __key__ - link prefix (usually, protocol name with `:` at the end, `skype:`\n *   for example). `linkify-it` makes shure that prefix is not preceeded with\n *   alphanumeric char and symbols. Only whitespaces and punctuation allowed.\n * - __value__ - rule to check tail after link prefix\n *   - _String_ - just alias to existing rule\n *   - _Object_\n *     - _validate_ - validator function (should return matched length on success),\n *       or `RegExp`.\n *     - _normalize_ - optional function to normalize text & url of matched result\n *       (for example, for @twitter mentions).\n *\n * `options`:\n *\n * - __fuzzyLink__ - recognige URL-s without `http(s):` prefix. Default `true`.\n * - __fuzzyIP__ - allow IPs in fuzzy links above. Can conflict with some texts\n *   like version numbers. Default `false`.\n * - __fuzzyEmail__ - recognize emails without `mailto:` prefix.\n *\n **/\nfunction LinkifyIt (schemas, options) {\n  if (!(this instanceof LinkifyIt)) {\n    return new LinkifyIt(schemas, options)\n  }\n\n  if (!options) {\n    if (isOptionsObj(schemas)) {\n      options = schemas;\n      schemas = {};\n    }\n  }\n\n  this.__opts__ = assign({}, defaultOptions, options);\n\n  // Cache last tested result. Used to skip repeating steps on next `match` call.\n  this.__index__ = -1;\n  this.__last_index__ = -1; // Next scan position\n  this.__schema__ = '';\n  this.__text_cache__ = '';\n\n  this.__schemas__ = assign({}, defaultSchemas, schemas);\n  this.__compiled__ = {};\n\n  this.__tlds__ = tlds_default;\n  this.__tlds_replaced__ = false;\n\n  this.re = {};\n\n  compile(this);\n}\n\n/** chainable\n * LinkifyIt#add(schema, definition)\n * - schema (String): rule name (fixed pattern prefix)\n * - definition (String|RegExp|Object): schema definition\n *\n * Add new rule definition. See constructor description for details.\n **/\nLinkifyIt.prototype.add = function add (schema, definition) {\n  this.__schemas__[schema] = definition;\n  compile(this);\n  return this\n};\n\n/** chainable\n * LinkifyIt#set(options)\n * - options (Object): { fuzzyLink|fuzzyEmail|fuzzyIP: true|false }\n *\n * Set recognition options for links without schema.\n **/\nLinkifyIt.prototype.set = function set (options) {\n  this.__opts__ = assign(this.__opts__, options);\n  return this\n};\n\n/**\n * LinkifyIt#test(text) -> Boolean\n *\n * Searches linkifiable pattern and returns `true` on success or `false` on fail.\n **/\nLinkifyIt.prototype.test = function test (text) {\n  // Reset scan cache\n  this.__text_cache__ = text;\n  this.__index__ = -1;\n\n  if (!text.length) { return false }\n\n  let m, ml, me, len, shift, next, re, tld_pos, at_pos;\n\n  // try to scan for link with schema - that's the most simple rule\n  if (this.re.schema_test.test(text)) {\n    re = this.re.schema_search;\n    re.lastIndex = 0;\n    while ((m = re.exec(text)) !== null) {\n      len = this.testSchemaAt(text, m[2], re.lastIndex);\n      if (len) {\n        this.__schema__ = m[2];\n        this.__index__ = m.index + m[1].length;\n        this.__last_index__ = m.index + m[0].length + len;\n        break\n      }\n    }\n  }\n\n  if (this.__opts__.fuzzyLink && this.__compiled__['http:']) {\n    // guess schemaless links\n    tld_pos = text.search(this.re.host_fuzzy_test);\n    if (tld_pos >= 0) {\n      // if tld is located after found link - no need to check fuzzy pattern\n      if (this.__index__ < 0 || tld_pos < this.__index__) {\n        if ((ml = text.match(this.__opts__.fuzzyIP ? this.re.link_fuzzy : this.re.link_no_ip_fuzzy)) !== null) {\n          shift = ml.index + ml[1].length;\n\n          if (this.__index__ < 0 || shift < this.__index__) {\n            this.__schema__ = '';\n            this.__index__ = shift;\n            this.__last_index__ = ml.index + ml[0].length;\n          }\n        }\n      }\n    }\n  }\n\n  if (this.__opts__.fuzzyEmail && this.__compiled__['mailto:']) {\n    // guess schemaless emails\n    at_pos = text.indexOf('@');\n    if (at_pos >= 0) {\n      // We can't skip this check, because this cases are possible:\n      // 192.168.1.1@gmail.com, my.in@example.com\n      if ((me = text.match(this.re.email_fuzzy)) !== null) {\n        shift = me.index + me[1].length;\n        next = me.index + me[0].length;\n\n        if (this.__index__ < 0 || shift < this.__index__ ||\n            (shift === this.__index__ && next > this.__last_index__)) {\n          this.__schema__ = 'mailto:';\n          this.__index__ = shift;\n          this.__last_index__ = next;\n        }\n      }\n    }\n  }\n\n  return this.__index__ >= 0\n};\n\n/**\n * LinkifyIt#pretest(text) -> Boolean\n *\n * Very quick check, that can give false positives. Returns true if link MAY BE\n * can exists. Can be used for speed optimization, when you need to check that\n * link NOT exists.\n **/\nLinkifyIt.prototype.pretest = function pretest (text) {\n  return this.re.pretest.test(text)\n};\n\n/**\n * LinkifyIt#testSchemaAt(text, name, position) -> Number\n * - text (String): text to scan\n * - name (String): rule (schema) name\n * - position (Number): text offset to check from\n *\n * Similar to [[LinkifyIt#test]] but checks only specific protocol tail exactly\n * at given position. Returns length of found pattern (0 on fail).\n **/\nLinkifyIt.prototype.testSchemaAt = function testSchemaAt (text, schema, pos) {\n  // If not supported schema check requested - terminate\n  if (!this.__compiled__[schema.toLowerCase()]) {\n    return 0\n  }\n  return this.__compiled__[schema.toLowerCase()].validate(text, pos, this)\n};\n\n/**\n * LinkifyIt#match(text) -> Array|null\n *\n * Returns array of found link descriptions or `null` on fail. We strongly\n * recommend to use [[LinkifyIt#test]] first, for best speed.\n *\n * ##### Result match description\n *\n * - __schema__ - link schema, can be empty for fuzzy links, or `//` for\n *   protocol-neutral  links.\n * - __index__ - offset of matched text\n * - __lastIndex__ - index of next char after mathch end\n * - __raw__ - matched text\n * - __text__ - normalized text\n * - __url__ - link, generated from matched text\n **/\nLinkifyIt.prototype.match = function match (text) {\n  const result = [];\n  let shift = 0;\n\n  // Try to take previous element from cache, if .test() called before\n  if (this.__index__ >= 0 && this.__text_cache__ === text) {\n    result.push(createMatch(this, shift));\n    shift = this.__last_index__;\n  }\n\n  // Cut head if cache was used\n  let tail = shift ? text.slice(shift) : text;\n\n  // Scan string until end reached\n  while (this.test(tail)) {\n    result.push(createMatch(this, shift));\n\n    tail = tail.slice(this.__last_index__);\n    shift += this.__last_index__;\n  }\n\n  if (result.length) {\n    return result\n  }\n\n  return null\n};\n\n/**\n * LinkifyIt#matchAtStart(text) -> Match|null\n *\n * Returns fully-formed (not fuzzy) link if it starts at the beginning\n * of the string, and null otherwise.\n **/\nLinkifyIt.prototype.matchAtStart = function matchAtStart (text) {\n  // Reset scan cache\n  this.__text_cache__ = text;\n  this.__index__ = -1;\n\n  if (!text.length) return null\n\n  const m = this.re.schema_at_start.exec(text);\n  if (!m) return null\n\n  const len = this.testSchemaAt(text, m[2], m[0].length);\n  if (!len) return null\n\n  this.__schema__ = m[2];\n  this.__index__ = m.index + m[1].length;\n  this.__last_index__ = m.index + m[0].length + len;\n\n  return createMatch(this, 0)\n};\n\n/** chainable\n * LinkifyIt#tlds(list [, keepOld]) -> this\n * - list (Array): list of tlds\n * - keepOld (Boolean): merge with current list if `true` (`false` by default)\n *\n * Load (or merge) new tlds list. Those are user for fuzzy links (without prefix)\n * to avoid false positives. By default this algorythm used:\n *\n * - hostname with any 2-letter root zones are ok.\n * - biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444\n *   are ok.\n * - encoded (`xn--...`) root zones are ok.\n *\n * If list is replaced, then exact match for 2-chars root zones will be checked.\n **/\nLinkifyIt.prototype.tlds = function tlds (list, keepOld) {\n  list = Array.isArray(list) ? list : [list];\n\n  if (!keepOld) {\n    this.__tlds__ = list.slice();\n    this.__tlds_replaced__ = true;\n    compile(this);\n    return this\n  }\n\n  this.__tlds__ = this.__tlds__.concat(list)\n    .sort()\n    .filter(function (el, idx, arr) {\n      return el !== arr[idx - 1]\n    })\n    .reverse();\n\n  compile(this);\n  return this\n};\n\n/**\n * LinkifyIt#normalize(match)\n *\n * Default normalizer (if schema does not define it's own).\n **/\nLinkifyIt.prototype.normalize = function normalize (match) {\n  // Do minimal possible changes by default. Need to collect feedback prior\n  // to move forward https://github.com/markdown-it/linkify-it/issues/1\n\n  if (!match.schema) { match.url = 'http://' + match.url; }\n\n  if (match.schema === 'mailto:' && !/^mailto:/i.test(match.url)) {\n    match.url = 'mailto:' + match.url;\n  }\n};\n\n/**\n * LinkifyIt#onCompile()\n *\n * Override to modify basic RegExp-s.\n **/\nLinkifyIt.prototype.onCompile = function onCompile () {\n};\n\nmodule.exports = LinkifyIt;\n", "'use strict';\n\n/** Highest positive signed 32-bit float value */\nconst maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1\n\n/** Bootstring parameters */\nconst base = 36;\nconst tMin = 1;\nconst tMax = 26;\nconst skew = 38;\nconst damp = 700;\nconst initialBias = 72;\nconst initialN = 128; // 0x80\nconst delimiter = '-'; // '\\x2D'\n\n/** Regular expressions */\nconst regexPunycode = /^xn--/;\nconst regexNonASCII = /[^\\0-\\x7F]/; // Note: U+007F DEL is excluded too.\nconst regexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g; // RFC 3490 separators\n\n/** Error messages */\nconst errors = {\n\t'overflow': 'Overflow: input needs wider integers to process',\n\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t'invalid-input': 'Invalid input'\n};\n\n/** Convenience shortcuts */\nconst baseMinusTMin = base - tMin;\nconst floor = Math.floor;\nconst stringFromCharCode = String.fromCharCode;\n\n/*--------------------------------------------------------------------------*/\n\n/**\n * A generic error utility function.\n * @private\n * @param {String} type The error type.\n * @returns {Error} Throws a `RangeError` with the applicable error message.\n */\nfunction error(type) {\n\tthrow new RangeError(errors[type]);\n}\n\n/**\n * A generic `Array#map` utility function.\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} callback The function that gets called for every array\n * item.\n * @returns {Array} A new array of values returned by the callback function.\n */\nfunction map(array, callback) {\n\tconst result = [];\n\tlet length = array.length;\n\twhile (length--) {\n\t\tresult[length] = callback(array[length]);\n\t}\n\treturn result;\n}\n\n/**\n * A simple `Array#map`-like wrapper to work with domain name strings or email\n * addresses.\n * @private\n * @param {String} domain The domain name or email address.\n * @param {Function} callback The function that gets called for every\n * character.\n * @returns {String} A new string of characters returned by the callback\n * function.\n */\nfunction mapDomain(domain, callback) {\n\tconst parts = domain.split('@');\n\tlet result = '';\n\tif (parts.length > 1) {\n\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t// the local part (i.e. everything up to `@`) intact.\n\t\tresult = parts[0] + '@';\n\t\tdomain = parts[1];\n\t}\n\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\tdomain = domain.replace(regexSeparators, '\\x2E');\n\tconst labels = domain.split('.');\n\tconst encoded = map(labels, callback).join('.');\n\treturn result + encoded;\n}\n\n/**\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n * @see `punycode.ucs2.encode`\n * @see <https://mathiasbynens.be/notes/javascript-encoding>\n * @memberOf punycode.ucs2\n * @name decode\n * @param {String} string The Unicode input string (UCS-2).\n * @returns {Array} The new array of code points.\n */\nfunction ucs2decode(string) {\n\tconst output = [];\n\tlet counter = 0;\n\tconst length = string.length;\n\twhile (counter < length) {\n\t\tconst value = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// It's a high surrogate, and there is a next character.\n\t\t\tconst extra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // Low surrogate.\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// It's an unmatched surrogate; only append this code unit, in case the\n\t\t\t\t// next code unit is the high surrogate of a surrogate pair.\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n/**\n * Creates a string based on an array of numeric code points.\n * @see `punycode.ucs2.decode`\n * @memberOf punycode.ucs2\n * @name encode\n * @param {Array} codePoints The array of numeric code points.\n * @returns {String} The new Unicode string (UCS-2).\n */\nconst ucs2encode = codePoints => String.fromCodePoint(...codePoints);\n\n/**\n * Converts a basic code point into a digit/integer.\n * @see `digitToBasic()`\n * @private\n * @param {Number} codePoint The basic numeric code point value.\n * @returns {Number} The numeric value of a basic code point (for use in\n * representing integers) in the range `0` to `base - 1`, or `base` if\n * the code point does not represent a value.\n */\nconst basicToDigit = function(codePoint) {\n\tif (codePoint >= 0x30 && codePoint < 0x3A) {\n\t\treturn 26 + (codePoint - 0x30);\n\t}\n\tif (codePoint >= 0x41 && codePoint < 0x5B) {\n\t\treturn codePoint - 0x41;\n\t}\n\tif (codePoint >= 0x61 && codePoint < 0x7B) {\n\t\treturn codePoint - 0x61;\n\t}\n\treturn base;\n};\n\n/**\n * Converts a digit/integer into a basic code point.\n * @see `basicToDigit()`\n * @private\n * @param {Number} digit The numeric value of a basic code point.\n * @returns {Number} The basic code point whose value (when used for\n * representing integers) is `digit`, which needs to be in the range\n * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n * used; else, the lowercase form is used. The behavior is undefined\n * if `flag` is non-zero and `digit` has no uppercase form.\n */\nconst digitToBasic = function(digit, flag) {\n\t//  0..25 map to ASCII a..z or A..Z\n\t// 26..35 map to ASCII 0..9\n\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n};\n\n/**\n * Bias adaptation function as per section 3.4 of RFC 3492.\n * https://tools.ietf.org/html/rfc3492#section-3.4\n * @private\n */\nconst adapt = function(delta, numPoints, firstTime) {\n\tlet k = 0;\n\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\tdelta += floor(delta / numPoints);\n\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\tdelta = floor(delta / baseMinusTMin);\n\t}\n\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n};\n\n/**\n * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n * symbols.\n * @memberOf punycode\n * @param {String} input The Punycode string of ASCII-only symbols.\n * @returns {String} The resulting string of Unicode symbols.\n */\nconst decode = function(input) {\n\t// Don't use UCS-2.\n\tconst output = [];\n\tconst inputLength = input.length;\n\tlet i = 0;\n\tlet n = initialN;\n\tlet bias = initialBias;\n\n\t// Handle the basic code points: let `basic` be the number of input code\n\t// points before the last delimiter, or `0` if there is none, then copy\n\t// the first basic code points to the output.\n\n\tlet basic = input.lastIndexOf(delimiter);\n\tif (basic < 0) {\n\t\tbasic = 0;\n\t}\n\n\tfor (let j = 0; j < basic; ++j) {\n\t\t// if it's not a basic code point\n\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\terror('not-basic');\n\t\t}\n\t\toutput.push(input.charCodeAt(j));\n\t}\n\n\t// Main decoding loop: start just after the last delimiter if any basic code\n\t// points were copied; start at the beginning otherwise.\n\n\tfor (let index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t// `index` is the index of the next character to be consumed.\n\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t// which gets added to `i`. The overflow checking is easier\n\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t// value at the end to obtain `delta`.\n\t\tconst oldi = i;\n\t\tfor (let w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\tif (index >= inputLength) {\n\t\t\t\terror('invalid-input');\n\t\t\t}\n\n\t\t\tconst digit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\tif (digit >= base) {\n\t\t\t\terror('invalid-input');\n\t\t\t}\n\t\t\tif (digit > floor((maxInt - i) / w)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\ti += digit * w;\n\t\t\tconst t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\tif (digit < t) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst baseMinusT = base - t;\n\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tw *= baseMinusT;\n\n\t\t}\n\n\t\tconst out = output.length + 1;\n\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t// incrementing `n` each time, so we'll fix that now:\n\t\tif (floor(i / out) > maxInt - n) {\n\t\t\terror('overflow');\n\t\t}\n\n\t\tn += floor(i / out);\n\t\ti %= out;\n\n\t\t// Insert `n` at position `i` of the output.\n\t\toutput.splice(i++, 0, n);\n\n\t}\n\n\treturn String.fromCodePoint(...output);\n};\n\n/**\n * Converts a string of Unicode symbols (e.g. a domain name label) to a\n * Punycode string of ASCII-only symbols.\n * @memberOf punycode\n * @param {String} input The string of Unicode symbols.\n * @returns {String} The resulting Punycode string of ASCII-only symbols.\n */\nconst encode = function(input) {\n\tconst output = [];\n\n\t// Convert the input in UCS-2 to an array of Unicode code points.\n\tinput = ucs2decode(input);\n\n\t// Cache the length.\n\tconst inputLength = input.length;\n\n\t// Initialize the state.\n\tlet n = initialN;\n\tlet delta = 0;\n\tlet bias = initialBias;\n\n\t// Handle the basic code points.\n\tfor (const currentValue of input) {\n\t\tif (currentValue < 0x80) {\n\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t}\n\t}\n\n\tconst basicLength = output.length;\n\tlet handledCPCount = basicLength;\n\n\t// `handledCPCount` is the number of code points that have been handled;\n\t// `basicLength` is the number of basic code points.\n\n\t// Finish the basic string with a delimiter unless it's empty.\n\tif (basicLength) {\n\t\toutput.push(delimiter);\n\t}\n\n\t// Main encoding loop:\n\twhile (handledCPCount < inputLength) {\n\n\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t// larger one:\n\t\tlet m = maxInt;\n\t\tfor (const currentValue of input) {\n\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\tm = currentValue;\n\t\t\t}\n\t\t}\n\n\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t// but guard against overflow.\n\t\tconst handledCPCountPlusOne = handledCPCount + 1;\n\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\terror('overflow');\n\t\t}\n\n\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\tn = m;\n\n\t\tfor (const currentValue of input) {\n\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\t\t\tif (currentValue === n) {\n\t\t\t\t// Represent delta as a generalized variable-length integer.\n\t\t\t\tlet q = delta;\n\t\t\t\tfor (let k = base; /* no condition */; k += base) {\n\t\t\t\t\tconst t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tconst qMinusT = q - t;\n\t\t\t\t\tconst baseMinusT = base - t;\n\t\t\t\t\toutput.push(\n\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t);\n\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t}\n\n\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount === basicLength);\n\t\t\t\tdelta = 0;\n\t\t\t\t++handledCPCount;\n\t\t\t}\n\t\t}\n\n\t\t++delta;\n\t\t++n;\n\n\t}\n\treturn output.join('');\n};\n\n/**\n * Converts a Punycode string representing a domain name or an email address\n * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n * it doesn't matter if you call it on a string that has already been\n * converted to Unicode.\n * @memberOf punycode\n * @param {String} input The Punycoded domain name or email address to\n * convert to Unicode.\n * @returns {String} The Unicode representation of the given Punycode\n * string.\n */\nconst toUnicode = function(input) {\n\treturn mapDomain(input, function(string) {\n\t\treturn regexPunycode.test(string)\n\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t: string;\n\t});\n};\n\n/**\n * Converts a Unicode string representing a domain name or an email address to\n * Punycode. Only the non-ASCII parts of the domain name will be converted,\n * i.e. it doesn't matter if you call it with a domain that's already in\n * ASCII.\n * @memberOf punycode\n * @param {String} input The domain name or email address to convert, as a\n * Unicode string.\n * @returns {String} The Punycode representation of the given domain name or\n * email address.\n */\nconst toASCII = function(input) {\n\treturn mapDomain(input, function(string) {\n\t\treturn regexNonASCII.test(string)\n\t\t\t? 'xn--' + encode(string)\n\t\t\t: string;\n\t});\n};\n\n/*--------------------------------------------------------------------------*/\n\n/** Define the public API */\nconst punycode = {\n\t/**\n\t * A string representing the current Punycode.js version number.\n\t * @memberOf punycode\n\t * @type String\n\t */\n\t'version': '2.3.1',\n\t/**\n\t * An object of methods to convert from JavaScript's internal character\n\t * representation (UCS-2) to Unicode code points, and back.\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode\n\t * @type Object\n\t */\n\t'ucs2': {\n\t\t'decode': ucs2decode,\n\t\t'encode': ucs2encode\n\t},\n\t'decode': decode,\n\t'encode': encode,\n\t'toASCII': toASCII,\n\t'toUnicode': toUnicode\n};\n\nmodule.exports = punycode;\n", "'use strict';\n\nvar mdurl = require('mdurl');\nvar ucmicro = require('uc.micro');\nvar entities = require('entities');\nvar LinkifyIt = require('linkify-it');\nvar punycode = require('punycode.js');\n\nfunction _interopNamespaceDefault(e) {\n  var n = Object.create(null);\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () { return e[k]; }\n        });\n      }\n    });\n  }\n  n.default = e;\n  return Object.freeze(n);\n}\n\nvar mdurl__namespace = /*#__PURE__*/_interopNamespaceDefault(mdurl);\nvar ucmicro__namespace = /*#__PURE__*/_interopNamespaceDefault(ucmicro);\n\n// Utilities\n//\n\nfunction _class(obj) {\n  return Object.prototype.toString.call(obj);\n}\nfunction isString(obj) {\n  return _class(obj) === '[object String]';\n}\nconst _hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction has(object, key) {\n  return _hasOwnProperty.call(object, key);\n}\n\n// Merge objects\n//\nfunction assign(obj /* from1, from2, from3, ... */) {\n  const sources = Array.prototype.slice.call(arguments, 1);\n  sources.forEach(function (source) {\n    if (!source) {\n      return;\n    }\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be object');\n    }\n    Object.keys(source).forEach(function (key) {\n      obj[key] = source[key];\n    });\n  });\n  return obj;\n}\n\n// Remove element from array and put another array at those position.\n// Useful for some operations with tokens\nfunction arrayReplaceAt(src, pos, newElements) {\n  return [].concat(src.slice(0, pos), newElements, src.slice(pos + 1));\n}\nfunction isValidEntityCode(c) {\n  /* eslint no-bitwise:0 */\n  // broken sequence\n  if (c >= 0xD800 && c <= 0xDFFF) {\n    return false;\n  }\n  // never used\n  if (c >= 0xFDD0 && c <= 0xFDEF) {\n    return false;\n  }\n  if ((c & 0xFFFF) === 0xFFFF || (c & 0xFFFF) === 0xFFFE) {\n    return false;\n  }\n  // control codes\n  if (c >= 0x00 && c <= 0x08) {\n    return false;\n  }\n  if (c === 0x0B) {\n    return false;\n  }\n  if (c >= 0x0E && c <= 0x1F) {\n    return false;\n  }\n  if (c >= 0x7F && c <= 0x9F) {\n    return false;\n  }\n  // out of range\n  if (c > 0x10FFFF) {\n    return false;\n  }\n  return true;\n}\nfunction fromCodePoint(c) {\n  /* eslint no-bitwise:0 */\n  if (c > 0xffff) {\n    c -= 0x10000;\n    const surrogate1 = 0xd800 + (c >> 10);\n    const surrogate2 = 0xdc00 + (c & 0x3ff);\n    return String.fromCharCode(surrogate1, surrogate2);\n  }\n  return String.fromCharCode(c);\n}\nconst UNESCAPE_MD_RE = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@[\\\\\\]^_`{|}~])/g;\nconst ENTITY_RE = /&([a-z#][a-z0-9]{1,31});/gi;\nconst UNESCAPE_ALL_RE = new RegExp(UNESCAPE_MD_RE.source + '|' + ENTITY_RE.source, 'gi');\nconst DIGITAL_ENTITY_TEST_RE = /^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;\nfunction replaceEntityPattern(match, name) {\n  if (name.charCodeAt(0) === 0x23 /* # */ && DIGITAL_ENTITY_TEST_RE.test(name)) {\n    const code = name[1].toLowerCase() === 'x' ? parseInt(name.slice(2), 16) : parseInt(name.slice(1), 10);\n    if (isValidEntityCode(code)) {\n      return fromCodePoint(code);\n    }\n    return match;\n  }\n  const decoded = entities.decodeHTML(match);\n  if (decoded !== match) {\n    return decoded;\n  }\n  return match;\n}\n\n/* function replaceEntities(str) {\n  if (str.indexOf('&') < 0) { return str; }\n\n  return str.replace(ENTITY_RE, replaceEntityPattern);\n} */\n\nfunction unescapeMd(str) {\n  if (str.indexOf('\\\\') < 0) {\n    return str;\n  }\n  return str.replace(UNESCAPE_MD_RE, '$1');\n}\nfunction unescapeAll(str) {\n  if (str.indexOf('\\\\') < 0 && str.indexOf('&') < 0) {\n    return str;\n  }\n  return str.replace(UNESCAPE_ALL_RE, function (match, escaped, entity) {\n    if (escaped) {\n      return escaped;\n    }\n    return replaceEntityPattern(match, entity);\n  });\n}\nconst HTML_ESCAPE_TEST_RE = /[&<>\"]/;\nconst HTML_ESCAPE_REPLACE_RE = /[&<>\"]/g;\nconst HTML_REPLACEMENTS = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;'\n};\nfunction replaceUnsafeChar(ch) {\n  return HTML_REPLACEMENTS[ch];\n}\nfunction escapeHtml(str) {\n  if (HTML_ESCAPE_TEST_RE.test(str)) {\n    return str.replace(HTML_ESCAPE_REPLACE_RE, replaceUnsafeChar);\n  }\n  return str;\n}\nconst REGEXP_ESCAPE_RE = /[.?*+^$[\\]\\\\(){}|-]/g;\nfunction escapeRE(str) {\n  return str.replace(REGEXP_ESCAPE_RE, '\\\\$&');\n}\nfunction isSpace(code) {\n  switch (code) {\n    case 0x09:\n    case 0x20:\n      return true;\n  }\n  return false;\n}\n\n// Zs (unicode class) || [\\t\\f\\v\\r\\n]\nfunction isWhiteSpace(code) {\n  if (code >= 0x2000 && code <= 0x200A) {\n    return true;\n  }\n  switch (code) {\n    case 0x09: // \\t\n    case 0x0A: // \\n\n    case 0x0B: // \\v\n    case 0x0C: // \\f\n    case 0x0D: // \\r\n    case 0x20:\n    case 0xA0:\n    case 0x1680:\n    case 0x202F:\n    case 0x205F:\n    case 0x3000:\n      return true;\n  }\n  return false;\n}\n\n/* eslint-disable max-len */\n\n// Currently without astral characters support.\nfunction isPunctChar(ch) {\n  return ucmicro__namespace.P.test(ch) || ucmicro__namespace.S.test(ch);\n}\n\n// Markdown ASCII punctuation characters.\n//\n// !, \", #, $, %, &, ', (, ), *, +, ,, -, ., /, :, ;, <, =, >, ?, @, [, \\, ], ^, _, `, {, |, }, or ~\n// http://spec.commonmark.org/0.15/#ascii-punctuation-character\n//\n// Don't confuse with unicode punctuation !!! It lacks some chars in ascii range.\n//\nfunction isMdAsciiPunct(ch) {\n  switch (ch) {\n    case 0x21 /* ! */:\n    case 0x22 /* \" */:\n    case 0x23 /* # */:\n    case 0x24 /* $ */:\n    case 0x25 /* % */:\n    case 0x26 /* & */:\n    case 0x27 /* ' */:\n    case 0x28 /* ( */:\n    case 0x29 /* ) */:\n    case 0x2A /* * */:\n    case 0x2B /* + */:\n    case 0x2C /* , */:\n    case 0x2D /* - */:\n    case 0x2E /* . */:\n    case 0x2F /* / */:\n    case 0x3A /* : */:\n    case 0x3B /* ; */:\n    case 0x3C /* < */:\n    case 0x3D /* = */:\n    case 0x3E /* > */:\n    case 0x3F /* ? */:\n    case 0x40 /* @ */:\n    case 0x5B /* [ */:\n    case 0x5C /* \\ */:\n    case 0x5D /* ] */:\n    case 0x5E /* ^ */:\n    case 0x5F /* _ */:\n    case 0x60 /* ` */:\n    case 0x7B /* { */:\n    case 0x7C /* | */:\n    case 0x7D /* } */:\n    case 0x7E /* ~ */:\n      return true;\n    default:\n      return false;\n  }\n}\n\n// Hepler to unify [reference labels].\n//\nfunction normalizeReference(str) {\n  // Trim and collapse whitespace\n  //\n  str = str.trim().replace(/\\s+/g, ' ');\n\n  // In node v10 '\u1E9E'.toLowerCase() === '\u1E7E', which is presumed to be a bug\n  // fixed in v12 (couldn't find any details).\n  //\n  // So treat this one as a special case\n  // (remove this when node v10 is no longer supported).\n  //\n  if ('\u1E9E'.toLowerCase() === '\u1E7E') {\n    str = str.replace(/\u1E9E/g, '\u00DF');\n  }\n\n  // .toLowerCase().toUpperCase() should get rid of all differences\n  // between letter variants.\n  //\n  // Simple .toLowerCase() doesn't normalize 125 code points correctly,\n  // and .toUpperCase doesn't normalize 6 of them (list of exceptions:\n  // \u0130, \u03F4, \u1E9E, \u2126, \u212A, \u212B - those are already uppercased, but have differently\n  // uppercased versions).\n  //\n  // Here's an example showing how it happens. Lets take greek letter omega:\n  // uppercase U+0398 (\u0398), U+03f4 (\u03F4) and lowercase U+03b8 (\u03B8), U+03d1 (\u03D1)\n  //\n  // Unicode entries:\n  // 0398;GREEK CAPITAL LETTER THETA;Lu;0;L;;;;;N;;;;03B8;\n  // 03B8;GREEK SMALL LETTER THETA;Ll;0;L;;;;;N;;;0398;;0398\n  // 03D1;GREEK THETA SYMBOL;Ll;0;L;<compat> 03B8;;;;N;GREEK SMALL LETTER SCRIPT THETA;;0398;;0398\n  // 03F4;GREEK CAPITAL THETA SYMBOL;Lu;0;L;<compat> 0398;;;;N;;;;03B8;\n  //\n  // Case-insensitive comparison should treat all of them as equivalent.\n  //\n  // But .toLowerCase() doesn't change \u03D1 (it's already lowercase),\n  // and .toUpperCase() doesn't change \u03F4 (already uppercase).\n  //\n  // Applying first lower then upper case normalizes any character:\n  // '\\u0398\\u03f4\\u03b8\\u03d1'.toLowerCase().toUpperCase() === '\\u0398\\u0398\\u0398\\u0398'\n  //\n  // Note: this is equivalent to unicode case folding; unicode normalization\n  // is a different step that is not required here.\n  //\n  // Final result should be uppercased, because it's later stored in an object\n  // (this avoid a conflict with Object.prototype members,\n  // most notably, `__proto__`)\n  //\n  return str.toLowerCase().toUpperCase();\n}\n\n// Re-export libraries commonly used in both markdown-it and its plugins,\n// so plugins won't have to depend on them explicitly, which reduces their\n// bundled size (e.g. a browser build).\n//\nconst lib = {\n  mdurl: mdurl__namespace,\n  ucmicro: ucmicro__namespace\n};\n\nvar utils = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  arrayReplaceAt: arrayReplaceAt,\n  assign: assign,\n  escapeHtml: escapeHtml,\n  escapeRE: escapeRE,\n  fromCodePoint: fromCodePoint,\n  has: has,\n  isMdAsciiPunct: isMdAsciiPunct,\n  isPunctChar: isPunctChar,\n  isSpace: isSpace,\n  isString: isString,\n  isValidEntityCode: isValidEntityCode,\n  isWhiteSpace: isWhiteSpace,\n  lib: lib,\n  normalizeReference: normalizeReference,\n  unescapeAll: unescapeAll,\n  unescapeMd: unescapeMd\n});\n\n// Parse link label\n//\n// this function assumes that first character (\"[\") already matches;\n// returns the end of the label\n//\n\nfunction parseLinkLabel(state, start, disableNested) {\n  let level, found, marker, prevPos;\n  const max = state.posMax;\n  const oldPos = state.pos;\n  state.pos = start + 1;\n  level = 1;\n  while (state.pos < max) {\n    marker = state.src.charCodeAt(state.pos);\n    if (marker === 0x5D /* ] */) {\n      level--;\n      if (level === 0) {\n        found = true;\n        break;\n      }\n    }\n    prevPos = state.pos;\n    state.md.inline.skipToken(state);\n    if (marker === 0x5B /* [ */) {\n      if (prevPos === state.pos - 1) {\n        // increase level if we find text `[`, which is not a part of any token\n        level++;\n      } else if (disableNested) {\n        state.pos = oldPos;\n        return -1;\n      }\n    }\n  }\n  let labelEnd = -1;\n  if (found) {\n    labelEnd = state.pos;\n  }\n\n  // restore old state\n  state.pos = oldPos;\n  return labelEnd;\n}\n\n// Parse link destination\n//\n\nfunction parseLinkDestination(str, start, max) {\n  let code;\n  let pos = start;\n  const result = {\n    ok: false,\n    pos: 0,\n    str: ''\n  };\n  if (str.charCodeAt(pos) === 0x3C /* < */) {\n    pos++;\n    while (pos < max) {\n      code = str.charCodeAt(pos);\n      if (code === 0x0A /* \\n */) {\n        return result;\n      }\n      if (code === 0x3C /* < */) {\n        return result;\n      }\n      if (code === 0x3E /* > */) {\n        result.pos = pos + 1;\n        result.str = unescapeAll(str.slice(start + 1, pos));\n        result.ok = true;\n        return result;\n      }\n      if (code === 0x5C /* \\ */ && pos + 1 < max) {\n        pos += 2;\n        continue;\n      }\n      pos++;\n    }\n\n    // no closing '>'\n    return result;\n  }\n\n  // this should be ... } else { ... branch\n\n  let level = 0;\n  while (pos < max) {\n    code = str.charCodeAt(pos);\n    if (code === 0x20) {\n      break;\n    }\n\n    // ascii control characters\n    if (code < 0x20 || code === 0x7F) {\n      break;\n    }\n    if (code === 0x5C /* \\ */ && pos + 1 < max) {\n      if (str.charCodeAt(pos + 1) === 0x20) {\n        break;\n      }\n      pos += 2;\n      continue;\n    }\n    if (code === 0x28 /* ( */) {\n      level++;\n      if (level > 32) {\n        return result;\n      }\n    }\n    if (code === 0x29 /* ) */) {\n      if (level === 0) {\n        break;\n      }\n      level--;\n    }\n    pos++;\n  }\n  if (start === pos) {\n    return result;\n  }\n  if (level !== 0) {\n    return result;\n  }\n  result.str = unescapeAll(str.slice(start, pos));\n  result.pos = pos;\n  result.ok = true;\n  return result;\n}\n\n// Parse link title\n//\n\n\n// Parse link title within `str` in [start, max] range,\n// or continue previous parsing if `prev_state` is defined (equal to result of last execution).\n//\nfunction parseLinkTitle(str, start, max, prev_state) {\n  let code;\n  let pos = start;\n  const state = {\n    // if `true`, this is a valid link title\n    ok: false,\n    // if `true`, this link can be continued on the next line\n    can_continue: false,\n    // if `ok`, it's the position of the first character after the closing marker\n    pos: 0,\n    // if `ok`, it's the unescaped title\n    str: '',\n    // expected closing marker character code\n    marker: 0\n  };\n  if (prev_state) {\n    // this is a continuation of a previous parseLinkTitle call on the next line,\n    // used in reference links only\n    state.str = prev_state.str;\n    state.marker = prev_state.marker;\n  } else {\n    if (pos >= max) {\n      return state;\n    }\n    let marker = str.charCodeAt(pos);\n    if (marker !== 0x22 /* \" */ && marker !== 0x27 /* ' */ && marker !== 0x28 /* ( */) {\n      return state;\n    }\n    start++;\n    pos++;\n\n    // if opening marker is \"(\", switch it to closing marker \")\"\n    if (marker === 0x28) {\n      marker = 0x29;\n    }\n    state.marker = marker;\n  }\n  while (pos < max) {\n    code = str.charCodeAt(pos);\n    if (code === state.marker) {\n      state.pos = pos + 1;\n      state.str += unescapeAll(str.slice(start, pos));\n      state.ok = true;\n      return state;\n    } else if (code === 0x28 /* ( */ && state.marker === 0x29 /* ) */) {\n      return state;\n    } else if (code === 0x5C /* \\ */ && pos + 1 < max) {\n      pos++;\n    }\n    pos++;\n  }\n\n  // no closing marker found, but this link title may continue on the next line (for references)\n  state.can_continue = true;\n  state.str += unescapeAll(str.slice(start, pos));\n  return state;\n}\n\n// Just a shortcut for bulk export\n\nvar helpers = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  parseLinkDestination: parseLinkDestination,\n  parseLinkLabel: parseLinkLabel,\n  parseLinkTitle: parseLinkTitle\n});\n\n/**\n * class Renderer\n *\n * Generates HTML from parsed token stream. Each instance has independent\n * copy of rules. Those can be rewritten with ease. Also, you can add new\n * rules if you create plugin and adds new token types.\n **/\n\nconst default_rules = {};\ndefault_rules.code_inline = function (tokens, idx, options, env, slf) {\n  const token = tokens[idx];\n  return '<code' + slf.renderAttrs(token) + '>' + escapeHtml(token.content) + '</code>';\n};\ndefault_rules.code_block = function (tokens, idx, options, env, slf) {\n  const token = tokens[idx];\n  return '<pre' + slf.renderAttrs(token) + '><code>' + escapeHtml(tokens[idx].content) + '</code></pre>\\n';\n};\ndefault_rules.fence = function (tokens, idx, options, env, slf) {\n  const token = tokens[idx];\n  const info = token.info ? unescapeAll(token.info).trim() : '';\n  let langName = '';\n  let langAttrs = '';\n  if (info) {\n    const arr = info.split(/(\\s+)/g);\n    langName = arr[0];\n    langAttrs = arr.slice(2).join('');\n  }\n  let highlighted;\n  if (options.highlight) {\n    highlighted = options.highlight(token.content, langName, langAttrs) || escapeHtml(token.content);\n  } else {\n    highlighted = escapeHtml(token.content);\n  }\n  if (highlighted.indexOf('<pre') === 0) {\n    return highlighted + '\\n';\n  }\n\n  // If language exists, inject class gently, without modifying original token.\n  // May be, one day we will add .deepClone() for token and simplify this part, but\n  // now we prefer to keep things local.\n  if (info) {\n    const i = token.attrIndex('class');\n    const tmpAttrs = token.attrs ? token.attrs.slice() : [];\n    if (i < 0) {\n      tmpAttrs.push(['class', options.langPrefix + langName]);\n    } else {\n      tmpAttrs[i] = tmpAttrs[i].slice();\n      tmpAttrs[i][1] += ' ' + options.langPrefix + langName;\n    }\n\n    // Fake token just to render attributes\n    const tmpToken = {\n      attrs: tmpAttrs\n    };\n    return `<pre><code${slf.renderAttrs(tmpToken)}>${highlighted}</code></pre>\\n`;\n  }\n  return `<pre><code${slf.renderAttrs(token)}>${highlighted}</code></pre>\\n`;\n};\ndefault_rules.image = function (tokens, idx, options, env, slf) {\n  const token = tokens[idx];\n\n  // \"alt\" attr MUST be set, even if empty. Because it's mandatory and\n  // should be placed on proper position for tests.\n  //\n  // Replace content with actual value\n\n  token.attrs[token.attrIndex('alt')][1] = slf.renderInlineAsText(token.children, options, env);\n  return slf.renderToken(tokens, idx, options);\n};\ndefault_rules.hardbreak = function (tokens, idx, options /*, env */) {\n  return options.xhtmlOut ? '<br />\\n' : '<br>\\n';\n};\ndefault_rules.softbreak = function (tokens, idx, options /*, env */) {\n  return options.breaks ? options.xhtmlOut ? '<br />\\n' : '<br>\\n' : '\\n';\n};\ndefault_rules.text = function (tokens, idx /*, options, env */) {\n  return escapeHtml(tokens[idx].content);\n};\ndefault_rules.html_block = function (tokens, idx /*, options, env */) {\n  return tokens[idx].content;\n};\ndefault_rules.html_inline = function (tokens, idx /*, options, env */) {\n  return tokens[idx].content;\n};\n\n/**\n * new Renderer()\n *\n * Creates new [[Renderer]] instance and fill [[Renderer#rules]] with defaults.\n **/\nfunction Renderer() {\n  /**\n   * Renderer#rules -> Object\n   *\n   * Contains render rules for tokens. Can be updated and extended.\n   *\n   * ##### Example\n   *\n   * ```javascript\n   * var md = require('markdown-it')();\n   *\n   * md.renderer.rules.strong_open  = function () { return '<b>'; };\n   * md.renderer.rules.strong_close = function () { return '</b>'; };\n   *\n   * var result = md.renderInline(...);\n   * ```\n   *\n   * Each rule is called as independent static function with fixed signature:\n   *\n   * ```javascript\n   * function my_token_render(tokens, idx, options, env, renderer) {\n   *   // ...\n   *   return renderedHTML;\n   * }\n   * ```\n   *\n   * See [source code](https://github.com/markdown-it/markdown-it/blob/master/lib/renderer.mjs)\n   * for more details and examples.\n   **/\n  this.rules = assign({}, default_rules);\n}\n\n/**\n * Renderer.renderAttrs(token) -> String\n *\n * Render token attributes to string.\n **/\nRenderer.prototype.renderAttrs = function renderAttrs(token) {\n  let i, l, result;\n  if (!token.attrs) {\n    return '';\n  }\n  result = '';\n  for (i = 0, l = token.attrs.length; i < l; i++) {\n    result += ' ' + escapeHtml(token.attrs[i][0]) + '=\"' + escapeHtml(token.attrs[i][1]) + '\"';\n  }\n  return result;\n};\n\n/**\n * Renderer.renderToken(tokens, idx, options) -> String\n * - tokens (Array): list of tokens\n * - idx (Numbed): token index to render\n * - options (Object): params of parser instance\n *\n * Default token renderer. Can be overriden by custom function\n * in [[Renderer#rules]].\n **/\nRenderer.prototype.renderToken = function renderToken(tokens, idx, options) {\n  const token = tokens[idx];\n  let result = '';\n\n  // Tight list paragraphs\n  if (token.hidden) {\n    return '';\n  }\n\n  // Insert a newline between hidden paragraph and subsequent opening\n  // block-level tag.\n  //\n  // For example, here we should insert a newline before blockquote:\n  //  - a\n  //    >\n  //\n  if (token.block && token.nesting !== -1 && idx && tokens[idx - 1].hidden) {\n    result += '\\n';\n  }\n\n  // Add token name, e.g. `<img`\n  result += (token.nesting === -1 ? '</' : '<') + token.tag;\n\n  // Encode attributes, e.g. `<img src=\"foo\"`\n  result += this.renderAttrs(token);\n\n  // Add a slash for self-closing tags, e.g. `<img src=\"foo\" /`\n  if (token.nesting === 0 && options.xhtmlOut) {\n    result += ' /';\n  }\n\n  // Check if we need to add a newline after this tag\n  let needLf = false;\n  if (token.block) {\n    needLf = true;\n    if (token.nesting === 1) {\n      if (idx + 1 < tokens.length) {\n        const nextToken = tokens[idx + 1];\n        if (nextToken.type === 'inline' || nextToken.hidden) {\n          // Block-level tag containing an inline tag.\n          //\n          needLf = false;\n        } else if (nextToken.nesting === -1 && nextToken.tag === token.tag) {\n          // Opening tag + closing tag of the same type. E.g. `<li></li>`.\n          //\n          needLf = false;\n        }\n      }\n    }\n  }\n  result += needLf ? '>\\n' : '>';\n  return result;\n};\n\n/**\n * Renderer.renderInline(tokens, options, env) -> String\n * - tokens (Array): list on block tokens to render\n * - options (Object): params of parser instance\n * - env (Object): additional data from parsed input (references, for example)\n *\n * The same as [[Renderer.render]], but for single token of `inline` type.\n **/\nRenderer.prototype.renderInline = function (tokens, options, env) {\n  let result = '';\n  const rules = this.rules;\n  for (let i = 0, len = tokens.length; i < len; i++) {\n    const type = tokens[i].type;\n    if (typeof rules[type] !== 'undefined') {\n      result += rules[type](tokens, i, options, env, this);\n    } else {\n      result += this.renderToken(tokens, i, options);\n    }\n  }\n  return result;\n};\n\n/** internal\n * Renderer.renderInlineAsText(tokens, options, env) -> String\n * - tokens (Array): list on block tokens to render\n * - options (Object): params of parser instance\n * - env (Object): additional data from parsed input (references, for example)\n *\n * Special kludge for image `alt` attributes to conform CommonMark spec.\n * Don't try to use it! Spec requires to show `alt` content with stripped markup,\n * instead of simple escaping.\n **/\nRenderer.prototype.renderInlineAsText = function (tokens, options, env) {\n  let result = '';\n  for (let i = 0, len = tokens.length; i < len; i++) {\n    switch (tokens[i].type) {\n      case 'text':\n        result += tokens[i].content;\n        break;\n      case 'image':\n        result += this.renderInlineAsText(tokens[i].children, options, env);\n        break;\n      case 'html_inline':\n      case 'html_block':\n        result += tokens[i].content;\n        break;\n      case 'softbreak':\n      case 'hardbreak':\n        result += '\\n';\n        break;\n      // all other tokens are skipped\n    }\n  }\n  return result;\n};\n\n/**\n * Renderer.render(tokens, options, env) -> String\n * - tokens (Array): list on block tokens to render\n * - options (Object): params of parser instance\n * - env (Object): additional data from parsed input (references, for example)\n *\n * Takes token stream and generates HTML. Probably, you will never need to call\n * this method directly.\n **/\nRenderer.prototype.render = function (tokens, options, env) {\n  let result = '';\n  const rules = this.rules;\n  for (let i = 0, len = tokens.length; i < len; i++) {\n    const type = tokens[i].type;\n    if (type === 'inline') {\n      result += this.renderInline(tokens[i].children, options, env);\n    } else if (typeof rules[type] !== 'undefined') {\n      result += rules[type](tokens, i, options, env, this);\n    } else {\n      result += this.renderToken(tokens, i, options, env);\n    }\n  }\n  return result;\n};\n\n/**\n * class Ruler\n *\n * Helper class, used by [[MarkdownIt#core]], [[MarkdownIt#block]] and\n * [[MarkdownIt#inline]] to manage sequences of functions (rules):\n *\n * - keep rules in defined order\n * - assign the name to each rule\n * - enable/disable rules\n * - add/replace rules\n * - allow assign rules to additional named chains (in the same)\n * - cacheing lists of active rules\n *\n * You will not need use this class directly until write plugins. For simple\n * rules control use [[MarkdownIt.disable]], [[MarkdownIt.enable]] and\n * [[MarkdownIt.use]].\n **/\n\n/**\n * new Ruler()\n **/\nfunction Ruler() {\n  // List of added rules. Each element is:\n  //\n  // {\n  //   name: XXX,\n  //   enabled: Boolean,\n  //   fn: Function(),\n  //   alt: [ name2, name3 ]\n  // }\n  //\n  this.__rules__ = [];\n\n  // Cached rule chains.\n  //\n  // First level - chain name, '' for default.\n  // Second level - diginal anchor for fast filtering by charcodes.\n  //\n  this.__cache__ = null;\n}\n\n// Helper methods, should not be used directly\n\n// Find rule index by name\n//\nRuler.prototype.__find__ = function (name) {\n  for (let i = 0; i < this.__rules__.length; i++) {\n    if (this.__rules__[i].name === name) {\n      return i;\n    }\n  }\n  return -1;\n};\n\n// Build rules lookup cache\n//\nRuler.prototype.__compile__ = function () {\n  const self = this;\n  const chains = [''];\n\n  // collect unique names\n  self.__rules__.forEach(function (rule) {\n    if (!rule.enabled) {\n      return;\n    }\n    rule.alt.forEach(function (altName) {\n      if (chains.indexOf(altName) < 0) {\n        chains.push(altName);\n      }\n    });\n  });\n  self.__cache__ = {};\n  chains.forEach(function (chain) {\n    self.__cache__[chain] = [];\n    self.__rules__.forEach(function (rule) {\n      if (!rule.enabled) {\n        return;\n      }\n      if (chain && rule.alt.indexOf(chain) < 0) {\n        return;\n      }\n      self.__cache__[chain].push(rule.fn);\n    });\n  });\n};\n\n/**\n * Ruler.at(name, fn [, options])\n * - name (String): rule name to replace.\n * - fn (Function): new rule function.\n * - options (Object): new rule options (not mandatory).\n *\n * Replace rule by name with new function & options. Throws error if name not\n * found.\n *\n * ##### Options:\n *\n * - __alt__ - array with names of \"alternate\" chains.\n *\n * ##### Example\n *\n * Replace existing typographer replacement rule with new one:\n *\n * ```javascript\n * var md = require('markdown-it')();\n *\n * md.core.ruler.at('replacements', function replace(state) {\n *   //...\n * });\n * ```\n **/\nRuler.prototype.at = function (name, fn, options) {\n  const index = this.__find__(name);\n  const opt = options || {};\n  if (index === -1) {\n    throw new Error('Parser rule not found: ' + name);\n  }\n  this.__rules__[index].fn = fn;\n  this.__rules__[index].alt = opt.alt || [];\n  this.__cache__ = null;\n};\n\n/**\n * Ruler.before(beforeName, ruleName, fn [, options])\n * - beforeName (String): new rule will be added before this one.\n * - ruleName (String): name of added rule.\n * - fn (Function): rule function.\n * - options (Object): rule options (not mandatory).\n *\n * Add new rule to chain before one with given name. See also\n * [[Ruler.after]], [[Ruler.push]].\n *\n * ##### Options:\n *\n * - __alt__ - array with names of \"alternate\" chains.\n *\n * ##### Example\n *\n * ```javascript\n * var md = require('markdown-it')();\n *\n * md.block.ruler.before('paragraph', 'my_rule', function replace(state) {\n *   //...\n * });\n * ```\n **/\nRuler.prototype.before = function (beforeName, ruleName, fn, options) {\n  const index = this.__find__(beforeName);\n  const opt = options || {};\n  if (index === -1) {\n    throw new Error('Parser rule not found: ' + beforeName);\n  }\n  this.__rules__.splice(index, 0, {\n    name: ruleName,\n    enabled: true,\n    fn,\n    alt: opt.alt || []\n  });\n  this.__cache__ = null;\n};\n\n/**\n * Ruler.after(afterName, ruleName, fn [, options])\n * - afterName (String): new rule will be added after this one.\n * - ruleName (String): name of added rule.\n * - fn (Function): rule function.\n * - options (Object): rule options (not mandatory).\n *\n * Add new rule to chain after one with given name. See also\n * [[Ruler.before]], [[Ruler.push]].\n *\n * ##### Options:\n *\n * - __alt__ - array with names of \"alternate\" chains.\n *\n * ##### Example\n *\n * ```javascript\n * var md = require('markdown-it')();\n *\n * md.inline.ruler.after('text', 'my_rule', function replace(state) {\n *   //...\n * });\n * ```\n **/\nRuler.prototype.after = function (afterName, ruleName, fn, options) {\n  const index = this.__find__(afterName);\n  const opt = options || {};\n  if (index === -1) {\n    throw new Error('Parser rule not found: ' + afterName);\n  }\n  this.__rules__.splice(index + 1, 0, {\n    name: ruleName,\n    enabled: true,\n    fn,\n    alt: opt.alt || []\n  });\n  this.__cache__ = null;\n};\n\n/**\n * Ruler.push(ruleName, fn [, options])\n * - ruleName (String): name of added rule.\n * - fn (Function): rule function.\n * - options (Object): rule options (not mandatory).\n *\n * Push new rule to the end of chain. See also\n * [[Ruler.before]], [[Ruler.after]].\n *\n * ##### Options:\n *\n * - __alt__ - array with names of \"alternate\" chains.\n *\n * ##### Example\n *\n * ```javascript\n * var md = require('markdown-it')();\n *\n * md.core.ruler.push('my_rule', function replace(state) {\n *   //...\n * });\n * ```\n **/\nRuler.prototype.push = function (ruleName, fn, options) {\n  const opt = options || {};\n  this.__rules__.push({\n    name: ruleName,\n    enabled: true,\n    fn,\n    alt: opt.alt || []\n  });\n  this.__cache__ = null;\n};\n\n/**\n * Ruler.enable(list [, ignoreInvalid]) -> Array\n * - list (String|Array): list of rule names to enable.\n * - ignoreInvalid (Boolean): set `true` to ignore errors when rule not found.\n *\n * Enable rules with given names. If any rule name not found - throw Error.\n * Errors can be disabled by second param.\n *\n * Returns list of found rule names (if no exception happened).\n *\n * See also [[Ruler.disable]], [[Ruler.enableOnly]].\n **/\nRuler.prototype.enable = function (list, ignoreInvalid) {\n  if (!Array.isArray(list)) {\n    list = [list];\n  }\n  const result = [];\n\n  // Search by name and enable\n  list.forEach(function (name) {\n    const idx = this.__find__(name);\n    if (idx < 0) {\n      if (ignoreInvalid) {\n        return;\n      }\n      throw new Error('Rules manager: invalid rule name ' + name);\n    }\n    this.__rules__[idx].enabled = true;\n    result.push(name);\n  }, this);\n  this.__cache__ = null;\n  return result;\n};\n\n/**\n * Ruler.enableOnly(list [, ignoreInvalid])\n * - list (String|Array): list of rule names to enable (whitelist).\n * - ignoreInvalid (Boolean): set `true` to ignore errors when rule not found.\n *\n * Enable rules with given names, and disable everything else. If any rule name\n * not found - throw Error. Errors can be disabled by second param.\n *\n * See also [[Ruler.disable]], [[Ruler.enable]].\n **/\nRuler.prototype.enableOnly = function (list, ignoreInvalid) {\n  if (!Array.isArray(list)) {\n    list = [list];\n  }\n  this.__rules__.forEach(function (rule) {\n    rule.enabled = false;\n  });\n  this.enable(list, ignoreInvalid);\n};\n\n/**\n * Ruler.disable(list [, ignoreInvalid]) -> Array\n * - list (String|Array): list of rule names to disable.\n * - ignoreInvalid (Boolean): set `true` to ignore errors when rule not found.\n *\n * Disable rules with given names. If any rule name not found - throw Error.\n * Errors can be disabled by second param.\n *\n * Returns list of found rule names (if no exception happened).\n *\n * See also [[Ruler.enable]], [[Ruler.enableOnly]].\n **/\nRuler.prototype.disable = function (list, ignoreInvalid) {\n  if (!Array.isArray(list)) {\n    list = [list];\n  }\n  const result = [];\n\n  // Search by name and disable\n  list.forEach(function (name) {\n    const idx = this.__find__(name);\n    if (idx < 0) {\n      if (ignoreInvalid) {\n        return;\n      }\n      throw new Error('Rules manager: invalid rule name ' + name);\n    }\n    this.__rules__[idx].enabled = false;\n    result.push(name);\n  }, this);\n  this.__cache__ = null;\n  return result;\n};\n\n/**\n * Ruler.getRules(chainName) -> Array\n *\n * Return array of active functions (rules) for given chain name. It analyzes\n * rules configuration, compiles caches if not exists and returns result.\n *\n * Default chain name is `''` (empty string). It can't be skipped. That's\n * done intentionally, to keep signature monomorphic for high speed.\n **/\nRuler.prototype.getRules = function (chainName) {\n  if (this.__cache__ === null) {\n    this.__compile__();\n  }\n\n  // Chain can be empty, if rules disabled. But we still have to return Array.\n  return this.__cache__[chainName] || [];\n};\n\n// Token class\n\n/**\n * class Token\n **/\n\n/**\n * new Token(type, tag, nesting)\n *\n * Create new token and fill passed properties.\n **/\nfunction Token(type, tag, nesting) {\n  /**\n   * Token#type -> String\n   *\n   * Type of the token (string, e.g. \"paragraph_open\")\n   **/\n  this.type = type;\n\n  /**\n   * Token#tag -> String\n   *\n   * html tag name, e.g. \"p\"\n   **/\n  this.tag = tag;\n\n  /**\n   * Token#attrs -> Array\n   *\n   * Html attributes. Format: `[ [ name1, value1 ], [ name2, value2 ] ]`\n   **/\n  this.attrs = null;\n\n  /**\n   * Token#map -> Array\n   *\n   * Source map info. Format: `[ line_begin, line_end ]`\n   **/\n  this.map = null;\n\n  /**\n   * Token#nesting -> Number\n   *\n   * Level change (number in {-1, 0, 1} set), where:\n   *\n   * -  `1` means the tag is opening\n   * -  `0` means the tag is self-closing\n   * - `-1` means the tag is closing\n   **/\n  this.nesting = nesting;\n\n  /**\n   * Token#level -> Number\n   *\n   * nesting level, the same as `state.level`\n   **/\n  this.level = 0;\n\n  /**\n   * Token#children -> Array\n   *\n   * An array of child nodes (inline and img tokens)\n   **/\n  this.children = null;\n\n  /**\n   * Token#content -> String\n   *\n   * In a case of self-closing tag (code, html, fence, etc.),\n   * it has contents of this tag.\n   **/\n  this.content = '';\n\n  /**\n   * Token#markup -> String\n   *\n   * '*' or '_' for emphasis, fence string for fence, etc.\n   **/\n  this.markup = '';\n\n  /**\n   * Token#info -> String\n   *\n   * Additional information:\n   *\n   * - Info string for \"fence\" tokens\n   * - The value \"auto\" for autolink \"link_open\" and \"link_close\" tokens\n   * - The string value of the item marker for ordered-list \"list_item_open\" tokens\n   **/\n  this.info = '';\n\n  /**\n   * Token#meta -> Object\n   *\n   * A place for plugins to store an arbitrary data\n   **/\n  this.meta = null;\n\n  /**\n   * Token#block -> Boolean\n   *\n   * True for block-level tokens, false for inline tokens.\n   * Used in renderer to calculate line breaks\n   **/\n  this.block = false;\n\n  /**\n   * Token#hidden -> Boolean\n   *\n   * If it's true, ignore this element when rendering. Used for tight lists\n   * to hide paragraphs.\n   **/\n  this.hidden = false;\n}\n\n/**\n * Token.attrIndex(name) -> Number\n *\n * Search attribute index by name.\n **/\nToken.prototype.attrIndex = function attrIndex(name) {\n  if (!this.attrs) {\n    return -1;\n  }\n  const attrs = this.attrs;\n  for (let i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i][0] === name) {\n      return i;\n    }\n  }\n  return -1;\n};\n\n/**\n * Token.attrPush(attrData)\n *\n * Add `[ name, value ]` attribute to list. Init attrs if necessary\n **/\nToken.prototype.attrPush = function attrPush(attrData) {\n  if (this.attrs) {\n    this.attrs.push(attrData);\n  } else {\n    this.attrs = [attrData];\n  }\n};\n\n/**\n * Token.attrSet(name, value)\n *\n * Set `name` attribute to `value`. Override old value if exists.\n **/\nToken.prototype.attrSet = function attrSet(name, value) {\n  const idx = this.attrIndex(name);\n  const attrData = [name, value];\n  if (idx < 0) {\n    this.attrPush(attrData);\n  } else {\n    this.attrs[idx] = attrData;\n  }\n};\n\n/**\n * Token.attrGet(name)\n *\n * Get the value of attribute `name`, or null if it does not exist.\n **/\nToken.prototype.attrGet = function attrGet(name) {\n  const idx = this.attrIndex(name);\n  let value = null;\n  if (idx >= 0) {\n    value = this.attrs[idx][1];\n  }\n  return value;\n};\n\n/**\n * Token.attrJoin(name, value)\n *\n * Join value to existing attribute via space. Or create new attribute if not\n * exists. Useful to operate with token classes.\n **/\nToken.prototype.attrJoin = function attrJoin(name, value) {\n  const idx = this.attrIndex(name);\n  if (idx < 0) {\n    this.attrPush([name, value]);\n  } else {\n    this.attrs[idx][1] = this.attrs[idx][1] + ' ' + value;\n  }\n};\n\n// Core state object\n//\n\nfunction StateCore(src, md, env) {\n  this.src = src;\n  this.env = env;\n  this.tokens = [];\n  this.inlineMode = false;\n  this.md = md; // link to parser instance\n}\n\n// re-export Token class to use in core rules\nStateCore.prototype.Token = Token;\n\n// Normalize input string\n\n// https://spec.commonmark.org/0.29/#line-ending\nconst NEWLINES_RE = /\\r\\n?|\\n/g;\nconst NULL_RE = /\\0/g;\nfunction normalize(state) {\n  let str;\n\n  // Normalize newlines\n  str = state.src.replace(NEWLINES_RE, '\\n');\n\n  // Replace NULL characters\n  str = str.replace(NULL_RE, '\\uFFFD');\n  state.src = str;\n}\n\nfunction block(state) {\n  let token;\n  if (state.inlineMode) {\n    token = new state.Token('inline', '', 0);\n    token.content = state.src;\n    token.map = [0, 1];\n    token.children = [];\n    state.tokens.push(token);\n  } else {\n    state.md.block.parse(state.src, state.md, state.env, state.tokens);\n  }\n}\n\nfunction inline(state) {\n  const tokens = state.tokens;\n\n  // Parse inlines\n  for (let i = 0, l = tokens.length; i < l; i++) {\n    const tok = tokens[i];\n    if (tok.type === 'inline') {\n      state.md.inline.parse(tok.content, state.md, state.env, tok.children);\n    }\n  }\n}\n\n// Replace link-like texts with link nodes.\n//\n// Currently restricted by `md.validateLink()` to http/https/ftp\n//\n\nfunction isLinkOpen$1(str) {\n  return /^<a[>\\s]/i.test(str);\n}\nfunction isLinkClose$1(str) {\n  return /^<\\/a\\s*>/i.test(str);\n}\nfunction linkify$1(state) {\n  const blockTokens = state.tokens;\n  if (!state.md.options.linkify) {\n    return;\n  }\n  for (let j = 0, l = blockTokens.length; j < l; j++) {\n    if (blockTokens[j].type !== 'inline' || !state.md.linkify.pretest(blockTokens[j].content)) {\n      continue;\n    }\n    let tokens = blockTokens[j].children;\n    let htmlLinkLevel = 0;\n\n    // We scan from the end, to keep position when new tags added.\n    // Use reversed logic in links start/end match\n    for (let i = tokens.length - 1; i >= 0; i--) {\n      const currentToken = tokens[i];\n\n      // Skip content of markdown links\n      if (currentToken.type === 'link_close') {\n        i--;\n        while (tokens[i].level !== currentToken.level && tokens[i].type !== 'link_open') {\n          i--;\n        }\n        continue;\n      }\n\n      // Skip content of html tag links\n      if (currentToken.type === 'html_inline') {\n        if (isLinkOpen$1(currentToken.content) && htmlLinkLevel > 0) {\n          htmlLinkLevel--;\n        }\n        if (isLinkClose$1(currentToken.content)) {\n          htmlLinkLevel++;\n        }\n      }\n      if (htmlLinkLevel > 0) {\n        continue;\n      }\n      if (currentToken.type === 'text' && state.md.linkify.test(currentToken.content)) {\n        const text = currentToken.content;\n        let links = state.md.linkify.match(text);\n\n        // Now split string to nodes\n        const nodes = [];\n        let level = currentToken.level;\n        let lastPos = 0;\n\n        // forbid escape sequence at the start of the string,\n        // this avoids http\\://example.com/ from being linkified as\n        // http:<a href=\"//example.com/\">//example.com/</a>\n        if (links.length > 0 && links[0].index === 0 && i > 0 && tokens[i - 1].type === 'text_special') {\n          links = links.slice(1);\n        }\n        for (let ln = 0; ln < links.length; ln++) {\n          const url = links[ln].url;\n          const fullUrl = state.md.normalizeLink(url);\n          if (!state.md.validateLink(fullUrl)) {\n            continue;\n          }\n          let urlText = links[ln].text;\n\n          // Linkifier might send raw hostnames like \"example.com\", where url\n          // starts with domain name. So we prepend http:// in those cases,\n          // and remove it afterwards.\n          //\n          if (!links[ln].schema) {\n            urlText = state.md.normalizeLinkText('http://' + urlText).replace(/^http:\\/\\//, '');\n          } else if (links[ln].schema === 'mailto:' && !/^mailto:/i.test(urlText)) {\n            urlText = state.md.normalizeLinkText('mailto:' + urlText).replace(/^mailto:/, '');\n          } else {\n            urlText = state.md.normalizeLinkText(urlText);\n          }\n          const pos = links[ln].index;\n          if (pos > lastPos) {\n            const token = new state.Token('text', '', 0);\n            token.content = text.slice(lastPos, pos);\n            token.level = level;\n            nodes.push(token);\n          }\n          const token_o = new state.Token('link_open', 'a', 1);\n          token_o.attrs = [['href', fullUrl]];\n          token_o.level = level++;\n          token_o.markup = 'linkify';\n          token_o.info = 'auto';\n          nodes.push(token_o);\n          const token_t = new state.Token('text', '', 0);\n          token_t.content = urlText;\n          token_t.level = level;\n          nodes.push(token_t);\n          const token_c = new state.Token('link_close', 'a', -1);\n          token_c.level = --level;\n          token_c.markup = 'linkify';\n          token_c.info = 'auto';\n          nodes.push(token_c);\n          lastPos = links[ln].lastIndex;\n        }\n        if (lastPos < text.length) {\n          const token = new state.Token('text', '', 0);\n          token.content = text.slice(lastPos);\n          token.level = level;\n          nodes.push(token);\n        }\n\n        // replace current node\n        blockTokens[j].children = tokens = arrayReplaceAt(tokens, i, nodes);\n      }\n    }\n  }\n}\n\n// Simple typographic replacements\n//\n// (c) (C) \u2192 \u00A9\n// (tm) (TM) \u2192 \u2122\n// (r) (R) \u2192 \u00AE\n// +- \u2192 \u00B1\n// ... \u2192 \u2026 (also ?.... \u2192 ?.., !.... \u2192 !..)\n// ???????? \u2192 ???, !!!!! \u2192 !!!, `,,` \u2192 `,`\n// -- \u2192 &ndash;, --- \u2192 &mdash;\n//\n\n// TODO:\n// - fractionals 1/2, 1/4, 3/4 -> \u00BD, \u00BC, \u00BE\n// - multiplications 2 x 4 -> 2 \u00D7 4\n\nconst RARE_RE = /\\+-|\\.\\.|\\?\\?\\?\\?|!!!!|,,|--/;\n\n// Workaround for phantomjs - need regex without /g flag,\n// or root check will fail every second time\nconst SCOPED_ABBR_TEST_RE = /\\((c|tm|r)\\)/i;\nconst SCOPED_ABBR_RE = /\\((c|tm|r)\\)/ig;\nconst SCOPED_ABBR = {\n  c: '\u00A9',\n  r: '\u00AE',\n  tm: '\u2122'\n};\nfunction replaceFn(match, name) {\n  return SCOPED_ABBR[name.toLowerCase()];\n}\nfunction replace_scoped(inlineTokens) {\n  let inside_autolink = 0;\n  for (let i = inlineTokens.length - 1; i >= 0; i--) {\n    const token = inlineTokens[i];\n    if (token.type === 'text' && !inside_autolink) {\n      token.content = token.content.replace(SCOPED_ABBR_RE, replaceFn);\n    }\n    if (token.type === 'link_open' && token.info === 'auto') {\n      inside_autolink--;\n    }\n    if (token.type === 'link_close' && token.info === 'auto') {\n      inside_autolink++;\n    }\n  }\n}\nfunction replace_rare(inlineTokens) {\n  let inside_autolink = 0;\n  for (let i = inlineTokens.length - 1; i >= 0; i--) {\n    const token = inlineTokens[i];\n    if (token.type === 'text' && !inside_autolink) {\n      if (RARE_RE.test(token.content)) {\n        token.content = token.content.replace(/\\+-/g, '\u00B1')\n        // .., ..., ....... -> \u2026\n        // but ?..... & !..... -> ?.. & !..\n        .replace(/\\.{2,}/g, '\u2026').replace(/([?!])\u2026/g, '$1..').replace(/([?!]){4,}/g, '$1$1$1').replace(/,{2,}/g, ',')\n        // em-dash\n        .replace(/(^|[^-])---(?=[^-]|$)/mg, '$1\\u2014')\n        // en-dash\n        .replace(/(^|\\s)--(?=\\s|$)/mg, '$1\\u2013').replace(/(^|[^-\\s])--(?=[^-\\s]|$)/mg, '$1\\u2013');\n      }\n    }\n    if (token.type === 'link_open' && token.info === 'auto') {\n      inside_autolink--;\n    }\n    if (token.type === 'link_close' && token.info === 'auto') {\n      inside_autolink++;\n    }\n  }\n}\nfunction replace(state) {\n  let blkIdx;\n  if (!state.md.options.typographer) {\n    return;\n  }\n  for (blkIdx = state.tokens.length - 1; blkIdx >= 0; blkIdx--) {\n    if (state.tokens[blkIdx].type !== 'inline') {\n      continue;\n    }\n    if (SCOPED_ABBR_TEST_RE.test(state.tokens[blkIdx].content)) {\n      replace_scoped(state.tokens[blkIdx].children);\n    }\n    if (RARE_RE.test(state.tokens[blkIdx].content)) {\n      replace_rare(state.tokens[blkIdx].children);\n    }\n  }\n}\n\n// Convert straight quotation marks to typographic ones\n//\n\nconst QUOTE_TEST_RE = /['\"]/;\nconst QUOTE_RE = /['\"]/g;\nconst APOSTROPHE = '\\u2019'; /* \u2019 */\n\nfunction replaceAt(str, index, ch) {\n  return str.slice(0, index) + ch + str.slice(index + 1);\n}\nfunction process_inlines(tokens, state) {\n  let j;\n  const stack = [];\n  for (let i = 0; i < tokens.length; i++) {\n    const token = tokens[i];\n    const thisLevel = tokens[i].level;\n    for (j = stack.length - 1; j >= 0; j--) {\n      if (stack[j].level <= thisLevel) {\n        break;\n      }\n    }\n    stack.length = j + 1;\n    if (token.type !== 'text') {\n      continue;\n    }\n    let text = token.content;\n    let pos = 0;\n    let max = text.length;\n\n    /* eslint no-labels:0,block-scoped-var:0 */\n    OUTER: while (pos < max) {\n      QUOTE_RE.lastIndex = pos;\n      const t = QUOTE_RE.exec(text);\n      if (!t) {\n        break;\n      }\n      let canOpen = true;\n      let canClose = true;\n      pos = t.index + 1;\n      const isSingle = t[0] === \"'\";\n\n      // Find previous character,\n      // default to space if it's the beginning of the line\n      //\n      let lastChar = 0x20;\n      if (t.index - 1 >= 0) {\n        lastChar = text.charCodeAt(t.index - 1);\n      } else {\n        for (j = i - 1; j >= 0; j--) {\n          if (tokens[j].type === 'softbreak' || tokens[j].type === 'hardbreak') break; // lastChar defaults to 0x20\n          if (!tokens[j].content) continue; // should skip all tokens except 'text', 'html_inline' or 'code_inline'\n\n          lastChar = tokens[j].content.charCodeAt(tokens[j].content.length - 1);\n          break;\n        }\n      }\n\n      // Find next character,\n      // default to space if it's the end of the line\n      //\n      let nextChar = 0x20;\n      if (pos < max) {\n        nextChar = text.charCodeAt(pos);\n      } else {\n        for (j = i + 1; j < tokens.length; j++) {\n          if (tokens[j].type === 'softbreak' || tokens[j].type === 'hardbreak') break; // nextChar defaults to 0x20\n          if (!tokens[j].content) continue; // should skip all tokens except 'text', 'html_inline' or 'code_inline'\n\n          nextChar = tokens[j].content.charCodeAt(0);\n          break;\n        }\n      }\n      const isLastPunctChar = isMdAsciiPunct(lastChar) || isPunctChar(String.fromCharCode(lastChar));\n      const isNextPunctChar = isMdAsciiPunct(nextChar) || isPunctChar(String.fromCharCode(nextChar));\n      const isLastWhiteSpace = isWhiteSpace(lastChar);\n      const isNextWhiteSpace = isWhiteSpace(nextChar);\n      if (isNextWhiteSpace) {\n        canOpen = false;\n      } else if (isNextPunctChar) {\n        if (!(isLastWhiteSpace || isLastPunctChar)) {\n          canOpen = false;\n        }\n      }\n      if (isLastWhiteSpace) {\n        canClose = false;\n      } else if (isLastPunctChar) {\n        if (!(isNextWhiteSpace || isNextPunctChar)) {\n          canClose = false;\n        }\n      }\n      if (nextChar === 0x22 /* \" */ && t[0] === '\"') {\n        if (lastChar >= 0x30 /* 0 */ && lastChar <= 0x39 /* 9 */) {\n          // special case: 1\"\" - count first quote as an inch\n          canClose = canOpen = false;\n        }\n      }\n      if (canOpen && canClose) {\n        // Replace quotes in the middle of punctuation sequence, but not\n        // in the middle of the words, i.e.:\n        //\n        // 1. foo \" bar \" baz - not replaced\n        // 2. foo-\"-bar-\"-baz - replaced\n        // 3. foo\"bar\"baz     - not replaced\n        //\n        canOpen = isLastPunctChar;\n        canClose = isNextPunctChar;\n      }\n      if (!canOpen && !canClose) {\n        // middle of word\n        if (isSingle) {\n          token.content = replaceAt(token.content, t.index, APOSTROPHE);\n        }\n        continue;\n      }\n      if (canClose) {\n        // this could be a closing quote, rewind the stack to get a match\n        for (j = stack.length - 1; j >= 0; j--) {\n          let item = stack[j];\n          if (stack[j].level < thisLevel) {\n            break;\n          }\n          if (item.single === isSingle && stack[j].level === thisLevel) {\n            item = stack[j];\n            let openQuote;\n            let closeQuote;\n            if (isSingle) {\n              openQuote = state.md.options.quotes[2];\n              closeQuote = state.md.options.quotes[3];\n            } else {\n              openQuote = state.md.options.quotes[0];\n              closeQuote = state.md.options.quotes[1];\n            }\n\n            // replace token.content *before* tokens[item.token].content,\n            // because, if they are pointing at the same token, replaceAt\n            // could mess up indices when quote length != 1\n            token.content = replaceAt(token.content, t.index, closeQuote);\n            tokens[item.token].content = replaceAt(tokens[item.token].content, item.pos, openQuote);\n            pos += closeQuote.length - 1;\n            if (item.token === i) {\n              pos += openQuote.length - 1;\n            }\n            text = token.content;\n            max = text.length;\n            stack.length = j;\n            continue OUTER;\n          }\n        }\n      }\n      if (canOpen) {\n        stack.push({\n          token: i,\n          pos: t.index,\n          single: isSingle,\n          level: thisLevel\n        });\n      } else if (canClose && isSingle) {\n        token.content = replaceAt(token.content, t.index, APOSTROPHE);\n      }\n    }\n  }\n}\nfunction smartquotes(state) {\n  /* eslint max-depth:0 */\n  if (!state.md.options.typographer) {\n    return;\n  }\n  for (let blkIdx = state.tokens.length - 1; blkIdx >= 0; blkIdx--) {\n    if (state.tokens[blkIdx].type !== 'inline' || !QUOTE_TEST_RE.test(state.tokens[blkIdx].content)) {\n      continue;\n    }\n    process_inlines(state.tokens[blkIdx].children, state);\n  }\n}\n\n// Join raw text tokens with the rest of the text\n//\n// This is set as a separate rule to provide an opportunity for plugins\n// to run text replacements after text join, but before escape join.\n//\n// For example, `\\:)` shouldn't be replaced with an emoji.\n//\n\nfunction text_join(state) {\n  let curr, last;\n  const blockTokens = state.tokens;\n  const l = blockTokens.length;\n  for (let j = 0; j < l; j++) {\n    if (blockTokens[j].type !== 'inline') continue;\n    const tokens = blockTokens[j].children;\n    const max = tokens.length;\n    for (curr = 0; curr < max; curr++) {\n      if (tokens[curr].type === 'text_special') {\n        tokens[curr].type = 'text';\n      }\n    }\n    for (curr = last = 0; curr < max; curr++) {\n      if (tokens[curr].type === 'text' && curr + 1 < max && tokens[curr + 1].type === 'text') {\n        // collapse two adjacent text nodes\n        tokens[curr + 1].content = tokens[curr].content + tokens[curr + 1].content;\n      } else {\n        if (curr !== last) {\n          tokens[last] = tokens[curr];\n        }\n        last++;\n      }\n    }\n    if (curr !== last) {\n      tokens.length = last;\n    }\n  }\n}\n\n/** internal\n * class Core\n *\n * Top-level rules executor. Glues block/inline parsers and does intermediate\n * transformations.\n **/\n\nconst _rules$2 = [['normalize', normalize], ['block', block], ['inline', inline], ['linkify', linkify$1], ['replacements', replace], ['smartquotes', smartquotes],\n// `text_join` finds `text_special` tokens (for escape sequences)\n// and joins them with the rest of the text\n['text_join', text_join]];\n\n/**\n * new Core()\n **/\nfunction Core() {\n  /**\n   * Core#ruler -> Ruler\n   *\n   * [[Ruler]] instance. Keep configuration of core rules.\n   **/\n  this.ruler = new Ruler();\n  for (let i = 0; i < _rules$2.length; i++) {\n    this.ruler.push(_rules$2[i][0], _rules$2[i][1]);\n  }\n}\n\n/**\n * Core.process(state)\n *\n * Executes core chain rules.\n **/\nCore.prototype.process = function (state) {\n  const rules = this.ruler.getRules('');\n  for (let i = 0, l = rules.length; i < l; i++) {\n    rules[i](state);\n  }\n};\nCore.prototype.State = StateCore;\n\n// Parser state class\n\nfunction StateBlock(src, md, env, tokens) {\n  this.src = src;\n\n  // link to parser instance\n  this.md = md;\n  this.env = env;\n\n  //\n  // Internal state vartiables\n  //\n\n  this.tokens = tokens;\n  this.bMarks = []; // line begin offsets for fast jumps\n  this.eMarks = []; // line end offsets for fast jumps\n  this.tShift = []; // offsets of the first non-space characters (tabs not expanded)\n  this.sCount = []; // indents for each line (tabs expanded)\n\n  // An amount of virtual spaces (tabs expanded) between beginning\n  // of each line (bMarks) and real beginning of that line.\n  //\n  // It exists only as a hack because blockquotes override bMarks\n  // losing information in the process.\n  //\n  // It's used only when expanding tabs, you can think about it as\n  // an initial tab length, e.g. bsCount=21 applied to string `\\t123`\n  // means first tab should be expanded to 4-21%4 === 3 spaces.\n  //\n  this.bsCount = [];\n\n  // block parser variables\n\n  // required block content indent (for example, if we are\n  // inside a list, it would be positioned after list marker)\n  this.blkIndent = 0;\n  this.line = 0; // line index in src\n  this.lineMax = 0; // lines count\n  this.tight = false; // loose/tight mode for lists\n  this.ddIndent = -1; // indent of the current dd block (-1 if there isn't any)\n  this.listIndent = -1; // indent of the current list block (-1 if there isn't any)\n\n  // can be 'blockquote', 'list', 'root', 'paragraph' or 'reference'\n  // used in lists to determine if they interrupt a paragraph\n  this.parentType = 'root';\n  this.level = 0;\n\n  // Create caches\n  // Generate markers.\n  const s = this.src;\n  for (let start = 0, pos = 0, indent = 0, offset = 0, len = s.length, indent_found = false; pos < len; pos++) {\n    const ch = s.charCodeAt(pos);\n    if (!indent_found) {\n      if (isSpace(ch)) {\n        indent++;\n        if (ch === 0x09) {\n          offset += 4 - offset % 4;\n        } else {\n          offset++;\n        }\n        continue;\n      } else {\n        indent_found = true;\n      }\n    }\n    if (ch === 0x0A || pos === len - 1) {\n      if (ch !== 0x0A) {\n        pos++;\n      }\n      this.bMarks.push(start);\n      this.eMarks.push(pos);\n      this.tShift.push(indent);\n      this.sCount.push(offset);\n      this.bsCount.push(0);\n      indent_found = false;\n      indent = 0;\n      offset = 0;\n      start = pos + 1;\n    }\n  }\n\n  // Push fake entry to simplify cache bounds checks\n  this.bMarks.push(s.length);\n  this.eMarks.push(s.length);\n  this.tShift.push(0);\n  this.sCount.push(0);\n  this.bsCount.push(0);\n  this.lineMax = this.bMarks.length - 1; // don't count last fake line\n}\n\n// Push new token to \"stream\".\n//\nStateBlock.prototype.push = function (type, tag, nesting) {\n  const token = new Token(type, tag, nesting);\n  token.block = true;\n  if (nesting < 0) this.level--; // closing tag\n  token.level = this.level;\n  if (nesting > 0) this.level++; // opening tag\n\n  this.tokens.push(token);\n  return token;\n};\nStateBlock.prototype.isEmpty = function isEmpty(line) {\n  return this.bMarks[line] + this.tShift[line] >= this.eMarks[line];\n};\nStateBlock.prototype.skipEmptyLines = function skipEmptyLines(from) {\n  for (let max = this.lineMax; from < max; from++) {\n    if (this.bMarks[from] + this.tShift[from] < this.eMarks[from]) {\n      break;\n    }\n  }\n  return from;\n};\n\n// Skip spaces from given position.\nStateBlock.prototype.skipSpaces = function skipSpaces(pos) {\n  for (let max = this.src.length; pos < max; pos++) {\n    const ch = this.src.charCodeAt(pos);\n    if (!isSpace(ch)) {\n      break;\n    }\n  }\n  return pos;\n};\n\n// Skip spaces from given position in reverse.\nStateBlock.prototype.skipSpacesBack = function skipSpacesBack(pos, min) {\n  if (pos <= min) {\n    return pos;\n  }\n  while (pos > min) {\n    if (!isSpace(this.src.charCodeAt(--pos))) {\n      return pos + 1;\n    }\n  }\n  return pos;\n};\n\n// Skip char codes from given position\nStateBlock.prototype.skipChars = function skipChars(pos, code) {\n  for (let max = this.src.length; pos < max; pos++) {\n    if (this.src.charCodeAt(pos) !== code) {\n      break;\n    }\n  }\n  return pos;\n};\n\n// Skip char codes reverse from given position - 1\nStateBlock.prototype.skipCharsBack = function skipCharsBack(pos, code, min) {\n  if (pos <= min) {\n    return pos;\n  }\n  while (pos > min) {\n    if (code !== this.src.charCodeAt(--pos)) {\n      return pos + 1;\n    }\n  }\n  return pos;\n};\n\n// cut lines range from source.\nStateBlock.prototype.getLines = function getLines(begin, end, indent, keepLastLF) {\n  if (begin >= end) {\n    return '';\n  }\n  const queue = new Array(end - begin);\n  for (let i = 0, line = begin; line < end; line++, i++) {\n    let lineIndent = 0;\n    const lineStart = this.bMarks[line];\n    let first = lineStart;\n    let last;\n    if (line + 1 < end || keepLastLF) {\n      // No need for bounds check because we have fake entry on tail.\n      last = this.eMarks[line] + 1;\n    } else {\n      last = this.eMarks[line];\n    }\n    while (first < last && lineIndent < indent) {\n      const ch = this.src.charCodeAt(first);\n      if (isSpace(ch)) {\n        if (ch === 0x09) {\n          lineIndent += 4 - (lineIndent + this.bsCount[line]) % 4;\n        } else {\n          lineIndent++;\n        }\n      } else if (first - lineStart < this.tShift[line]) {\n        // patched tShift masked characters to look like spaces (blockquotes, list markers)\n        lineIndent++;\n      } else {\n        break;\n      }\n      first++;\n    }\n    if (lineIndent > indent) {\n      // partially expanding tabs in code blocks, e.g '\\t\\tfoobar'\n      // with indent=2 becomes '  \\tfoobar'\n      queue[i] = new Array(lineIndent - indent + 1).join(' ') + this.src.slice(first, last);\n    } else {\n      queue[i] = this.src.slice(first, last);\n    }\n  }\n  return queue.join('');\n};\n\n// re-export Token class to use in block rules\nStateBlock.prototype.Token = Token;\n\n// GFM table, https://github.github.com/gfm/#tables-extension-\n\n\n// Limit the amount of empty autocompleted cells in a table,\n// see https://github.com/markdown-it/markdown-it/issues/1000,\n//\n// Both pulldown-cmark and commonmark-hs limit the number of cells this way to ~200k.\n// We set it to 65k, which can expand user input by a factor of x370\n// (256x256 square is 1.8kB expanded into 650kB).\nconst MAX_AUTOCOMPLETED_CELLS = 0x10000;\nfunction getLine(state, line) {\n  const pos = state.bMarks[line] + state.tShift[line];\n  const max = state.eMarks[line];\n  return state.src.slice(pos, max);\n}\nfunction escapedSplit(str) {\n  const result = [];\n  const max = str.length;\n  let pos = 0;\n  let ch = str.charCodeAt(pos);\n  let isEscaped = false;\n  let lastPos = 0;\n  let current = '';\n  while (pos < max) {\n    if (ch === 0x7c /* | */) {\n      if (!isEscaped) {\n        // pipe separating cells, '|'\n        result.push(current + str.substring(lastPos, pos));\n        current = '';\n        lastPos = pos + 1;\n      } else {\n        // escaped pipe, '\\|'\n        current += str.substring(lastPos, pos - 1);\n        lastPos = pos;\n      }\n    }\n    isEscaped = ch === 0x5c /* \\ */;\n    pos++;\n    ch = str.charCodeAt(pos);\n  }\n  result.push(current + str.substring(lastPos));\n  return result;\n}\nfunction table(state, startLine, endLine, silent) {\n  // should have at least two lines\n  if (startLine + 2 > endLine) {\n    return false;\n  }\n  let nextLine = startLine + 1;\n  if (state.sCount[nextLine] < state.blkIndent) {\n    return false;\n  }\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[nextLine] - state.blkIndent >= 4) {\n    return false;\n  }\n\n  // first character of the second line should be '|', '-', ':',\n  // and no other characters are allowed but spaces;\n  // basically, this is the equivalent of /^[-:|][-:|\\s]*$/ regexp\n\n  let pos = state.bMarks[nextLine] + state.tShift[nextLine];\n  if (pos >= state.eMarks[nextLine]) {\n    return false;\n  }\n  const firstCh = state.src.charCodeAt(pos++);\n  if (firstCh !== 0x7C /* | */ && firstCh !== 0x2D /* - */ && firstCh !== 0x3A /* : */) {\n    return false;\n  }\n  if (pos >= state.eMarks[nextLine]) {\n    return false;\n  }\n  const secondCh = state.src.charCodeAt(pos++);\n  if (secondCh !== 0x7C /* | */ && secondCh !== 0x2D /* - */ && secondCh !== 0x3A /* : */ && !isSpace(secondCh)) {\n    return false;\n  }\n\n  // if first character is '-', then second character must not be a space\n  // (due to parsing ambiguity with list)\n  if (firstCh === 0x2D /* - */ && isSpace(secondCh)) {\n    return false;\n  }\n  while (pos < state.eMarks[nextLine]) {\n    const ch = state.src.charCodeAt(pos);\n    if (ch !== 0x7C /* | */ && ch !== 0x2D /* - */ && ch !== 0x3A /* : */ && !isSpace(ch)) {\n      return false;\n    }\n    pos++;\n  }\n  let lineText = getLine(state, startLine + 1);\n  let columns = lineText.split('|');\n  const aligns = [];\n  for (let i = 0; i < columns.length; i++) {\n    const t = columns[i].trim();\n    if (!t) {\n      // allow empty columns before and after table, but not in between columns;\n      // e.g. allow ` |---| `, disallow ` ---||--- `\n      if (i === 0 || i === columns.length - 1) {\n        continue;\n      } else {\n        return false;\n      }\n    }\n    if (!/^:?-+:?$/.test(t)) {\n      return false;\n    }\n    if (t.charCodeAt(t.length - 1) === 0x3A /* : */) {\n      aligns.push(t.charCodeAt(0) === 0x3A /* : */ ? 'center' : 'right');\n    } else if (t.charCodeAt(0) === 0x3A /* : */) {\n      aligns.push('left');\n    } else {\n      aligns.push('');\n    }\n  }\n  lineText = getLine(state, startLine).trim();\n  if (lineText.indexOf('|') === -1) {\n    return false;\n  }\n  if (state.sCount[startLine] - state.blkIndent >= 4) {\n    return false;\n  }\n  columns = escapedSplit(lineText);\n  if (columns.length && columns[0] === '') columns.shift();\n  if (columns.length && columns[columns.length - 1] === '') columns.pop();\n\n  // header row will define an amount of columns in the entire table,\n  // and align row should be exactly the same (the rest of the rows can differ)\n  const columnCount = columns.length;\n  if (columnCount === 0 || columnCount !== aligns.length) {\n    return false;\n  }\n  if (silent) {\n    return true;\n  }\n  const oldParentType = state.parentType;\n  state.parentType = 'table';\n\n  // use 'blockquote' lists for termination because it's\n  // the most similar to tables\n  const terminatorRules = state.md.block.ruler.getRules('blockquote');\n  const token_to = state.push('table_open', 'table', 1);\n  const tableLines = [startLine, 0];\n  token_to.map = tableLines;\n  const token_tho = state.push('thead_open', 'thead', 1);\n  token_tho.map = [startLine, startLine + 1];\n  const token_htro = state.push('tr_open', 'tr', 1);\n  token_htro.map = [startLine, startLine + 1];\n  for (let i = 0; i < columns.length; i++) {\n    const token_ho = state.push('th_open', 'th', 1);\n    if (aligns[i]) {\n      token_ho.attrs = [['style', 'text-align:' + aligns[i]]];\n    }\n    const token_il = state.push('inline', '', 0);\n    token_il.content = columns[i].trim();\n    token_il.children = [];\n    state.push('th_close', 'th', -1);\n  }\n  state.push('tr_close', 'tr', -1);\n  state.push('thead_close', 'thead', -1);\n  let tbodyLines;\n  let autocompletedCells = 0;\n  for (nextLine = startLine + 2; nextLine < endLine; nextLine++) {\n    if (state.sCount[nextLine] < state.blkIndent) {\n      break;\n    }\n    let terminate = false;\n    for (let i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n    if (terminate) {\n      break;\n    }\n    lineText = getLine(state, nextLine).trim();\n    if (!lineText) {\n      break;\n    }\n    if (state.sCount[nextLine] - state.blkIndent >= 4) {\n      break;\n    }\n    columns = escapedSplit(lineText);\n    if (columns.length && columns[0] === '') columns.shift();\n    if (columns.length && columns[columns.length - 1] === '') columns.pop();\n\n    // note: autocomplete count can be negative if user specifies more columns than header,\n    // but that does not affect intended use (which is limiting expansion)\n    autocompletedCells += columnCount - columns.length;\n    if (autocompletedCells > MAX_AUTOCOMPLETED_CELLS) {\n      break;\n    }\n    if (nextLine === startLine + 2) {\n      const token_tbo = state.push('tbody_open', 'tbody', 1);\n      token_tbo.map = tbodyLines = [startLine + 2, 0];\n    }\n    const token_tro = state.push('tr_open', 'tr', 1);\n    token_tro.map = [nextLine, nextLine + 1];\n    for (let i = 0; i < columnCount; i++) {\n      const token_tdo = state.push('td_open', 'td', 1);\n      if (aligns[i]) {\n        token_tdo.attrs = [['style', 'text-align:' + aligns[i]]];\n      }\n      const token_il = state.push('inline', '', 0);\n      token_il.content = columns[i] ? columns[i].trim() : '';\n      token_il.children = [];\n      state.push('td_close', 'td', -1);\n    }\n    state.push('tr_close', 'tr', -1);\n  }\n  if (tbodyLines) {\n    state.push('tbody_close', 'tbody', -1);\n    tbodyLines[1] = nextLine;\n  }\n  state.push('table_close', 'table', -1);\n  tableLines[1] = nextLine;\n  state.parentType = oldParentType;\n  state.line = nextLine;\n  return true;\n}\n\n// Code block (4 spaces padded)\n\nfunction code(state, startLine, endLine /*, silent */) {\n  if (state.sCount[startLine] - state.blkIndent < 4) {\n    return false;\n  }\n  let nextLine = startLine + 1;\n  let last = nextLine;\n  while (nextLine < endLine) {\n    if (state.isEmpty(nextLine)) {\n      nextLine++;\n      continue;\n    }\n    if (state.sCount[nextLine] - state.blkIndent >= 4) {\n      nextLine++;\n      last = nextLine;\n      continue;\n    }\n    break;\n  }\n  state.line = last;\n  const token = state.push('code_block', 'code', 0);\n  token.content = state.getLines(startLine, last, 4 + state.blkIndent, false) + '\\n';\n  token.map = [startLine, state.line];\n  return true;\n}\n\n// fences (``` lang, ~~~ lang)\n\nfunction fence(state, startLine, endLine, silent) {\n  let pos = state.bMarks[startLine] + state.tShift[startLine];\n  let max = state.eMarks[startLine];\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) {\n    return false;\n  }\n  if (pos + 3 > max) {\n    return false;\n  }\n  const marker = state.src.charCodeAt(pos);\n  if (marker !== 0x7E /* ~ */ && marker !== 0x60 /* ` */) {\n    return false;\n  }\n\n  // scan marker length\n  let mem = pos;\n  pos = state.skipChars(pos, marker);\n  let len = pos - mem;\n  if (len < 3) {\n    return false;\n  }\n  const markup = state.src.slice(mem, pos);\n  const params = state.src.slice(pos, max);\n  if (marker === 0x60 /* ` */) {\n    if (params.indexOf(String.fromCharCode(marker)) >= 0) {\n      return false;\n    }\n  }\n\n  // Since start is found, we can report success here in validation mode\n  if (silent) {\n    return true;\n  }\n\n  // search end of block\n  let nextLine = startLine;\n  let haveEndMarker = false;\n  for (;;) {\n    nextLine++;\n    if (nextLine >= endLine) {\n      // unclosed block should be autoclosed by end of document.\n      // also block seems to be autoclosed by end of parent\n      break;\n    }\n    pos = mem = state.bMarks[nextLine] + state.tShift[nextLine];\n    max = state.eMarks[nextLine];\n    if (pos < max && state.sCount[nextLine] < state.blkIndent) {\n      // non-empty line with negative indent should stop the list:\n      // - ```\n      //  test\n      break;\n    }\n    if (state.src.charCodeAt(pos) !== marker) {\n      continue;\n    }\n    if (state.sCount[nextLine] - state.blkIndent >= 4) {\n      // closing fence should be indented less than 4 spaces\n      continue;\n    }\n    pos = state.skipChars(pos, marker);\n\n    // closing code fence must be at least as long as the opening one\n    if (pos - mem < len) {\n      continue;\n    }\n\n    // make sure tail has spaces only\n    pos = state.skipSpaces(pos);\n    if (pos < max) {\n      continue;\n    }\n    haveEndMarker = true;\n    // found!\n    break;\n  }\n\n  // If a fence has heading spaces, they should be removed from its inner block\n  len = state.sCount[startLine];\n  state.line = nextLine + (haveEndMarker ? 1 : 0);\n  const token = state.push('fence', 'code', 0);\n  token.info = params;\n  token.content = state.getLines(startLine + 1, nextLine, len, true);\n  token.markup = markup;\n  token.map = [startLine, state.line];\n  return true;\n}\n\n// Block quotes\n\nfunction blockquote(state, startLine, endLine, silent) {\n  let pos = state.bMarks[startLine] + state.tShift[startLine];\n  let max = state.eMarks[startLine];\n  const oldLineMax = state.lineMax;\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) {\n    return false;\n  }\n\n  // check the block quote marker\n  if (state.src.charCodeAt(pos) !== 0x3E /* > */) {\n    return false;\n  }\n\n  // we know that it's going to be a valid blockquote,\n  // so no point trying to find the end of it in silent mode\n  if (silent) {\n    return true;\n  }\n  const oldBMarks = [];\n  const oldBSCount = [];\n  const oldSCount = [];\n  const oldTShift = [];\n  const terminatorRules = state.md.block.ruler.getRules('blockquote');\n  const oldParentType = state.parentType;\n  state.parentType = 'blockquote';\n  let lastLineEmpty = false;\n  let nextLine;\n\n  // Search the end of the block\n  //\n  // Block ends with either:\n  //  1. an empty line outside:\n  //     ```\n  //     > test\n  //\n  //     ```\n  //  2. an empty line inside:\n  //     ```\n  //     >\n  //     test\n  //     ```\n  //  3. another tag:\n  //     ```\n  //     > test\n  //      - - -\n  //     ```\n  for (nextLine = startLine; nextLine < endLine; nextLine++) {\n    // check if it's outdented, i.e. it's inside list item and indented\n    // less than said list item:\n    //\n    // ```\n    // 1. anything\n    //    > current blockquote\n    // 2. checking this line\n    // ```\n    const isOutdented = state.sCount[nextLine] < state.blkIndent;\n    pos = state.bMarks[nextLine] + state.tShift[nextLine];\n    max = state.eMarks[nextLine];\n    if (pos >= max) {\n      // Case 1: line is not inside the blockquote, and this line is empty.\n      break;\n    }\n    if (state.src.charCodeAt(pos++) === 0x3E /* > */ && !isOutdented) {\n      // This line is inside the blockquote.\n\n      // set offset past spaces and \">\"\n      let initial = state.sCount[nextLine] + 1;\n      let spaceAfterMarker;\n      let adjustTab;\n\n      // skip one optional space after '>'\n      if (state.src.charCodeAt(pos) === 0x20 /* space */) {\n        // ' >   test '\n        //     ^ -- position start of line here:\n        pos++;\n        initial++;\n        adjustTab = false;\n        spaceAfterMarker = true;\n      } else if (state.src.charCodeAt(pos) === 0x09 /* tab */) {\n        spaceAfterMarker = true;\n        if ((state.bsCount[nextLine] + initial) % 4 === 3) {\n          // '  >\\t  test '\n          //       ^ -- position start of line here (tab has width===1)\n          pos++;\n          initial++;\n          adjustTab = false;\n        } else {\n          // ' >\\t  test '\n          //    ^ -- position start of line here + shift bsCount slightly\n          //         to make extra space appear\n          adjustTab = true;\n        }\n      } else {\n        spaceAfterMarker = false;\n      }\n      let offset = initial;\n      oldBMarks.push(state.bMarks[nextLine]);\n      state.bMarks[nextLine] = pos;\n      while (pos < max) {\n        const ch = state.src.charCodeAt(pos);\n        if (isSpace(ch)) {\n          if (ch === 0x09) {\n            offset += 4 - (offset + state.bsCount[nextLine] + (adjustTab ? 1 : 0)) % 4;\n          } else {\n            offset++;\n          }\n        } else {\n          break;\n        }\n        pos++;\n      }\n      lastLineEmpty = pos >= max;\n      oldBSCount.push(state.bsCount[nextLine]);\n      state.bsCount[nextLine] = state.sCount[nextLine] + 1 + (spaceAfterMarker ? 1 : 0);\n      oldSCount.push(state.sCount[nextLine]);\n      state.sCount[nextLine] = offset - initial;\n      oldTShift.push(state.tShift[nextLine]);\n      state.tShift[nextLine] = pos - state.bMarks[nextLine];\n      continue;\n    }\n\n    // Case 2: line is not inside the blockquote, and the last line was empty.\n    if (lastLineEmpty) {\n      break;\n    }\n\n    // Case 3: another tag found.\n    let terminate = false;\n    for (let i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n    if (terminate) {\n      // Quirk to enforce \"hard termination mode\" for paragraphs;\n      // normally if you call `tokenize(state, startLine, nextLine)`,\n      // paragraphs will look below nextLine for paragraph continuation,\n      // but if blockquote is terminated by another tag, they shouldn't\n      state.lineMax = nextLine;\n      if (state.blkIndent !== 0) {\n        // state.blkIndent was non-zero, we now set it to zero,\n        // so we need to re-calculate all offsets to appear as\n        // if indent wasn't changed\n        oldBMarks.push(state.bMarks[nextLine]);\n        oldBSCount.push(state.bsCount[nextLine]);\n        oldTShift.push(state.tShift[nextLine]);\n        oldSCount.push(state.sCount[nextLine]);\n        state.sCount[nextLine] -= state.blkIndent;\n      }\n      break;\n    }\n    oldBMarks.push(state.bMarks[nextLine]);\n    oldBSCount.push(state.bsCount[nextLine]);\n    oldTShift.push(state.tShift[nextLine]);\n    oldSCount.push(state.sCount[nextLine]);\n\n    // A negative indentation means that this is a paragraph continuation\n    //\n    state.sCount[nextLine] = -1;\n  }\n  const oldIndent = state.blkIndent;\n  state.blkIndent = 0;\n  const token_o = state.push('blockquote_open', 'blockquote', 1);\n  token_o.markup = '>';\n  const lines = [startLine, 0];\n  token_o.map = lines;\n  state.md.block.tokenize(state, startLine, nextLine);\n  const token_c = state.push('blockquote_close', 'blockquote', -1);\n  token_c.markup = '>';\n  state.lineMax = oldLineMax;\n  state.parentType = oldParentType;\n  lines[1] = state.line;\n\n  // Restore original tShift; this might not be necessary since the parser\n  // has already been here, but just to make sure we can do that.\n  for (let i = 0; i < oldTShift.length; i++) {\n    state.bMarks[i + startLine] = oldBMarks[i];\n    state.tShift[i + startLine] = oldTShift[i];\n    state.sCount[i + startLine] = oldSCount[i];\n    state.bsCount[i + startLine] = oldBSCount[i];\n  }\n  state.blkIndent = oldIndent;\n  return true;\n}\n\n// Horizontal rule\n\nfunction hr(state, startLine, endLine, silent) {\n  const max = state.eMarks[startLine];\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) {\n    return false;\n  }\n  let pos = state.bMarks[startLine] + state.tShift[startLine];\n  const marker = state.src.charCodeAt(pos++);\n\n  // Check hr marker\n  if (marker !== 0x2A /* * */ && marker !== 0x2D /* - */ && marker !== 0x5F /* _ */) {\n    return false;\n  }\n\n  // markers can be mixed with spaces, but there should be at least 3 of them\n\n  let cnt = 1;\n  while (pos < max) {\n    const ch = state.src.charCodeAt(pos++);\n    if (ch !== marker && !isSpace(ch)) {\n      return false;\n    }\n    if (ch === marker) {\n      cnt++;\n    }\n  }\n  if (cnt < 3) {\n    return false;\n  }\n  if (silent) {\n    return true;\n  }\n  state.line = startLine + 1;\n  const token = state.push('hr', 'hr', 0);\n  token.map = [startLine, state.line];\n  token.markup = Array(cnt + 1).join(String.fromCharCode(marker));\n  return true;\n}\n\n// Lists\n\n\n// Search `[-+*][\\n ]`, returns next pos after marker on success\n// or -1 on fail.\nfunction skipBulletListMarker(state, startLine) {\n  const max = state.eMarks[startLine];\n  let pos = state.bMarks[startLine] + state.tShift[startLine];\n  const marker = state.src.charCodeAt(pos++);\n  // Check bullet\n  if (marker !== 0x2A /* * */ && marker !== 0x2D /* - */ && marker !== 0x2B /* + */) {\n    return -1;\n  }\n  if (pos < max) {\n    const ch = state.src.charCodeAt(pos);\n    if (!isSpace(ch)) {\n      // \" -test \" - is not a list item\n      return -1;\n    }\n  }\n  return pos;\n}\n\n// Search `\\d+[.)][\\n ]`, returns next pos after marker on success\n// or -1 on fail.\nfunction skipOrderedListMarker(state, startLine) {\n  const start = state.bMarks[startLine] + state.tShift[startLine];\n  const max = state.eMarks[startLine];\n  let pos = start;\n\n  // List marker should have at least 2 chars (digit + dot)\n  if (pos + 1 >= max) {\n    return -1;\n  }\n  let ch = state.src.charCodeAt(pos++);\n  if (ch < 0x30 /* 0 */ || ch > 0x39 /* 9 */) {\n    return -1;\n  }\n  for (;;) {\n    // EOL -> fail\n    if (pos >= max) {\n      return -1;\n    }\n    ch = state.src.charCodeAt(pos++);\n    if (ch >= 0x30 /* 0 */ && ch <= 0x39 /* 9 */) {\n      // List marker should have no more than 9 digits\n      // (prevents integer overflow in browsers)\n      if (pos - start >= 10) {\n        return -1;\n      }\n      continue;\n    }\n\n    // found valid marker\n    if (ch === 0x29 /* ) */ || ch === 0x2e /* . */) {\n      break;\n    }\n    return -1;\n  }\n  if (pos < max) {\n    ch = state.src.charCodeAt(pos);\n    if (!isSpace(ch)) {\n      // \" 1.test \" - is not a list item\n      return -1;\n    }\n  }\n  return pos;\n}\nfunction markTightParagraphs(state, idx) {\n  const level = state.level + 2;\n  for (let i = idx + 2, l = state.tokens.length - 2; i < l; i++) {\n    if (state.tokens[i].level === level && state.tokens[i].type === 'paragraph_open') {\n      state.tokens[i + 2].hidden = true;\n      state.tokens[i].hidden = true;\n      i += 2;\n    }\n  }\n}\nfunction list(state, startLine, endLine, silent) {\n  let max, pos, start, token;\n  let nextLine = startLine;\n  let tight = true;\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[nextLine] - state.blkIndent >= 4) {\n    return false;\n  }\n\n  // Special case:\n  //  - item 1\n  //   - item 2\n  //    - item 3\n  //     - item 4\n  //      - this one is a paragraph continuation\n  if (state.listIndent >= 0 && state.sCount[nextLine] - state.listIndent >= 4 && state.sCount[nextLine] < state.blkIndent) {\n    return false;\n  }\n  let isTerminatingParagraph = false;\n\n  // limit conditions when list can interrupt\n  // a paragraph (validation mode only)\n  if (silent && state.parentType === 'paragraph') {\n    // Next list item should still terminate previous list item;\n    //\n    // This code can fail if plugins use blkIndent as well as lists,\n    // but I hope the spec gets fixed long before that happens.\n    //\n    if (state.sCount[nextLine] >= state.blkIndent) {\n      isTerminatingParagraph = true;\n    }\n  }\n\n  // Detect list type and position after marker\n  let isOrdered;\n  let markerValue;\n  let posAfterMarker;\n  if ((posAfterMarker = skipOrderedListMarker(state, nextLine)) >= 0) {\n    isOrdered = true;\n    start = state.bMarks[nextLine] + state.tShift[nextLine];\n    markerValue = Number(state.src.slice(start, posAfterMarker - 1));\n\n    // If we're starting a new ordered list right after\n    // a paragraph, it should start with 1.\n    if (isTerminatingParagraph && markerValue !== 1) return false;\n  } else if ((posAfterMarker = skipBulletListMarker(state, nextLine)) >= 0) {\n    isOrdered = false;\n  } else {\n    return false;\n  }\n\n  // If we're starting a new unordered list right after\n  // a paragraph, first line should not be empty.\n  if (isTerminatingParagraph) {\n    if (state.skipSpaces(posAfterMarker) >= state.eMarks[nextLine]) return false;\n  }\n\n  // For validation mode we can terminate immediately\n  if (silent) {\n    return true;\n  }\n\n  // We should terminate list on style change. Remember first one to compare.\n  const markerCharCode = state.src.charCodeAt(posAfterMarker - 1);\n\n  // Start list\n  const listTokIdx = state.tokens.length;\n  if (isOrdered) {\n    token = state.push('ordered_list_open', 'ol', 1);\n    if (markerValue !== 1) {\n      token.attrs = [['start', markerValue]];\n    }\n  } else {\n    token = state.push('bullet_list_open', 'ul', 1);\n  }\n  const listLines = [nextLine, 0];\n  token.map = listLines;\n  token.markup = String.fromCharCode(markerCharCode);\n\n  //\n  // Iterate list items\n  //\n\n  let prevEmptyEnd = false;\n  const terminatorRules = state.md.block.ruler.getRules('list');\n  const oldParentType = state.parentType;\n  state.parentType = 'list';\n  while (nextLine < endLine) {\n    pos = posAfterMarker;\n    max = state.eMarks[nextLine];\n    const initial = state.sCount[nextLine] + posAfterMarker - (state.bMarks[nextLine] + state.tShift[nextLine]);\n    let offset = initial;\n    while (pos < max) {\n      const ch = state.src.charCodeAt(pos);\n      if (ch === 0x09) {\n        offset += 4 - (offset + state.bsCount[nextLine]) % 4;\n      } else if (ch === 0x20) {\n        offset++;\n      } else {\n        break;\n      }\n      pos++;\n    }\n    const contentStart = pos;\n    let indentAfterMarker;\n    if (contentStart >= max) {\n      // trimming space in \"-    \\n  3\" case, indent is 1 here\n      indentAfterMarker = 1;\n    } else {\n      indentAfterMarker = offset - initial;\n    }\n\n    // If we have more than 4 spaces, the indent is 1\n    // (the rest is just indented code block)\n    if (indentAfterMarker > 4) {\n      indentAfterMarker = 1;\n    }\n\n    // \"  -  test\"\n    //  ^^^^^ - calculating total length of this thing\n    const indent = initial + indentAfterMarker;\n\n    // Run subparser & write tokens\n    token = state.push('list_item_open', 'li', 1);\n    token.markup = String.fromCharCode(markerCharCode);\n    const itemLines = [nextLine, 0];\n    token.map = itemLines;\n    if (isOrdered) {\n      token.info = state.src.slice(start, posAfterMarker - 1);\n    }\n\n    // change current state, then restore it after parser subcall\n    const oldTight = state.tight;\n    const oldTShift = state.tShift[nextLine];\n    const oldSCount = state.sCount[nextLine];\n\n    //  - example list\n    // ^ listIndent position will be here\n    //   ^ blkIndent position will be here\n    //\n    const oldListIndent = state.listIndent;\n    state.listIndent = state.blkIndent;\n    state.blkIndent = indent;\n    state.tight = true;\n    state.tShift[nextLine] = contentStart - state.bMarks[nextLine];\n    state.sCount[nextLine] = offset;\n    if (contentStart >= max && state.isEmpty(nextLine + 1)) {\n      // workaround for this case\n      // (list item is empty, list terminates before \"foo\"):\n      // ~~~~~~~~\n      //   -\n      //\n      //     foo\n      // ~~~~~~~~\n      state.line = Math.min(state.line + 2, endLine);\n    } else {\n      state.md.block.tokenize(state, nextLine, endLine, true);\n    }\n\n    // If any of list item is tight, mark list as tight\n    if (!state.tight || prevEmptyEnd) {\n      tight = false;\n    }\n    // Item become loose if finish with empty line,\n    // but we should filter last element, because it means list finish\n    prevEmptyEnd = state.line - nextLine > 1 && state.isEmpty(state.line - 1);\n    state.blkIndent = state.listIndent;\n    state.listIndent = oldListIndent;\n    state.tShift[nextLine] = oldTShift;\n    state.sCount[nextLine] = oldSCount;\n    state.tight = oldTight;\n    token = state.push('list_item_close', 'li', -1);\n    token.markup = String.fromCharCode(markerCharCode);\n    nextLine = state.line;\n    itemLines[1] = nextLine;\n    if (nextLine >= endLine) {\n      break;\n    }\n\n    //\n    // Try to check if list is terminated or continued.\n    //\n    if (state.sCount[nextLine] < state.blkIndent) {\n      break;\n    }\n\n    // if it's indented more than 3 spaces, it should be a code block\n    if (state.sCount[nextLine] - state.blkIndent >= 4) {\n      break;\n    }\n\n    // fail if terminating block found\n    let terminate = false;\n    for (let i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n    if (terminate) {\n      break;\n    }\n\n    // fail if list has another type\n    if (isOrdered) {\n      posAfterMarker = skipOrderedListMarker(state, nextLine);\n      if (posAfterMarker < 0) {\n        break;\n      }\n      start = state.bMarks[nextLine] + state.tShift[nextLine];\n    } else {\n      posAfterMarker = skipBulletListMarker(state, nextLine);\n      if (posAfterMarker < 0) {\n        break;\n      }\n    }\n    if (markerCharCode !== state.src.charCodeAt(posAfterMarker - 1)) {\n      break;\n    }\n  }\n\n  // Finalize list\n  if (isOrdered) {\n    token = state.push('ordered_list_close', 'ol', -1);\n  } else {\n    token = state.push('bullet_list_close', 'ul', -1);\n  }\n  token.markup = String.fromCharCode(markerCharCode);\n  listLines[1] = nextLine;\n  state.line = nextLine;\n  state.parentType = oldParentType;\n\n  // mark paragraphs tight if needed\n  if (tight) {\n    markTightParagraphs(state, listTokIdx);\n  }\n  return true;\n}\n\nfunction reference(state, startLine, _endLine, silent) {\n  let pos = state.bMarks[startLine] + state.tShift[startLine];\n  let max = state.eMarks[startLine];\n  let nextLine = startLine + 1;\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) {\n    return false;\n  }\n  if (state.src.charCodeAt(pos) !== 0x5B /* [ */) {\n    return false;\n  }\n  function getNextLine(nextLine) {\n    const endLine = state.lineMax;\n    if (nextLine >= endLine || state.isEmpty(nextLine)) {\n      // empty line or end of input\n      return null;\n    }\n    let isContinuation = false;\n\n    // this would be a code block normally, but after paragraph\n    // it's considered a lazy continuation regardless of what's there\n    if (state.sCount[nextLine] - state.blkIndent > 3) {\n      isContinuation = true;\n    }\n\n    // quirk for blockquotes, this line should already be checked by that rule\n    if (state.sCount[nextLine] < 0) {\n      isContinuation = true;\n    }\n    if (!isContinuation) {\n      const terminatorRules = state.md.block.ruler.getRules('reference');\n      const oldParentType = state.parentType;\n      state.parentType = 'reference';\n\n      // Some tags can terminate paragraph without empty line.\n      let terminate = false;\n      for (let i = 0, l = terminatorRules.length; i < l; i++) {\n        if (terminatorRules[i](state, nextLine, endLine, true)) {\n          terminate = true;\n          break;\n        }\n      }\n      state.parentType = oldParentType;\n      if (terminate) {\n        // terminated by another block\n        return null;\n      }\n    }\n    const pos = state.bMarks[nextLine] + state.tShift[nextLine];\n    const max = state.eMarks[nextLine];\n\n    // max + 1 explicitly includes the newline\n    return state.src.slice(pos, max + 1);\n  }\n  let str = state.src.slice(pos, max + 1);\n  max = str.length;\n  let labelEnd = -1;\n  for (pos = 1; pos < max; pos++) {\n    const ch = str.charCodeAt(pos);\n    if (ch === 0x5B /* [ */) {\n      return false;\n    } else if (ch === 0x5D /* ] */) {\n      labelEnd = pos;\n      break;\n    } else if (ch === 0x0A /* \\n */) {\n      const lineContent = getNextLine(nextLine);\n      if (lineContent !== null) {\n        str += lineContent;\n        max = str.length;\n        nextLine++;\n      }\n    } else if (ch === 0x5C /* \\ */) {\n      pos++;\n      if (pos < max && str.charCodeAt(pos) === 0x0A) {\n        const lineContent = getNextLine(nextLine);\n        if (lineContent !== null) {\n          str += lineContent;\n          max = str.length;\n          nextLine++;\n        }\n      }\n    }\n  }\n  if (labelEnd < 0 || str.charCodeAt(labelEnd + 1) !== 0x3A /* : */) {\n    return false;\n  }\n\n  // [label]:   destination   'title'\n  //         ^^^ skip optional whitespace here\n  for (pos = labelEnd + 2; pos < max; pos++) {\n    const ch = str.charCodeAt(pos);\n    if (ch === 0x0A) {\n      const lineContent = getNextLine(nextLine);\n      if (lineContent !== null) {\n        str += lineContent;\n        max = str.length;\n        nextLine++;\n      }\n    } else if (isSpace(ch)) ; else {\n      break;\n    }\n  }\n\n  // [label]:   destination   'title'\n  //            ^^^^^^^^^^^ parse this\n  const destRes = state.md.helpers.parseLinkDestination(str, pos, max);\n  if (!destRes.ok) {\n    return false;\n  }\n  const href = state.md.normalizeLink(destRes.str);\n  if (!state.md.validateLink(href)) {\n    return false;\n  }\n  pos = destRes.pos;\n\n  // save cursor state, we could require to rollback later\n  const destEndPos = pos;\n  const destEndLineNo = nextLine;\n\n  // [label]:   destination   'title'\n  //                       ^^^ skipping those spaces\n  const start = pos;\n  for (; pos < max; pos++) {\n    const ch = str.charCodeAt(pos);\n    if (ch === 0x0A) {\n      const lineContent = getNextLine(nextLine);\n      if (lineContent !== null) {\n        str += lineContent;\n        max = str.length;\n        nextLine++;\n      }\n    } else if (isSpace(ch)) ; else {\n      break;\n    }\n  }\n\n  // [label]:   destination   'title'\n  //                          ^^^^^^^ parse this\n  let titleRes = state.md.helpers.parseLinkTitle(str, pos, max);\n  while (titleRes.can_continue) {\n    const lineContent = getNextLine(nextLine);\n    if (lineContent === null) break;\n    str += lineContent;\n    pos = max;\n    max = str.length;\n    nextLine++;\n    titleRes = state.md.helpers.parseLinkTitle(str, pos, max, titleRes);\n  }\n  let title;\n  if (pos < max && start !== pos && titleRes.ok) {\n    title = titleRes.str;\n    pos = titleRes.pos;\n  } else {\n    title = '';\n    pos = destEndPos;\n    nextLine = destEndLineNo;\n  }\n\n  // skip trailing spaces until the rest of the line\n  while (pos < max) {\n    const ch = str.charCodeAt(pos);\n    if (!isSpace(ch)) {\n      break;\n    }\n    pos++;\n  }\n  if (pos < max && str.charCodeAt(pos) !== 0x0A) {\n    if (title) {\n      // garbage at the end of the line after title,\n      // but it could still be a valid reference if we roll back\n      title = '';\n      pos = destEndPos;\n      nextLine = destEndLineNo;\n      while (pos < max) {\n        const ch = str.charCodeAt(pos);\n        if (!isSpace(ch)) {\n          break;\n        }\n        pos++;\n      }\n    }\n  }\n  if (pos < max && str.charCodeAt(pos) !== 0x0A) {\n    // garbage at the end of the line\n    return false;\n  }\n  const label = normalizeReference(str.slice(1, labelEnd));\n  if (!label) {\n    // CommonMark 0.20 disallows empty labels\n    return false;\n  }\n\n  // Reference can not terminate anything. This check is for safety only.\n  /* istanbul ignore if */\n  if (silent) {\n    return true;\n  }\n  if (typeof state.env.references === 'undefined') {\n    state.env.references = {};\n  }\n  if (typeof state.env.references[label] === 'undefined') {\n    state.env.references[label] = {\n      title,\n      href\n    };\n  }\n  state.line = nextLine;\n  return true;\n}\n\n// List of valid html blocks names, according to commonmark spec\n// https://spec.commonmark.org/0.30/#html-blocks\n\nvar block_names = ['address', 'article', 'aside', 'base', 'basefont', 'blockquote', 'body', 'caption', 'center', 'col', 'colgroup', 'dd', 'details', 'dialog', 'dir', 'div', 'dl', 'dt', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'frame', 'frameset', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hr', 'html', 'iframe', 'legend', 'li', 'link', 'main', 'menu', 'menuitem', 'nav', 'noframes', 'ol', 'optgroup', 'option', 'p', 'param', 'search', 'section', 'summary', 'table', 'tbody', 'td', 'tfoot', 'th', 'thead', 'title', 'tr', 'track', 'ul'];\n\n// Regexps to match html elements\n\nconst attr_name = '[a-zA-Z_:][a-zA-Z0-9:._-]*';\nconst unquoted = '[^\"\\'=<>`\\\\x00-\\\\x20]+';\nconst single_quoted = \"'[^']*'\";\nconst double_quoted = '\"[^\"]*\"';\nconst attr_value = '(?:' + unquoted + '|' + single_quoted + '|' + double_quoted + ')';\nconst attribute = '(?:\\\\s+' + attr_name + '(?:\\\\s*=\\\\s*' + attr_value + ')?)';\nconst open_tag = '<[A-Za-z][A-Za-z0-9\\\\-]*' + attribute + '*\\\\s*\\\\/?>';\nconst close_tag = '<\\\\/[A-Za-z][A-Za-z0-9\\\\-]*\\\\s*>';\nconst comment = '<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->';\nconst processing = '<[?][\\\\s\\\\S]*?[?]>';\nconst declaration = '<![A-Za-z][^>]*>';\nconst cdata = '<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>';\nconst HTML_TAG_RE = new RegExp('^(?:' + open_tag + '|' + close_tag + '|' + comment + '|' + processing + '|' + declaration + '|' + cdata + ')');\nconst HTML_OPEN_CLOSE_TAG_RE = new RegExp('^(?:' + open_tag + '|' + close_tag + ')');\n\n// HTML block\n\n\n// An array of opening and corresponding closing sequences for html tags,\n// last argument defines whether it can terminate a paragraph or not\n//\nconst HTML_SEQUENCES = [[/^<(script|pre|style|textarea)(?=(\\s|>|$))/i, /<\\/(script|pre|style|textarea)>/i, true], [/^<!--/, /-->/, true], [/^<\\?/, /\\?>/, true], [/^<![A-Z]/, />/, true], [/^<!\\[CDATA\\[/, /\\]\\]>/, true], [new RegExp('^</?(' + block_names.join('|') + ')(?=(\\\\s|/?>|$))', 'i'), /^$/, true], [new RegExp(HTML_OPEN_CLOSE_TAG_RE.source + '\\\\s*$'), /^$/, false]];\nfunction html_block(state, startLine, endLine, silent) {\n  let pos = state.bMarks[startLine] + state.tShift[startLine];\n  let max = state.eMarks[startLine];\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) {\n    return false;\n  }\n  if (!state.md.options.html) {\n    return false;\n  }\n  if (state.src.charCodeAt(pos) !== 0x3C /* < */) {\n    return false;\n  }\n  let lineText = state.src.slice(pos, max);\n  let i = 0;\n  for (; i < HTML_SEQUENCES.length; i++) {\n    if (HTML_SEQUENCES[i][0].test(lineText)) {\n      break;\n    }\n  }\n  if (i === HTML_SEQUENCES.length) {\n    return false;\n  }\n  if (silent) {\n    // true if this sequence can be a terminator, false otherwise\n    return HTML_SEQUENCES[i][2];\n  }\n  let nextLine = startLine + 1;\n\n  // If we are here - we detected HTML block.\n  // Let's roll down till block end.\n  if (!HTML_SEQUENCES[i][1].test(lineText)) {\n    for (; nextLine < endLine; nextLine++) {\n      if (state.sCount[nextLine] < state.blkIndent) {\n        break;\n      }\n      pos = state.bMarks[nextLine] + state.tShift[nextLine];\n      max = state.eMarks[nextLine];\n      lineText = state.src.slice(pos, max);\n      if (HTML_SEQUENCES[i][1].test(lineText)) {\n        if (lineText.length !== 0) {\n          nextLine++;\n        }\n        break;\n      }\n    }\n  }\n  state.line = nextLine;\n  const token = state.push('html_block', '', 0);\n  token.map = [startLine, nextLine];\n  token.content = state.getLines(startLine, nextLine, state.blkIndent, true);\n  return true;\n}\n\n// heading (#, ##, ...)\n\nfunction heading(state, startLine, endLine, silent) {\n  let pos = state.bMarks[startLine] + state.tShift[startLine];\n  let max = state.eMarks[startLine];\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) {\n    return false;\n  }\n  let ch = state.src.charCodeAt(pos);\n  if (ch !== 0x23 /* # */ || pos >= max) {\n    return false;\n  }\n\n  // count heading level\n  let level = 1;\n  ch = state.src.charCodeAt(++pos);\n  while (ch === 0x23 /* # */ && pos < max && level <= 6) {\n    level++;\n    ch = state.src.charCodeAt(++pos);\n  }\n  if (level > 6 || pos < max && !isSpace(ch)) {\n    return false;\n  }\n  if (silent) {\n    return true;\n  }\n\n  // Let's cut tails like '    ###  ' from the end of string\n\n  max = state.skipSpacesBack(max, pos);\n  const tmp = state.skipCharsBack(max, 0x23, pos); // #\n  if (tmp > pos && isSpace(state.src.charCodeAt(tmp - 1))) {\n    max = tmp;\n  }\n  state.line = startLine + 1;\n  const token_o = state.push('heading_open', 'h' + String(level), 1);\n  token_o.markup = '########'.slice(0, level);\n  token_o.map = [startLine, state.line];\n  const token_i = state.push('inline', '', 0);\n  token_i.content = state.src.slice(pos, max).trim();\n  token_i.map = [startLine, state.line];\n  token_i.children = [];\n  const token_c = state.push('heading_close', 'h' + String(level), -1);\n  token_c.markup = '########'.slice(0, level);\n  return true;\n}\n\n// lheading (---, ===)\n\nfunction lheading(state, startLine, endLine /*, silent */) {\n  const terminatorRules = state.md.block.ruler.getRules('paragraph');\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) {\n    return false;\n  }\n  const oldParentType = state.parentType;\n  state.parentType = 'paragraph'; // use paragraph to match terminatorRules\n\n  // jump line-by-line until empty one or EOF\n  let level = 0;\n  let marker;\n  let nextLine = startLine + 1;\n  for (; nextLine < endLine && !state.isEmpty(nextLine); nextLine++) {\n    // this would be a code block normally, but after paragraph\n    // it's considered a lazy continuation regardless of what's there\n    if (state.sCount[nextLine] - state.blkIndent > 3) {\n      continue;\n    }\n\n    //\n    // Check for underline in setext header\n    //\n    if (state.sCount[nextLine] >= state.blkIndent) {\n      let pos = state.bMarks[nextLine] + state.tShift[nextLine];\n      const max = state.eMarks[nextLine];\n      if (pos < max) {\n        marker = state.src.charCodeAt(pos);\n        if (marker === 0x2D /* - */ || marker === 0x3D /* = */) {\n          pos = state.skipChars(pos, marker);\n          pos = state.skipSpaces(pos);\n          if (pos >= max) {\n            level = marker === 0x3D /* = */ ? 1 : 2;\n            break;\n          }\n        }\n      }\n    }\n\n    // quirk for blockquotes, this line should already be checked by that rule\n    if (state.sCount[nextLine] < 0) {\n      continue;\n    }\n\n    // Some tags can terminate paragraph without empty line.\n    let terminate = false;\n    for (let i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n    if (terminate) {\n      break;\n    }\n  }\n  if (!level) {\n    // Didn't find valid underline\n    return false;\n  }\n  const content = state.getLines(startLine, nextLine, state.blkIndent, false).trim();\n  state.line = nextLine + 1;\n  const token_o = state.push('heading_open', 'h' + String(level), 1);\n  token_o.markup = String.fromCharCode(marker);\n  token_o.map = [startLine, state.line];\n  const token_i = state.push('inline', '', 0);\n  token_i.content = content;\n  token_i.map = [startLine, state.line - 1];\n  token_i.children = [];\n  const token_c = state.push('heading_close', 'h' + String(level), -1);\n  token_c.markup = String.fromCharCode(marker);\n  state.parentType = oldParentType;\n  return true;\n}\n\n// Paragraph\n\nfunction paragraph(state, startLine, endLine) {\n  const terminatorRules = state.md.block.ruler.getRules('paragraph');\n  const oldParentType = state.parentType;\n  let nextLine = startLine + 1;\n  state.parentType = 'paragraph';\n\n  // jump line-by-line until empty one or EOF\n  for (; nextLine < endLine && !state.isEmpty(nextLine); nextLine++) {\n    // this would be a code block normally, but after paragraph\n    // it's considered a lazy continuation regardless of what's there\n    if (state.sCount[nextLine] - state.blkIndent > 3) {\n      continue;\n    }\n\n    // quirk for blockquotes, this line should already be checked by that rule\n    if (state.sCount[nextLine] < 0) {\n      continue;\n    }\n\n    // Some tags can terminate paragraph without empty line.\n    let terminate = false;\n    for (let i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n    if (terminate) {\n      break;\n    }\n  }\n  const content = state.getLines(startLine, nextLine, state.blkIndent, false).trim();\n  state.line = nextLine;\n  const token_o = state.push('paragraph_open', 'p', 1);\n  token_o.map = [startLine, state.line];\n  const token_i = state.push('inline', '', 0);\n  token_i.content = content;\n  token_i.map = [startLine, state.line];\n  token_i.children = [];\n  state.push('paragraph_close', 'p', -1);\n  state.parentType = oldParentType;\n  return true;\n}\n\n/** internal\n * class ParserBlock\n *\n * Block-level tokenizer.\n **/\n\nconst _rules$1 = [\n// First 2 params - rule name & source. Secondary array - list of rules,\n// which can be terminated by this one.\n['table', table, ['paragraph', 'reference']], ['code', code], ['fence', fence, ['paragraph', 'reference', 'blockquote', 'list']], ['blockquote', blockquote, ['paragraph', 'reference', 'blockquote', 'list']], ['hr', hr, ['paragraph', 'reference', 'blockquote', 'list']], ['list', list, ['paragraph', 'reference', 'blockquote']], ['reference', reference], ['html_block', html_block, ['paragraph', 'reference', 'blockquote']], ['heading', heading, ['paragraph', 'reference', 'blockquote']], ['lheading', lheading], ['paragraph', paragraph]];\n\n/**\n * new ParserBlock()\n **/\nfunction ParserBlock() {\n  /**\n   * ParserBlock#ruler -> Ruler\n   *\n   * [[Ruler]] instance. Keep configuration of block rules.\n   **/\n  this.ruler = new Ruler();\n  for (let i = 0; i < _rules$1.length; i++) {\n    this.ruler.push(_rules$1[i][0], _rules$1[i][1], {\n      alt: (_rules$1[i][2] || []).slice()\n    });\n  }\n}\n\n// Generate tokens for input range\n//\nParserBlock.prototype.tokenize = function (state, startLine, endLine) {\n  const rules = this.ruler.getRules('');\n  const len = rules.length;\n  const maxNesting = state.md.options.maxNesting;\n  let line = startLine;\n  let hasEmptyLines = false;\n  while (line < endLine) {\n    state.line = line = state.skipEmptyLines(line);\n    if (line >= endLine) {\n      break;\n    }\n\n    // Termination condition for nested calls.\n    // Nested calls currently used for blockquotes & lists\n    if (state.sCount[line] < state.blkIndent) {\n      break;\n    }\n\n    // If nesting level exceeded - skip tail to the end. That's not ordinary\n    // situation and we should not care about content.\n    if (state.level >= maxNesting) {\n      state.line = endLine;\n      break;\n    }\n\n    // Try all possible rules.\n    // On success, rule should:\n    //\n    // - update `state.line`\n    // - update `state.tokens`\n    // - return true\n    const prevLine = state.line;\n    let ok = false;\n    for (let i = 0; i < len; i++) {\n      ok = rules[i](state, line, endLine, false);\n      if (ok) {\n        if (prevLine >= state.line) {\n          throw new Error(\"block rule didn't increment state.line\");\n        }\n        break;\n      }\n    }\n\n    // this can only happen if user disables paragraph rule\n    if (!ok) throw new Error('none of the block rules matched');\n\n    // set state.tight if we had an empty line before current tag\n    // i.e. latest empty line should not count\n    state.tight = !hasEmptyLines;\n\n    // paragraph might \"eat\" one newline after it in nested lists\n    if (state.isEmpty(state.line - 1)) {\n      hasEmptyLines = true;\n    }\n    line = state.line;\n    if (line < endLine && state.isEmpty(line)) {\n      hasEmptyLines = true;\n      line++;\n      state.line = line;\n    }\n  }\n};\n\n/**\n * ParserBlock.parse(str, md, env, outTokens)\n *\n * Process input string and push block tokens into `outTokens`\n **/\nParserBlock.prototype.parse = function (src, md, env, outTokens) {\n  if (!src) {\n    return;\n  }\n  const state = new this.State(src, md, env, outTokens);\n  this.tokenize(state, state.line, state.lineMax);\n};\nParserBlock.prototype.State = StateBlock;\n\n// Inline parser state\n\nfunction StateInline(src, md, env, outTokens) {\n  this.src = src;\n  this.env = env;\n  this.md = md;\n  this.tokens = outTokens;\n  this.tokens_meta = Array(outTokens.length);\n  this.pos = 0;\n  this.posMax = this.src.length;\n  this.level = 0;\n  this.pending = '';\n  this.pendingLevel = 0;\n\n  // Stores { start: end } pairs. Useful for backtrack\n  // optimization of pairs parse (emphasis, strikes).\n  this.cache = {};\n\n  // List of emphasis-like delimiters for current tag\n  this.delimiters = [];\n\n  // Stack of delimiter lists for upper level tags\n  this._prev_delimiters = [];\n\n  // backtick length => last seen position\n  this.backticks = {};\n  this.backticksScanned = false;\n\n  // Counter used to disable inline linkify-it execution\n  // inside <a> and markdown links\n  this.linkLevel = 0;\n}\n\n// Flush pending text\n//\nStateInline.prototype.pushPending = function () {\n  const token = new Token('text', '', 0);\n  token.content = this.pending;\n  token.level = this.pendingLevel;\n  this.tokens.push(token);\n  this.pending = '';\n  return token;\n};\n\n// Push new token to \"stream\".\n// If pending text exists - flush it as text token\n//\nStateInline.prototype.push = function (type, tag, nesting) {\n  if (this.pending) {\n    this.pushPending();\n  }\n  const token = new Token(type, tag, nesting);\n  let token_meta = null;\n  if (nesting < 0) {\n    // closing tag\n    this.level--;\n    this.delimiters = this._prev_delimiters.pop();\n  }\n  token.level = this.level;\n  if (nesting > 0) {\n    // opening tag\n    this.level++;\n    this._prev_delimiters.push(this.delimiters);\n    this.delimiters = [];\n    token_meta = {\n      delimiters: this.delimiters\n    };\n  }\n  this.pendingLevel = this.level;\n  this.tokens.push(token);\n  this.tokens_meta.push(token_meta);\n  return token;\n};\n\n// Scan a sequence of emphasis-like markers, and determine whether\n// it can start an emphasis sequence or end an emphasis sequence.\n//\n//  - start - position to scan from (it should point at a valid marker);\n//  - canSplitWord - determine if these markers can be found inside a word\n//\nStateInline.prototype.scanDelims = function (start, canSplitWord) {\n  const max = this.posMax;\n  const marker = this.src.charCodeAt(start);\n\n  // treat beginning of the line as a whitespace\n  const lastChar = start > 0 ? this.src.charCodeAt(start - 1) : 0x20;\n  let pos = start;\n  while (pos < max && this.src.charCodeAt(pos) === marker) {\n    pos++;\n  }\n  const count = pos - start;\n\n  // treat end of the line as a whitespace\n  const nextChar = pos < max ? this.src.charCodeAt(pos) : 0x20;\n  const isLastPunctChar = isMdAsciiPunct(lastChar) || isPunctChar(String.fromCharCode(lastChar));\n  const isNextPunctChar = isMdAsciiPunct(nextChar) || isPunctChar(String.fromCharCode(nextChar));\n  const isLastWhiteSpace = isWhiteSpace(lastChar);\n  const isNextWhiteSpace = isWhiteSpace(nextChar);\n  const left_flanking = !isNextWhiteSpace && (!isNextPunctChar || isLastWhiteSpace || isLastPunctChar);\n  const right_flanking = !isLastWhiteSpace && (!isLastPunctChar || isNextWhiteSpace || isNextPunctChar);\n  const can_open = left_flanking && (canSplitWord || !right_flanking || isLastPunctChar);\n  const can_close = right_flanking && (canSplitWord || !left_flanking || isNextPunctChar);\n  return {\n    can_open,\n    can_close,\n    length: count\n  };\n};\n\n// re-export Token class to use in block rules\nStateInline.prototype.Token = Token;\n\n// Skip text characters for text token, place those to pending buffer\n// and increment current pos\n\n// Rule to skip pure text\n// '{}$%@~+=:' reserved for extentions\n\n// !, \", #, $, %, &, ', (, ), *, +, ,, -, ., /, :, ;, <, =, >, ?, @, [, \\, ], ^, _, `, {, |, }, or ~\n\n// !!!! Don't confuse with \"Markdown ASCII Punctuation\" chars\n// http://spec.commonmark.org/0.15/#ascii-punctuation-character\nfunction isTerminatorChar(ch) {\n  switch (ch) {\n    case 0x0A /* \\n */:\n    case 0x21 /* ! */:\n    case 0x23 /* # */:\n    case 0x24 /* $ */:\n    case 0x25 /* % */:\n    case 0x26 /* & */:\n    case 0x2A /* * */:\n    case 0x2B /* + */:\n    case 0x2D /* - */:\n    case 0x3A /* : */:\n    case 0x3C /* < */:\n    case 0x3D /* = */:\n    case 0x3E /* > */:\n    case 0x40 /* @ */:\n    case 0x5B /* [ */:\n    case 0x5C /* \\ */:\n    case 0x5D /* ] */:\n    case 0x5E /* ^ */:\n    case 0x5F /* _ */:\n    case 0x60 /* ` */:\n    case 0x7B /* { */:\n    case 0x7D /* } */:\n    case 0x7E /* ~ */:\n      return true;\n    default:\n      return false;\n  }\n}\nfunction text(state, silent) {\n  let pos = state.pos;\n  while (pos < state.posMax && !isTerminatorChar(state.src.charCodeAt(pos))) {\n    pos++;\n  }\n  if (pos === state.pos) {\n    return false;\n  }\n  if (!silent) {\n    state.pending += state.src.slice(state.pos, pos);\n  }\n  state.pos = pos;\n  return true;\n}\n\n// Alternative implementation, for memory.\n//\n// It costs 10% of performance, but allows extend terminators list, if place it\n// to `ParserInline` property. Probably, will switch to it sometime, such\n// flexibility required.\n\n/*\nvar TERMINATOR_RE = /[\\n!#$%&*+\\-:<=>@[\\\\\\]^_`{}~]/;\n\nmodule.exports = function text(state, silent) {\n  var pos = state.pos,\n      idx = state.src.slice(pos).search(TERMINATOR_RE);\n\n  // first char is terminator -> empty text\n  if (idx === 0) { return false; }\n\n  // no terminator -> text till end of string\n  if (idx < 0) {\n    if (!silent) { state.pending += state.src.slice(pos); }\n    state.pos = state.src.length;\n    return true;\n  }\n\n  if (!silent) { state.pending += state.src.slice(pos, pos + idx); }\n\n  state.pos += idx;\n\n  return true;\n}; */\n\n// Process links like https://example.org/\n\n// RFC3986: scheme = ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\nconst SCHEME_RE = /(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;\nfunction linkify(state, silent) {\n  if (!state.md.options.linkify) return false;\n  if (state.linkLevel > 0) return false;\n  const pos = state.pos;\n  const max = state.posMax;\n  if (pos + 3 > max) return false;\n  if (state.src.charCodeAt(pos) !== 0x3A /* : */) return false;\n  if (state.src.charCodeAt(pos + 1) !== 0x2F /* / */) return false;\n  if (state.src.charCodeAt(pos + 2) !== 0x2F /* / */) return false;\n  const match = state.pending.match(SCHEME_RE);\n  if (!match) return false;\n  const proto = match[1];\n  const link = state.md.linkify.matchAtStart(state.src.slice(pos - proto.length));\n  if (!link) return false;\n  let url = link.url;\n\n  // invalid link, but still detected by linkify somehow;\n  // need to check to prevent infinite loop below\n  if (url.length <= proto.length) return false;\n\n  // disallow '*' at the end of the link (conflicts with emphasis)\n  url = url.replace(/\\*+$/, '');\n  const fullUrl = state.md.normalizeLink(url);\n  if (!state.md.validateLink(fullUrl)) return false;\n  if (!silent) {\n    state.pending = state.pending.slice(0, -proto.length);\n    const token_o = state.push('link_open', 'a', 1);\n    token_o.attrs = [['href', fullUrl]];\n    token_o.markup = 'linkify';\n    token_o.info = 'auto';\n    const token_t = state.push('text', '', 0);\n    token_t.content = state.md.normalizeLinkText(url);\n    const token_c = state.push('link_close', 'a', -1);\n    token_c.markup = 'linkify';\n    token_c.info = 'auto';\n  }\n  state.pos += url.length - proto.length;\n  return true;\n}\n\n// Proceess '\\n'\n\nfunction newline(state, silent) {\n  let pos = state.pos;\n  if (state.src.charCodeAt(pos) !== 0x0A /* \\n */) {\n    return false;\n  }\n  const pmax = state.pending.length - 1;\n  const max = state.posMax;\n\n  // '  \\n' -> hardbreak\n  // Lookup in pending chars is bad practice! Don't copy to other rules!\n  // Pending string is stored in concat mode, indexed lookups will cause\n  // convertion to flat mode.\n  if (!silent) {\n    if (pmax >= 0 && state.pending.charCodeAt(pmax) === 0x20) {\n      if (pmax >= 1 && state.pending.charCodeAt(pmax - 1) === 0x20) {\n        // Find whitespaces tail of pending chars.\n        let ws = pmax - 1;\n        while (ws >= 1 && state.pending.charCodeAt(ws - 1) === 0x20) ws--;\n        state.pending = state.pending.slice(0, ws);\n        state.push('hardbreak', 'br', 0);\n      } else {\n        state.pending = state.pending.slice(0, -1);\n        state.push('softbreak', 'br', 0);\n      }\n    } else {\n      state.push('softbreak', 'br', 0);\n    }\n  }\n  pos++;\n\n  // skip heading spaces for next line\n  while (pos < max && isSpace(state.src.charCodeAt(pos))) {\n    pos++;\n  }\n  state.pos = pos;\n  return true;\n}\n\n// Process escaped chars and hardbreaks\n\nconst ESCAPED = [];\nfor (let i = 0; i < 256; i++) {\n  ESCAPED.push(0);\n}\n'\\\\!\"#$%&\\'()*+,./:;<=>?@[]^_`{|}~-'.split('').forEach(function (ch) {\n  ESCAPED[ch.charCodeAt(0)] = 1;\n});\nfunction escape(state, silent) {\n  let pos = state.pos;\n  const max = state.posMax;\n  if (state.src.charCodeAt(pos) !== 0x5C /* \\ */) return false;\n  pos++;\n\n  // '\\' at the end of the inline block\n  if (pos >= max) return false;\n  let ch1 = state.src.charCodeAt(pos);\n  if (ch1 === 0x0A) {\n    if (!silent) {\n      state.push('hardbreak', 'br', 0);\n    }\n    pos++;\n    // skip leading whitespaces from next line\n    while (pos < max) {\n      ch1 = state.src.charCodeAt(pos);\n      if (!isSpace(ch1)) break;\n      pos++;\n    }\n    state.pos = pos;\n    return true;\n  }\n  let escapedStr = state.src[pos];\n  if (ch1 >= 0xD800 && ch1 <= 0xDBFF && pos + 1 < max) {\n    const ch2 = state.src.charCodeAt(pos + 1);\n    if (ch2 >= 0xDC00 && ch2 <= 0xDFFF) {\n      escapedStr += state.src[pos + 1];\n      pos++;\n    }\n  }\n  const origStr = '\\\\' + escapedStr;\n  if (!silent) {\n    const token = state.push('text_special', '', 0);\n    if (ch1 < 256 && ESCAPED[ch1] !== 0) {\n      token.content = escapedStr;\n    } else {\n      token.content = origStr;\n    }\n    token.markup = origStr;\n    token.info = 'escape';\n  }\n  state.pos = pos + 1;\n  return true;\n}\n\n// Parse backticks\n\nfunction backtick(state, silent) {\n  let pos = state.pos;\n  const ch = state.src.charCodeAt(pos);\n  if (ch !== 0x60 /* ` */) {\n    return false;\n  }\n  const start = pos;\n  pos++;\n  const max = state.posMax;\n\n  // scan marker length\n  while (pos < max && state.src.charCodeAt(pos) === 0x60 /* ` */) {\n    pos++;\n  }\n  const marker = state.src.slice(start, pos);\n  const openerLength = marker.length;\n  if (state.backticksScanned && (state.backticks[openerLength] || 0) <= start) {\n    if (!silent) state.pending += marker;\n    state.pos += openerLength;\n    return true;\n  }\n  let matchEnd = pos;\n  let matchStart;\n\n  // Nothing found in the cache, scan until the end of the line (or until marker is found)\n  while ((matchStart = state.src.indexOf('`', matchEnd)) !== -1) {\n    matchEnd = matchStart + 1;\n\n    // scan marker length\n    while (matchEnd < max && state.src.charCodeAt(matchEnd) === 0x60 /* ` */) {\n      matchEnd++;\n    }\n    const closerLength = matchEnd - matchStart;\n    if (closerLength === openerLength) {\n      // Found matching closer length.\n      if (!silent) {\n        const token = state.push('code_inline', 'code', 0);\n        token.markup = marker;\n        token.content = state.src.slice(pos, matchStart).replace(/\\n/g, ' ').replace(/^ (.+) $/, '$1');\n      }\n      state.pos = matchEnd;\n      return true;\n    }\n\n    // Some different length found, put it in cache as upper limit of where closer can be found\n    state.backticks[closerLength] = matchStart;\n  }\n\n  // Scanned through the end, didn't find anything\n  state.backticksScanned = true;\n  if (!silent) state.pending += marker;\n  state.pos += openerLength;\n  return true;\n}\n\n// ~~strike through~~\n//\n\n// Insert each marker as a separate text token, and add it to delimiter list\n//\nfunction strikethrough_tokenize(state, silent) {\n  const start = state.pos;\n  const marker = state.src.charCodeAt(start);\n  if (silent) {\n    return false;\n  }\n  if (marker !== 0x7E /* ~ */) {\n    return false;\n  }\n  const scanned = state.scanDelims(state.pos, true);\n  let len = scanned.length;\n  const ch = String.fromCharCode(marker);\n  if (len < 2) {\n    return false;\n  }\n  let token;\n  if (len % 2) {\n    token = state.push('text', '', 0);\n    token.content = ch;\n    len--;\n  }\n  for (let i = 0; i < len; i += 2) {\n    token = state.push('text', '', 0);\n    token.content = ch + ch;\n    state.delimiters.push({\n      marker,\n      length: 0,\n      // disable \"rule of 3\" length checks meant for emphasis\n      token: state.tokens.length - 1,\n      end: -1,\n      open: scanned.can_open,\n      close: scanned.can_close\n    });\n  }\n  state.pos += scanned.length;\n  return true;\n}\nfunction postProcess$1(state, delimiters) {\n  let token;\n  const loneMarkers = [];\n  const max = delimiters.length;\n  for (let i = 0; i < max; i++) {\n    const startDelim = delimiters[i];\n    if (startDelim.marker !== 0x7E /* ~ */) {\n      continue;\n    }\n    if (startDelim.end === -1) {\n      continue;\n    }\n    const endDelim = delimiters[startDelim.end];\n    token = state.tokens[startDelim.token];\n    token.type = 's_open';\n    token.tag = 's';\n    token.nesting = 1;\n    token.markup = '~~';\n    token.content = '';\n    token = state.tokens[endDelim.token];\n    token.type = 's_close';\n    token.tag = 's';\n    token.nesting = -1;\n    token.markup = '~~';\n    token.content = '';\n    if (state.tokens[endDelim.token - 1].type === 'text' && state.tokens[endDelim.token - 1].content === '~') {\n      loneMarkers.push(endDelim.token - 1);\n    }\n  }\n\n  // If a marker sequence has an odd number of characters, it's splitted\n  // like this: `~~~~~` -> `~` + `~~` + `~~`, leaving one marker at the\n  // start of the sequence.\n  //\n  // So, we have to move all those markers after subsequent s_close tags.\n  //\n  while (loneMarkers.length) {\n    const i = loneMarkers.pop();\n    let j = i + 1;\n    while (j < state.tokens.length && state.tokens[j].type === 's_close') {\n      j++;\n    }\n    j--;\n    if (i !== j) {\n      token = state.tokens[j];\n      state.tokens[j] = state.tokens[i];\n      state.tokens[i] = token;\n    }\n  }\n}\n\n// Walk through delimiter list and replace text tokens with tags\n//\nfunction strikethrough_postProcess(state) {\n  const tokens_meta = state.tokens_meta;\n  const max = state.tokens_meta.length;\n  postProcess$1(state, state.delimiters);\n  for (let curr = 0; curr < max; curr++) {\n    if (tokens_meta[curr] && tokens_meta[curr].delimiters) {\n      postProcess$1(state, tokens_meta[curr].delimiters);\n    }\n  }\n}\nvar r_strikethrough = {\n  tokenize: strikethrough_tokenize,\n  postProcess: strikethrough_postProcess\n};\n\n// Process *this* and _that_\n//\n\n// Insert each marker as a separate text token, and add it to delimiter list\n//\nfunction emphasis_tokenize(state, silent) {\n  const start = state.pos;\n  const marker = state.src.charCodeAt(start);\n  if (silent) {\n    return false;\n  }\n  if (marker !== 0x5F /* _ */ && marker !== 0x2A /* * */) {\n    return false;\n  }\n  const scanned = state.scanDelims(state.pos, marker === 0x2A);\n  for (let i = 0; i < scanned.length; i++) {\n    const token = state.push('text', '', 0);\n    token.content = String.fromCharCode(marker);\n    state.delimiters.push({\n      // Char code of the starting marker (number).\n      //\n      marker,\n      // Total length of these series of delimiters.\n      //\n      length: scanned.length,\n      // A position of the token this delimiter corresponds to.\n      //\n      token: state.tokens.length - 1,\n      // If this delimiter is matched as a valid opener, `end` will be\n      // equal to its position, otherwise it's `-1`.\n      //\n      end: -1,\n      // Boolean flags that determine if this delimiter could open or close\n      // an emphasis.\n      //\n      open: scanned.can_open,\n      close: scanned.can_close\n    });\n  }\n  state.pos += scanned.length;\n  return true;\n}\nfunction postProcess(state, delimiters) {\n  const max = delimiters.length;\n  for (let i = max - 1; i >= 0; i--) {\n    const startDelim = delimiters[i];\n    if (startDelim.marker !== 0x5F /* _ */ && startDelim.marker !== 0x2A /* * */) {\n      continue;\n    }\n\n    // Process only opening markers\n    if (startDelim.end === -1) {\n      continue;\n    }\n    const endDelim = delimiters[startDelim.end];\n\n    // If the previous delimiter has the same marker and is adjacent to this one,\n    // merge those into one strong delimiter.\n    //\n    // `<em><em>whatever</em></em>` -> `<strong>whatever</strong>`\n    //\n    const isStrong = i > 0 && delimiters[i - 1].end === startDelim.end + 1 &&\n    // check that first two markers match and adjacent\n    delimiters[i - 1].marker === startDelim.marker && delimiters[i - 1].token === startDelim.token - 1 &&\n    // check that last two markers are adjacent (we can safely assume they match)\n    delimiters[startDelim.end + 1].token === endDelim.token + 1;\n    const ch = String.fromCharCode(startDelim.marker);\n    const token_o = state.tokens[startDelim.token];\n    token_o.type = isStrong ? 'strong_open' : 'em_open';\n    token_o.tag = isStrong ? 'strong' : 'em';\n    token_o.nesting = 1;\n    token_o.markup = isStrong ? ch + ch : ch;\n    token_o.content = '';\n    const token_c = state.tokens[endDelim.token];\n    token_c.type = isStrong ? 'strong_close' : 'em_close';\n    token_c.tag = isStrong ? 'strong' : 'em';\n    token_c.nesting = -1;\n    token_c.markup = isStrong ? ch + ch : ch;\n    token_c.content = '';\n    if (isStrong) {\n      state.tokens[delimiters[i - 1].token].content = '';\n      state.tokens[delimiters[startDelim.end + 1].token].content = '';\n      i--;\n    }\n  }\n}\n\n// Walk through delimiter list and replace text tokens with tags\n//\nfunction emphasis_post_process(state) {\n  const tokens_meta = state.tokens_meta;\n  const max = state.tokens_meta.length;\n  postProcess(state, state.delimiters);\n  for (let curr = 0; curr < max; curr++) {\n    if (tokens_meta[curr] && tokens_meta[curr].delimiters) {\n      postProcess(state, tokens_meta[curr].delimiters);\n    }\n  }\n}\nvar r_emphasis = {\n  tokenize: emphasis_tokenize,\n  postProcess: emphasis_post_process\n};\n\n// Process [link](<to> \"stuff\")\n\nfunction link(state, silent) {\n  let code, label, res, ref;\n  let href = '';\n  let title = '';\n  let start = state.pos;\n  let parseReference = true;\n  if (state.src.charCodeAt(state.pos) !== 0x5B /* [ */) {\n    return false;\n  }\n  const oldPos = state.pos;\n  const max = state.posMax;\n  const labelStart = state.pos + 1;\n  const labelEnd = state.md.helpers.parseLinkLabel(state, state.pos, true);\n\n  // parser failed to find ']', so it's not a valid link\n  if (labelEnd < 0) {\n    return false;\n  }\n  let pos = labelEnd + 1;\n  if (pos < max && state.src.charCodeAt(pos) === 0x28 /* ( */) {\n    //\n    // Inline link\n    //\n\n    // might have found a valid shortcut link, disable reference parsing\n    parseReference = false;\n\n    // [link](  <href>  \"title\"  )\n    //        ^^ skipping these spaces\n    pos++;\n    for (; pos < max; pos++) {\n      code = state.src.charCodeAt(pos);\n      if (!isSpace(code) && code !== 0x0A) {\n        break;\n      }\n    }\n    if (pos >= max) {\n      return false;\n    }\n\n    // [link](  <href>  \"title\"  )\n    //          ^^^^^^ parsing link destination\n    start = pos;\n    res = state.md.helpers.parseLinkDestination(state.src, pos, state.posMax);\n    if (res.ok) {\n      href = state.md.normalizeLink(res.str);\n      if (state.md.validateLink(href)) {\n        pos = res.pos;\n      } else {\n        href = '';\n      }\n\n      // [link](  <href>  \"title\"  )\n      //                ^^ skipping these spaces\n      start = pos;\n      for (; pos < max; pos++) {\n        code = state.src.charCodeAt(pos);\n        if (!isSpace(code) && code !== 0x0A) {\n          break;\n        }\n      }\n\n      // [link](  <href>  \"title\"  )\n      //                  ^^^^^^^ parsing link title\n      res = state.md.helpers.parseLinkTitle(state.src, pos, state.posMax);\n      if (pos < max && start !== pos && res.ok) {\n        title = res.str;\n        pos = res.pos;\n\n        // [link](  <href>  \"title\"  )\n        //                         ^^ skipping these spaces\n        for (; pos < max; pos++) {\n          code = state.src.charCodeAt(pos);\n          if (!isSpace(code) && code !== 0x0A) {\n            break;\n          }\n        }\n      }\n    }\n    if (pos >= max || state.src.charCodeAt(pos) !== 0x29 /* ) */) {\n      // parsing a valid shortcut link failed, fallback to reference\n      parseReference = true;\n    }\n    pos++;\n  }\n  if (parseReference) {\n    //\n    // Link reference\n    //\n    if (typeof state.env.references === 'undefined') {\n      return false;\n    }\n    if (pos < max && state.src.charCodeAt(pos) === 0x5B /* [ */) {\n      start = pos + 1;\n      pos = state.md.helpers.parseLinkLabel(state, pos);\n      if (pos >= 0) {\n        label = state.src.slice(start, pos++);\n      } else {\n        pos = labelEnd + 1;\n      }\n    } else {\n      pos = labelEnd + 1;\n    }\n\n    // covers label === '' and label === undefined\n    // (collapsed reference link and shortcut reference link respectively)\n    if (!label) {\n      label = state.src.slice(labelStart, labelEnd);\n    }\n    ref = state.env.references[normalizeReference(label)];\n    if (!ref) {\n      state.pos = oldPos;\n      return false;\n    }\n    href = ref.href;\n    title = ref.title;\n  }\n\n  //\n  // We found the end of the link, and know for a fact it's a valid link;\n  // so all that's left to do is to call tokenizer.\n  //\n  if (!silent) {\n    state.pos = labelStart;\n    state.posMax = labelEnd;\n    const token_o = state.push('link_open', 'a', 1);\n    const attrs = [['href', href]];\n    token_o.attrs = attrs;\n    if (title) {\n      attrs.push(['title', title]);\n    }\n    state.linkLevel++;\n    state.md.inline.tokenize(state);\n    state.linkLevel--;\n    state.push('link_close', 'a', -1);\n  }\n  state.pos = pos;\n  state.posMax = max;\n  return true;\n}\n\n// Process ![image](<src> \"title\")\n\nfunction image(state, silent) {\n  let code, content, label, pos, ref, res, title, start;\n  let href = '';\n  const oldPos = state.pos;\n  const max = state.posMax;\n  if (state.src.charCodeAt(state.pos) !== 0x21 /* ! */) {\n    return false;\n  }\n  if (state.src.charCodeAt(state.pos + 1) !== 0x5B /* [ */) {\n    return false;\n  }\n  const labelStart = state.pos + 2;\n  const labelEnd = state.md.helpers.parseLinkLabel(state, state.pos + 1, false);\n\n  // parser failed to find ']', so it's not a valid link\n  if (labelEnd < 0) {\n    return false;\n  }\n  pos = labelEnd + 1;\n  if (pos < max && state.src.charCodeAt(pos) === 0x28 /* ( */) {\n    //\n    // Inline link\n    //\n\n    // [link](  <href>  \"title\"  )\n    //        ^^ skipping these spaces\n    pos++;\n    for (; pos < max; pos++) {\n      code = state.src.charCodeAt(pos);\n      if (!isSpace(code) && code !== 0x0A) {\n        break;\n      }\n    }\n    if (pos >= max) {\n      return false;\n    }\n\n    // [link](  <href>  \"title\"  )\n    //          ^^^^^^ parsing link destination\n    start = pos;\n    res = state.md.helpers.parseLinkDestination(state.src, pos, state.posMax);\n    if (res.ok) {\n      href = state.md.normalizeLink(res.str);\n      if (state.md.validateLink(href)) {\n        pos = res.pos;\n      } else {\n        href = '';\n      }\n    }\n\n    // [link](  <href>  \"title\"  )\n    //                ^^ skipping these spaces\n    start = pos;\n    for (; pos < max; pos++) {\n      code = state.src.charCodeAt(pos);\n      if (!isSpace(code) && code !== 0x0A) {\n        break;\n      }\n    }\n\n    // [link](  <href>  \"title\"  )\n    //                  ^^^^^^^ parsing link title\n    res = state.md.helpers.parseLinkTitle(state.src, pos, state.posMax);\n    if (pos < max && start !== pos && res.ok) {\n      title = res.str;\n      pos = res.pos;\n\n      // [link](  <href>  \"title\"  )\n      //                         ^^ skipping these spaces\n      for (; pos < max; pos++) {\n        code = state.src.charCodeAt(pos);\n        if (!isSpace(code) && code !== 0x0A) {\n          break;\n        }\n      }\n    } else {\n      title = '';\n    }\n    if (pos >= max || state.src.charCodeAt(pos) !== 0x29 /* ) */) {\n      state.pos = oldPos;\n      return false;\n    }\n    pos++;\n  } else {\n    //\n    // Link reference\n    //\n    if (typeof state.env.references === 'undefined') {\n      return false;\n    }\n    if (pos < max && state.src.charCodeAt(pos) === 0x5B /* [ */) {\n      start = pos + 1;\n      pos = state.md.helpers.parseLinkLabel(state, pos);\n      if (pos >= 0) {\n        label = state.src.slice(start, pos++);\n      } else {\n        pos = labelEnd + 1;\n      }\n    } else {\n      pos = labelEnd + 1;\n    }\n\n    // covers label === '' and label === undefined\n    // (collapsed reference link and shortcut reference link respectively)\n    if (!label) {\n      label = state.src.slice(labelStart, labelEnd);\n    }\n    ref = state.env.references[normalizeReference(label)];\n    if (!ref) {\n      state.pos = oldPos;\n      return false;\n    }\n    href = ref.href;\n    title = ref.title;\n  }\n\n  //\n  // We found the end of the link, and know for a fact it's a valid link;\n  // so all that's left to do is to call tokenizer.\n  //\n  if (!silent) {\n    content = state.src.slice(labelStart, labelEnd);\n    const tokens = [];\n    state.md.inline.parse(content, state.md, state.env, tokens);\n    const token = state.push('image', 'img', 0);\n    const attrs = [['src', href], ['alt', '']];\n    token.attrs = attrs;\n    token.children = tokens;\n    token.content = content;\n    if (title) {\n      attrs.push(['title', title]);\n    }\n  }\n  state.pos = pos;\n  state.posMax = max;\n  return true;\n}\n\n// Process autolinks '<protocol:...>'\n\n/* eslint max-len:0 */\nconst EMAIL_RE = /^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/;\n/* eslint-disable-next-line no-control-regex */\nconst AUTOLINK_RE = /^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\\x00-\\x20]*)$/;\nfunction autolink(state, silent) {\n  let pos = state.pos;\n  if (state.src.charCodeAt(pos) !== 0x3C /* < */) {\n    return false;\n  }\n  const start = state.pos;\n  const max = state.posMax;\n  for (;;) {\n    if (++pos >= max) return false;\n    const ch = state.src.charCodeAt(pos);\n    if (ch === 0x3C /* < */) return false;\n    if (ch === 0x3E /* > */) break;\n  }\n  const url = state.src.slice(start + 1, pos);\n  if (AUTOLINK_RE.test(url)) {\n    const fullUrl = state.md.normalizeLink(url);\n    if (!state.md.validateLink(fullUrl)) {\n      return false;\n    }\n    if (!silent) {\n      const token_o = state.push('link_open', 'a', 1);\n      token_o.attrs = [['href', fullUrl]];\n      token_o.markup = 'autolink';\n      token_o.info = 'auto';\n      const token_t = state.push('text', '', 0);\n      token_t.content = state.md.normalizeLinkText(url);\n      const token_c = state.push('link_close', 'a', -1);\n      token_c.markup = 'autolink';\n      token_c.info = 'auto';\n    }\n    state.pos += url.length + 2;\n    return true;\n  }\n  if (EMAIL_RE.test(url)) {\n    const fullUrl = state.md.normalizeLink('mailto:' + url);\n    if (!state.md.validateLink(fullUrl)) {\n      return false;\n    }\n    if (!silent) {\n      const token_o = state.push('link_open', 'a', 1);\n      token_o.attrs = [['href', fullUrl]];\n      token_o.markup = 'autolink';\n      token_o.info = 'auto';\n      const token_t = state.push('text', '', 0);\n      token_t.content = state.md.normalizeLinkText(url);\n      const token_c = state.push('link_close', 'a', -1);\n      token_c.markup = 'autolink';\n      token_c.info = 'auto';\n    }\n    state.pos += url.length + 2;\n    return true;\n  }\n  return false;\n}\n\n// Process html tags\n\nfunction isLinkOpen(str) {\n  return /^<a[>\\s]/i.test(str);\n}\nfunction isLinkClose(str) {\n  return /^<\\/a\\s*>/i.test(str);\n}\nfunction isLetter(ch) {\n  /* eslint no-bitwise:0 */\n  const lc = ch | 0x20; // to lower case\n  return lc >= 0x61 /* a */ && lc <= 0x7a /* z */;\n}\nfunction html_inline(state, silent) {\n  if (!state.md.options.html) {\n    return false;\n  }\n\n  // Check start\n  const max = state.posMax;\n  const pos = state.pos;\n  if (state.src.charCodeAt(pos) !== 0x3C /* < */ || pos + 2 >= max) {\n    return false;\n  }\n\n  // Quick fail on second char\n  const ch = state.src.charCodeAt(pos + 1);\n  if (ch !== 0x21 /* ! */ && ch !== 0x3F /* ? */ && ch !== 0x2F /* / */ && !isLetter(ch)) {\n    return false;\n  }\n  const match = state.src.slice(pos).match(HTML_TAG_RE);\n  if (!match) {\n    return false;\n  }\n  if (!silent) {\n    const token = state.push('html_inline', '', 0);\n    token.content = match[0];\n    if (isLinkOpen(token.content)) state.linkLevel++;\n    if (isLinkClose(token.content)) state.linkLevel--;\n  }\n  state.pos += match[0].length;\n  return true;\n}\n\n// Process html entity - &#123;, &#xAF;, &quot;, ...\n\nconst DIGITAL_RE = /^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i;\nconst NAMED_RE = /^&([a-z][a-z0-9]{1,31});/i;\nfunction entity(state, silent) {\n  const pos = state.pos;\n  const max = state.posMax;\n  if (state.src.charCodeAt(pos) !== 0x26 /* & */) return false;\n  if (pos + 1 >= max) return false;\n  const ch = state.src.charCodeAt(pos + 1);\n  if (ch === 0x23 /* # */) {\n    const match = state.src.slice(pos).match(DIGITAL_RE);\n    if (match) {\n      if (!silent) {\n        const code = match[1][0].toLowerCase() === 'x' ? parseInt(match[1].slice(1), 16) : parseInt(match[1], 10);\n        const token = state.push('text_special', '', 0);\n        token.content = isValidEntityCode(code) ? fromCodePoint(code) : fromCodePoint(0xFFFD);\n        token.markup = match[0];\n        token.info = 'entity';\n      }\n      state.pos += match[0].length;\n      return true;\n    }\n  } else {\n    const match = state.src.slice(pos).match(NAMED_RE);\n    if (match) {\n      const decoded = entities.decodeHTML(match[0]);\n      if (decoded !== match[0]) {\n        if (!silent) {\n          const token = state.push('text_special', '', 0);\n          token.content = decoded;\n          token.markup = match[0];\n          token.info = 'entity';\n        }\n        state.pos += match[0].length;\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\n// For each opening emphasis-like marker find a matching closing one\n//\n\nfunction processDelimiters(delimiters) {\n  const openersBottom = {};\n  const max = delimiters.length;\n  if (!max) return;\n\n  // headerIdx is the first delimiter of the current (where closer is) delimiter run\n  let headerIdx = 0;\n  let lastTokenIdx = -2; // needs any value lower than -1\n  const jumps = [];\n  for (let closerIdx = 0; closerIdx < max; closerIdx++) {\n    const closer = delimiters[closerIdx];\n    jumps.push(0);\n\n    // markers belong to same delimiter run if:\n    //  - they have adjacent tokens\n    //  - AND markers are the same\n    //\n    if (delimiters[headerIdx].marker !== closer.marker || lastTokenIdx !== closer.token - 1) {\n      headerIdx = closerIdx;\n    }\n    lastTokenIdx = closer.token;\n\n    // Length is only used for emphasis-specific \"rule of 3\",\n    // if it's not defined (in strikethrough or 3rd party plugins),\n    // we can default it to 0 to disable those checks.\n    //\n    closer.length = closer.length || 0;\n    if (!closer.close) continue;\n\n    // Previously calculated lower bounds (previous fails)\n    // for each marker, each delimiter length modulo 3,\n    // and for whether this closer can be an opener;\n    // https://github.com/commonmark/cmark/commit/34250e12ccebdc6372b8b49c44fab57c72443460\n    /* eslint-disable-next-line no-prototype-builtins */\n    if (!openersBottom.hasOwnProperty(closer.marker)) {\n      openersBottom[closer.marker] = [-1, -1, -1, -1, -1, -1];\n    }\n    const minOpenerIdx = openersBottom[closer.marker][(closer.open ? 3 : 0) + closer.length % 3];\n    let openerIdx = headerIdx - jumps[headerIdx] - 1;\n    let newMinOpenerIdx = openerIdx;\n    for (; openerIdx > minOpenerIdx; openerIdx -= jumps[openerIdx] + 1) {\n      const opener = delimiters[openerIdx];\n      if (opener.marker !== closer.marker) continue;\n      if (opener.open && opener.end < 0) {\n        let isOddMatch = false;\n\n        // from spec:\n        //\n        // If one of the delimiters can both open and close emphasis, then the\n        // sum of the lengths of the delimiter runs containing the opening and\n        // closing delimiters must not be a multiple of 3 unless both lengths\n        // are multiples of 3.\n        //\n        if (opener.close || closer.open) {\n          if ((opener.length + closer.length) % 3 === 0) {\n            if (opener.length % 3 !== 0 || closer.length % 3 !== 0) {\n              isOddMatch = true;\n            }\n          }\n        }\n        if (!isOddMatch) {\n          // If previous delimiter cannot be an opener, we can safely skip\n          // the entire sequence in future checks. This is required to make\n          // sure algorithm has linear complexity (see *_*_*_*_*_... case).\n          //\n          const lastJump = openerIdx > 0 && !delimiters[openerIdx - 1].open ? jumps[openerIdx - 1] + 1 : 0;\n          jumps[closerIdx] = closerIdx - openerIdx + lastJump;\n          jumps[openerIdx] = lastJump;\n          closer.open = false;\n          opener.end = closerIdx;\n          opener.close = false;\n          newMinOpenerIdx = -1;\n          // treat next token as start of run,\n          // it optimizes skips in **<...>**a**<...>** pathological case\n          lastTokenIdx = -2;\n          break;\n        }\n      }\n    }\n    if (newMinOpenerIdx !== -1) {\n      // If match for this delimiter run failed, we want to set lower bound for\n      // future lookups. This is required to make sure algorithm has linear\n      // complexity.\n      //\n      // See details here:\n      // https://github.com/commonmark/cmark/issues/178#issuecomment-270417442\n      //\n      openersBottom[closer.marker][(closer.open ? 3 : 0) + (closer.length || 0) % 3] = newMinOpenerIdx;\n    }\n  }\n}\nfunction link_pairs(state) {\n  const tokens_meta = state.tokens_meta;\n  const max = state.tokens_meta.length;\n  processDelimiters(state.delimiters);\n  for (let curr = 0; curr < max; curr++) {\n    if (tokens_meta[curr] && tokens_meta[curr].delimiters) {\n      processDelimiters(tokens_meta[curr].delimiters);\n    }\n  }\n}\n\n// Clean up tokens after emphasis and strikethrough postprocessing:\n// merge adjacent text nodes into one and re-calculate all token levels\n//\n// This is necessary because initially emphasis delimiter markers (*, _, ~)\n// are treated as their own separate text tokens. Then emphasis rule either\n// leaves them as text (needed to merge with adjacent text) or turns them\n// into opening/closing tags (which messes up levels inside).\n//\n\nfunction fragments_join(state) {\n  let curr, last;\n  let level = 0;\n  const tokens = state.tokens;\n  const max = state.tokens.length;\n  for (curr = last = 0; curr < max; curr++) {\n    // re-calculate levels after emphasis/strikethrough turns some text nodes\n    // into opening/closing tags\n    if (tokens[curr].nesting < 0) level--; // closing tag\n    tokens[curr].level = level;\n    if (tokens[curr].nesting > 0) level++; // opening tag\n\n    if (tokens[curr].type === 'text' && curr + 1 < max && tokens[curr + 1].type === 'text') {\n      // collapse two adjacent text nodes\n      tokens[curr + 1].content = tokens[curr].content + tokens[curr + 1].content;\n    } else {\n      if (curr !== last) {\n        tokens[last] = tokens[curr];\n      }\n      last++;\n    }\n  }\n  if (curr !== last) {\n    tokens.length = last;\n  }\n}\n\n/** internal\n * class ParserInline\n *\n * Tokenizes paragraph content.\n **/\n\n\n// Parser rules\n\nconst _rules = [['text', text], ['linkify', linkify], ['newline', newline], ['escape', escape], ['backticks', backtick], ['strikethrough', r_strikethrough.tokenize], ['emphasis', r_emphasis.tokenize], ['link', link], ['image', image], ['autolink', autolink], ['html_inline', html_inline], ['entity', entity]];\n\n// `rule2` ruleset was created specifically for emphasis/strikethrough\n// post-processing and may be changed in the future.\n//\n// Don't use this for anything except pairs (plugins working with `balance_pairs`).\n//\nconst _rules2 = [['balance_pairs', link_pairs], ['strikethrough', r_strikethrough.postProcess], ['emphasis', r_emphasis.postProcess],\n// rules for pairs separate '**' into its own text tokens, which may be left unused,\n// rule below merges unused segments back with the rest of the text\n['fragments_join', fragments_join]];\n\n/**\n * new ParserInline()\n **/\nfunction ParserInline() {\n  /**\n   * ParserInline#ruler -> Ruler\n   *\n   * [[Ruler]] instance. Keep configuration of inline rules.\n   **/\n  this.ruler = new Ruler();\n  for (let i = 0; i < _rules.length; i++) {\n    this.ruler.push(_rules[i][0], _rules[i][1]);\n  }\n\n  /**\n   * ParserInline#ruler2 -> Ruler\n   *\n   * [[Ruler]] instance. Second ruler used for post-processing\n   * (e.g. in emphasis-like rules).\n   **/\n  this.ruler2 = new Ruler();\n  for (let i = 0; i < _rules2.length; i++) {\n    this.ruler2.push(_rules2[i][0], _rules2[i][1]);\n  }\n}\n\n// Skip single token by running all rules in validation mode;\n// returns `true` if any rule reported success\n//\nParserInline.prototype.skipToken = function (state) {\n  const pos = state.pos;\n  const rules = this.ruler.getRules('');\n  const len = rules.length;\n  const maxNesting = state.md.options.maxNesting;\n  const cache = state.cache;\n  if (typeof cache[pos] !== 'undefined') {\n    state.pos = cache[pos];\n    return;\n  }\n  let ok = false;\n  if (state.level < maxNesting) {\n    for (let i = 0; i < len; i++) {\n      // Increment state.level and decrement it later to limit recursion.\n      // It's harmless to do here, because no tokens are created. But ideally,\n      // we'd need a separate private state variable for this purpose.\n      //\n      state.level++;\n      ok = rules[i](state, true);\n      state.level--;\n      if (ok) {\n        if (pos >= state.pos) {\n          throw new Error(\"inline rule didn't increment state.pos\");\n        }\n        break;\n      }\n    }\n  } else {\n    // Too much nesting, just skip until the end of the paragraph.\n    //\n    // NOTE: this will cause links to behave incorrectly in the following case,\n    //       when an amount of `[` is exactly equal to `maxNesting + 1`:\n    //\n    //       [[[[[[[[[[[[[[[[[[[[[foo]()\n    //\n    // TODO: remove this workaround when CM standard will allow nested links\n    //       (we can replace it by preventing links from being parsed in\n    //       validation mode)\n    //\n    state.pos = state.posMax;\n  }\n  if (!ok) {\n    state.pos++;\n  }\n  cache[pos] = state.pos;\n};\n\n// Generate tokens for input range\n//\nParserInline.prototype.tokenize = function (state) {\n  const rules = this.ruler.getRules('');\n  const len = rules.length;\n  const end = state.posMax;\n  const maxNesting = state.md.options.maxNesting;\n  while (state.pos < end) {\n    // Try all possible rules.\n    // On success, rule should:\n    //\n    // - update `state.pos`\n    // - update `state.tokens`\n    // - return true\n    const prevPos = state.pos;\n    let ok = false;\n    if (state.level < maxNesting) {\n      for (let i = 0; i < len; i++) {\n        ok = rules[i](state, false);\n        if (ok) {\n          if (prevPos >= state.pos) {\n            throw new Error(\"inline rule didn't increment state.pos\");\n          }\n          break;\n        }\n      }\n    }\n    if (ok) {\n      if (state.pos >= end) {\n        break;\n      }\n      continue;\n    }\n    state.pending += state.src[state.pos++];\n  }\n  if (state.pending) {\n    state.pushPending();\n  }\n};\n\n/**\n * ParserInline.parse(str, md, env, outTokens)\n *\n * Process input string and push inline tokens into `outTokens`\n **/\nParserInline.prototype.parse = function (str, md, env, outTokens) {\n  const state = new this.State(str, md, env, outTokens);\n  this.tokenize(state);\n  const rules = this.ruler2.getRules('');\n  const len = rules.length;\n  for (let i = 0; i < len; i++) {\n    rules[i](state);\n  }\n};\nParserInline.prototype.State = StateInline;\n\n// markdown-it default options\n\nvar cfg_default = {\n  options: {\n    // Enable HTML tags in source\n    html: false,\n    // Use '/' to close single tags (<br />)\n    xhtmlOut: false,\n    // Convert '\\n' in paragraphs into <br>\n    breaks: false,\n    // CSS language prefix for fenced blocks\n    langPrefix: 'language-',\n    // autoconvert URL-like texts to links\n    linkify: false,\n    // Enable some language-neutral replacements + quotes beautification\n    typographer: false,\n    // Double + single quotes replacement pairs, when typographer enabled,\n    // and smartquotes on. Could be either a String or an Array.\n    //\n    // For example, you can use '\u00AB\u00BB\u201E\u201C' for Russian, '\u201E\u201C\u201A\u2018' for German,\n    // and ['\u00AB\\xA0', '\\xA0\u00BB', '\u2039\\xA0', '\\xA0\u203A'] for French (including nbsp).\n    quotes: '\\u201c\\u201d\\u2018\\u2019',\n    /* \u201C\u201D\u2018\u2019 */\n\n    // Highlighter function. Should return escaped HTML,\n    // or '' if the source string is not changed and should be escaped externaly.\n    // If result starts with <pre... internal wrapper is skipped.\n    //\n    // function (/*str, lang*/) { return ''; }\n    //\n    highlight: null,\n    // Internal protection, recursion limit\n    maxNesting: 100\n  },\n  components: {\n    core: {},\n    block: {},\n    inline: {}\n  }\n};\n\n// \"Zero\" preset, with nothing enabled. Useful for manual configuring of simple\n// modes. For example, to parse bold/italic only.\n\nvar cfg_zero = {\n  options: {\n    // Enable HTML tags in source\n    html: false,\n    // Use '/' to close single tags (<br />)\n    xhtmlOut: false,\n    // Convert '\\n' in paragraphs into <br>\n    breaks: false,\n    // CSS language prefix for fenced blocks\n    langPrefix: 'language-',\n    // autoconvert URL-like texts to links\n    linkify: false,\n    // Enable some language-neutral replacements + quotes beautification\n    typographer: false,\n    // Double + single quotes replacement pairs, when typographer enabled,\n    // and smartquotes on. Could be either a String or an Array.\n    //\n    // For example, you can use '\u00AB\u00BB\u201E\u201C' for Russian, '\u201E\u201C\u201A\u2018' for German,\n    // and ['\u00AB\\xA0', '\\xA0\u00BB', '\u2039\\xA0', '\\xA0\u203A'] for French (including nbsp).\n    quotes: '\\u201c\\u201d\\u2018\\u2019',\n    /* \u201C\u201D\u2018\u2019 */\n\n    // Highlighter function. Should return escaped HTML,\n    // or '' if the source string is not changed and should be escaped externaly.\n    // If result starts with <pre... internal wrapper is skipped.\n    //\n    // function (/*str, lang*/) { return ''; }\n    //\n    highlight: null,\n    // Internal protection, recursion limit\n    maxNesting: 20\n  },\n  components: {\n    core: {\n      rules: ['normalize', 'block', 'inline', 'text_join']\n    },\n    block: {\n      rules: ['paragraph']\n    },\n    inline: {\n      rules: ['text'],\n      rules2: ['balance_pairs', 'fragments_join']\n    }\n  }\n};\n\n// Commonmark default options\n\nvar cfg_commonmark = {\n  options: {\n    // Enable HTML tags in source\n    html: true,\n    // Use '/' to close single tags (<br />)\n    xhtmlOut: true,\n    // Convert '\\n' in paragraphs into <br>\n    breaks: false,\n    // CSS language prefix for fenced blocks\n    langPrefix: 'language-',\n    // autoconvert URL-like texts to links\n    linkify: false,\n    // Enable some language-neutral replacements + quotes beautification\n    typographer: false,\n    // Double + single quotes replacement pairs, when typographer enabled,\n    // and smartquotes on. Could be either a String or an Array.\n    //\n    // For example, you can use '\u00AB\u00BB\u201E\u201C' for Russian, '\u201E\u201C\u201A\u2018' for German,\n    // and ['\u00AB\\xA0', '\\xA0\u00BB', '\u2039\\xA0', '\\xA0\u203A'] for French (including nbsp).\n    quotes: '\\u201c\\u201d\\u2018\\u2019',\n    /* \u201C\u201D\u2018\u2019 */\n\n    // Highlighter function. Should return escaped HTML,\n    // or '' if the source string is not changed and should be escaped externaly.\n    // If result starts with <pre... internal wrapper is skipped.\n    //\n    // function (/*str, lang*/) { return ''; }\n    //\n    highlight: null,\n    // Internal protection, recursion limit\n    maxNesting: 20\n  },\n  components: {\n    core: {\n      rules: ['normalize', 'block', 'inline', 'text_join']\n    },\n    block: {\n      rules: ['blockquote', 'code', 'fence', 'heading', 'hr', 'html_block', 'lheading', 'list', 'reference', 'paragraph']\n    },\n    inline: {\n      rules: ['autolink', 'backticks', 'emphasis', 'entity', 'escape', 'html_inline', 'image', 'link', 'newline', 'text'],\n      rules2: ['balance_pairs', 'emphasis', 'fragments_join']\n    }\n  }\n};\n\n// Main parser class\n\nconst config = {\n  default: cfg_default,\n  zero: cfg_zero,\n  commonmark: cfg_commonmark\n};\n\n//\n// This validator can prohibit more than really needed to prevent XSS. It's a\n// tradeoff to keep code simple and to be secure by default.\n//\n// If you need different setup - override validator method as you wish. Or\n// replace it with dummy function and use external sanitizer.\n//\n\nconst BAD_PROTO_RE = /^(vbscript|javascript|file|data):/;\nconst GOOD_DATA_RE = /^data:image\\/(gif|png|jpeg|webp);/;\nfunction validateLink(url) {\n  // url should be normalized at this point, and existing entities are decoded\n  const str = url.trim().toLowerCase();\n  return BAD_PROTO_RE.test(str) ? GOOD_DATA_RE.test(str) : true;\n}\nconst RECODE_HOSTNAME_FOR = ['http:', 'https:', 'mailto:'];\nfunction normalizeLink(url) {\n  const parsed = mdurl__namespace.parse(url, true);\n  if (parsed.hostname) {\n    // Encode hostnames in urls like:\n    // `http://host/`, `https://host/`, `mailto:user@host`, `//host/`\n    //\n    // We don't encode unknown schemas, because it's likely that we encode\n    // something we shouldn't (e.g. `skype:name` treated as `skype:host`)\n    //\n    if (!parsed.protocol || RECODE_HOSTNAME_FOR.indexOf(parsed.protocol) >= 0) {\n      try {\n        parsed.hostname = punycode.toASCII(parsed.hostname);\n      } catch (er) {/**/}\n    }\n  }\n  return mdurl__namespace.encode(mdurl__namespace.format(parsed));\n}\nfunction normalizeLinkText(url) {\n  const parsed = mdurl__namespace.parse(url, true);\n  if (parsed.hostname) {\n    // Encode hostnames in urls like:\n    // `http://host/`, `https://host/`, `mailto:user@host`, `//host/`\n    //\n    // We don't encode unknown schemas, because it's likely that we encode\n    // something we shouldn't (e.g. `skype:name` treated as `skype:host`)\n    //\n    if (!parsed.protocol || RECODE_HOSTNAME_FOR.indexOf(parsed.protocol) >= 0) {\n      try {\n        parsed.hostname = punycode.toUnicode(parsed.hostname);\n      } catch (er) {/**/}\n    }\n  }\n\n  // add '%' to exclude list because of https://github.com/markdown-it/markdown-it/issues/720\n  return mdurl__namespace.decode(mdurl__namespace.format(parsed), mdurl__namespace.decode.defaultChars + '%');\n}\n\n/**\n * class MarkdownIt\n *\n * Main parser/renderer class.\n *\n * ##### Usage\n *\n * ```javascript\n * // node.js, \"classic\" way:\n * var MarkdownIt = require('markdown-it'),\n *     md = new MarkdownIt();\n * var result = md.render('# markdown-it rulezz!');\n *\n * // node.js, the same, but with sugar:\n * var md = require('markdown-it')();\n * var result = md.render('# markdown-it rulezz!');\n *\n * // browser without AMD, added to \"window\" on script load\n * // Note, there are no dash.\n * var md = window.markdownit();\n * var result = md.render('# markdown-it rulezz!');\n * ```\n *\n * Single line rendering, without paragraph wrap:\n *\n * ```javascript\n * var md = require('markdown-it')();\n * var result = md.renderInline('__markdown-it__ rulezz!');\n * ```\n **/\n\n/**\n * new MarkdownIt([presetName, options])\n * - presetName (String): optional, `commonmark` / `zero`\n * - options (Object)\n *\n * Creates parser instanse with given config. Can be called without `new`.\n *\n * ##### presetName\n *\n * MarkdownIt provides named presets as a convenience to quickly\n * enable/disable active syntax rules and options for common use cases.\n *\n * - [\"commonmark\"](https://github.com/markdown-it/markdown-it/blob/master/lib/presets/commonmark.mjs) -\n *   configures parser to strict [CommonMark](http://commonmark.org/) mode.\n * - [default](https://github.com/markdown-it/markdown-it/blob/master/lib/presets/default.mjs) -\n *   similar to GFM, used when no preset name given. Enables all available rules,\n *   but still without html, typographer & autolinker.\n * - [\"zero\"](https://github.com/markdown-it/markdown-it/blob/master/lib/presets/zero.mjs) -\n *   all rules disabled. Useful to quickly setup your config via `.enable()`.\n *   For example, when you need only `bold` and `italic` markup and nothing else.\n *\n * ##### options:\n *\n * - __html__ - `false`. Set `true` to enable HTML tags in source. Be careful!\n *   That's not safe! You may need external sanitizer to protect output from XSS.\n *   It's better to extend features via plugins, instead of enabling HTML.\n * - __xhtmlOut__ - `false`. Set `true` to add '/' when closing single tags\n *   (`<br />`). This is needed only for full CommonMark compatibility. In real\n *   world you will need HTML output.\n * - __breaks__ - `false`. Set `true` to convert `\\n` in paragraphs into `<br>`.\n * - __langPrefix__ - `language-`. CSS language class prefix for fenced blocks.\n *   Can be useful for external highlighters.\n * - __linkify__ - `false`. Set `true` to autoconvert URL-like text to links.\n * - __typographer__  - `false`. Set `true` to enable [some language-neutral\n *   replacement](https://github.com/markdown-it/markdown-it/blob/master/lib/rules_core/replacements.mjs) +\n *   quotes beautification (smartquotes).\n * - __quotes__ - `\u201C\u201D\u2018\u2019`, String or Array. Double + single quotes replacement\n *   pairs, when typographer enabled and smartquotes on. For example, you can\n *   use `'\u00AB\u00BB\u201E\u201C'` for Russian, `'\u201E\u201C\u201A\u2018'` for German, and\n *   `['\u00AB\\xA0', '\\xA0\u00BB', '\u2039\\xA0', '\\xA0\u203A']` for French (including nbsp).\n * - __highlight__ - `null`. Highlighter function for fenced code blocks.\n *   Highlighter `function (str, lang)` should return escaped HTML. It can also\n *   return empty string if the source was not changed and should be escaped\n *   externaly. If result starts with <pre... internal wrapper is skipped.\n *\n * ##### Example\n *\n * ```javascript\n * // commonmark mode\n * var md = require('markdown-it')('commonmark');\n *\n * // default mode\n * var md = require('markdown-it')();\n *\n * // enable everything\n * var md = require('markdown-it')({\n *   html: true,\n *   linkify: true,\n *   typographer: true\n * });\n * ```\n *\n * ##### Syntax highlighting\n *\n * ```js\n * var hljs = require('highlight.js') // https://highlightjs.org/\n *\n * var md = require('markdown-it')({\n *   highlight: function (str, lang) {\n *     if (lang && hljs.getLanguage(lang)) {\n *       try {\n *         return hljs.highlight(str, { language: lang, ignoreIllegals: true }).value;\n *       } catch (__) {}\n *     }\n *\n *     return ''; // use external default escaping\n *   }\n * });\n * ```\n *\n * Or with full wrapper override (if you need assign class to `<pre>` or `<code>`):\n *\n * ```javascript\n * var hljs = require('highlight.js') // https://highlightjs.org/\n *\n * // Actual default values\n * var md = require('markdown-it')({\n *   highlight: function (str, lang) {\n *     if (lang && hljs.getLanguage(lang)) {\n *       try {\n *         return '<pre><code class=\"hljs\">' +\n *                hljs.highlight(str, { language: lang, ignoreIllegals: true }).value +\n *                '</code></pre>';\n *       } catch (__) {}\n *     }\n *\n *     return '<pre><code class=\"hljs\">' + md.utils.escapeHtml(str) + '</code></pre>';\n *   }\n * });\n * ```\n *\n **/\nfunction MarkdownIt(presetName, options) {\n  if (!(this instanceof MarkdownIt)) {\n    return new MarkdownIt(presetName, options);\n  }\n  if (!options) {\n    if (!isString(presetName)) {\n      options = presetName || {};\n      presetName = 'default';\n    }\n  }\n\n  /**\n   * MarkdownIt#inline -> ParserInline\n   *\n   * Instance of [[ParserInline]]. You may need it to add new rules when\n   * writing plugins. For simple rules control use [[MarkdownIt.disable]] and\n   * [[MarkdownIt.enable]].\n   **/\n  this.inline = new ParserInline();\n\n  /**\n   * MarkdownIt#block -> ParserBlock\n   *\n   * Instance of [[ParserBlock]]. You may need it to add new rules when\n   * writing plugins. For simple rules control use [[MarkdownIt.disable]] and\n   * [[MarkdownIt.enable]].\n   **/\n  this.block = new ParserBlock();\n\n  /**\n   * MarkdownIt#core -> Core\n   *\n   * Instance of [[Core]] chain executor. You may need it to add new rules when\n   * writing plugins. For simple rules control use [[MarkdownIt.disable]] and\n   * [[MarkdownIt.enable]].\n   **/\n  this.core = new Core();\n\n  /**\n   * MarkdownIt#renderer -> Renderer\n   *\n   * Instance of [[Renderer]]. Use it to modify output look. Or to add rendering\n   * rules for new token types, generated by plugins.\n   *\n   * ##### Example\n   *\n   * ```javascript\n   * var md = require('markdown-it')();\n   *\n   * function myToken(tokens, idx, options, env, self) {\n   *   //...\n   *   return result;\n   * };\n   *\n   * md.renderer.rules['my_token'] = myToken\n   * ```\n   *\n   * See [[Renderer]] docs and [source code](https://github.com/markdown-it/markdown-it/blob/master/lib/renderer.mjs).\n   **/\n  this.renderer = new Renderer();\n\n  /**\n   * MarkdownIt#linkify -> LinkifyIt\n   *\n   * [linkify-it](https://github.com/markdown-it/linkify-it) instance.\n   * Used by [linkify](https://github.com/markdown-it/markdown-it/blob/master/lib/rules_core/linkify.mjs)\n   * rule.\n   **/\n  this.linkify = new LinkifyIt();\n\n  /**\n   * MarkdownIt#validateLink(url) -> Boolean\n   *\n   * Link validation function. CommonMark allows too much in links. By default\n   * we disable `javascript:`, `vbscript:`, `file:` schemas, and almost all `data:...` schemas\n   * except some embedded image types.\n   *\n   * You can change this behaviour:\n   *\n   * ```javascript\n   * var md = require('markdown-it')();\n   * // enable everything\n   * md.validateLink = function () { return true; }\n   * ```\n   **/\n  this.validateLink = validateLink;\n\n  /**\n   * MarkdownIt#normalizeLink(url) -> String\n   *\n   * Function used to encode link url to a machine-readable format,\n   * which includes url-encoding, punycode, etc.\n   **/\n  this.normalizeLink = normalizeLink;\n\n  /**\n   * MarkdownIt#normalizeLinkText(url) -> String\n   *\n   * Function used to decode link url to a human-readable format`\n   **/\n  this.normalizeLinkText = normalizeLinkText;\n\n  // Expose utils & helpers for easy acces from plugins\n\n  /**\n   * MarkdownIt#utils -> utils\n   *\n   * Assorted utility functions, useful to write plugins. See details\n   * [here](https://github.com/markdown-it/markdown-it/blob/master/lib/common/utils.mjs).\n   **/\n  this.utils = utils;\n\n  /**\n   * MarkdownIt#helpers -> helpers\n   *\n   * Link components parser functions, useful to write plugins. See details\n   * [here](https://github.com/markdown-it/markdown-it/blob/master/lib/helpers).\n   **/\n  this.helpers = assign({}, helpers);\n  this.options = {};\n  this.configure(presetName);\n  if (options) {\n    this.set(options);\n  }\n}\n\n/** chainable\n * MarkdownIt.set(options)\n *\n * Set parser options (in the same format as in constructor). Probably, you\n * will never need it, but you can change options after constructor call.\n *\n * ##### Example\n *\n * ```javascript\n * var md = require('markdown-it')()\n *             .set({ html: true, breaks: true })\n *             .set({ typographer, true });\n * ```\n *\n * __Note:__ To achieve the best possible performance, don't modify a\n * `markdown-it` instance options on the fly. If you need multiple configurations\n * it's best to create multiple instances and initialize each with separate\n * config.\n **/\nMarkdownIt.prototype.set = function (options) {\n  assign(this.options, options);\n  return this;\n};\n\n/** chainable, internal\n * MarkdownIt.configure(presets)\n *\n * Batch load of all options and compenent settings. This is internal method,\n * and you probably will not need it. But if you will - see available presets\n * and data structure [here](https://github.com/markdown-it/markdown-it/tree/master/lib/presets)\n *\n * We strongly recommend to use presets instead of direct config loads. That\n * will give better compatibility with next versions.\n **/\nMarkdownIt.prototype.configure = function (presets) {\n  const self = this;\n  if (isString(presets)) {\n    const presetName = presets;\n    presets = config[presetName];\n    if (!presets) {\n      throw new Error('Wrong `markdown-it` preset \"' + presetName + '\", check name');\n    }\n  }\n  if (!presets) {\n    throw new Error('Wrong `markdown-it` preset, can\\'t be empty');\n  }\n  if (presets.options) {\n    self.set(presets.options);\n  }\n  if (presets.components) {\n    Object.keys(presets.components).forEach(function (name) {\n      if (presets.components[name].rules) {\n        self[name].ruler.enableOnly(presets.components[name].rules);\n      }\n      if (presets.components[name].rules2) {\n        self[name].ruler2.enableOnly(presets.components[name].rules2);\n      }\n    });\n  }\n  return this;\n};\n\n/** chainable\n * MarkdownIt.enable(list, ignoreInvalid)\n * - list (String|Array): rule name or list of rule names to enable\n * - ignoreInvalid (Boolean): set `true` to ignore errors when rule not found.\n *\n * Enable list or rules. It will automatically find appropriate components,\n * containing rules with given names. If rule not found, and `ignoreInvalid`\n * not set - throws exception.\n *\n * ##### Example\n *\n * ```javascript\n * var md = require('markdown-it')()\n *             .enable(['sub', 'sup'])\n *             .disable('smartquotes');\n * ```\n **/\nMarkdownIt.prototype.enable = function (list, ignoreInvalid) {\n  let result = [];\n  if (!Array.isArray(list)) {\n    list = [list];\n  }\n  ['core', 'block', 'inline'].forEach(function (chain) {\n    result = result.concat(this[chain].ruler.enable(list, true));\n  }, this);\n  result = result.concat(this.inline.ruler2.enable(list, true));\n  const missed = list.filter(function (name) {\n    return result.indexOf(name) < 0;\n  });\n  if (missed.length && !ignoreInvalid) {\n    throw new Error('MarkdownIt. Failed to enable unknown rule(s): ' + missed);\n  }\n  return this;\n};\n\n/** chainable\n * MarkdownIt.disable(list, ignoreInvalid)\n * - list (String|Array): rule name or list of rule names to disable.\n * - ignoreInvalid (Boolean): set `true` to ignore errors when rule not found.\n *\n * The same as [[MarkdownIt.enable]], but turn specified rules off.\n **/\nMarkdownIt.prototype.disable = function (list, ignoreInvalid) {\n  let result = [];\n  if (!Array.isArray(list)) {\n    list = [list];\n  }\n  ['core', 'block', 'inline'].forEach(function (chain) {\n    result = result.concat(this[chain].ruler.disable(list, true));\n  }, this);\n  result = result.concat(this.inline.ruler2.disable(list, true));\n  const missed = list.filter(function (name) {\n    return result.indexOf(name) < 0;\n  });\n  if (missed.length && !ignoreInvalid) {\n    throw new Error('MarkdownIt. Failed to disable unknown rule(s): ' + missed);\n  }\n  return this;\n};\n\n/** chainable\n * MarkdownIt.use(plugin, params)\n *\n * Load specified plugin with given params into current parser instance.\n * It's just a sugar to call `plugin(md, params)` with curring.\n *\n * ##### Example\n *\n * ```javascript\n * var iterator = require('markdown-it-for-inline');\n * var md = require('markdown-it')()\n *             .use(iterator, 'foo_replace', 'text', function (tokens, idx) {\n *               tokens[idx].content = tokens[idx].content.replace(/foo/g, 'bar');\n *             });\n * ```\n **/\nMarkdownIt.prototype.use = function (plugin /*, params, ... */) {\n  const args = [this].concat(Array.prototype.slice.call(arguments, 1));\n  plugin.apply(plugin, args);\n  return this;\n};\n\n/** internal\n * MarkdownIt.parse(src, env) -> Array\n * - src (String): source string\n * - env (Object): environment sandbox\n *\n * Parse input string and return list of block tokens (special token type\n * \"inline\" will contain list of inline tokens). You should not call this\n * method directly, until you write custom renderer (for example, to produce\n * AST).\n *\n * `env` is used to pass data between \"distributed\" rules and return additional\n * metadata like reference info, needed for the renderer. It also can be used to\n * inject data in specific cases. Usually, you will be ok to pass `{}`,\n * and then pass updated object to renderer.\n **/\nMarkdownIt.prototype.parse = function (src, env) {\n  if (typeof src !== 'string') {\n    throw new Error('Input data should be a String');\n  }\n  const state = new this.core.State(src, this, env);\n  this.core.process(state);\n  return state.tokens;\n};\n\n/**\n * MarkdownIt.render(src [, env]) -> String\n * - src (String): source string\n * - env (Object): environment sandbox\n *\n * Render markdown string into html. It does all magic for you :).\n *\n * `env` can be used to inject additional metadata (`{}` by default).\n * But you will not need it with high probability. See also comment\n * in [[MarkdownIt.parse]].\n **/\nMarkdownIt.prototype.render = function (src, env) {\n  env = env || {};\n  return this.renderer.render(this.parse(src, env), this.options, env);\n};\n\n/** internal\n * MarkdownIt.parseInline(src, env) -> Array\n * - src (String): source string\n * - env (Object): environment sandbox\n *\n * The same as [[MarkdownIt.parse]] but skip all block rules. It returns the\n * block tokens list with the single `inline` element, containing parsed inline\n * tokens in `children` property. Also updates `env` object.\n **/\nMarkdownIt.prototype.parseInline = function (src, env) {\n  const state = new this.core.State(src, this, env);\n  state.inlineMode = true;\n  this.core.process(state);\n  return state.tokens;\n};\n\n/**\n * MarkdownIt.renderInline(src [, env]) -> String\n * - src (String): source string\n * - env (Object): environment sandbox\n *\n * Similar to [[MarkdownIt.render]] but for single paragraph content. Result\n * will NOT be wrapped into `<p>` tags.\n **/\nMarkdownIt.prototype.renderInline = function (src, env) {\n  env = env || {};\n  return this.renderer.render(this.parseInline(src, env), this.options, env);\n};\n\nmodule.exports = MarkdownIt;\n", "'use strict';\n\n/*\n * Displays a helpful message and the source of\n * the format when it is invalid.\n */\nclass InvalidFormatError extends Error {\n  constructor(formatFn) {\n    super(`Format functions must be synchronous taking a two arguments: (info, opts)\nFound: ${formatFn.toString().split('\\n')[0]}\\n`);\n\n    Error.captureStackTrace(this, InvalidFormatError);\n  }\n}\n\n/*\n * function format (formatFn)\n * Returns a create function for the `formatFn`.\n */\nmodule.exports = formatFn => {\n  if (formatFn.length > 2) {\n    throw new InvalidFormatError(formatFn);\n  }\n\n  /*\n   * function Format (options)\n   * Base prototype which calls a `_format`\n   * function and pushes the result.\n   */\n  function Format(options = {}) {\n    this.options = options;\n  }\n\n  Format.prototype.transform = formatFn;\n\n  //\n  // Create a function which returns new instances of\n  // FormatWrap for simple syntax like:\n  //\n  // require('winston').formats.json();\n  //\n  function createFormatWrap(opts) {\n    return new Format(opts);\n  }\n\n  //\n  // Expose the FormatWrap through the create function\n  // for testability.\n  //\n  createFormatWrap.Format = Format;\n  return createFormatWrap;\n};\n", "/*\nThe MIT License (MIT)\n\nCopyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n*/\n\nvar styles = {};\nmodule['exports'] = styles;\n\nvar codes = {\n  reset: [0, 0],\n\n  bold: [1, 22],\n  dim: [2, 22],\n  italic: [3, 23],\n  underline: [4, 24],\n  inverse: [7, 27],\n  hidden: [8, 28],\n  strikethrough: [9, 29],\n\n  black: [30, 39],\n  red: [31, 39],\n  green: [32, 39],\n  yellow: [33, 39],\n  blue: [34, 39],\n  magenta: [35, 39],\n  cyan: [36, 39],\n  white: [37, 39],\n  gray: [90, 39],\n  grey: [90, 39],\n\n  brightRed: [91, 39],\n  brightGreen: [92, 39],\n  brightYellow: [93, 39],\n  brightBlue: [94, 39],\n  brightMagenta: [95, 39],\n  brightCyan: [96, 39],\n  brightWhite: [97, 39],\n\n  bgBlack: [40, 49],\n  bgRed: [41, 49],\n  bgGreen: [42, 49],\n  bgYellow: [43, 49],\n  bgBlue: [44, 49],\n  bgMagenta: [45, 49],\n  bgCyan: [46, 49],\n  bgWhite: [47, 49],\n  bgGray: [100, 49],\n  bgGrey: [100, 49],\n\n  bgBrightRed: [101, 49],\n  bgBrightGreen: [102, 49],\n  bgBrightYellow: [103, 49],\n  bgBrightBlue: [104, 49],\n  bgBrightMagenta: [105, 49],\n  bgBrightCyan: [106, 49],\n  bgBrightWhite: [107, 49],\n\n  // legacy styles for colors pre v1.0.0\n  blackBG: [40, 49],\n  redBG: [41, 49],\n  greenBG: [42, 49],\n  yellowBG: [43, 49],\n  blueBG: [44, 49],\n  magentaBG: [45, 49],\n  cyanBG: [46, 49],\n  whiteBG: [47, 49],\n\n};\n\nObject.keys(codes).forEach(function(key) {\n  var val = codes[key];\n  var style = styles[key] = [];\n  style.open = '\\u001b[' + val[0] + 'm';\n  style.close = '\\u001b[' + val[1] + 'm';\n});\n", "/*\nMIT License\n\nCopyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\nof the Software, and to permit persons to whom the Software is furnished to do\nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\n'use strict';\n\nmodule.exports = function(flag, argv) {\n  argv = argv || process.argv || [];\n\n  var terminatorPos = argv.indexOf('--');\n  var prefix = /^-{1,2}/.test(flag) ? '' : '--';\n  var pos = argv.indexOf(prefix + flag);\n\n  return pos !== -1 && (terminatorPos === -1 ? true : pos < terminatorPos);\n};\n", "/*\nThe MIT License (MIT)\n\nCopyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n*/\n\n'use strict';\n\nvar os = require('os');\nvar hasFlag = require('./has-flag.js');\n\nvar env = process.env;\n\nvar forceColor = void 0;\nif (hasFlag('no-color') || hasFlag('no-colors') || hasFlag('color=false')) {\n  forceColor = false;\n} else if (hasFlag('color') || hasFlag('colors') || hasFlag('color=true')\n           || hasFlag('color=always')) {\n  forceColor = true;\n}\nif ('FORCE_COLOR' in env) {\n  forceColor = env.FORCE_COLOR.length === 0\n    || parseInt(env.FORCE_COLOR, 10) !== 0;\n}\n\nfunction translateLevel(level) {\n  if (level === 0) {\n    return false;\n  }\n\n  return {\n    level: level,\n    hasBasic: true,\n    has256: level >= 2,\n    has16m: level >= 3,\n  };\n}\n\nfunction supportsColor(stream) {\n  if (forceColor === false) {\n    return 0;\n  }\n\n  if (hasFlag('color=16m') || hasFlag('color=full')\n      || hasFlag('color=truecolor')) {\n    return 3;\n  }\n\n  if (hasFlag('color=256')) {\n    return 2;\n  }\n\n  if (stream && !stream.isTTY && forceColor !== true) {\n    return 0;\n  }\n\n  var min = forceColor ? 1 : 0;\n\n  if (process.platform === 'win32') {\n    // Node.js 7.5.0 is the first version of Node.js to include a patch to\n    // libuv that enables 256 color output on Windows. Anything earlier and it\n    // won't work. However, here we target Node.js 8 at minimum as it is an LTS\n    // release, and Node.js 7 is not. Windows 10 build 10586 is the first\n    // Windows release that supports 256 colors. Windows 10 build 14931 is the\n    // first release that supports 16m/TrueColor.\n    var osRelease = os.release().split('.');\n    if (Number(process.versions.node.split('.')[0]) >= 8\n        && Number(osRelease[0]) >= 10 && Number(osRelease[2]) >= 10586) {\n      return Number(osRelease[2]) >= 14931 ? 3 : 2;\n    }\n\n    return 1;\n  }\n\n  if ('CI' in env) {\n    if (['TRAVIS', 'CIRCLECI', 'APPVEYOR', 'GITLAB_CI'].some(function(sign) {\n      return sign in env;\n    }) || env.CI_NAME === 'codeship') {\n      return 1;\n    }\n\n    return min;\n  }\n\n  if ('TEAMCITY_VERSION' in env) {\n    return (/^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.test(env.TEAMCITY_VERSION) ? 1 : 0\n    );\n  }\n\n  if ('TERM_PROGRAM' in env) {\n    var version = parseInt((env.TERM_PROGRAM_VERSION || '').split('.')[0], 10);\n\n    switch (env.TERM_PROGRAM) {\n      case 'iTerm.app':\n        return version >= 3 ? 3 : 2;\n      case 'Hyper':\n        return 3;\n      case 'Apple_Terminal':\n        return 2;\n      // No default\n    }\n  }\n\n  if (/-256(color)?$/i.test(env.TERM)) {\n    return 2;\n  }\n\n  if (/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)) {\n    return 1;\n  }\n\n  if ('COLORTERM' in env) {\n    return 1;\n  }\n\n  if (env.TERM === 'dumb') {\n    return min;\n  }\n\n  return min;\n}\n\nfunction getSupportLevel(stream) {\n  var level = supportsColor(stream);\n  return translateLevel(level);\n}\n\nmodule.exports = {\n  supportsColor: getSupportLevel,\n  stdout: getSupportLevel(process.stdout),\n  stderr: getSupportLevel(process.stderr),\n};\n", "module['exports'] = function runTheTrap(text, options) {\n  var result = '';\n  text = text || 'Run the trap, drop the bass';\n  text = text.split('');\n  var trap = {\n    a: ['\\u0040', '\\u0104', '\\u023a', '\\u0245', '\\u0394', '\\u039b', '\\u0414'],\n    b: ['\\u00df', '\\u0181', '\\u0243', '\\u026e', '\\u03b2', '\\u0e3f'],\n    c: ['\\u00a9', '\\u023b', '\\u03fe'],\n    d: ['\\u00d0', '\\u018a', '\\u0500', '\\u0501', '\\u0502', '\\u0503'],\n    e: ['\\u00cb', '\\u0115', '\\u018e', '\\u0258', '\\u03a3', '\\u03be', '\\u04bc',\n      '\\u0a6c'],\n    f: ['\\u04fa'],\n    g: ['\\u0262'],\n    h: ['\\u0126', '\\u0195', '\\u04a2', '\\u04ba', '\\u04c7', '\\u050a'],\n    i: ['\\u0f0f'],\n    j: ['\\u0134'],\n    k: ['\\u0138', '\\u04a0', '\\u04c3', '\\u051e'],\n    l: ['\\u0139'],\n    m: ['\\u028d', '\\u04cd', '\\u04ce', '\\u0520', '\\u0521', '\\u0d69'],\n    n: ['\\u00d1', '\\u014b', '\\u019d', '\\u0376', '\\u03a0', '\\u048a'],\n    o: ['\\u00d8', '\\u00f5', '\\u00f8', '\\u01fe', '\\u0298', '\\u047a', '\\u05dd',\n      '\\u06dd', '\\u0e4f'],\n    p: ['\\u01f7', '\\u048e'],\n    q: ['\\u09cd'],\n    r: ['\\u00ae', '\\u01a6', '\\u0210', '\\u024c', '\\u0280', '\\u042f'],\n    s: ['\\u00a7', '\\u03de', '\\u03df', '\\u03e8'],\n    t: ['\\u0141', '\\u0166', '\\u0373'],\n    u: ['\\u01b1', '\\u054d'],\n    v: ['\\u05d8'],\n    w: ['\\u0428', '\\u0460', '\\u047c', '\\u0d70'],\n    x: ['\\u04b2', '\\u04fe', '\\u04fc', '\\u04fd'],\n    y: ['\\u00a5', '\\u04b0', '\\u04cb'],\n    z: ['\\u01b5', '\\u0240'],\n  };\n  text.forEach(function(c) {\n    c = c.toLowerCase();\n    var chars = trap[c] || [' '];\n    var rand = Math.floor(Math.random() * chars.length);\n    if (typeof trap[c] !== 'undefined') {\n      result += trap[c][rand];\n    } else {\n      result += c;\n    }\n  });\n  return result;\n};\n", "// please no\nmodule['exports'] = function zalgo(text, options) {\n  text = text || '   he is here   ';\n  var soul = {\n    'up': [\n      '\u030D', '\u030E', '\u0304', '\u0305',\n      '\u033F', '\u0311', '\u0306', '\u0310',\n      '\u0352', '\u0357', '\u0351', '\u0307',\n      '\u0308', '\u030A', '\u0342', '\u0313',\n      '\u0308', '\u034A', '\u034B', '\u034C',\n      '\u0303', '\u0302', '\u030C', '\u0350',\n      '\u0300', '\u0301', '\u030B', '\u030F',\n      '\u0312', '\u0313', '\u0314', '\u033D',\n      '\u0309', '\u0363', '\u0364', '\u0365',\n      '\u0366', '\u0367', '\u0368', '\u0369',\n      '\u036A', '\u036B', '\u036C', '\u036D',\n      '\u036E', '\u036F', '\u033E', '\u035B',\n      '\u0346', '\u031A',\n    ],\n    'down': [\n      '\u0316', '\u0317', '\u0318', '\u0319',\n      '\u031C', '\u031D', '\u031E', '\u031F',\n      '\u0320', '\u0324', '\u0325', '\u0326',\n      '\u0329', '\u032A', '\u032B', '\u032C',\n      '\u032D', '\u032E', '\u032F', '\u0330',\n      '\u0331', '\u0332', '\u0333', '\u0339',\n      '\u033A', '\u033B', '\u033C', '\u0345',\n      '\u0347', '\u0348', '\u0349', '\u034D',\n      '\u034E', '\u0353', '\u0354', '\u0355',\n      '\u0356', '\u0359', '\u035A', '\u0323',\n    ],\n    'mid': [\n      '\u0315', '\u031B', '\u0300', '\u0301',\n      '\u0358', '\u0321', '\u0322', '\u0327',\n      '\u0328', '\u0334', '\u0335', '\u0336',\n      '\u035C', '\u035D', '\u035E',\n      '\u035F', '\u0360', '\u0362', '\u0338',\n      '\u0337', '\u0361', ' \u0489',\n    ],\n  };\n  var all = [].concat(soul.up, soul.down, soul.mid);\n\n  function randomNumber(range) {\n    var r = Math.floor(Math.random() * range);\n    return r;\n  }\n\n  function isChar(character) {\n    var bool = false;\n    all.filter(function(i) {\n      bool = (i === character);\n    });\n    return bool;\n  }\n\n\n  function heComes(text, options) {\n    var result = '';\n    var counts;\n    var l;\n    options = options || {};\n    options['up'] =\n      typeof options['up'] !== 'undefined' ? options['up'] : true;\n    options['mid'] =\n      typeof options['mid'] !== 'undefined' ? options['mid'] : true;\n    options['down'] =\n      typeof options['down'] !== 'undefined' ? options['down'] : true;\n    options['size'] =\n      typeof options['size'] !== 'undefined' ? options['size'] : 'maxi';\n    text = text.split('');\n    for (l in text) {\n      if (isChar(l)) {\n        continue;\n      }\n      result = result + text[l];\n      counts = {'up': 0, 'down': 0, 'mid': 0};\n      switch (options.size) {\n        case 'mini':\n          counts.up = randomNumber(8);\n          counts.mid = randomNumber(2);\n          counts.down = randomNumber(8);\n          break;\n        case 'maxi':\n          counts.up = randomNumber(16) + 3;\n          counts.mid = randomNumber(4) + 1;\n          counts.down = randomNumber(64) + 3;\n          break;\n        default:\n          counts.up = randomNumber(8) + 1;\n          counts.mid = randomNumber(6) / 2;\n          counts.down = randomNumber(8) + 1;\n          break;\n      }\n\n      var arr = ['up', 'mid', 'down'];\n      for (var d in arr) {\n        var index = arr[d];\n        for (var i = 0; i <= counts[index]; i++) {\n          if (options[index]) {\n            result = result + soul[index][randomNumber(soul[index].length)];\n          }\n        }\n      }\n    }\n    return result;\n  }\n  // don't summon him\n  return heComes(text, options);\n};\n\n", "module['exports'] = function(colors) {\n  return function(letter, i, exploded) {\n    if (letter === ' ') return letter;\n    switch (i%3) {\n      case 0: return colors.red(letter);\n      case 1: return colors.white(letter);\n      case 2: return colors.blue(letter);\n    }\n  };\n};\n", "module['exports'] = function(colors) {\n  return function(letter, i, exploded) {\n    return i % 2 === 0 ? letter : colors.inverse(letter);\n  };\n};\n", "module['exports'] = function(colors) {\n  // RoY G BiV\n  var rainbowColors = ['red', 'yellow', 'green', 'blue', 'magenta'];\n  return function(letter, i, exploded) {\n    if (letter === ' ') {\n      return letter;\n    } else {\n      return colors[rainbowColors[i++ % rainbowColors.length]](letter);\n    }\n  };\n};\n\n", "module['exports'] = function(colors) {\n  var available = ['underline', 'inverse', 'grey', 'yellow', 'red', 'green',\n    'blue', 'white', 'cyan', 'magenta', 'brightYellow', 'brightRed',\n    'brightGreen', 'brightBlue', 'brightWhite', 'brightCyan', 'brightMagenta'];\n  return function(letter, i, exploded) {\n    return letter === ' ' ? letter :\n      colors[\n          available[Math.round(Math.random() * (available.length - 2))]\n      ](letter);\n  };\n};\n", "/*\n\nThe MIT License (MIT)\n\nOriginal Library\n  - Copyright (c) Marak Squires\n\nAdditional functionality\n - Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n*/\n\nvar colors = {};\nmodule['exports'] = colors;\n\ncolors.themes = {};\n\nvar util = require('util');\nvar ansiStyles = colors.styles = require('./styles');\nvar defineProps = Object.defineProperties;\nvar newLineRegex = new RegExp(/[\\r\\n]+/g);\n\ncolors.supportsColor = require('./system/supports-colors').supportsColor;\n\nif (typeof colors.enabled === 'undefined') {\n  colors.enabled = colors.supportsColor() !== false;\n}\n\ncolors.enable = function() {\n  colors.enabled = true;\n};\n\ncolors.disable = function() {\n  colors.enabled = false;\n};\n\ncolors.stripColors = colors.strip = function(str) {\n  return ('' + str).replace(/\\x1B\\[\\d+m/g, '');\n};\n\n// eslint-disable-next-line no-unused-vars\nvar stylize = colors.stylize = function stylize(str, style) {\n  if (!colors.enabled) {\n    return str+'';\n  }\n\n  var styleMap = ansiStyles[style];\n\n  // Stylize should work for non-ANSI styles, too\n  if (!styleMap && style in colors) {\n    // Style maps like trap operate as functions on strings;\n    // they don't have properties like open or close.\n    return colors[style](str);\n  }\n\n  return styleMap.open + str + styleMap.close;\n};\n\nvar matchOperatorsRe = /[|\\\\{}()[\\]^$+*?.]/g;\nvar escapeStringRegexp = function(str) {\n  if (typeof str !== 'string') {\n    throw new TypeError('Expected a string');\n  }\n  return str.replace(matchOperatorsRe, '\\\\$&');\n};\n\nfunction build(_styles) {\n  var builder = function builder() {\n    return applyStyle.apply(builder, arguments);\n  };\n  builder._styles = _styles;\n  // __proto__ is used because we must return a function, but there is\n  // no way to create a function with a different prototype.\n  builder.__proto__ = proto;\n  return builder;\n}\n\nvar styles = (function() {\n  var ret = {};\n  ansiStyles.grey = ansiStyles.gray;\n  Object.keys(ansiStyles).forEach(function(key) {\n    ansiStyles[key].closeRe =\n      new RegExp(escapeStringRegexp(ansiStyles[key].close), 'g');\n    ret[key] = {\n      get: function() {\n        return build(this._styles.concat(key));\n      },\n    };\n  });\n  return ret;\n})();\n\nvar proto = defineProps(function colors() {}, styles);\n\nfunction applyStyle() {\n  var args = Array.prototype.slice.call(arguments);\n\n  var str = args.map(function(arg) {\n    // Use weak equality check so we can colorize null/undefined in safe mode\n    if (arg != null && arg.constructor === String) {\n      return arg;\n    } else {\n      return util.inspect(arg);\n    }\n  }).join(' ');\n\n  if (!colors.enabled || !str) {\n    return str;\n  }\n\n  var newLinesPresent = str.indexOf('\\n') != -1;\n\n  var nestedStyles = this._styles;\n\n  var i = nestedStyles.length;\n  while (i--) {\n    var code = ansiStyles[nestedStyles[i]];\n    str = code.open + str.replace(code.closeRe, code.open) + code.close;\n    if (newLinesPresent) {\n      str = str.replace(newLineRegex, function(match) {\n        return code.close + match + code.open;\n      });\n    }\n  }\n\n  return str;\n}\n\ncolors.setTheme = function(theme) {\n  if (typeof theme === 'string') {\n    console.log('colors.setTheme now only accepts an object, not a string.  ' +\n      'If you are trying to set a theme from a file, it is now your (the ' +\n      'caller\\'s) responsibility to require the file.  The old syntax ' +\n      'looked like colors.setTheme(__dirname + ' +\n      '\\'/../themes/generic-logging.js\\'); The new syntax looks like '+\n      'colors.setTheme(require(__dirname + ' +\n      '\\'/../themes/generic-logging.js\\'));');\n    return;\n  }\n  for (var style in theme) {\n    (function(style) {\n      colors[style] = function(str) {\n        if (typeof theme[style] === 'object') {\n          var out = str;\n          for (var i in theme[style]) {\n            out = colors[theme[style][i]](out);\n          }\n          return out;\n        }\n        return colors[theme[style]](str);\n      };\n    })(style);\n  }\n};\n\nfunction init() {\n  var ret = {};\n  Object.keys(styles).forEach(function(name) {\n    ret[name] = {\n      get: function() {\n        return build([name]);\n      },\n    };\n  });\n  return ret;\n}\n\nvar sequencer = function sequencer(map, str) {\n  var exploded = str.split('');\n  exploded = exploded.map(map);\n  return exploded.join('');\n};\n\n// custom formatter methods\ncolors.trap = require('./custom/trap');\ncolors.zalgo = require('./custom/zalgo');\n\n// maps\ncolors.maps = {};\ncolors.maps.america = require('./maps/america')(colors);\ncolors.maps.zebra = require('./maps/zebra')(colors);\ncolors.maps.rainbow = require('./maps/rainbow')(colors);\ncolors.maps.random = require('./maps/random')(colors);\n\nfor (var map in colors.maps) {\n  (function(map) {\n    colors[map] = function(str) {\n      return sequencer(colors.maps[map], str);\n    };\n  })(map);\n}\n\ndefineProps(colors, init());\n", "//\n// Remark: Requiring this file will use the \"safe\" colors API,\n// which will not touch String.prototype.\n//\n//   var colors = require('colors/safe');\n//   colors.red(\"foo\")\n//\n//\nvar colors = require('./lib/colors');\nmodule['exports'] = colors;\n", "/**\n * cli.js: Config that conform to commonly used CLI logging levels.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\n/**\n * Default levels for the CLI configuration.\n * @type {Object}\n */\nexports.levels = {\n  error: 0,\n  warn: 1,\n  help: 2,\n  data: 3,\n  info: 4,\n  debug: 5,\n  prompt: 6,\n  verbose: 7,\n  input: 8,\n  silly: 9\n};\n\n/**\n * Default colors for the CLI configuration.\n * @type {Object}\n */\nexports.colors = {\n  error: 'red',\n  warn: 'yellow',\n  help: 'cyan',\n  data: 'grey',\n  info: 'green',\n  debug: 'blue',\n  prompt: 'grey',\n  verbose: 'cyan',\n  input: 'grey',\n  silly: 'magenta'\n};\n", "/**\n * npm.js: Config that conform to npm logging levels.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\n/**\n * Default levels for the npm configuration.\n * @type {Object}\n */\nexports.levels = {\n  error: 0,\n  warn: 1,\n  info: 2,\n  http: 3,\n  verbose: 4,\n  debug: 5,\n  silly: 6\n};\n\n/**\n * Default levels for the npm configuration.\n * @type {Object}\n */\nexports.colors = {\n  error: 'red',\n  warn: 'yellow',\n  info: 'green',\n  http: 'green',\n  verbose: 'cyan',\n  debug: 'blue',\n  silly: 'magenta'\n};\n", "/**\n * syslog.js: Config that conform to syslog logging levels.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\n/**\n * Default levels for the syslog configuration.\n * @type {Object}\n */\nexports.levels = {\n  emerg: 0,\n  alert: 1,\n  crit: 2,\n  error: 3,\n  warning: 4,\n  notice: 5,\n  info: 6,\n  debug: 7\n};\n\n/**\n * Default levels for the syslog configuration.\n * @type {Object}\n */\nexports.colors = {\n  emerg: 'red',\n  alert: 'yellow',\n  crit: 'red',\n  error: 'red',\n  warning: 'red',\n  notice: 'yellow',\n  info: 'green',\n  debug: 'blue'\n};\n", "/**\n * index.js: Default settings for all levels that winston knows about.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\n/**\n * Export config set for the CLI.\n * @type {Object}\n */\nObject.defineProperty(exports, 'cli', {\n  value: require('./cli')\n});\n\n/**\n * Export config set for npm.\n * @type {Object}\n */\nObject.defineProperty(exports, 'npm', {\n  value: require('./npm')\n});\n\n/**\n * Export config set for the syslog.\n * @type {Object}\n */\nObject.defineProperty(exports, 'syslog', {\n  value: require('./syslog')\n});\n", "'use strict';\n\n/**\n * A shareable symbol constant that can be used\n * as a non-enumerable / semi-hidden level identifier\n * to allow the readable level property to be mutable for\n * operations like colorization\n *\n * @type {Symbol}\n */\nObject.defineProperty(exports, 'LEVEL', {\n  value: Symbol.for('level')\n});\n\n/**\n * A shareable symbol constant that can be used\n * as a non-enumerable / semi-hidden message identifier\n * to allow the final message property to not have\n * side effects on another.\n *\n * @type {Symbol}\n */\nObject.defineProperty(exports, 'MESSAGE', {\n  value: Symbol.for('message')\n});\n\n/**\n * A shareable symbol constant that can be used\n * as a non-enumerable / semi-hidden message identifier\n * to allow the extracted splat property be hidden\n *\n * @type {Symbol}\n */\nObject.defineProperty(exports, 'SPLAT', {\n  value: Symbol.for('splat')\n});\n\n/**\n * A shareable object constant  that can be used\n * as a standard configuration for winston@3.\n *\n * @type {Object}\n */\nObject.defineProperty(exports, 'configs', {\n  value: require('./config')\n});\n", "'use strict';\n\nconst colors = require('@colors/colors/safe');\nconst { LEVEL, MESSAGE } = require('triple-beam');\n\n//\n// Fix colors not appearing in non-tty environments\n//\ncolors.enabled = true;\n\n/**\n * @property {RegExp} hasSpace\n * Simple regex to check for presence of spaces.\n */\nconst hasSpace = /\\s+/;\n\n/*\n * Colorizer format. Wraps the `level` and/or `message` properties\n * of the `info` objects with ANSI color codes based on a few options.\n */\nclass Colorizer {\n  constructor(opts = {}) {\n    if (opts.colors) {\n      this.addColors(opts.colors);\n    }\n\n    this.options = opts;\n  }\n\n  /*\n   * Adds the colors Object to the set of allColors\n   * known by the Colorizer\n   *\n   * @param {Object} colors Set of color mappings to add.\n   */\n  static addColors(clrs) {\n    const nextColors = Object.keys(clrs).reduce((acc, level) => {\n      acc[level] = hasSpace.test(clrs[level])\n        ? clrs[level].split(hasSpace)\n        : clrs[level];\n\n      return acc;\n    }, {});\n\n    Colorizer.allColors = Object.assign({}, Colorizer.allColors || {}, nextColors);\n    return Colorizer.allColors;\n  }\n\n  /*\n   * Adds the colors Object to the set of allColors\n   * known by the Colorizer\n   *\n   * @param {Object} colors Set of color mappings to add.\n   */\n  addColors(clrs) {\n    return Colorizer.addColors(clrs);\n  }\n\n  /*\n   * function colorize (lookup, level, message)\n   * Performs multi-step colorization using @colors/colors/safe\n   */\n  colorize(lookup, level, message) {\n    if (typeof message === 'undefined') {\n      message = level;\n    }\n\n    //\n    // If the color for the level is just a string\n    // then attempt to colorize the message with it.\n    //\n    if (!Array.isArray(Colorizer.allColors[lookup])) {\n      return colors[Colorizer.allColors[lookup]](message);\n    }\n\n    //\n    // If it is an Array then iterate over that Array, applying\n    // the colors function for each item.\n    //\n    for (let i = 0, len = Colorizer.allColors[lookup].length; i < len; i++) {\n      message = colors[Colorizer.allColors[lookup][i]](message);\n    }\n\n    return message;\n  }\n\n  /*\n   * function transform (info, opts)\n   * Attempts to colorize the { level, message } of the given\n   * `logform` info object.\n   */\n  transform(info, opts) {\n    if (opts.all && typeof info[MESSAGE] === 'string') {\n      info[MESSAGE] = this.colorize(info[LEVEL], info.level, info[MESSAGE]);\n    }\n\n    if (opts.level || opts.all || !opts.message) {\n      info.level = this.colorize(info[LEVEL], info.level);\n    }\n\n    if (opts.all || opts.message) {\n      info.message = this.colorize(info[LEVEL], info.level, info.message);\n    }\n\n    return info;\n  }\n}\n\n/*\n * function colorize (info)\n * Returns a new instance of the colorize Format that applies\n * level colors to `info` objects. This was previously exposed\n * as { colorize: true } to transports in `winston < 3.0.0`.\n */\nmodule.exports = opts => new Colorizer(opts);\n\n//\n// Attach the Colorizer for registration purposes\n//\nmodule.exports.Colorizer\n  = module.exports.Format\n  = Colorizer;\n", "'use strict';\n\nconst { Colorizer } = require('./colorize');\n\n/*\n * Simple method to register colors with a simpler require\n * path within the module.\n */\nmodule.exports = config => {\n  Colorizer.addColors(config.colors || config);\n  return config;\n};\n", "'use strict';\n\nconst format = require('./format');\n\n/*\n * function align (info)\n * Returns a new instance of the align Format which adds a `\\t`\n * delimiter before the message to properly align it in the same place.\n * It was previously { align: true } in winston < 3.0.0\n */\nmodule.exports = format(info => {\n  info.message = `\\t${info.message}`;\n  return info;\n});\n", "/* eslint no-undefined: 0 */\n'use strict';\n\nconst format = require('./format');\nconst { LEVEL, MESSAGE } = require('triple-beam');\n\n/*\n * function errors (info)\n * If the `message` property of the `info` object is an instance of `Error`,\n * replace the `Error` object its own `message` property.\n *\n * Optionally, the Error's `stack` and/or `cause` properties can also be appended to the `info` object.\n */\nmodule.exports = format((einfo, { stack, cause }) => {\n  if (einfo instanceof Error) {\n    const info = Object.assign({}, einfo, {\n      level: einfo.level,\n      [LEVEL]: einfo[LEVEL] || einfo.level,\n      message: einfo.message,\n      [MESSAGE]: einfo[MESSAGE] || einfo.message\n    });\n\n    if (stack) info.stack = einfo.stack;\n    if (cause) info.cause = einfo.cause;\n    return info;\n  }\n\n  if (!(einfo.message instanceof Error)) return einfo;\n\n  // Assign all enumerable properties and the\n  // message property from the error provided.\n  const err = einfo.message;\n  Object.assign(einfo, err);\n  einfo.message = err.message;\n  einfo[MESSAGE] = err.message;\n\n  // Assign the stack and/or cause if requested.\n  if (stack) einfo.stack = err.stack;\n  if (cause) einfo.cause = err.cause;\n  return einfo;\n});\n", "/* eslint no-unused-vars: 0 */\n'use strict';\n\nconst { configs, LEVEL, MESSAGE } = require('triple-beam');\n\nclass Padder {\n  constructor(opts = { levels: configs.npm.levels }) {\n    this.paddings = Padder.paddingForLevels(opts.levels, opts.filler);\n    this.options = opts;\n  }\n\n  /**\n   * Returns the maximum length of keys in the specified `levels` Object.\n   * @param  {Object} levels Set of all levels to calculate longest level against.\n   * @returns {Number} Maximum length of the longest level string.\n   */\n  static getLongestLevel(levels) {\n    const lvls = Object.keys(levels).map(level => level.length);\n    return Math.max(...lvls);\n  }\n\n  /**\n   * Returns the padding for the specified `level` assuming that the\n   * maximum length of all levels it's associated with is `maxLength`.\n   * @param  {String} level Level to calculate padding for.\n   * @param  {String} filler Repeatable text to use for padding.\n   * @param  {Number} maxLength Length of the longest level\n   * @returns {String} Padding string for the `level`\n   */\n  static paddingForLevel(level, filler, maxLength) {\n    const targetLen = maxLength + 1 - level.length;\n    const rep = Math.floor(targetLen / filler.length);\n    const padding = `${filler}${filler.repeat(rep)}`;\n    return padding.slice(0, targetLen);\n  }\n\n  /**\n   * Returns an object with the string paddings for the given `levels`\n   * using the specified `filler`.\n   * @param  {Object} levels Set of all levels to calculate padding for.\n   * @param  {String} filler Repeatable text to use for padding.\n   * @returns {Object} Mapping of level to desired padding.\n   */\n  static paddingForLevels(levels, filler = ' ') {\n    const maxLength = Padder.getLongestLevel(levels);\n    return Object.keys(levels).reduce((acc, level) => {\n      acc[level] = Padder.paddingForLevel(level, filler, maxLength);\n      return acc;\n    }, {});\n  }\n\n  /**\n   * Prepends the padding onto the `message` based on the `LEVEL` of\n   * the `info`. This is based on the behavior of `winston@2` which also\n   * prepended the level onto the message.\n   *\n   * See: https://github.com/winstonjs/winston/blob/2.x/lib/winston/logger.js#L198-L201\n   *\n   * @param  {Info} info Logform info object\n   * @param  {Object} opts Options passed along to this instance.\n   * @returns {Info} Modified logform info object.\n   */\n  transform(info, opts) {\n    info.message = `${this.paddings[info[LEVEL]]}${info.message}`;\n    if (info[MESSAGE]) {\n      info[MESSAGE] = `${this.paddings[info[LEVEL]]}${info[MESSAGE]}`;\n    }\n\n    return info;\n  }\n}\n\n/*\n * function padLevels (info)\n * Returns a new instance of the padLevels Format which pads\n * levels to be the same length. This was previously exposed as\n * { padLevels: true } to transports in `winston < 3.0.0`.\n */\nmodule.exports = opts => new Padder(opts);\n\nmodule.exports.Padder\n  = module.exports.Format\n  = Padder;\n", "'use strict';\n\nconst { Colorizer } = require('./colorize');\nconst { Padder } = require('./pad-levels');\nconst { configs, MESSAGE } = require('triple-beam');\n\n\n/**\n * Cli format class that handles initial state for a a separate\n * Colorizer and Padder instance.\n */\nclass CliFormat {\n  constructor(opts = {}) {\n    if (!opts.levels) {\n      opts.levels = configs.cli.levels;\n    }\n\n    this.colorizer = new Colorizer(opts);\n    this.padder = new Padder(opts);\n    this.options = opts;\n  }\n\n  /*\n   * function transform (info, opts)\n   * Attempts to both:\n   * 1. Pad the { level }\n   * 2. Colorize the { level, message }\n   * of the given `logform` info object depending on the `opts`.\n   */\n  transform(info, opts) {\n    this.colorizer.transform(\n      this.padder.transform(info, opts),\n      opts\n    );\n\n    info[MESSAGE] = `${info.level}:${info.message}`;\n    return info;\n  }\n}\n\n/*\n * function cli (opts)\n * Returns a new instance of the CLI format that turns a log\n * `info` object into the same format previously available\n * in `winston.cli()` in `winston < 3.0.0`.\n */\nmodule.exports = opts => new CliFormat(opts);\n\n//\n// Attach the CliFormat for registration purposes\n//\nmodule.exports.Format = CliFormat;\n", "'use strict';\n\nconst format = require('./format');\n\n/*\n * function cascade(formats)\n * Returns a function that invokes the `._format` function in-order\n * for the specified set of `formats`. In this manner we say that Formats\n * are \"pipe-like\", but not a pure pumpify implementation. Since there is no back\n * pressure we can remove all of the \"readable\" plumbing in Node streams.\n */\nfunction cascade(formats) {\n  if (!formats.every(isValidFormat)) {\n    return;\n  }\n\n  return info => {\n    let obj = info;\n    for (let i = 0; i < formats.length; i++) {\n      obj = formats[i].transform(obj, formats[i].options);\n      if (!obj) {\n        return false;\n      }\n    }\n\n    return obj;\n  };\n}\n\n/*\n * function isValidFormat(format)\n * If the format does not define a `transform` function throw an error\n * with more detailed usage.\n */\nfunction isValidFormat(fmt) {\n  if (typeof fmt.transform !== 'function') {\n    throw new Error([\n      'No transform function found on format. Did you create a format instance?',\n      'const myFormat = format(formatFn);',\n      'const instance = myFormat();'\n    ].join('\\n'));\n  }\n\n  return true;\n}\n\n/*\n * function combine (info)\n * Returns a new instance of the combine Format which combines the specified\n * formats into a new format. This is similar to a pipe-chain in transform streams.\n * We choose to combine the prototypes this way because there is no back pressure in\n * an in-memory transform chain.\n */\nmodule.exports = (...formats) => {\n  const combinedFormat = format(cascade(formats));\n  const instance = combinedFormat();\n  instance.Format = combinedFormat.Format;\n  return instance;\n};\n\n//\n// Export the cascade method for use in cli and other\n// combined formats that should not be assumed to be\n// singletons.\n//\nmodule.exports.cascade = cascade;\n", "'use strict'\n\nconst { hasOwnProperty } = Object.prototype\n\nconst stringify = configure()\n\n// @ts-expect-error\nstringify.configure = configure\n// @ts-expect-error\nstringify.stringify = stringify\n\n// @ts-expect-error\nstringify.default = stringify\n\n// @ts-expect-error used for named export\nexports.stringify = stringify\n// @ts-expect-error used for named export\nexports.configure = configure\n\nmodule.exports = stringify\n\n// eslint-disable-next-line no-control-regex\nconst strEscapeSequencesRegExp = /[\\u0000-\\u001f\\u0022\\u005c\\ud800-\\udfff]/\n\n// Escape C0 control characters, double quotes, the backslash and every code\n// unit with a numeric value in the inclusive range 0xD800 to 0xDFFF.\nfunction strEscape (str) {\n  // Some magic numbers that worked out fine while benchmarking with v8 8.0\n  if (str.length < 5000 && !strEscapeSequencesRegExp.test(str)) {\n    return `\"${str}\"`\n  }\n  return JSON.stringify(str)\n}\n\nfunction sort (array, comparator) {\n  // Insertion sort is very efficient for small input sizes, but it has a bad\n  // worst case complexity. Thus, use native array sort for bigger values.\n  if (array.length > 2e2 || comparator) {\n    return array.sort(comparator)\n  }\n  for (let i = 1; i < array.length; i++) {\n    const currentValue = array[i]\n    let position = i\n    while (position !== 0 && array[position - 1] > currentValue) {\n      array[position] = array[position - 1]\n      position--\n    }\n    array[position] = currentValue\n  }\n  return array\n}\n\nconst typedArrayPrototypeGetSymbolToStringTag =\n  Object.getOwnPropertyDescriptor(\n    Object.getPrototypeOf(\n      Object.getPrototypeOf(\n        new Int8Array()\n      )\n    ),\n    Symbol.toStringTag\n  ).get\n\nfunction isTypedArrayWithEntries (value) {\n  return typedArrayPrototypeGetSymbolToStringTag.call(value) !== undefined && value.length !== 0\n}\n\nfunction stringifyTypedArray (array, separator, maximumBreadth) {\n  if (array.length < maximumBreadth) {\n    maximumBreadth = array.length\n  }\n  const whitespace = separator === ',' ? '' : ' '\n  let res = `\"0\":${whitespace}${array[0]}`\n  for (let i = 1; i < maximumBreadth; i++) {\n    res += `${separator}\"${i}\":${whitespace}${array[i]}`\n  }\n  return res\n}\n\nfunction getCircularValueOption (options) {\n  if (hasOwnProperty.call(options, 'circularValue')) {\n    const circularValue = options.circularValue\n    if (typeof circularValue === 'string') {\n      return `\"${circularValue}\"`\n    }\n    if (circularValue == null) {\n      return circularValue\n    }\n    if (circularValue === Error || circularValue === TypeError) {\n      return {\n        toString () {\n          throw new TypeError('Converting circular structure to JSON')\n        }\n      }\n    }\n    throw new TypeError('The \"circularValue\" argument must be of type string or the value null or undefined')\n  }\n  return '\"[Circular]\"'\n}\n\nfunction getDeterministicOption (options) {\n  let value\n  if (hasOwnProperty.call(options, 'deterministic')) {\n    value = options.deterministic\n    if (typeof value !== 'boolean' && typeof value !== 'function') {\n      throw new TypeError('The \"deterministic\" argument must be of type boolean or comparator function')\n    }\n  }\n  return value === undefined ? true : value\n}\n\nfunction getBooleanOption (options, key) {\n  let value\n  if (hasOwnProperty.call(options, key)) {\n    value = options[key]\n    if (typeof value !== 'boolean') {\n      throw new TypeError(`The \"${key}\" argument must be of type boolean`)\n    }\n  }\n  return value === undefined ? true : value\n}\n\nfunction getPositiveIntegerOption (options, key) {\n  let value\n  if (hasOwnProperty.call(options, key)) {\n    value = options[key]\n    if (typeof value !== 'number') {\n      throw new TypeError(`The \"${key}\" argument must be of type number`)\n    }\n    if (!Number.isInteger(value)) {\n      throw new TypeError(`The \"${key}\" argument must be an integer`)\n    }\n    if (value < 1) {\n      throw new RangeError(`The \"${key}\" argument must be >= 1`)\n    }\n  }\n  return value === undefined ? Infinity : value\n}\n\nfunction getItemCount (number) {\n  if (number === 1) {\n    return '1 item'\n  }\n  return `${number} items`\n}\n\nfunction getUniqueReplacerSet (replacerArray) {\n  const replacerSet = new Set()\n  for (const value of replacerArray) {\n    if (typeof value === 'string' || typeof value === 'number') {\n      replacerSet.add(String(value))\n    }\n  }\n  return replacerSet\n}\n\nfunction getStrictOption (options) {\n  if (hasOwnProperty.call(options, 'strict')) {\n    const value = options.strict\n    if (typeof value !== 'boolean') {\n      throw new TypeError('The \"strict\" argument must be of type boolean')\n    }\n    if (value) {\n      return (value) => {\n        let message = `Object can not safely be stringified. Received type ${typeof value}`\n        if (typeof value !== 'function') message += ` (${value.toString()})`\n        throw new Error(message)\n      }\n    }\n  }\n}\n\nfunction configure (options) {\n  options = { ...options }\n  const fail = getStrictOption(options)\n  if (fail) {\n    if (options.bigint === undefined) {\n      options.bigint = false\n    }\n    if (!('circularValue' in options)) {\n      options.circularValue = Error\n    }\n  }\n  const circularValue = getCircularValueOption(options)\n  const bigint = getBooleanOption(options, 'bigint')\n  const deterministic = getDeterministicOption(options)\n  const comparator = typeof deterministic === 'function' ? deterministic : undefined\n  const maximumDepth = getPositiveIntegerOption(options, 'maximumDepth')\n  const maximumBreadth = getPositiveIntegerOption(options, 'maximumBreadth')\n\n  function stringifyFnReplacer (key, parent, stack, replacer, spacer, indentation) {\n    let value = parent[key]\n\n    if (typeof value === 'object' && value !== null && typeof value.toJSON === 'function') {\n      value = value.toJSON(key)\n    }\n    value = replacer.call(parent, key, value)\n\n    switch (typeof value) {\n      case 'string':\n        return strEscape(value)\n      case 'object': {\n        if (value === null) {\n          return 'null'\n        }\n        if (stack.indexOf(value) !== -1) {\n          return circularValue\n        }\n\n        let res = ''\n        let join = ','\n        const originalIndentation = indentation\n\n        if (Array.isArray(value)) {\n          if (value.length === 0) {\n            return '[]'\n          }\n          if (maximumDepth < stack.length + 1) {\n            return '\"[Array]\"'\n          }\n          stack.push(value)\n          if (spacer !== '') {\n            indentation += spacer\n            res += `\\n${indentation}`\n            join = `,\\n${indentation}`\n          }\n          const maximumValuesToStringify = Math.min(value.length, maximumBreadth)\n          let i = 0\n          for (; i < maximumValuesToStringify - 1; i++) {\n            const tmp = stringifyFnReplacer(String(i), value, stack, replacer, spacer, indentation)\n            res += tmp !== undefined ? tmp : 'null'\n            res += join\n          }\n          const tmp = stringifyFnReplacer(String(i), value, stack, replacer, spacer, indentation)\n          res += tmp !== undefined ? tmp : 'null'\n          if (value.length - 1 > maximumBreadth) {\n            const removedKeys = value.length - maximumBreadth - 1\n            res += `${join}\"... ${getItemCount(removedKeys)} not stringified\"`\n          }\n          if (spacer !== '') {\n            res += `\\n${originalIndentation}`\n          }\n          stack.pop()\n          return `[${res}]`\n        }\n\n        let keys = Object.keys(value)\n        const keyLength = keys.length\n        if (keyLength === 0) {\n          return '{}'\n        }\n        if (maximumDepth < stack.length + 1) {\n          return '\"[Object]\"'\n        }\n        let whitespace = ''\n        let separator = ''\n        if (spacer !== '') {\n          indentation += spacer\n          join = `,\\n${indentation}`\n          whitespace = ' '\n        }\n        const maximumPropertiesToStringify = Math.min(keyLength, maximumBreadth)\n        if (deterministic && !isTypedArrayWithEntries(value)) {\n          keys = sort(keys, comparator)\n        }\n        stack.push(value)\n        for (let i = 0; i < maximumPropertiesToStringify; i++) {\n          const key = keys[i]\n          const tmp = stringifyFnReplacer(key, value, stack, replacer, spacer, indentation)\n          if (tmp !== undefined) {\n            res += `${separator}${strEscape(key)}:${whitespace}${tmp}`\n            separator = join\n          }\n        }\n        if (keyLength > maximumBreadth) {\n          const removedKeys = keyLength - maximumBreadth\n          res += `${separator}\"...\":${whitespace}\"${getItemCount(removedKeys)} not stringified\"`\n          separator = join\n        }\n        if (spacer !== '' && separator.length > 1) {\n          res = `\\n${indentation}${res}\\n${originalIndentation}`\n        }\n        stack.pop()\n        return `{${res}}`\n      }\n      case 'number':\n        return isFinite(value) ? String(value) : fail ? fail(value) : 'null'\n      case 'boolean':\n        return value === true ? 'true' : 'false'\n      case 'undefined':\n        return undefined\n      case 'bigint':\n        if (bigint) {\n          return String(value)\n        }\n        // fallthrough\n      default:\n        return fail ? fail(value) : undefined\n    }\n  }\n\n  function stringifyArrayReplacer (key, value, stack, replacer, spacer, indentation) {\n    if (typeof value === 'object' && value !== null && typeof value.toJSON === 'function') {\n      value = value.toJSON(key)\n    }\n\n    switch (typeof value) {\n      case 'string':\n        return strEscape(value)\n      case 'object': {\n        if (value === null) {\n          return 'null'\n        }\n        if (stack.indexOf(value) !== -1) {\n          return circularValue\n        }\n\n        const originalIndentation = indentation\n        let res = ''\n        let join = ','\n\n        if (Array.isArray(value)) {\n          if (value.length === 0) {\n            return '[]'\n          }\n          if (maximumDepth < stack.length + 1) {\n            return '\"[Array]\"'\n          }\n          stack.push(value)\n          if (spacer !== '') {\n            indentation += spacer\n            res += `\\n${indentation}`\n            join = `,\\n${indentation}`\n          }\n          const maximumValuesToStringify = Math.min(value.length, maximumBreadth)\n          let i = 0\n          for (; i < maximumValuesToStringify - 1; i++) {\n            const tmp = stringifyArrayReplacer(String(i), value[i], stack, replacer, spacer, indentation)\n            res += tmp !== undefined ? tmp : 'null'\n            res += join\n          }\n          const tmp = stringifyArrayReplacer(String(i), value[i], stack, replacer, spacer, indentation)\n          res += tmp !== undefined ? tmp : 'null'\n          if (value.length - 1 > maximumBreadth) {\n            const removedKeys = value.length - maximumBreadth - 1\n            res += `${join}\"... ${getItemCount(removedKeys)} not stringified\"`\n          }\n          if (spacer !== '') {\n            res += `\\n${originalIndentation}`\n          }\n          stack.pop()\n          return `[${res}]`\n        }\n        stack.push(value)\n        let whitespace = ''\n        if (spacer !== '') {\n          indentation += spacer\n          join = `,\\n${indentation}`\n          whitespace = ' '\n        }\n        let separator = ''\n        for (const key of replacer) {\n          const tmp = stringifyArrayReplacer(key, value[key], stack, replacer, spacer, indentation)\n          if (tmp !== undefined) {\n            res += `${separator}${strEscape(key)}:${whitespace}${tmp}`\n            separator = join\n          }\n        }\n        if (spacer !== '' && separator.length > 1) {\n          res = `\\n${indentation}${res}\\n${originalIndentation}`\n        }\n        stack.pop()\n        return `{${res}}`\n      }\n      case 'number':\n        return isFinite(value) ? String(value) : fail ? fail(value) : 'null'\n      case 'boolean':\n        return value === true ? 'true' : 'false'\n      case 'undefined':\n        return undefined\n      case 'bigint':\n        if (bigint) {\n          return String(value)\n        }\n        // fallthrough\n      default:\n        return fail ? fail(value) : undefined\n    }\n  }\n\n  function stringifyIndent (key, value, stack, spacer, indentation) {\n    switch (typeof value) {\n      case 'string':\n        return strEscape(value)\n      case 'object': {\n        if (value === null) {\n          return 'null'\n        }\n        if (typeof value.toJSON === 'function') {\n          value = value.toJSON(key)\n          // Prevent calling `toJSON` again.\n          if (typeof value !== 'object') {\n            return stringifyIndent(key, value, stack, spacer, indentation)\n          }\n          if (value === null) {\n            return 'null'\n          }\n        }\n        if (stack.indexOf(value) !== -1) {\n          return circularValue\n        }\n        const originalIndentation = indentation\n\n        if (Array.isArray(value)) {\n          if (value.length === 0) {\n            return '[]'\n          }\n          if (maximumDepth < stack.length + 1) {\n            return '\"[Array]\"'\n          }\n          stack.push(value)\n          indentation += spacer\n          let res = `\\n${indentation}`\n          const join = `,\\n${indentation}`\n          const maximumValuesToStringify = Math.min(value.length, maximumBreadth)\n          let i = 0\n          for (; i < maximumValuesToStringify - 1; i++) {\n            const tmp = stringifyIndent(String(i), value[i], stack, spacer, indentation)\n            res += tmp !== undefined ? tmp : 'null'\n            res += join\n          }\n          const tmp = stringifyIndent(String(i), value[i], stack, spacer, indentation)\n          res += tmp !== undefined ? tmp : 'null'\n          if (value.length - 1 > maximumBreadth) {\n            const removedKeys = value.length - maximumBreadth - 1\n            res += `${join}\"... ${getItemCount(removedKeys)} not stringified\"`\n          }\n          res += `\\n${originalIndentation}`\n          stack.pop()\n          return `[${res}]`\n        }\n\n        let keys = Object.keys(value)\n        const keyLength = keys.length\n        if (keyLength === 0) {\n          return '{}'\n        }\n        if (maximumDepth < stack.length + 1) {\n          return '\"[Object]\"'\n        }\n        indentation += spacer\n        const join = `,\\n${indentation}`\n        let res = ''\n        let separator = ''\n        let maximumPropertiesToStringify = Math.min(keyLength, maximumBreadth)\n        if (isTypedArrayWithEntries(value)) {\n          res += stringifyTypedArray(value, join, maximumBreadth)\n          keys = keys.slice(value.length)\n          maximumPropertiesToStringify -= value.length\n          separator = join\n        }\n        if (deterministic) {\n          keys = sort(keys, comparator)\n        }\n        stack.push(value)\n        for (let i = 0; i < maximumPropertiesToStringify; i++) {\n          const key = keys[i]\n          const tmp = stringifyIndent(key, value[key], stack, spacer, indentation)\n          if (tmp !== undefined) {\n            res += `${separator}${strEscape(key)}: ${tmp}`\n            separator = join\n          }\n        }\n        if (keyLength > maximumBreadth) {\n          const removedKeys = keyLength - maximumBreadth\n          res += `${separator}\"...\": \"${getItemCount(removedKeys)} not stringified\"`\n          separator = join\n        }\n        if (separator !== '') {\n          res = `\\n${indentation}${res}\\n${originalIndentation}`\n        }\n        stack.pop()\n        return `{${res}}`\n      }\n      case 'number':\n        return isFinite(value) ? String(value) : fail ? fail(value) : 'null'\n      case 'boolean':\n        return value === true ? 'true' : 'false'\n      case 'undefined':\n        return undefined\n      case 'bigint':\n        if (bigint) {\n          return String(value)\n        }\n        // fallthrough\n      default:\n        return fail ? fail(value) : undefined\n    }\n  }\n\n  function stringifySimple (key, value, stack) {\n    switch (typeof value) {\n      case 'string':\n        return strEscape(value)\n      case 'object': {\n        if (value === null) {\n          return 'null'\n        }\n        if (typeof value.toJSON === 'function') {\n          value = value.toJSON(key)\n          // Prevent calling `toJSON` again\n          if (typeof value !== 'object') {\n            return stringifySimple(key, value, stack)\n          }\n          if (value === null) {\n            return 'null'\n          }\n        }\n        if (stack.indexOf(value) !== -1) {\n          return circularValue\n        }\n\n        let res = ''\n\n        const hasLength = value.length !== undefined\n        if (hasLength && Array.isArray(value)) {\n          if (value.length === 0) {\n            return '[]'\n          }\n          if (maximumDepth < stack.length + 1) {\n            return '\"[Array]\"'\n          }\n          stack.push(value)\n          const maximumValuesToStringify = Math.min(value.length, maximumBreadth)\n          let i = 0\n          for (; i < maximumValuesToStringify - 1; i++) {\n            const tmp = stringifySimple(String(i), value[i], stack)\n            res += tmp !== undefined ? tmp : 'null'\n            res += ','\n          }\n          const tmp = stringifySimple(String(i), value[i], stack)\n          res += tmp !== undefined ? tmp : 'null'\n          if (value.length - 1 > maximumBreadth) {\n            const removedKeys = value.length - maximumBreadth - 1\n            res += `,\"... ${getItemCount(removedKeys)} not stringified\"`\n          }\n          stack.pop()\n          return `[${res}]`\n        }\n\n        let keys = Object.keys(value)\n        const keyLength = keys.length\n        if (keyLength === 0) {\n          return '{}'\n        }\n        if (maximumDepth < stack.length + 1) {\n          return '\"[Object]\"'\n        }\n        let separator = ''\n        let maximumPropertiesToStringify = Math.min(keyLength, maximumBreadth)\n        if (hasLength && isTypedArrayWithEntries(value)) {\n          res += stringifyTypedArray(value, ',', maximumBreadth)\n          keys = keys.slice(value.length)\n          maximumPropertiesToStringify -= value.length\n          separator = ','\n        }\n        if (deterministic) {\n          keys = sort(keys, comparator)\n        }\n        stack.push(value)\n        for (let i = 0; i < maximumPropertiesToStringify; i++) {\n          const key = keys[i]\n          const tmp = stringifySimple(key, value[key], stack)\n          if (tmp !== undefined) {\n            res += `${separator}${strEscape(key)}:${tmp}`\n            separator = ','\n          }\n        }\n        if (keyLength > maximumBreadth) {\n          const removedKeys = keyLength - maximumBreadth\n          res += `${separator}\"...\":\"${getItemCount(removedKeys)} not stringified\"`\n        }\n        stack.pop()\n        return `{${res}}`\n      }\n      case 'number':\n        return isFinite(value) ? String(value) : fail ? fail(value) : 'null'\n      case 'boolean':\n        return value === true ? 'true' : 'false'\n      case 'undefined':\n        return undefined\n      case 'bigint':\n        if (bigint) {\n          return String(value)\n        }\n        // fallthrough\n      default:\n        return fail ? fail(value) : undefined\n    }\n  }\n\n  function stringify (value, replacer, space) {\n    if (arguments.length > 1) {\n      let spacer = ''\n      if (typeof space === 'number') {\n        spacer = ' '.repeat(Math.min(space, 10))\n      } else if (typeof space === 'string') {\n        spacer = space.slice(0, 10)\n      }\n      if (replacer != null) {\n        if (typeof replacer === 'function') {\n          return stringifyFnReplacer('', { '': value }, [], replacer, spacer, '')\n        }\n        if (Array.isArray(replacer)) {\n          return stringifyArrayReplacer('', value, [], getUniqueReplacerSet(replacer), spacer, '')\n        }\n      }\n      if (spacer.length !== 0) {\n        return stringifyIndent('', value, [], spacer, '')\n      }\n    }\n    return stringifySimple('', value, [])\n  }\n\n  return stringify\n}\n", "'use strict';\n\nconst format = require('./format');\nconst { MESSAGE } = require('triple-beam');\nconst stringify = require('safe-stable-stringify');\n\n/*\n * function replacer (key, value)\n * Handles proper stringification of Buffer and bigint output.\n */\nfunction replacer(key, value) {\n  // safe-stable-stringify does support BigInt, however, it doesn't wrap the value in quotes.\n  // Leading to a loss in fidelity if the resulting string is parsed.\n  // It would also be a breaking change for logform.\n  if (typeof value === 'bigint')\n    return value.toString();\n  return value;\n}\n\n/*\n * function json (info)\n * Returns a new instance of the JSON format that turns a log `info`\n * object into pure JSON. This was previously exposed as { json: true }\n * to transports in `winston < 3.0.0`.\n */\nmodule.exports = format((info, opts) => {\n  const jsonStringify = stringify.configure(opts);\n  info[MESSAGE] = jsonStringify(info, opts.replacer || replacer, opts.space);\n  return info;\n});\n", "'use strict';\n\nconst format = require('./format');\n\n/*\n * function label (info)\n * Returns a new instance of the label Format which adds the specified\n * `opts.label` before the message. This was previously exposed as\n * { label: 'my label' } to transports in `winston < 3.0.0`.\n */\nmodule.exports = format((info, opts) => {\n  if (opts.message) {\n    info.message = `[${opts.label}] ${info.message}`;\n    return info;\n  }\n\n  info.label = opts.label;\n  return info;\n});\n", "'use strict';\n\nconst format = require('./format');\nconst { MESSAGE } = require('triple-beam');\nconst jsonStringify = require('safe-stable-stringify');\n\n/*\n * function logstash (info)\n * Returns a new instance of the LogStash Format that turns a\n * log `info` object into pure JSON with the appropriate logstash\n * options. This was previously exposed as { logstash: true }\n * to transports in `winston < 3.0.0`.\n */\nmodule.exports = format(info => {\n  const logstash = {};\n  if (info.message) {\n    logstash['@message'] = info.message;\n    delete info.message;\n  }\n\n  if (info.timestamp) {\n    logstash['@timestamp'] = info.timestamp;\n    delete info.timestamp;\n  }\n\n  logstash['@fields'] = info;\n  info[MESSAGE] = jsonStringify(logstash);\n  return info;\n});\n", "'use strict';\n\nconst format = require('./format');\n\nfunction fillExcept(info, fillExceptKeys, metadataKey) {\n  const savedKeys = fillExceptKeys.reduce((acc, key) => {\n    acc[key] = info[key];\n    delete info[key];\n    return acc;\n  }, {});\n  const metadata = Object.keys(info).reduce((acc, key) => {\n    acc[key] = info[key];\n    delete info[key];\n    return acc;\n  }, {});\n\n  Object.assign(info, savedKeys, {\n    [metadataKey]: metadata\n  });\n  return info;\n}\n\nfunction fillWith(info, fillWithKeys, metadataKey) {\n  info[metadataKey] = fillWithKeys.reduce((acc, key) => {\n    acc[key] = info[key];\n    delete info[key];\n    return acc;\n  }, {});\n  return info;\n}\n\n/**\n * Adds in a \"metadata\" object to collect extraneous data, similar to the metadata\n * object in winston 2.x.\n */\nmodule.exports = format((info, opts = {}) => {\n  let metadataKey = 'metadata';\n  if (opts.key) {\n    metadataKey = opts.key;\n  }\n\n  let fillExceptKeys = [];\n  if (!opts.fillExcept && !opts.fillWith) {\n    fillExceptKeys.push('level');\n    fillExceptKeys.push('message');\n  }\n\n  if (opts.fillExcept) {\n    fillExceptKeys = opts.fillExcept;\n  }\n\n  if (fillExceptKeys.length > 0) {\n    return fillExcept(info, fillExceptKeys, metadataKey);\n  }\n\n  if (opts.fillWith) {\n    return fillWith(info, opts.fillWith, metadataKey);\n  }\n\n  return info;\n});\n", "/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function (val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n", "'use strict';\n\nconst format = require('./format');\nconst ms = require('ms');\n\n/*\n * function ms (info)\n * Returns an `info` with a `ms` property. The `ms` property holds the Value\n * of the time difference between two calls in milliseconds.\n */\nmodule.exports = format(info => {\n  const curr = +new Date();\n  this.diff = curr - (this.prevTime || curr);\n  this.prevTime = curr;\n  info.ms = `+${ms(this.diff)}`;\n\n  return info;\n});\n", "'use strict';\n\nconst inspect = require('util').inspect;\nconst format = require('./format');\nconst { LEVEL, MESSAGE, SPLAT } = require('triple-beam');\n\n/*\n * function prettyPrint (info)\n * Returns a new instance of the prettyPrint Format that \"prettyPrint\"\n * serializes `info` objects. This was previously exposed as\n * { prettyPrint: true } to transports in `winston < 3.0.0`.\n */\nmodule.exports = format((info, opts = {}) => {\n  //\n  // info[{LEVEL, MESSAGE, SPLAT}] are enumerable here. Since they\n  // are internal, we remove them before util.inspect so they\n  // are not printed.\n  //\n  const stripped = Object.assign({}, info);\n\n  // Remark (indexzero): update this technique in April 2019\n  // when node@6 is EOL\n  delete stripped[LEVEL];\n  delete stripped[MESSAGE];\n  delete stripped[SPLAT];\n\n  info[MESSAGE] = inspect(stripped, false, opts.depth || null, opts.colorize);\n  return info;\n});\n", "'use strict';\n\nconst { MESSAGE } = require('triple-beam');\n\nclass Printf {\n  constructor(templateFn) {\n    this.template = templateFn;\n  }\n\n  transform(info) {\n    info[MESSAGE] = this.template(info);\n    return info;\n  }\n}\n\n/*\n * function printf (templateFn)\n * Returns a new instance of the printf Format that creates an\n * intermediate prototype to store the template string-based formatter\n * function.\n */\nmodule.exports = opts => new Printf(opts);\n\nmodule.exports.Printf\n  = module.exports.Format\n  = Printf;\n", "/* eslint no-undefined: 0 */\n'use strict';\n\nconst format = require('./format');\nconst { MESSAGE } = require('triple-beam');\nconst jsonStringify = require('safe-stable-stringify');\n\n/*\n * function simple (info)\n * Returns a new instance of the simple format TransformStream\n * which writes a simple representation of logs.\n *\n *    const { level, message, splat, ...rest } = info;\n *\n *    ${level}: ${message}                            if rest is empty\n *    ${level}: ${message} ${JSON.stringify(rest)}    otherwise\n */\nmodule.exports = format(info => {\n  const stringifiedRest = jsonStringify(Object.assign({}, info, {\n    level: undefined,\n    message: undefined,\n    splat: undefined\n  }));\n\n  const padding = info.padding && info.padding[info.level] || '';\n  if (stringifiedRest !== '{}') {\n    info[MESSAGE] = `${info.level}:${padding} ${info.message} ${stringifiedRest}`;\n  } else {\n    info[MESSAGE] = `${info.level}:${padding} ${info.message}`;\n  }\n\n  return info;\n});\n", "'use strict';\n\nconst util = require('util');\nconst { SPLAT } = require('triple-beam');\n\n/**\n * Captures the number of format (i.e. %s strings) in a given string.\n * Based on `util.format`, see Node.js source:\n * https://github.com/nodejs/node/blob/b1c8f15c5f169e021f7c46eb7b219de95fe97603/lib/util.js#L201-L230\n * @type {RegExp}\n */\nconst formatRegExp = /%[scdjifoO%]/g;\n\n/**\n * Captures the number of escaped % signs in a format string (i.e. %s strings).\n * @type {RegExp}\n */\nconst escapedPercent = /%%/g;\n\nclass Splatter {\n  constructor(opts) {\n    this.options = opts;\n  }\n\n  /**\n     * Check to see if tokens <= splat.length, assign { splat, meta } into the\n     * `info` accordingly, and write to this instance.\n     *\n     * @param  {Info} info Logform info message.\n     * @param  {String[]} tokens Set of string interpolation tokens.\n     * @returns {Info} Modified info message\n     * @private\n     */\n  _splat(info, tokens) {\n    const msg = info.message;\n    const splat = info[SPLAT] || info.splat || [];\n    const percents = msg.match(escapedPercent);\n    const escapes = percents && percents.length || 0;\n\n    // The expected splat is the number of tokens minus the number of escapes\n    // e.g.\n    // - { expectedSplat: 3 } '%d %s %j'\n    // - { expectedSplat: 5 } '[%s] %d%% %d%% %s %j'\n    //\n    // Any \"meta\" will be arugments in addition to the expected splat size\n    // regardless of type. e.g.\n    //\n    // logger.log('info', '%d%% %s %j', 100, 'wow', { such: 'js' }, { thisIsMeta: true });\n    // would result in splat of four (4), but only three (3) are expected. Therefore:\n    //\n    // extraSplat = 3 - 4 = -1\n    // metas = [100, 'wow', { such: 'js' }, { thisIsMeta: true }].splice(-1, -1 * -1);\n    // splat = [100, 'wow', { such: 'js' }]\n    const expectedSplat = tokens.length - escapes;\n    const extraSplat = expectedSplat - splat.length;\n    const metas = extraSplat < 0\n      ? splat.splice(extraSplat, -1 * extraSplat)\n      : [];\n\n    // Now that { splat } has been separated from any potential { meta }. we\n    // can assign this to the `info` object and write it to our format stream.\n    // If the additional metas are **NOT** objects or **LACK** enumerable properties\n    // you are going to have a bad time.\n    const metalen = metas.length;\n    if (metalen) {\n      for (let i = 0; i < metalen; i++) {\n        Object.assign(info, metas[i]);\n      }\n    }\n\n    info.message = util.format(msg, ...splat);\n    return info;\n  }\n\n  /**\n    * Transforms the `info` message by using `util.format` to complete\n    * any `info.message` provided it has string interpolation tokens.\n    * If no tokens exist then `info` is immutable.\n    *\n    * @param  {Info} info Logform info message.\n    * @param  {Object} opts Options for this instance.\n    * @returns {Info} Modified info message\n    */\n  transform(info) {\n    const msg = info.message;\n    const splat = info[SPLAT] || info.splat;\n\n    // No need to process anything if splat is undefined\n    if (!splat || !splat.length) {\n      return info;\n    }\n\n    // Extract tokens, if none available default to empty array to\n    // ensure consistancy in expected results\n    const tokens = msg && msg.match && msg.match(formatRegExp);\n\n    // This condition will take care of inputs with info[SPLAT]\n    // but no tokens present\n    if (!tokens && (splat || splat.length)) {\n      const metas = splat.length > 1\n        ? splat.splice(0)\n        : splat;\n\n      // Now that { splat } has been separated from any potential { meta }. we\n      // can assign this to the `info` object and write it to our format stream.\n      // If the additional metas are **NOT** objects or **LACK** enumerable properties\n      // you are going to have a bad time.\n      const metalen = metas.length;\n      if (metalen) {\n        for (let i = 0; i < metalen; i++) {\n          Object.assign(info, metas[i]);\n        }\n      }\n\n      return info;\n    }\n\n    if (tokens) {\n      return this._splat(info, tokens);\n    }\n\n    return info;\n  }\n}\n\n/*\n * function splat (info)\n * Returns a new instance of the splat format TransformStream\n * which performs string interpolation from `info` objects. This was\n * previously exposed implicitly in `winston < 3.0.0`.\n */\nmodule.exports = opts => new Splatter(opts);\n", "const token = /d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\\1?|[aA]|\"[^\"]*\"|'[^']*'/g;\nconst twoDigitsOptional = \"\\\\d\\\\d?\";\nconst twoDigits = \"\\\\d\\\\d\";\nconst threeDigits = \"\\\\d{3}\";\nconst fourDigits = \"\\\\d{4}\";\nconst word = \"[^\\\\s]+\";\nconst literal = /\\[([^]*?)\\]/gm;\n\ntype DateInfo = {\n  year: number;\n  month: number;\n  day: number;\n  hour: number;\n  minute: number;\n  second: number;\n  millisecond: number;\n  isPm: number | null;\n  timezoneOffset: number | null;\n};\n\nexport type I18nSettings = {\n  amPm: [string, string];\n  dayNames: Days;\n  dayNamesShort: Days;\n  monthNames: Months;\n  monthNamesShort: Months;\n  DoFn(dayOfMonth: number): string;\n};\n\nexport type I18nSettingsOptional = Partial<I18nSettings>;\n\nexport type Days = [string, string, string, string, string, string, string];\nexport type Months = [\n  string,\n  string,\n  string,\n  string,\n  string,\n  string,\n  string,\n  string,\n  string,\n  string,\n  string,\n  string\n];\n\nfunction shorten<T extends string[]>(arr: T, sLen: number): string[] {\n  const newArr: string[] = [];\n  for (let i = 0, len = arr.length; i < len; i++) {\n    newArr.push(arr[i].substr(0, sLen));\n  }\n  return newArr;\n}\n\nconst monthUpdate = (\n  arrName: \"monthNames\" | \"monthNamesShort\" | \"dayNames\" | \"dayNamesShort\"\n) => (v: string, i18n: I18nSettings): number | null => {\n  const lowerCaseArr = i18n[arrName].map(v => v.toLowerCase());\n  const index = lowerCaseArr.indexOf(v.toLowerCase());\n  if (index > -1) {\n    return index;\n  }\n  return null;\n};\n\nexport function assign<A>(a: A): A;\nexport function assign<A, B>(a: A, b: B): A & B;\nexport function assign<A, B, C>(a: A, b: B, c: C): A & B & C;\nexport function assign<A, B, C, D>(a: A, b: B, c: C, d: D): A & B & C & D;\nexport function assign(origObj: any, ...args: any[]): any {\n  for (const obj of args) {\n    for (const key in obj) {\n      // @ts-ignore ex\n      origObj[key] = obj[key];\n    }\n  }\n  return origObj;\n}\n\nconst dayNames: Days = [\n  \"Sunday\",\n  \"Monday\",\n  \"Tuesday\",\n  \"Wednesday\",\n  \"Thursday\",\n  \"Friday\",\n  \"Saturday\"\n];\nconst monthNames: Months = [\n  \"January\",\n  \"February\",\n  \"March\",\n  \"April\",\n  \"May\",\n  \"June\",\n  \"July\",\n  \"August\",\n  \"September\",\n  \"October\",\n  \"November\",\n  \"December\"\n];\n\nconst monthNamesShort: Months = shorten(monthNames, 3) as Months;\nconst dayNamesShort: Days = shorten(dayNames, 3) as Days;\n\nconst defaultI18n: I18nSettings = {\n  dayNamesShort,\n  dayNames,\n  monthNamesShort,\n  monthNames,\n  amPm: [\"am\", \"pm\"],\n  DoFn(dayOfMonth: number) {\n    return (\n      dayOfMonth +\n      [\"th\", \"st\", \"nd\", \"rd\"][\n        dayOfMonth % 10 > 3\n          ? 0\n          : ((dayOfMonth - (dayOfMonth % 10) !== 10 ? 1 : 0) * dayOfMonth) % 10\n      ]\n    );\n  }\n};\nlet globalI18n = assign({}, defaultI18n);\nconst setGlobalDateI18n = (i18n: I18nSettingsOptional): I18nSettings =>\n  (globalI18n = assign(globalI18n, i18n));\n\nconst regexEscape = (str: string): string =>\n  str.replace(/[|\\\\{()[^$+*?.-]/g, \"\\\\$&\");\n\nconst pad = (val: string | number, len = 2): string => {\n  val = String(val);\n  while (val.length < len) {\n    val = \"0\" + val;\n  }\n  return val;\n};\n\nconst formatFlags: Record<\n  string,\n  (dateObj: Date, i18n: I18nSettings) => string\n> = {\n  D: (dateObj: Date): string => String(dateObj.getDate()),\n  DD: (dateObj: Date): string => pad(dateObj.getDate()),\n  Do: (dateObj: Date, i18n: I18nSettings): string =>\n    i18n.DoFn(dateObj.getDate()),\n  d: (dateObj: Date): string => String(dateObj.getDay()),\n  dd: (dateObj: Date): string => pad(dateObj.getDay()),\n  ddd: (dateObj: Date, i18n: I18nSettings): string =>\n    i18n.dayNamesShort[dateObj.getDay()],\n  dddd: (dateObj: Date, i18n: I18nSettings): string =>\n    i18n.dayNames[dateObj.getDay()],\n  M: (dateObj: Date): string => String(dateObj.getMonth() + 1),\n  MM: (dateObj: Date): string => pad(dateObj.getMonth() + 1),\n  MMM: (dateObj: Date, i18n: I18nSettings): string =>\n    i18n.monthNamesShort[dateObj.getMonth()],\n  MMMM: (dateObj: Date, i18n: I18nSettings): string =>\n    i18n.monthNames[dateObj.getMonth()],\n  YY: (dateObj: Date): string =>\n    pad(String(dateObj.getFullYear()), 4).substr(2),\n  YYYY: (dateObj: Date): string => pad(dateObj.getFullYear(), 4),\n  h: (dateObj: Date): string => String(dateObj.getHours() % 12 || 12),\n  hh: (dateObj: Date): string => pad(dateObj.getHours() % 12 || 12),\n  H: (dateObj: Date): string => String(dateObj.getHours()),\n  HH: (dateObj: Date): string => pad(dateObj.getHours()),\n  m: (dateObj: Date): string => String(dateObj.getMinutes()),\n  mm: (dateObj: Date): string => pad(dateObj.getMinutes()),\n  s: (dateObj: Date): string => String(dateObj.getSeconds()),\n  ss: (dateObj: Date): string => pad(dateObj.getSeconds()),\n  S: (dateObj: Date): string =>\n    String(Math.round(dateObj.getMilliseconds() / 100)),\n  SS: (dateObj: Date): string =>\n    pad(Math.round(dateObj.getMilliseconds() / 10), 2),\n  SSS: (dateObj: Date): string => pad(dateObj.getMilliseconds(), 3),\n  a: (dateObj: Date, i18n: I18nSettings): string =>\n    dateObj.getHours() < 12 ? i18n.amPm[0] : i18n.amPm[1],\n  A: (dateObj: Date, i18n: I18nSettings): string =>\n    dateObj.getHours() < 12\n      ? i18n.amPm[0].toUpperCase()\n      : i18n.amPm[1].toUpperCase(),\n  ZZ(dateObj: Date): string {\n    const offset = dateObj.getTimezoneOffset();\n    return (\n      (offset > 0 ? \"-\" : \"+\") +\n      pad(Math.floor(Math.abs(offset) / 60) * 100 + (Math.abs(offset) % 60), 4)\n    );\n  },\n  Z(dateObj: Date): string {\n    const offset = dateObj.getTimezoneOffset();\n    return (\n      (offset > 0 ? \"-\" : \"+\") +\n      pad(Math.floor(Math.abs(offset) / 60), 2) +\n      \":\" +\n      pad(Math.abs(offset) % 60, 2)\n    );\n  }\n};\n\ntype ParseInfo = [\n  keyof DateInfo,\n  string,\n  ((v: string, i18n: I18nSettings) => number | null)?,\n  string?\n];\nconst monthParse = (v: string): number => +v - 1;\nconst emptyDigits: ParseInfo = [null, twoDigitsOptional];\nconst emptyWord: ParseInfo = [null, word];\nconst amPm: ParseInfo = [\n  \"isPm\",\n  word,\n  (v: string, i18n: I18nSettings): number | null => {\n    const val = v.toLowerCase();\n    if (val === i18n.amPm[0]) {\n      return 0;\n    } else if (val === i18n.amPm[1]) {\n      return 1;\n    }\n    return null;\n  }\n];\nconst timezoneOffset: ParseInfo = [\n  \"timezoneOffset\",\n  \"[^\\\\s]*?[\\\\+\\\\-]\\\\d\\\\d:?\\\\d\\\\d|[^\\\\s]*?Z?\",\n  (v: string): number | null => {\n    const parts = (v + \"\").match(/([+-]|\\d\\d)/gi);\n\n    if (parts) {\n      const minutes = +parts[1] * 60 + parseInt(parts[2], 10);\n      return parts[0] === \"+\" ? minutes : -minutes;\n    }\n\n    return 0;\n  }\n];\nconst parseFlags: Record<string, ParseInfo> = {\n  D: [\"day\", twoDigitsOptional],\n  DD: [\"day\", twoDigits],\n  Do: [\"day\", twoDigitsOptional + word, (v: string): number => parseInt(v, 10)],\n  M: [\"month\", twoDigitsOptional, monthParse],\n  MM: [\"month\", twoDigits, monthParse],\n  YY: [\n    \"year\",\n    twoDigits,\n    (v: string): number => {\n      const now = new Date();\n      const cent = +(\"\" + now.getFullYear()).substr(0, 2);\n      return +(\"\" + (+v > 68 ? cent - 1 : cent) + v);\n    }\n  ],\n  h: [\"hour\", twoDigitsOptional, undefined, \"isPm\"],\n  hh: [\"hour\", twoDigits, undefined, \"isPm\"],\n  H: [\"hour\", twoDigitsOptional],\n  HH: [\"hour\", twoDigits],\n  m: [\"minute\", twoDigitsOptional],\n  mm: [\"minute\", twoDigits],\n  s: [\"second\", twoDigitsOptional],\n  ss: [\"second\", twoDigits],\n  YYYY: [\"year\", fourDigits],\n  S: [\"millisecond\", \"\\\\d\", (v: string): number => +v * 100],\n  SS: [\"millisecond\", twoDigits, (v: string): number => +v * 10],\n  SSS: [\"millisecond\", threeDigits],\n  d: emptyDigits,\n  dd: emptyDigits,\n  ddd: emptyWord,\n  dddd: emptyWord,\n  MMM: [\"month\", word, monthUpdate(\"monthNamesShort\")],\n  MMMM: [\"month\", word, monthUpdate(\"monthNames\")],\n  a: amPm,\n  A: amPm,\n  ZZ: timezoneOffset,\n  Z: timezoneOffset\n};\n\n// Some common format strings\nconst globalMasks: { [key: string]: string } = {\n  default: \"ddd MMM DD YYYY HH:mm:ss\",\n  shortDate: \"M/D/YY\",\n  mediumDate: \"MMM D, YYYY\",\n  longDate: \"MMMM D, YYYY\",\n  fullDate: \"dddd, MMMM D, YYYY\",\n  isoDate: \"YYYY-MM-DD\",\n  isoDateTime: \"YYYY-MM-DDTHH:mm:ssZ\",\n  shortTime: \"HH:mm\",\n  mediumTime: \"HH:mm:ss\",\n  longTime: \"HH:mm:ss.SSS\"\n};\nconst setGlobalDateMasks = (masks: {\n  [key: string]: string;\n}): { [key: string]: string } => assign(globalMasks, masks);\n\n/***\n * Format a date\n * @method format\n * @param {Date|number} dateObj\n * @param {string} mask Format of the date, i.e. 'mm-dd-yy' or 'shortDate'\n * @returns {string} Formatted date string\n */\nconst format = (\n  dateObj: Date,\n  mask: string = globalMasks[\"default\"],\n  i18n: I18nSettingsOptional = {}\n): string => {\n  if (typeof dateObj === \"number\") {\n    dateObj = new Date(dateObj);\n  }\n\n  if (\n    Object.prototype.toString.call(dateObj) !== \"[object Date]\" ||\n    isNaN(dateObj.getTime())\n  ) {\n    throw new Error(\"Invalid Date pass to format\");\n  }\n\n  mask = globalMasks[mask] || mask;\n\n  const literals: string[] = [];\n\n  // Make literals inactive by replacing them with @@@\n  mask = mask.replace(literal, function($0, $1) {\n    literals.push($1);\n    return \"@@@\";\n  });\n\n  const combinedI18nSettings: I18nSettings = assign(\n    assign({}, globalI18n),\n    i18n\n  );\n  // Apply formatting rules\n  mask = mask.replace(token, $0 =>\n    formatFlags[$0](dateObj, combinedI18nSettings)\n  );\n  // Inline literal values back into the formatted value\n  return mask.replace(/@@@/g, () => literals.shift());\n};\n\n/**\n * Parse a date string into a Javascript Date object /\n * @method parse\n * @param {string} dateStr Date string\n * @param {string} format Date parse format\n * @param {i18n} I18nSettingsOptional Full or subset of I18N settings\n * @returns {Date|null} Returns Date object. Returns null what date string is invalid or doesn't match format\n */\nfunction parse(\n  dateStr: string,\n  format: string,\n  i18n: I18nSettingsOptional = {}\n): Date | null {\n  if (typeof format !== \"string\") {\n    throw new Error(\"Invalid format in fecha parse\");\n  }\n\n  // Check to see if the format is actually a mask\n  format = globalMasks[format] || format;\n\n  // Avoid regular expression denial of service, fail early for really long strings\n  // https://www.owasp.org/index.php/Regular_expression_Denial_of_Service_-_ReDoS\n  if (dateStr.length > 1000) {\n    return null;\n  }\n\n  // Default to the beginning of the year.\n  const today = new Date();\n  const dateInfo: DateInfo = {\n    year: today.getFullYear(),\n    month: 0,\n    day: 1,\n    hour: 0,\n    minute: 0,\n    second: 0,\n    millisecond: 0,\n    isPm: null,\n    timezoneOffset: null\n  };\n  const parseInfo: ParseInfo[] = [];\n  const literals: string[] = [];\n\n  // Replace all the literals with @@@. Hopefully a string that won't exist in the format\n  let newFormat = format.replace(literal, ($0, $1) => {\n    literals.push(regexEscape($1));\n    return \"@@@\";\n  });\n  const specifiedFields: { [field: string]: boolean } = {};\n  const requiredFields: { [field: string]: boolean } = {};\n\n  // Change every token that we find into the correct regex\n  newFormat = regexEscape(newFormat).replace(token, $0 => {\n    const info = parseFlags[$0];\n    const [field, regex, , requiredField] = info;\n\n    // Check if the person has specified the same field twice. This will lead to confusing results.\n    if (specifiedFields[field]) {\n      throw new Error(`Invalid format. ${field} specified twice in format`);\n    }\n\n    specifiedFields[field] = true;\n\n    // Check if there are any required fields. For instance, 12 hour time requires AM/PM specified\n    if (requiredField) {\n      requiredFields[requiredField] = true;\n    }\n\n    parseInfo.push(info);\n    return \"(\" + regex + \")\";\n  });\n\n  // Check all the required fields are present\n  Object.keys(requiredFields).forEach(field => {\n    if (!specifiedFields[field]) {\n      throw new Error(\n        `Invalid format. ${field} is required in specified format`\n      );\n    }\n  });\n\n  // Add back all the literals after\n  newFormat = newFormat.replace(/@@@/g, () => literals.shift());\n\n  // Check if the date string matches the format. If it doesn't return null\n  const matches = dateStr.match(new RegExp(newFormat, \"i\"));\n  if (!matches) {\n    return null;\n  }\n\n  const combinedI18nSettings: I18nSettings = assign(\n    assign({}, globalI18n),\n    i18n\n  );\n\n  // For each match, call the parser function for that date part\n  for (let i = 1; i < matches.length; i++) {\n    const [field, , parser] = parseInfo[i - 1];\n    const value = parser\n      ? parser(matches[i], combinedI18nSettings)\n      : +matches[i];\n\n    // If the parser can't make sense of the value, return null\n    if (value == null) {\n      return null;\n    }\n\n    dateInfo[field] = value;\n  }\n\n  if (dateInfo.isPm === 1 && dateInfo.hour != null && +dateInfo.hour !== 12) {\n    dateInfo.hour = +dateInfo.hour + 12;\n  } else if (dateInfo.isPm === 0 && +dateInfo.hour === 12) {\n    dateInfo.hour = 0;\n  }\n\n  let dateTZ: Date;\n  if (dateInfo.timezoneOffset == null) {\n    dateTZ = new Date(\n      dateInfo.year,\n      dateInfo.month,\n      dateInfo.day,\n      dateInfo.hour,\n      dateInfo.minute,\n      dateInfo.second,\n      dateInfo.millisecond\n    );\n    const validateFields: [\n      \"month\" | \"day\" | \"hour\" | \"minute\" | \"second\",\n      \"getMonth\" | \"getDate\" | \"getHours\" | \"getMinutes\" | \"getSeconds\"\n    ][] = [\n      [\"month\", \"getMonth\"],\n      [\"day\", \"getDate\"],\n      [\"hour\", \"getHours\"],\n      [\"minute\", \"getMinutes\"],\n      [\"second\", \"getSeconds\"]\n    ];\n    for (let i = 0, len = validateFields.length; i < len; i++) {\n      // Check to make sure the date field is within the allowed range. Javascript dates allows values\n      // outside the allowed range. If the values don't match the value was invalid\n      if (\n        specifiedFields[validateFields[i][0]] &&\n        dateInfo[validateFields[i][0]] !== dateTZ[validateFields[i][1]]()\n      ) {\n        return null;\n      }\n    }\n  } else {\n    dateTZ = new Date(\n      Date.UTC(\n        dateInfo.year,\n        dateInfo.month,\n        dateInfo.day,\n        dateInfo.hour,\n        dateInfo.minute - dateInfo.timezoneOffset,\n        dateInfo.second,\n        dateInfo.millisecond\n      )\n    );\n\n    // We can't validate dates in another timezone unfortunately. Do a basic check instead\n    if (\n      dateInfo.month > 11 ||\n      dateInfo.month < 0 ||\n      dateInfo.day > 31 ||\n      dateInfo.day < 1 ||\n      dateInfo.hour > 23 ||\n      dateInfo.hour < 0 ||\n      dateInfo.minute > 59 ||\n      dateInfo.minute < 0 ||\n      dateInfo.second > 59 ||\n      dateInfo.second < 0\n    ) {\n      return null;\n    }\n  }\n\n  // Don't allow invalid dates\n\n  return dateTZ;\n}\nexport default {\n  format,\n  parse,\n  defaultI18n,\n  setGlobalDateI18n,\n  setGlobalDateMasks\n};\nexport { format, parse, defaultI18n, setGlobalDateI18n, setGlobalDateMasks };\n", "'use strict';\n\nconst fecha = require('fecha');\nconst format = require('./format');\n\n/*\n * function timestamp (info)\n * Returns a new instance of the timestamp Format which adds a timestamp\n * to the info. It was previously available in winston < 3.0.0 as:\n *\n * - { timestamp: true }             // `new Date.toISOString()`\n * - { timestamp: function:String }  // Value returned by `timestamp()`\n */\nmodule.exports = format((info, opts = {}) => {\n  if (opts.format) {\n    info.timestamp = typeof opts.format === 'function'\n      ? opts.format()\n      : fecha.format(new Date(), opts.format);\n  }\n\n  if (!info.timestamp) {\n    info.timestamp = new Date().toISOString();\n  }\n\n  if (opts.alias) {\n    info[opts.alias] = info.timestamp;\n  }\n\n  return info;\n});\n", "'use strict';\n\nconst colors = require('@colors/colors/safe');\nconst format = require('./format');\nconst { MESSAGE } = require('triple-beam');\n\n/*\n * function uncolorize (info)\n * Returns a new instance of the uncolorize Format that strips colors\n * from `info` objects. This was previously exposed as { stripColors: true }\n * to transports in `winston < 3.0.0`.\n */\nmodule.exports = format((info, opts) => {\n  if (opts.level !== false) {\n    info.level = colors.strip(info.level);\n  }\n\n  if (opts.message\u00A0!== false) {\n    info.message = colors.strip(String(info.message));\n  }\n\n  if (opts.raw !== false && info[MESSAGE]) {\n    info[MESSAGE] = colors.strip(String(info[MESSAGE]));\n  }\n\n  return info;\n});\n", "'use strict';\n\n/*\n * @api public\n * @property {function} format\n * Both the construction method and set of exposed\n * formats.\n */\nconst format = exports.format = require('./format');\n\n/*\n * @api public\n * @method {function} levels\n * Registers the specified levels with logform.\n */\nexports.levels = require('./levels');\n\n/*\n * @api private\n * method {function} exposeFormat\n * Exposes a sub-format on the main format object\n * as a lazy-loaded getter.\n */\nfunction exposeFormat(name, requireFormat) {\n  Object.defineProperty(format, name, {\n    get() {\n      return requireFormat();\n    },\n    configurable: true\n  });\n}\n\n//\n// Setup all transports as lazy-loaded getters.\n//\nexposeFormat('align', function () { return require('./align'); });\nexposeFormat('errors', function () { return require('./errors'); });\nexposeFormat('cli', function () { return require('./cli'); });\nexposeFormat('combine', function () { return require('./combine'); });\nexposeFormat('colorize', function () { return require('./colorize'); });\nexposeFormat('json', function () { return require('./json'); });\nexposeFormat('label', function () { return require('./label'); });\nexposeFormat('logstash', function () { return require('./logstash'); });\nexposeFormat('metadata', function () { return require('./metadata'); });\nexposeFormat('ms', function () { return require('./ms'); });\nexposeFormat('padLevels', function () { return require('./pad-levels'); });\nexposeFormat('prettyPrint', function () { return require('./pretty-print'); });\nexposeFormat('printf', function () { return require('./printf'); });\nexposeFormat('simple', function () { return require('./simple'); });\nexposeFormat('splat', function () { return require('./splat'); });\nexposeFormat('timestamp', function () { return require('./timestamp'); });\nexposeFormat('uncolorize', function () { return require('./uncolorize'); });\n", "/**\n * common.js: Internal helper and utility functions for winston.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst { format } = require('util');\n\n/**\n * Set of simple deprecation notices and a way to expose them for a set of\n * properties.\n * @type {Object}\n * @private\n */\nexports.warn = {\n  deprecated(prop) {\n    return () => {\n      throw new Error(format('{ %s } was removed in winston@3.0.0.', prop));\n    };\n  },\n  useFormat(prop) {\n    return () => {\n      throw new Error([\n        format('{ %s } was removed in winston@3.0.0.', prop),\n        'Use a custom winston.format = winston.format(function) instead.'\n      ].join('\\n'));\n    };\n  },\n  forFunctions(obj, type, props) {\n    props.forEach(prop => {\n      obj[prop] = exports.warn[type](prop);\n    });\n  },\n  forProperties(obj, type, props) {\n    props.forEach(prop => {\n      const notice = exports.warn[type](prop);\n      Object.defineProperty(obj, prop, {\n        get: notice,\n        set: notice\n      });\n    });\n  }\n};\n", "{\n  \"name\": \"winston\",\n  \"description\": \"A logger for just about everything.\",\n  \"version\": \"3.17.0\",\n  \"author\": \"Charlie Robbins <charlie.robbins@gmail.com>\",\n  \"maintainers\": [\n    \"David Hyde <dabh@alumni.stanford.edu>\"\n  ],\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/winstonjs/winston.git\"\n  },\n  \"keywords\": [\n    \"winston\",\n    \"logger\",\n    \"logging\",\n    \"logs\",\n    \"sysadmin\",\n    \"bunyan\",\n    \"pino\",\n    \"loglevel\",\n    \"tools\",\n    \"json\",\n    \"stream\"\n  ],\n  \"dependencies\": {\n    \"@dabh/diagnostics\": \"^2.0.2\",\n    \"@colors/colors\": \"^1.6.0\",\n    \"async\": \"^3.2.3\",\n    \"is-stream\": \"^2.0.0\",\n    \"logform\": \"^2.7.0\",\n    \"one-time\": \"^1.0.0\",\n    \"readable-stream\": \"^3.4.0\",\n    \"safe-stable-stringify\": \"^2.3.1\",\n    \"stack-trace\": \"0.0.x\",\n    \"triple-beam\": \"^1.3.0\",\n    \"winston-transport\": \"^4.9.0\"\n  },\n  \"devDependencies\": {\n    \"@babel/cli\": \"^7.23.9\",\n    \"@babel/core\": \"^7.24.0\",\n    \"@babel/preset-env\": \"^7.24.0\",\n    \"@dabh/eslint-config-populist\": \"^4.4.0\",\n    \"@types/node\": \"^20.11.24\",\n    \"abstract-winston-transport\": \"^0.5.1\",\n    \"assume\": \"^2.2.0\",\n    \"cross-spawn-async\": \"^2.2.5\",\n    \"eslint\": \"^8.57.0\",\n    \"hock\": \"^1.4.1\",\n    \"mocha\": \"^10.3.0\",\n    \"nyc\": \"^17.1.0\",\n    \"rimraf\": \"5.0.1\",\n    \"split2\": \"^4.1.0\",\n    \"std-mocks\": \"^2.0.0\",\n    \"through2\": \"^4.0.2\",\n    \"winston-compat\": \"^0.1.5\"\n  },\n  \"main\": \"./lib/winston.js\",\n  \"browser\": \"./dist/winston\",\n  \"types\": \"./index.d.ts\",\n  \"scripts\": {\n    \"lint\": \"eslint lib/*.js lib/winston/*.js lib/winston/**/*.js --resolve-plugins-relative-to ./node_modules/@dabh/eslint-config-populist\",\n    \"test\": \"rimraf test/fixtures/logs/* && mocha\",\n    \"test:coverage\": \"nyc npm run test:unit\",\n    \"test:unit\": \"mocha test/unit\",\n    \"test:integration\": \"mocha test/integration\",\n    \"build\": \"rimraf dist && babel lib -d dist\",\n    \"prepublishOnly\": \"npm run build\"\n  },\n  \"engines\": {\n    \"node\": \">= 12.0.0\"\n  },\n  \"license\": \"MIT\"\n}\n", "\n/**\n * For Node.js, simply re-export the core `util.deprecate` function.\n */\n\nmodule.exports = require('util').deprecate;\n", "module.exports = require('stream');\n", "'use strict';\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err) {\n      if (!this._writableState) {\n        process.nextTick(emitErrorNT, this, err);\n      } else if (!this._writableState.errorEmitted) {\n        this._writableState.errorEmitted = true;\n        process.nextTick(emitErrorNT, this, err);\n      }\n    }\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      if (!_this._writableState) {\n        process.nextTick(emitErrorAndCloseNT, _this, err);\n      } else if (!_this._writableState.errorEmitted) {\n        _this._writableState.errorEmitted = true;\n        process.nextTick(emitErrorAndCloseNT, _this, err);\n      } else {\n        process.nextTick(emitCloseNT, _this);\n      }\n    } else if (cb) {\n      process.nextTick(emitCloseNT, _this);\n      cb(err);\n    } else {\n      process.nextTick(emitCloseNT, _this);\n    }\n  });\n  return this;\n}\nfunction emitErrorAndCloseNT(self, err) {\n  emitErrorNT(self, err);\n  emitCloseNT(self);\n}\nfunction emitCloseNT(self) {\n  if (self._writableState && !self._writableState.emitClose) return;\n  if (self._readableState && !self._readableState.emitClose) return;\n  self.emit('close');\n}\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finalCalled = false;\n    this._writableState.prefinished = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\nfunction errorOrDestroy(stream, err) {\n  // We have tests that rely on errors being emitted\n  // in the same tick, so changing this is semver major.\n  // For now when you opt-in to autoDestroy we allow\n  // the error to be emitted nextTick. In a future\n  // semver major update we should change the default to this.\n\n  var rState = stream._readableState;\n  var wState = stream._writableState;\n  if (rState && rState.autoDestroy || wState && wState.autoDestroy) stream.destroy(err);else stream.emit('error', err);\n}\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy,\n  errorOrDestroy: errorOrDestroy\n};", "'use strict';\n\nconst codes = {};\n\nfunction createErrorType(code, message, Base) {\n  if (!Base) {\n    Base = Error\n  }\n\n  function getMessage (arg1, arg2, arg3) {\n    if (typeof message === 'string') {\n      return message\n    } else {\n      return message(arg1, arg2, arg3)\n    }\n  }\n\n  class NodeError extends Base {\n    constructor (arg1, arg2, arg3) {\n      super(getMessage(arg1, arg2, arg3));\n    }\n  }\n\n  NodeError.prototype.name = Base.name;\n  NodeError.prototype.code = code;\n\n  codes[code] = NodeError;\n}\n\n// https://github.com/nodejs/node/blob/v10.8.0/lib/internal/errors.js\nfunction oneOf(expected, thing) {\n  if (Array.isArray(expected)) {\n    const len = expected.length;\n    expected = expected.map((i) => String(i));\n    if (len > 2) {\n      return `one of ${thing} ${expected.slice(0, len - 1).join(', ')}, or ` +\n             expected[len - 1];\n    } else if (len === 2) {\n      return `one of ${thing} ${expected[0]} or ${expected[1]}`;\n    } else {\n      return `of ${thing} ${expected[0]}`;\n    }\n  } else {\n    return `of ${thing} ${String(expected)}`;\n  }\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\nfunction startsWith(str, search, pos) {\n\treturn str.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\nfunction endsWith(str, search, this_len) {\n\tif (this_len === undefined || this_len > str.length) {\n\t\tthis_len = str.length;\n\t}\n\treturn str.substring(this_len - search.length, this_len) === search;\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes\nfunction includes(str, search, start) {\n  if (typeof start !== 'number') {\n    start = 0;\n  }\n\n  if (start + search.length > str.length) {\n    return false;\n  } else {\n    return str.indexOf(search, start) !== -1;\n  }\n}\n\ncreateErrorType('ERR_INVALID_OPT_VALUE', function (name, value) {\n  return 'The value \"' + value + '\" is invalid for option \"' + name + '\"'\n}, TypeError);\ncreateErrorType('ERR_INVALID_ARG_TYPE', function (name, expected, actual) {\n  // determiner: 'must be' or 'must not be'\n  let determiner;\n  if (typeof expected === 'string' && startsWith(expected, 'not ')) {\n    determiner = 'must not be';\n    expected = expected.replace(/^not /, '');\n  } else {\n    determiner = 'must be';\n  }\n\n  let msg;\n  if (endsWith(name, ' argument')) {\n    // For cases like 'first argument'\n    msg = `The ${name} ${determiner} ${oneOf(expected, 'type')}`;\n  } else {\n    const type = includes(name, '.') ? 'property' : 'argument';\n    msg = `The \"${name}\" ${type} ${determiner} ${oneOf(expected, 'type')}`;\n  }\n\n  msg += `. Received type ${typeof actual}`;\n  return msg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_PUSH_AFTER_EOF', 'stream.push() after EOF');\ncreateErrorType('ERR_METHOD_NOT_IMPLEMENTED', function (name) {\n  return 'The ' + name + ' method is not implemented'\n});\ncreateErrorType('ERR_STREAM_PREMATURE_CLOSE', 'Premature close');\ncreateErrorType('ERR_STREAM_DESTROYED', function (name) {\n  return 'Cannot call ' + name + ' after a stream was destroyed';\n});\ncreateErrorType('ERR_MULTIPLE_CALLBACK', 'Callback called multiple times');\ncreateErrorType('ERR_STREAM_CANNOT_PIPE', 'Cannot pipe, not readable');\ncreateErrorType('ERR_STREAM_WRITE_AFTER_END', 'write after end');\ncreateErrorType('ERR_STREAM_NULL_VALUES', 'May not write null values to stream', TypeError);\ncreateErrorType('ERR_UNKNOWN_ENCODING', function (arg) {\n  return 'Unknown encoding: ' + arg\n}, TypeError);\ncreateErrorType('ERR_STREAM_UNSHIFT_AFTER_END_EVENT', 'stream.unshift() after end event');\n\nmodule.exports.codes = codes;\n", "'use strict';\n\nvar ERR_INVALID_OPT_VALUE = require('../../../errors').codes.ERR_INVALID_OPT_VALUE;\nfunction highWaterMarkFrom(options, isDuplex, duplexKey) {\n  return options.highWaterMark != null ? options.highWaterMark : isDuplex ? options[duplexKey] : null;\n}\nfunction getHighWaterMark(state, options, duplexKey, isDuplex) {\n  var hwm = highWaterMarkFrom(options, isDuplex, duplexKey);\n  if (hwm != null) {\n    if (!(isFinite(hwm) && Math.floor(hwm) === hwm) || hwm < 0) {\n      var name = isDuplex ? duplexKey : 'highWaterMark';\n      throw new ERR_INVALID_OPT_VALUE(name, hwm);\n    }\n    return Math.floor(hwm);\n  }\n\n  // Default value\n  return state.objectMode ? 16 : 16 * 1024;\n}\nmodule.exports = {\n  getHighWaterMark: getHighWaterMark\n};", "if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n", "try {\n  var util = require('util');\n  /* istanbul ignore next */\n  if (typeof util.inherits !== 'function') throw '';\n  module.exports = util.inherits;\n} catch (e) {\n  /* istanbul ignore next */\n  module.exports = require('./inherits_browser.js');\n}\n", "'use strict';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar _require = require('buffer'),\n  Buffer = _require.Buffer;\nvar _require2 = require('util'),\n  inspect = _require2.inspect;\nvar custom = inspect && inspect.custom || 'inspect';\nfunction copyBuffer(src, target, offset) {\n  Buffer.prototype.copy.call(src, target, offset);\n}\nmodule.exports = /*#__PURE__*/function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n  _createClass(BufferList, [{\n    key: \"push\",\n    value: function push(v) {\n      var entry = {\n        data: v,\n        next: null\n      };\n      if (this.length > 0) this.tail.next = entry;else this.head = entry;\n      this.tail = entry;\n      ++this.length;\n    }\n  }, {\n    key: \"unshift\",\n    value: function unshift(v) {\n      var entry = {\n        data: v,\n        next: this.head\n      };\n      if (this.length === 0) this.tail = entry;\n      this.head = entry;\n      ++this.length;\n    }\n  }, {\n    key: \"shift\",\n    value: function shift() {\n      if (this.length === 0) return;\n      var ret = this.head.data;\n      if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n      --this.length;\n      return ret;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.head = this.tail = null;\n      this.length = 0;\n    }\n  }, {\n    key: \"join\",\n    value: function join(s) {\n      if (this.length === 0) return '';\n      var p = this.head;\n      var ret = '' + p.data;\n      while (p = p.next) ret += s + p.data;\n      return ret;\n    }\n  }, {\n    key: \"concat\",\n    value: function concat(n) {\n      if (this.length === 0) return Buffer.alloc(0);\n      var ret = Buffer.allocUnsafe(n >>> 0);\n      var p = this.head;\n      var i = 0;\n      while (p) {\n        copyBuffer(p.data, ret, i);\n        i += p.data.length;\n        p = p.next;\n      }\n      return ret;\n    }\n\n    // Consumes a specified amount of bytes or characters from the buffered data.\n  }, {\n    key: \"consume\",\n    value: function consume(n, hasStrings) {\n      var ret;\n      if (n < this.head.data.length) {\n        // `slice` is the same for buffers and strings.\n        ret = this.head.data.slice(0, n);\n        this.head.data = this.head.data.slice(n);\n      } else if (n === this.head.data.length) {\n        // First chunk is a perfect match.\n        ret = this.shift();\n      } else {\n        // Result spans more than one buffer.\n        ret = hasStrings ? this._getString(n) : this._getBuffer(n);\n      }\n      return ret;\n    }\n  }, {\n    key: \"first\",\n    value: function first() {\n      return this.head.data;\n    }\n\n    // Consumes a specified amount of characters from the buffered data.\n  }, {\n    key: \"_getString\",\n    value: function _getString(n) {\n      var p = this.head;\n      var c = 1;\n      var ret = p.data;\n      n -= ret.length;\n      while (p = p.next) {\n        var str = p.data;\n        var nb = n > str.length ? str.length : n;\n        if (nb === str.length) ret += str;else ret += str.slice(0, n);\n        n -= nb;\n        if (n === 0) {\n          if (nb === str.length) {\n            ++c;\n            if (p.next) this.head = p.next;else this.head = this.tail = null;\n          } else {\n            this.head = p;\n            p.data = str.slice(nb);\n          }\n          break;\n        }\n        ++c;\n      }\n      this.length -= c;\n      return ret;\n    }\n\n    // Consumes a specified amount of bytes from the buffered data.\n  }, {\n    key: \"_getBuffer\",\n    value: function _getBuffer(n) {\n      var ret = Buffer.allocUnsafe(n);\n      var p = this.head;\n      var c = 1;\n      p.data.copy(ret);\n      n -= p.data.length;\n      while (p = p.next) {\n        var buf = p.data;\n        var nb = n > buf.length ? buf.length : n;\n        buf.copy(ret, ret.length - n, 0, nb);\n        n -= nb;\n        if (n === 0) {\n          if (nb === buf.length) {\n            ++c;\n            if (p.next) this.head = p.next;else this.head = this.tail = null;\n          } else {\n            this.head = p;\n            p.data = buf.slice(nb);\n          }\n          break;\n        }\n        ++c;\n      }\n      this.length -= c;\n      return ret;\n    }\n\n    // Make sure the linked list only shows the minimal necessary information.\n  }, {\n    key: custom,\n    value: function value(_, options) {\n      return inspect(this, _objectSpread(_objectSpread({}, options), {}, {\n        // Only inspect one level.\n        depth: 0,\n        // It should not recurse.\n        customInspect: false\n      }));\n    }\n  }]);\n  return BufferList;\n}();", "// Ported from https://github.com/mafintosh/end-of-stream with\n// permission from the author, Mathias Buus (@mafintosh).\n\n'use strict';\n\nvar ERR_STREAM_PREMATURE_CLOSE = require('../../../errors').codes.ERR_STREAM_PREMATURE_CLOSE;\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    callback.apply(this, args);\n  };\n}\nfunction noop() {}\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\nfunction eos(stream, opts, callback) {\n  if (typeof opts === 'function') return eos(stream, null, opts);\n  if (!opts) opts = {};\n  callback = once(callback || noop);\n  var readable = opts.readable || opts.readable !== false && stream.readable;\n  var writable = opts.writable || opts.writable !== false && stream.writable;\n  var onlegacyfinish = function onlegacyfinish() {\n    if (!stream.writable) onfinish();\n  };\n  var writableEnded = stream._writableState && stream._writableState.finished;\n  var onfinish = function onfinish() {\n    writable = false;\n    writableEnded = true;\n    if (!readable) callback.call(stream);\n  };\n  var readableEnded = stream._readableState && stream._readableState.endEmitted;\n  var onend = function onend() {\n    readable = false;\n    readableEnded = true;\n    if (!writable) callback.call(stream);\n  };\n  var onerror = function onerror(err) {\n    callback.call(stream, err);\n  };\n  var onclose = function onclose() {\n    var err;\n    if (readable && !readableEnded) {\n      if (!stream._readableState || !stream._readableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n    if (writable && !writableEnded) {\n      if (!stream._writableState || !stream._writableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n  };\n  var onrequest = function onrequest() {\n    stream.req.on('finish', onfinish);\n  };\n  if (isRequest(stream)) {\n    stream.on('complete', onfinish);\n    stream.on('abort', onclose);\n    if (stream.req) onrequest();else stream.on('request', onrequest);\n  } else if (writable && !stream._writableState) {\n    // legacy streams\n    stream.on('end', onlegacyfinish);\n    stream.on('close', onlegacyfinish);\n  }\n  stream.on('end', onend);\n  stream.on('finish', onfinish);\n  if (opts.error !== false) stream.on('error', onerror);\n  stream.on('close', onclose);\n  return function () {\n    stream.removeListener('complete', onfinish);\n    stream.removeListener('abort', onclose);\n    stream.removeListener('request', onrequest);\n    if (stream.req) stream.req.removeListener('finish', onfinish);\n    stream.removeListener('end', onlegacyfinish);\n    stream.removeListener('close', onlegacyfinish);\n    stream.removeListener('finish', onfinish);\n    stream.removeListener('end', onend);\n    stream.removeListener('error', onerror);\n    stream.removeListener('close', onclose);\n  };\n}\nmodule.exports = eos;", "'use strict';\n\nvar _Object$setPrototypeO;\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar finished = require('./end-of-stream');\nvar kLastResolve = Symbol('lastResolve');\nvar kLastReject = Symbol('lastReject');\nvar kError = Symbol('error');\nvar kEnded = Symbol('ended');\nvar kLastPromise = Symbol('lastPromise');\nvar kHandlePromise = Symbol('handlePromise');\nvar kStream = Symbol('stream');\nfunction createIterResult(value, done) {\n  return {\n    value: value,\n    done: done\n  };\n}\nfunction readAndResolve(iter) {\n  var resolve = iter[kLastResolve];\n  if (resolve !== null) {\n    var data = iter[kStream].read();\n    // we defer if data is null\n    // we can be expecting either 'end' or\n    // 'error'\n    if (data !== null) {\n      iter[kLastPromise] = null;\n      iter[kLastResolve] = null;\n      iter[kLastReject] = null;\n      resolve(createIterResult(data, false));\n    }\n  }\n}\nfunction onReadable(iter) {\n  // we wait for the next tick, because it might\n  // emit an error with process.nextTick\n  process.nextTick(readAndResolve, iter);\n}\nfunction wrapForNext(lastPromise, iter) {\n  return function (resolve, reject) {\n    lastPromise.then(function () {\n      if (iter[kEnded]) {\n        resolve(createIterResult(undefined, true));\n        return;\n      }\n      iter[kHandlePromise](resolve, reject);\n    }, reject);\n  };\n}\nvar AsyncIteratorPrototype = Object.getPrototypeOf(function () {});\nvar ReadableStreamAsyncIteratorPrototype = Object.setPrototypeOf((_Object$setPrototypeO = {\n  get stream() {\n    return this[kStream];\n  },\n  next: function next() {\n    var _this = this;\n    // if we have detected an error in the meanwhile\n    // reject straight away\n    var error = this[kError];\n    if (error !== null) {\n      return Promise.reject(error);\n    }\n    if (this[kEnded]) {\n      return Promise.resolve(createIterResult(undefined, true));\n    }\n    if (this[kStream].destroyed) {\n      // We need to defer via nextTick because if .destroy(err) is\n      // called, the error will be emitted via nextTick, and\n      // we cannot guarantee that there is no error lingering around\n      // waiting to be emitted.\n      return new Promise(function (resolve, reject) {\n        process.nextTick(function () {\n          if (_this[kError]) {\n            reject(_this[kError]);\n          } else {\n            resolve(createIterResult(undefined, true));\n          }\n        });\n      });\n    }\n\n    // if we have multiple next() calls\n    // we will wait for the previous Promise to finish\n    // this logic is optimized to support for await loops,\n    // where next() is only called once at a time\n    var lastPromise = this[kLastPromise];\n    var promise;\n    if (lastPromise) {\n      promise = new Promise(wrapForNext(lastPromise, this));\n    } else {\n      // fast path needed to support multiple this.push()\n      // without triggering the next() queue\n      var data = this[kStream].read();\n      if (data !== null) {\n        return Promise.resolve(createIterResult(data, false));\n      }\n      promise = new Promise(this[kHandlePromise]);\n    }\n    this[kLastPromise] = promise;\n    return promise;\n  }\n}, _defineProperty(_Object$setPrototypeO, Symbol.asyncIterator, function () {\n  return this;\n}), _defineProperty(_Object$setPrototypeO, \"return\", function _return() {\n  var _this2 = this;\n  // destroy(err, cb) is a private API\n  // we can guarantee we have that here, because we control the\n  // Readable class this is attached to\n  return new Promise(function (resolve, reject) {\n    _this2[kStream].destroy(null, function (err) {\n      if (err) {\n        reject(err);\n        return;\n      }\n      resolve(createIterResult(undefined, true));\n    });\n  });\n}), _Object$setPrototypeO), AsyncIteratorPrototype);\nvar createReadableStreamAsyncIterator = function createReadableStreamAsyncIterator(stream) {\n  var _Object$create;\n  var iterator = Object.create(ReadableStreamAsyncIteratorPrototype, (_Object$create = {}, _defineProperty(_Object$create, kStream, {\n    value: stream,\n    writable: true\n  }), _defineProperty(_Object$create, kLastResolve, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kLastReject, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kError, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kEnded, {\n    value: stream._readableState.endEmitted,\n    writable: true\n  }), _defineProperty(_Object$create, kHandlePromise, {\n    value: function value(resolve, reject) {\n      var data = iterator[kStream].read();\n      if (data) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        resolve(createIterResult(data, false));\n      } else {\n        iterator[kLastResolve] = resolve;\n        iterator[kLastReject] = reject;\n      }\n    },\n    writable: true\n  }), _Object$create));\n  iterator[kLastPromise] = null;\n  finished(stream, function (err) {\n    if (err && err.code !== 'ERR_STREAM_PREMATURE_CLOSE') {\n      var reject = iterator[kLastReject];\n      // reject if we are waiting for data in the Promise\n      // returned by next() and store the error\n      if (reject !== null) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        reject(err);\n      }\n      iterator[kError] = err;\n      return;\n    }\n    var resolve = iterator[kLastResolve];\n    if (resolve !== null) {\n      iterator[kLastPromise] = null;\n      iterator[kLastResolve] = null;\n      iterator[kLastReject] = null;\n      resolve(createIterResult(undefined, true));\n    }\n    iterator[kEnded] = true;\n  });\n  stream.on('readable', onReadable.bind(null, iterator));\n  return iterator;\n};\nmodule.exports = createReadableStreamAsyncIterator;", "'use strict';\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar ERR_INVALID_ARG_TYPE = require('../../../errors').codes.ERR_INVALID_ARG_TYPE;\nfunction from(Readable, iterable, opts) {\n  var iterator;\n  if (iterable && typeof iterable.next === 'function') {\n    iterator = iterable;\n  } else if (iterable && iterable[Symbol.asyncIterator]) iterator = iterable[Symbol.asyncIterator]();else if (iterable && iterable[Symbol.iterator]) iterator = iterable[Symbol.iterator]();else throw new ERR_INVALID_ARG_TYPE('iterable', ['Iterable'], iterable);\n  var readable = new Readable(_objectSpread({\n    objectMode: true\n  }, opts));\n  // Reading boolean to protect against _read\n  // being called before last iteration completion.\n  var reading = false;\n  readable._read = function () {\n    if (!reading) {\n      reading = true;\n      next();\n    }\n  };\n  function next() {\n    return _next2.apply(this, arguments);\n  }\n  function _next2() {\n    _next2 = _asyncToGenerator(function* () {\n      try {\n        var _yield$iterator$next = yield iterator.next(),\n          value = _yield$iterator$next.value,\n          done = _yield$iterator$next.done;\n        if (done) {\n          readable.push(null);\n        } else if (readable.push(yield value)) {\n          next();\n        } else {\n          reading = false;\n        }\n      } catch (err) {\n        readable.destroy(err);\n      }\n    });\n    return _next2.apply(this, arguments);\n  }\n  return readable;\n}\nmodule.exports = from;\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\nvar EElistenerCount = function EElistenerCount(emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\nvar Buffer = require('buffer').Buffer;\nvar OurUint8Array = (typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : {}).Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function debug() {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/buffer_list');\nvar destroyImpl = require('./internal/streams/destroy');\nvar _require = require('./internal/streams/state'),\n  getHighWaterMark = _require.getHighWaterMark;\nvar _require$codes = require('../errors').codes,\n  ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n  ERR_STREAM_PUSH_AFTER_EOF = _require$codes.ERR_STREAM_PUSH_AFTER_EOF,\n  ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_STREAM_UNSHIFT_AFTER_END_EVENT = _require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;\n\n// Lazy loaded to improve the startup performance.\nvar StringDecoder;\nvar createReadableStreamAsyncIterator;\nvar from;\nrequire('inherits')(Readable, Stream);\nvar errorOrDestroy = destroyImpl.errorOrDestroy;\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (Array.isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\nfunction ReadableState(options, stream, isDuplex) {\n  Duplex = Duplex || require('./_stream_duplex');\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  this.highWaterMark = getHighWaterMark(this, options, 'readableHighWaterMark', isDuplex);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n  this.paused = true;\n\n  // Should close be emitted on destroy. Defaults to true.\n  this.emitClose = options.emitClose !== false;\n\n  // Should .destroy() be called after 'end' (and potentially 'finish')\n  this.autoDestroy = !!options.autoDestroy;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the ReadableState constructor, at least with V8 6.5\n  var isDuplex = this instanceof Duplex;\n  this._readableState = new ReadableState(options, this, isDuplex);\n\n  // legacy\n  this.readable = true;\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n  Stream.call(this);\n}\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  debug('readableAddChunk', chunk);\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      errorOrDestroy(stream, er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n      if (addToFront) {\n        if (state.endEmitted) errorOrDestroy(stream, new ERR_STREAM_UNSHIFT_AFTER_END_EVENT());else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        errorOrDestroy(stream, new ERR_STREAM_PUSH_AFTER_EOF());\n      } else if (state.destroyed) {\n        return false;\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n      maybeReadMore(stream, state);\n    }\n  }\n\n  // We can push more data if we are below the highWaterMark.\n  // Also, if we have no data yet, we can stand some more bytes.\n  // This is to work around cases where hwm=0, such as the repl.\n  return !state.ended && (state.length < state.highWaterMark || state.length === 0);\n}\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    state.awaitDrain = 0;\n    stream.emit('data', chunk);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk);\n  }\n  return er;\n}\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  var decoder = new StringDecoder(enc);\n  this._readableState.decoder = decoder;\n  // If setEncoding(null), decoder.encoding equals utf8\n  this._readableState.encoding = this._readableState.decoder.encoding;\n\n  // Iterate over current buffer to convert already stored Buffers:\n  var p = this._readableState.buffer.head;\n  var content = '';\n  while (p !== null) {\n    content += decoder.write(p.data);\n    p = p.next;\n  }\n  this._readableState.buffer.clear();\n  if (content !== '') this._readableState.buffer.push(content);\n  this._readableState.length = content.length;\n  return this;\n};\n\n// Don't raise the hwm > 1GB\nvar MAX_HWM = 0x40000000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    // TODO(ronag): Throw ERR_VALUE_OUT_OF_RANGE.\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && ((state.highWaterMark !== 0 ? state.length >= state.highWaterMark : state.length > 0) || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n  if (ret === null) {\n    state.needReadable = state.length <= state.highWaterMark;\n    n = 0;\n  } else {\n    state.length -= n;\n    state.awaitDrain = 0;\n  }\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n  if (ret !== null) this.emit('data', ret);\n  return ret;\n};\nfunction onEofChunk(stream, state) {\n  debug('onEofChunk');\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n  if (state.sync) {\n    // if we are sync, wait until next tick to emit the data.\n    // Otherwise we risk emitting data in the flow()\n    // the readable code triggers during a read() call\n    emitReadable(stream);\n  } else {\n    // emit 'readable' now to make sure it gets picked up.\n    state.needReadable = false;\n    if (!state.emittedReadable) {\n      state.emittedReadable = true;\n      emitReadable_(stream);\n    }\n  }\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  debug('emitReadable', state.needReadable, state.emittedReadable);\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    process.nextTick(emitReadable_, stream);\n  }\n}\nfunction emitReadable_(stream) {\n  var state = stream._readableState;\n  debug('emitReadable_', state.destroyed, state.length, state.ended);\n  if (!state.destroyed && (state.length || state.ended)) {\n    stream.emit('readable');\n    state.emittedReadable = false;\n  }\n\n  // The stream needs another readable event if\n  // 1. It is not flowing, as the flow mechanism will take\n  //    care of it.\n  // 2. It is not ended.\n  // 3. It is below the highWaterMark, so we can schedule\n  //    another readable later.\n  state.needReadable = !state.flowing && !state.ended && state.length <= state.highWaterMark;\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    process.nextTick(maybeReadMore_, stream, state);\n  }\n}\nfunction maybeReadMore_(stream, state) {\n  // Attempt to read more data if we should.\n  //\n  // The conditions for reading more data are (one of):\n  // - Not enough data buffered (state.length < state.highWaterMark). The loop\n  //   is responsible for filling the buffer with enough data if such data\n  //   is available. If highWaterMark is 0 and we are not in the flowing mode\n  //   we should _not_ attempt to buffer any extra data. We'll get more data\n  //   when the stream consumer calls read() instead.\n  // - No data in the buffer, and the stream is in flowing mode. In this mode\n  //   the loop below is responsible for ensuring read() is called. Failing to\n  //   call read here would abort the flow and there's no other mechanism for\n  //   continuing the flow if the stream consumer has just subscribed to the\n  //   'data' event.\n  //\n  // In addition to the above conditions to keep reading data, the following\n  // conditions prevent the data from being read:\n  // - The stream has ended (state.ended).\n  // - There is already a pending 'read' operation (state.reading). This is a\n  //   case where the the stream has called the implementation defined _read()\n  //   method, but they are processing the call asynchronously and have _not_\n  //   called push() with new data. In this case we skip performing more\n  //   read()s. The execution ends in this method again after the _read() ends\n  //   up calling push() with more data.\n  while (!state.reading && !state.ended && (state.length < state.highWaterMark || state.flowing && state.length === 0)) {\n    var len = state.length;\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  errorOrDestroy(this, new ERR_METHOD_NOT_IMPLEMENTED('_read()'));\n};\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) process.nextTick(endFn);else src.once('end', endFn);\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    var ret = dest.write(chunk);\n    debug('dest.write', ret);\n    if (ret === false) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', state.awaitDrain);\n        state.awaitDrain++;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) errorOrDestroy(dest, er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n  return dest;\n};\nfunction pipeOnDrain(src) {\n  return function pipeOnDrainFunctionResult() {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = {\n    hasUnpiped: false\n  };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    for (var i = 0; i < len; i++) dests[i].emit('unpipe', this, {\n      hasUnpiped: false\n    });\n    return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n  dest.emit('unpipe', this, unpipeInfo);\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n  var state = this._readableState;\n  if (ev === 'data') {\n    // update readableListening so that resume() may be a no-op\n    // a few lines down. This is needed to support once('readable').\n    state.readableListening = this.listenerCount('readable') > 0;\n\n    // Try start flowing on next tick if stream isn't explicitly paused\n    if (state.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.flowing = false;\n      state.emittedReadable = false;\n      debug('on readable', state.length, state.reading);\n      if (state.length) {\n        emitReadable(this);\n      } else if (!state.reading) {\n        process.nextTick(nReadingNextTick, this);\n      }\n    }\n  }\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\nReadable.prototype.removeListener = function (ev, fn) {\n  var res = Stream.prototype.removeListener.call(this, ev, fn);\n  if (ev === 'readable') {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n  return res;\n};\nReadable.prototype.removeAllListeners = function (ev) {\n  var res = Stream.prototype.removeAllListeners.apply(this, arguments);\n  if (ev === 'readable' || ev === undefined) {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n  return res;\n};\nfunction updateReadableListening(self) {\n  var state = self._readableState;\n  state.readableListening = self.listenerCount('readable') > 0;\n  if (state.resumeScheduled && !state.paused) {\n    // flowing needs to be set to true now, otherwise\n    // the upcoming resume will not flow.\n    state.flowing = true;\n\n    // crude way to check if we should resume\n  } else if (self.listenerCount('data') > 0) {\n    self.resume();\n  }\n}\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    // we flow only if there is no one listening\n    // for readable, but we still have to call\n    // resume()\n    state.flowing = !state.readableListening;\n    resume(this, state);\n  }\n  state.paused = false;\n  return this;\n};\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    process.nextTick(resume_, stream, state);\n  }\n}\nfunction resume_(stream, state) {\n  debug('resume', state.reading);\n  if (!state.reading) {\n    stream.read(0);\n  }\n  state.resumeScheduled = false;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (this._readableState.flowing !== false) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  this._readableState.paused = true;\n  return this;\n};\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null);\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n  var state = this._readableState;\n  var paused = false;\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n    _this.push(null);\n  });\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function methodWrap(method) {\n        return function methodWrapReturnFunction() {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n  return this;\n};\nif (typeof Symbol === 'function') {\n  Readable.prototype[Symbol.asyncIterator] = function () {\n    if (createReadableStreamAsyncIterator === undefined) {\n      createReadableStreamAsyncIterator = require('./internal/streams/async_iterator');\n    }\n    return createReadableStreamAsyncIterator(this);\n  };\n}\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.highWaterMark;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState && this._readableState.buffer;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableFlowing', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.flowing;\n  },\n  set: function set(state) {\n    if (this._readableState) {\n      this._readableState.flowing = state;\n    }\n  }\n});\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\nObject.defineProperty(Readable.prototype, 'readableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.length;\n  }\n});\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.first();else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = state.buffer.consume(n, state.decoder);\n  }\n  return ret;\n}\nfunction endReadable(stream) {\n  var state = stream._readableState;\n  debug('endReadable', state.endEmitted);\n  if (!state.endEmitted) {\n    state.ended = true;\n    process.nextTick(endReadableNT, state, stream);\n  }\n}\nfunction endReadableNT(state, stream) {\n  debug('endReadableNT', state.endEmitted, state.length);\n\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n    if (state.autoDestroy) {\n      // In case of duplex streams we need a way to detect\n      // if the writable side is ready for autoDestroy as well\n      var wState = stream._writableState;\n      if (!wState || wState.autoDestroy && wState.finished) {\n        stream.destroy();\n      }\n    }\n  }\n}\nif (typeof Symbol === 'function') {\n  Readable.from = function (iterable, opts) {\n    if (from === undefined) {\n      from = require('./internal/streams/from');\n    }\n    return from(Readable, iterable, opts);\n  };\n}\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\nrequire('inherits')(Duplex, Readable);\n{\n  // Allow the keys array to be GC'ed.\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n  Readable.call(this, options);\n  Writable.call(this, options);\n  this.allowHalfOpen = true;\n  if (options) {\n    if (options.readable === false) this.readable = false;\n    if (options.writable === false) this.writable = false;\n    if (options.allowHalfOpen === false) {\n      this.allowHalfOpen = false;\n      this.once('end', onend);\n    }\n  }\n}\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n});\n\n// the no-half-open enforcer\nfunction onend() {\n  // If the writable side ended, then we're ok.\n  if (this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  process.nextTick(onEndNT, this);\n}\nfunction onEndNT(self) {\n  self.end();\n}\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\nvar Buffer = require('buffer').Buffer;\nvar OurUint8Array = (typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : {}).Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\nvar destroyImpl = require('./internal/streams/destroy');\nvar _require = require('./internal/streams/state'),\n  getHighWaterMark = _require.getHighWaterMark;\nvar _require$codes = require('../errors').codes,\n  ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n  ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n  ERR_STREAM_CANNOT_PIPE = _require$codes.ERR_STREAM_CANNOT_PIPE,\n  ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED,\n  ERR_STREAM_NULL_VALUES = _require$codes.ERR_STREAM_NULL_VALUES,\n  ERR_STREAM_WRITE_AFTER_END = _require$codes.ERR_STREAM_WRITE_AFTER_END,\n  ERR_UNKNOWN_ENCODING = _require$codes.ERR_UNKNOWN_ENCODING;\nvar errorOrDestroy = destroyImpl.errorOrDestroy;\nrequire('inherits')(Writable, Stream);\nfunction nop() {}\nfunction WritableState(options, stream, isDuplex) {\n  Duplex = Duplex || require('./_stream_duplex');\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream,\n  // e.g. options.readableObjectMode vs. options.writableObjectMode, etc.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  this.highWaterMark = getHighWaterMark(this, options, 'writableHighWaterMark', isDuplex);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // Should close be emitted on destroy. Defaults to true.\n  this.emitClose = options.emitClose !== false;\n\n  // Should .destroy() be called after 'finish' (and potentially 'end')\n  this.autoDestroy = !!options.autoDestroy;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function writableStateBufferGetter() {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function value(object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function realHasInstance(object) {\n    return object instanceof this;\n  };\n}\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the WritableState constructor, at least with V8 6.5\n  var isDuplex = this instanceof Duplex;\n  if (!isDuplex && !realHasInstance.call(Writable, this)) return new Writable(options);\n  this._writableState = new WritableState(options, this, isDuplex);\n\n  // legacy.\n  this.writable = true;\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n    if (typeof options.writev === 'function') this._writev = options.writev;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  errorOrDestroy(this, new ERR_STREAM_CANNOT_PIPE());\n};\nfunction writeAfterEnd(stream, cb) {\n  var er = new ERR_STREAM_WRITE_AFTER_END();\n  // TODO: defer error events consistently everywhere, not just the cb\n  errorOrDestroy(stream, er);\n  process.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var er;\n  if (chunk === null) {\n    er = new ERR_STREAM_NULL_VALUES();\n  } else if (typeof chunk !== 'string' && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer'], chunk);\n  }\n  if (er) {\n    errorOrDestroy(stream, er);\n    process.nextTick(cb, er);\n    return false;\n  }\n  return true;\n}\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n  if (typeof cb !== 'function') cb = nop;\n  if (state.ending) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n  return ret;\n};\nWritable.prototype.cork = function () {\n  this._writableState.corked++;\n};\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n  if (state.corked) {\n    state.corked--;\n    if (!state.writing && !state.corked && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new ERR_UNKNOWN_ENCODING(encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\nObject.defineProperty(Writable.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n  state.length += len;\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n  return ret;\n}\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (state.destroyed) state.onwrite(new ERR_STREAM_DESTROYED('write'));else if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    process.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    process.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    errorOrDestroy(stream, er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    errorOrDestroy(stream, er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n  if (typeof cb !== 'function') throw new ERR_MULTIPLE_CALLBACK();\n  onwriteStateUpdate(state);\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state) || stream.destroyed;\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n    if (sync) {\n      process.nextTick(afterWrite, stream, state, finished, cb);\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_write()'));\n};\nWritable.prototype._writev = null;\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending) endWritable(this, state, cb);\n  return this;\n};\nObject.defineProperty(Writable.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n});\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      errorOrDestroy(stream, err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function' && !state.destroyed) {\n      state.pendingcb++;\n      state.finalCalled = true;\n      process.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n      if (state.autoDestroy) {\n        // In case of duplex streams we need a way to detect\n        // if the readable side is ready for autoDestroy as well\n        var rState = stream._readableState;\n        if (!rState || rState.autoDestroy && rState.endEmitted) {\n          stream.destroy();\n        }\n      }\n    }\n  }\n  return need;\n}\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) process.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n\n  // reuse the free corkReq.\n  state.corkedRequestsFree.next = corkReq;\n}\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  cb(err);\n};", "'use strict';\n\nconst util = require('util');\nconst Writable = require('readable-stream/lib/_stream_writable.js');\nconst { LEVEL } = require('triple-beam');\n\n/**\n * Constructor function for the TransportStream. This is the base prototype\n * that all `winston >= 3` transports should inherit from.\n * @param {Object} options - Options for this TransportStream instance\n * @param {String} options.level - Highest level according to RFC5424.\n * @param {Boolean} options.handleExceptions - If true, info with\n * { exception: true } will be written.\n * @param {Function} options.log - Custom log function for simple Transport\n * creation\n * @param {Function} options.close - Called on \"unpipe\" from parent.\n */\nconst TransportStream = module.exports = function TransportStream(options = {}) {\n  Writable.call(this, { objectMode: true, highWaterMark: options.highWaterMark });\n\n  this.format = options.format;\n  this.level = options.level;\n  this.handleExceptions = options.handleExceptions;\n  this.handleRejections = options.handleRejections;\n  this.silent = options.silent;\n\n  if (options.log) this.log = options.log;\n  if (options.logv) this.logv = options.logv;\n  if (options.close) this.close = options.close;\n\n  // Get the levels from the source we are piped from.\n  this.once('pipe', logger => {\n    // Remark (indexzero): this bookkeeping can only support multiple\n    // Logger parents with the same `levels`. This comes into play in\n    // the `winston.Container` code in which `container.add` takes\n    // a fully realized set of options with pre-constructed TransportStreams.\n    this.levels = logger.levels;\n    this.parent = logger;\n  });\n\n  // If and/or when the transport is removed from this instance\n  this.once('unpipe', src => {\n    // Remark (indexzero): this bookkeeping can only support multiple\n    // Logger parents with the same `levels`. This comes into play in\n    // the `winston.Container` code in which `container.add` takes\n    // a fully realized set of options with pre-constructed TransportStreams.\n    if (src === this.parent) {\n      this.parent = null;\n      if (this.close) {\n        this.close();\n      }\n    }\n  });\n};\n\n/*\n * Inherit from Writeable using Node.js built-ins\n */\nutil.inherits(TransportStream, Writable);\n\n/**\n * Writes the info object to our transport instance.\n * @param {mixed} info - TODO: add param description.\n * @param {mixed} enc - TODO: add param description.\n * @param {function} callback - TODO: add param description.\n * @returns {undefined}\n * @private\n */\nTransportStream.prototype._write = function _write(info, enc, callback) {\n  if (this.silent || (info.exception === true && !this.handleExceptions)) {\n    return callback(null);\n  }\n\n  // Remark: This has to be handled in the base transport now because we\n  // cannot conditionally write to our pipe targets as stream. We always\n  // prefer any explicit level set on the Transport itself falling back to\n  // any level set on the parent.\n  const level = this.level || (this.parent && this.parent.level);\n\n  if (!level || this.levels[level] >= this.levels[info[LEVEL]]) {\n    if (info && !this.format) {\n      return this.log(info, callback);\n    }\n\n    let errState;\n    let transformed;\n\n    // We trap(and re-throw) any errors generated by the user-provided format, but also\n    // guarantee that the streams callback is invoked so that we can continue flowing.\n    try {\n      transformed = this.format.transform(Object.assign({}, info), this.format.options);\n    } catch (err) {\n      errState = err;\n    }\n\n    if (errState || !transformed) {\n      // eslint-disable-next-line callback-return\n      callback();\n      if (errState) throw errState;\n      return;\n    }\n\n    return this.log(transformed, callback);\n  }\n  this._writableState.sync = false;\n  return callback(null);\n};\n\n/**\n * Writes the batch of info objects (i.e. \"object chunks\") to our transport\n * instance after performing any necessary filtering.\n * @param {mixed} chunks - TODO: add params description.\n * @param {function} callback - TODO: add params description.\n * @returns {mixed} - TODO: add returns description.\n * @private\n */\nTransportStream.prototype._writev = function _writev(chunks, callback) {\n  if (this.logv) {\n    const infos = chunks.filter(this._accept, this);\n    if (!infos.length) {\n      return callback(null);\n    }\n\n    // Remark (indexzero): from a performance perspective if Transport\n    // implementers do choose to implement logv should we make it their\n    // responsibility to invoke their format?\n    return this.logv(infos, callback);\n  }\n\n  for (let i = 0; i < chunks.length; i++) {\n    if (!this._accept(chunks[i])) continue;\n\n    if (chunks[i].chunk && !this.format) {\n      this.log(chunks[i].chunk, chunks[i].callback);\n      continue;\n    }\n\n    let errState;\n    let transformed;\n\n    // We trap(and re-throw) any errors generated by the user-provided format, but also\n    // guarantee that the streams callback is invoked so that we can continue flowing.\n    try {\n      transformed = this.format.transform(\n        Object.assign({}, chunks[i].chunk),\n        this.format.options\n      );\n    } catch (err) {\n      errState = err;\n    }\n\n    if (errState || !transformed) {\n      // eslint-disable-next-line callback-return\n      chunks[i].callback();\n      if (errState) {\n        // eslint-disable-next-line callback-return\n        callback(null);\n        throw errState;\n      }\n    } else {\n      this.log(transformed, chunks[i].callback);\n    }\n  }\n\n  return callback(null);\n};\n\n/**\n * Predicate function that returns true if the specfied `info` on the\n * WriteReq, `write`, should be passed down into the derived\n * TransportStream's I/O via `.log(info, callback)`.\n * @param {WriteReq} write - winston@3 Node.js WriteReq for the `info` object\n * representing the log message.\n * @returns {Boolean} - Value indicating if the `write` should be accepted &\n * logged.\n */\nTransportStream.prototype._accept = function _accept(write) {\n  const info = write.chunk;\n  if (this.silent) {\n    return false;\n  }\n\n  // We always prefer any explicit level set on the Transport itself\n  // falling back to any level set on the parent.\n  const level = this.level || (this.parent && this.parent.level);\n\n  // Immediately check the average case: log level filtering.\n  if (\n    info.exception === true ||\n    !level ||\n    this.levels[level] >= this.levels[info[LEVEL]]\n  ) {\n    // Ensure the info object is valid based on `{ exception }`:\n    // 1. { handleExceptions: true }: all `info` objects are valid\n    // 2. { exception: false }: accepted by all transports.\n    if (this.handleExceptions || info.exception !== true) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\n/**\n * _nop is short for \"No operation\"\n * @returns {Boolean} Intentionally false.\n */\nTransportStream.prototype._nop = function _nop() {\n  // eslint-disable-next-line no-undefined\n  return void undefined;\n};\n", "'use strict';\n\nconst util = require('util');\nconst { LEVEL } = require('triple-beam');\nconst TransportStream = require('./modern');\n\n/**\n * Constructor function for the LegacyTransportStream. This is an internal\n * wrapper `winston >= 3` uses to wrap older transports implementing\n * log(level, message, meta).\n * @param {Object} options - Options for this TransportStream instance.\n * @param {Transpot} options.transport - winston@2 or older Transport to wrap.\n */\n\nconst LegacyTransportStream = module.exports = function LegacyTransportStream(options = {}) {\n  TransportStream.call(this, options);\n  if (!options.transport || typeof options.transport.log !== 'function') {\n    throw new Error('Invalid transport, must be an object with a log method.');\n  }\n\n  this.transport = options.transport;\n  this.level = this.level || options.transport.level;\n  this.handleExceptions = this.handleExceptions || options.transport.handleExceptions;\n\n  // Display our deprecation notice.\n  this._deprecated();\n\n  // Properly bubble up errors from the transport to the\n  // LegacyTransportStream instance, but only once no matter how many times\n  // this transport is shared.\n  function transportError(err) {\n    this.emit('error', err, this.transport);\n  }\n\n  if (!this.transport.__winstonError) {\n    this.transport.__winstonError = transportError.bind(this);\n    this.transport.on('error', this.transport.__winstonError);\n  }\n};\n\n/*\n * Inherit from TransportStream using Node.js built-ins\n */\nutil.inherits(LegacyTransportStream, TransportStream);\n\n/**\n * Writes the info object to our transport instance.\n * @param {mixed} info - TODO: add param description.\n * @param {mixed} enc - TODO: add param description.\n * @param {function} callback - TODO: add param description.\n * @returns {undefined}\n * @private\n */\nLegacyTransportStream.prototype._write = function _write(info, enc, callback) {\n  if (this.silent || (info.exception === true && !this.handleExceptions)) {\n    return callback(null);\n  }\n\n  // Remark: This has to be handled in the base transport now because we\n  // cannot conditionally write to our pipe targets as stream.\n  if (!this.level || this.levels[this.level] >= this.levels[info[LEVEL]]) {\n    this.transport.log(info[LEVEL], info.message, info, this._nop);\n  }\n\n  callback(null);\n};\n\n/**\n * Writes the batch of info objects (i.e. \"object chunks\") to our transport\n * instance after performing any necessary filtering.\n * @param {mixed} chunks - TODO: add params description.\n * @param {function} callback - TODO: add params description.\n * @returns {mixed} - TODO: add returns description.\n * @private\n */\nLegacyTransportStream.prototype._writev = function _writev(chunks, callback) {\n  for (let i = 0; i < chunks.length; i++) {\n    if (this._accept(chunks[i])) {\n      this.transport.log(\n        chunks[i].chunk[LEVEL],\n        chunks[i].chunk.message,\n        chunks[i].chunk,\n        this._nop\n      );\n      chunks[i].callback();\n    }\n  }\n\n  return callback(null);\n};\n\n/**\n * Displays a deprecation notice. Defined as a function so it can be\n * overriden in tests.\n * @returns {undefined}\n */\nLegacyTransportStream.prototype._deprecated = function _deprecated() {\n  // eslint-disable-next-line no-console\n  console.error([\n    `${this.transport.name} is a legacy winston transport. Consider upgrading: `,\n    '- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md'\n  ].join('\\n'));\n};\n\n/**\n * Clean up error handling state on the legacy transport associated\n * with this instance.\n * @returns {undefined}\n */\nLegacyTransportStream.prototype.close = function close() {\n  if (this.transport.close) {\n    this.transport.close();\n  }\n\n  if (this.transport.__winstonError) {\n    this.transport.removeListener('error', this.transport.__winstonError);\n    this.transport.__winstonError = null;\n  }\n};\n", "'use strict';\n\n// Expose modern transport directly as the export\nmodule.exports = require('./modern');\n\n// Expose legacy stream\nmodule.exports.LegacyTransportStream = require('./legacy');\n", "/* eslint-disable no-console */\n/*\n * console.js: Transport for outputting to the console.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst os = require('os');\nconst { LEVEL, MESSAGE } = require('triple-beam');\nconst TransportStream = require('winston-transport');\n\n/**\n * Transport for outputting to the console.\n * @type {Console}\n * @extends {TransportStream}\n */\nmodule.exports = class Console extends TransportStream {\n  /**\n   * Constructor function for the Console transport object responsible for\n   * persisting log messages and metadata to a terminal or TTY.\n   * @param {!Object} [options={}] - Options for this instance.\n   */\n  constructor(options = {}) {\n    super(options);\n\n    // Expose the name of this Transport on the prototype\n    this.name = options.name || 'console';\n    this.stderrLevels = this._stringArrayToSet(options.stderrLevels);\n    this.consoleWarnLevels = this._stringArrayToSet(options.consoleWarnLevels);\n    this.eol = typeof options.eol === 'string' ? options.eol : os.EOL;\n    this.forceConsole = options.forceConsole || false;\n\n    // Keep a reference to the log, warn, and error console methods\n    // in case they get redirected to this transport after the logger is\n    // instantiated. This prevents a circular reference issue.\n    this._consoleLog = console.log.bind(console);\n    this._consoleWarn = console.warn.bind(console);\n    this._consoleError = console.error.bind(console);\n\n    this.setMaxListeners(30);\n  }\n\n  /**\n   * Core logging method exposed to Winston.\n   * @param {Object} info - TODO: add param description.\n   * @param {Function} callback - TODO: add param description.\n   * @returns {undefined}\n   */\n  log(info, callback) {\n    setImmediate(() => this.emit('logged', info));\n\n    // Remark: what if there is no raw...?\n    if (this.stderrLevels[info[LEVEL]]) {\n      if (console._stderr && !this.forceConsole) {\n        // Node.js maps `process.stderr` to `console._stderr`.\n        console._stderr.write(`${info[MESSAGE]}${this.eol}`);\n      } else {\n        // console.error adds a newline\n        this._consoleError(info[MESSAGE]);\n      }\n\n      if (callback) {\n        callback(); // eslint-disable-line callback-return\n      }\n      return;\n    } else if (this.consoleWarnLevels[info[LEVEL]]) {\n      if (console._stderr && !this.forceConsole) {\n        // Node.js maps `process.stderr` to `console._stderr`.\n        // in Node.js console.warn is an alias for console.error\n        console._stderr.write(`${info[MESSAGE]}${this.eol}`);\n      } else {\n        // console.warn adds a newline\n        this._consoleWarn(info[MESSAGE]);\n      }\n\n      if (callback) {\n        callback(); // eslint-disable-line callback-return\n      }\n      return;\n    }\n\n    if (console._stdout && !this.forceConsole) {\n      // Node.js maps `process.stdout` to `console._stdout`.\n      console._stdout.write(`${info[MESSAGE]}${this.eol}`);\n    } else {\n      // console.log adds a newline.\n      this._consoleLog(info[MESSAGE]);\n    }\n\n    if (callback) {\n      callback(); // eslint-disable-line callback-return\n    }\n  }\n\n  /**\n   * Returns a Set-like object with strArray's elements as keys (each with the\n   * value true).\n   * @param {Array} strArray - Array of Set-elements as strings.\n   * @param {?string} [errMsg] - Custom error message thrown on invalid input.\n   * @returns {Object} - TODO: add return description.\n   * @private\n   */\n  _stringArrayToSet(strArray, errMsg) {\n    if (!strArray) return {};\n\n    errMsg =\n      errMsg || 'Cannot make set from type other than Array of string elements';\n\n    if (!Array.isArray(strArray)) {\n      throw new Error(errMsg);\n    }\n\n    return strArray.reduce((set, el) => {\n      if (typeof el !== 'string') {\n        throw new Error(errMsg);\n      }\n      set[el] = true;\n\n      return set;\n    }, {});\n  }\n};\n", "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = isArrayLike;\nfunction isArrayLike(value) {\n    return value && typeof value.length === 'number' && value.length >= 0 && value.length % 1 === 0;\n}\nmodule.exports = exports.default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (fn) {\n    return function (...args /*, callback*/) {\n        var callback = args.pop();\n        return fn.call(this, args, callback);\n    };\n};\n\nmodule.exports = exports.default;", "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.fallback = fallback;\nexports.wrap = wrap;\n/* istanbul ignore file */\n\nvar hasQueueMicrotask = exports.hasQueueMicrotask = typeof queueMicrotask === 'function' && queueMicrotask;\nvar hasSetImmediate = exports.hasSetImmediate = typeof setImmediate === 'function' && setImmediate;\nvar hasNextTick = exports.hasNextTick = typeof process === 'object' && typeof process.nextTick === 'function';\n\nfunction fallback(fn) {\n    setTimeout(fn, 0);\n}\n\nfunction wrap(defer) {\n    return (fn, ...args) => defer(() => fn(...args));\n}\n\nvar _defer;\n\nif (hasQueueMicrotask) {\n    _defer = queueMicrotask;\n} else if (hasSetImmediate) {\n    _defer = setImmediate;\n} else if (hasNextTick) {\n    _defer = process.nextTick;\n} else {\n    _defer = fallback;\n}\n\nexports.default = wrap(_defer);", "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = asyncify;\n\nvar _initialParams = require('./internal/initialParams.js');\n\nvar _initialParams2 = _interopRequireDefault(_initialParams);\n\nvar _setImmediate = require('./internal/setImmediate.js');\n\nvar _setImmediate2 = _interopRequireDefault(_setImmediate);\n\nvar _wrapAsync = require('./internal/wrapAsync.js');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Take a sync function and make it async, passing its return value to a\n * callback. This is useful for plugging sync functions into a waterfall,\n * series, or other async functions. Any arguments passed to the generated\n * function will be passed to the wrapped function (except for the final\n * callback argument). Errors thrown will be passed to the callback.\n *\n * If the function passed to `asyncify` returns a Promise, that promises's\n * resolved/rejected state will be used to call the callback, rather than simply\n * the synchronous return value.\n *\n * This also means you can asyncify ES2017 `async` functions.\n *\n * @name asyncify\n * @static\n * @memberOf module:Utils\n * @method\n * @alias wrapSync\n * @category Util\n * @param {Function} func - The synchronous function, or Promise-returning\n * function to convert to an {@link AsyncFunction}.\n * @returns {AsyncFunction} An asynchronous wrapper of the `func`. To be\n * invoked with `(args..., callback)`.\n * @example\n *\n * // passing a regular synchronous function\n * async.waterfall([\n *     async.apply(fs.readFile, filename, \"utf8\"),\n *     async.asyncify(JSON.parse),\n *     function (data, next) {\n *         // data is the result of parsing the text.\n *         // If there was a parsing error, it would have been caught.\n *     }\n * ], callback);\n *\n * // passing a function returning a promise\n * async.waterfall([\n *     async.apply(fs.readFile, filename, \"utf8\"),\n *     async.asyncify(function (contents) {\n *         return db.model.create(contents);\n *     }),\n *     function (model, next) {\n *         // `model` is the instantiated model object.\n *         // If there was an error, this function would be skipped.\n *     }\n * ], callback);\n *\n * // es2017 example, though `asyncify` is not needed if your JS environment\n * // supports async functions out of the box\n * var q = async.queue(async.asyncify(async function(file) {\n *     var intermediateStep = await processFile(file);\n *     return await somePromise(intermediateStep)\n * }));\n *\n * q.push(files);\n */\nfunction asyncify(func) {\n    if ((0, _wrapAsync.isAsync)(func)) {\n        return function (...args /*, callback*/) {\n            const callback = args.pop();\n            const promise = func.apply(this, args);\n            return handlePromise(promise, callback);\n        };\n    }\n\n    return (0, _initialParams2.default)(function (args, callback) {\n        var result;\n        try {\n            result = func.apply(this, args);\n        } catch (e) {\n            return callback(e);\n        }\n        // if result is Promise object\n        if (result && typeof result.then === 'function') {\n            return handlePromise(result, callback);\n        } else {\n            callback(null, result);\n        }\n    });\n}\n\nfunction handlePromise(promise, callback) {\n    return promise.then(value => {\n        invokeCallback(callback, null, value);\n    }, err => {\n        invokeCallback(callback, err && (err instanceof Error || err.message) ? err : new Error(err));\n    });\n}\n\nfunction invokeCallback(callback, error, value) {\n    try {\n        callback(error, value);\n    } catch (err) {\n        (0, _setImmediate2.default)(e => {\n            throw e;\n        }, err);\n    }\n}\nmodule.exports = exports.default;", "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.isAsyncIterable = exports.isAsyncGenerator = exports.isAsync = undefined;\n\nvar _asyncify = require('../asyncify.js');\n\nvar _asyncify2 = _interopRequireDefault(_asyncify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction isAsync(fn) {\n    return fn[Symbol.toStringTag] === 'AsyncFunction';\n}\n\nfunction isAsyncGenerator(fn) {\n    return fn[Symbol.toStringTag] === 'AsyncGenerator';\n}\n\nfunction isAsyncIterable(obj) {\n    return typeof obj[Symbol.asyncIterator] === 'function';\n}\n\nfunction wrapAsync(asyncFn) {\n    if (typeof asyncFn !== 'function') throw new Error('expected a function');\n    return isAsync(asyncFn) ? (0, _asyncify2.default)(asyncFn) : asyncFn;\n}\n\nexports.default = wrapAsync;\nexports.isAsync = isAsync;\nexports.isAsyncGenerator = isAsyncGenerator;\nexports.isAsyncIterable = isAsyncIterable;", "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = awaitify;\n// conditionally promisify a function.\n// only return a promise if a callback is omitted\nfunction awaitify(asyncFn, arity) {\n    if (!arity) arity = asyncFn.length;\n    if (!arity) throw new Error('arity is undefined');\n    function awaitable(...args) {\n        if (typeof args[arity - 1] === 'function') {\n            return asyncFn.apply(this, args);\n        }\n\n        return new Promise((resolve, reject) => {\n            args[arity - 1] = (err, ...cbArgs) => {\n                if (err) return reject(err);\n                resolve(cbArgs.length > 1 ? cbArgs : cbArgs[0]);\n            };\n            asyncFn.apply(this, args);\n        });\n    }\n\n    return awaitable;\n}\nmodule.exports = exports.default;", "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _isArrayLike = require('./isArrayLike.js');\n\nvar _isArrayLike2 = _interopRequireDefault(_isArrayLike);\n\nvar _wrapAsync = require('./wrapAsync.js');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nvar _awaitify = require('./awaitify.js');\n\nvar _awaitify2 = _interopRequireDefault(_awaitify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = (0, _awaitify2.default)((eachfn, tasks, callback) => {\n    var results = (0, _isArrayLike2.default)(tasks) ? [] : {};\n\n    eachfn(tasks, (task, key, taskCb) => {\n        (0, _wrapAsync2.default)(task)((err, ...result) => {\n            if (result.length < 2) {\n                [result] = result;\n            }\n            results[key] = result;\n            taskCb(err);\n        });\n    }, err => callback(err, results));\n}, 3);\nmodule.exports = exports.default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = once;\nfunction once(fn) {\n    function wrapper(...args) {\n        if (fn === null) return;\n        var callFn = fn;\n        fn = null;\n        callFn.apply(this, args);\n    }\n    Object.assign(wrapper, fn);\n    return wrapper;\n}\nmodule.exports = exports.default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (coll) {\n    return coll[Symbol.iterator] && coll[Symbol.iterator]();\n};\n\nmodule.exports = exports.default;", "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = createIterator;\n\nvar _isArrayLike = require('./isArrayLike.js');\n\nvar _isArrayLike2 = _interopRequireDefault(_isArrayLike);\n\nvar _getIterator = require('./getIterator.js');\n\nvar _getIterator2 = _interopRequireDefault(_getIterator);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction createArrayIterator(coll) {\n    var i = -1;\n    var len = coll.length;\n    return function next() {\n        return ++i < len ? { value: coll[i], key: i } : null;\n    };\n}\n\nfunction createES2015Iterator(iterator) {\n    var i = -1;\n    return function next() {\n        var item = iterator.next();\n        if (item.done) return null;\n        i++;\n        return { value: item.value, key: i };\n    };\n}\n\nfunction createObjectIterator(obj) {\n    var okeys = obj ? Object.keys(obj) : [];\n    var i = -1;\n    var len = okeys.length;\n    return function next() {\n        var key = okeys[++i];\n        if (key === '__proto__') {\n            return next();\n        }\n        return i < len ? { value: obj[key], key } : null;\n    };\n}\n\nfunction createIterator(coll) {\n    if ((0, _isArrayLike2.default)(coll)) {\n        return createArrayIterator(coll);\n    }\n\n    var iterator = (0, _getIterator2.default)(coll);\n    return iterator ? createES2015Iterator(iterator) : createObjectIterator(coll);\n}\nmodule.exports = exports.default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = onlyOnce;\nfunction onlyOnce(fn) {\n    return function (...args) {\n        if (fn === null) throw new Error(\"Callback was already called.\");\n        var callFn = fn;\n        fn = null;\n        callFn.apply(this, args);\n    };\n}\nmodule.exports = exports.default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n// A temporary value used to identify if the loop should be broken.\n// See #1064, #1293\nconst breakLoop = {};\nexports.default = breakLoop;\nmodule.exports = exports.default;", "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = asyncEachOfLimit;\n\nvar _breakLoop = require('./breakLoop.js');\n\nvar _breakLoop2 = _interopRequireDefault(_breakLoop);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// for async generators\nfunction asyncEachOfLimit(generator, limit, iteratee, callback) {\n    let done = false;\n    let canceled = false;\n    let awaiting = false;\n    let running = 0;\n    let idx = 0;\n\n    function replenish() {\n        //console.log('replenish')\n        if (running >= limit || awaiting || done) return;\n        //console.log('replenish awaiting')\n        awaiting = true;\n        generator.next().then(({ value, done: iterDone }) => {\n            //console.log('got value', value)\n            if (canceled || done) return;\n            awaiting = false;\n            if (iterDone) {\n                done = true;\n                if (running <= 0) {\n                    //console.log('done nextCb')\n                    callback(null);\n                }\n                return;\n            }\n            running++;\n            iteratee(value, idx, iterateeCallback);\n            idx++;\n            replenish();\n        }).catch(handleError);\n    }\n\n    function iterateeCallback(err, result) {\n        //console.log('iterateeCallback')\n        running -= 1;\n        if (canceled) return;\n        if (err) return handleError(err);\n\n        if (err === false) {\n            done = true;\n            canceled = true;\n            return;\n        }\n\n        if (result === _breakLoop2.default || done && running <= 0) {\n            done = true;\n            //console.log('done iterCb')\n            return callback(null);\n        }\n        replenish();\n    }\n\n    function handleError(err) {\n        if (canceled) return;\n        awaiting = false;\n        done = true;\n        callback(err);\n    }\n\n    replenish();\n}\nmodule.exports = exports.default;", "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _once = require('./once.js');\n\nvar _once2 = _interopRequireDefault(_once);\n\nvar _iterator = require('./iterator.js');\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _onlyOnce = require('./onlyOnce.js');\n\nvar _onlyOnce2 = _interopRequireDefault(_onlyOnce);\n\nvar _wrapAsync = require('./wrapAsync.js');\n\nvar _asyncEachOfLimit = require('./asyncEachOfLimit.js');\n\nvar _asyncEachOfLimit2 = _interopRequireDefault(_asyncEachOfLimit);\n\nvar _breakLoop = require('./breakLoop.js');\n\nvar _breakLoop2 = _interopRequireDefault(_breakLoop);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = limit => {\n    return (obj, iteratee, callback) => {\n        callback = (0, _once2.default)(callback);\n        if (limit <= 0) {\n            throw new RangeError('concurrency limit cannot be less than 1');\n        }\n        if (!obj) {\n            return callback(null);\n        }\n        if ((0, _wrapAsync.isAsyncGenerator)(obj)) {\n            return (0, _asyncEachOfLimit2.default)(obj, limit, iteratee, callback);\n        }\n        if ((0, _wrapAsync.isAsyncIterable)(obj)) {\n            return (0, _asyncEachOfLimit2.default)(obj[Symbol.asyncIterator](), limit, iteratee, callback);\n        }\n        var nextElem = (0, _iterator2.default)(obj);\n        var done = false;\n        var canceled = false;\n        var running = 0;\n        var looping = false;\n\n        function iterateeCallback(err, value) {\n            if (canceled) return;\n            running -= 1;\n            if (err) {\n                done = true;\n                callback(err);\n            } else if (err === false) {\n                done = true;\n                canceled = true;\n            } else if (value === _breakLoop2.default || done && running <= 0) {\n                done = true;\n                return callback(null);\n            } else if (!looping) {\n                replenish();\n            }\n        }\n\n        function replenish() {\n            looping = true;\n            while (running < limit && !done) {\n                var elem = nextElem();\n                if (elem === null) {\n                    done = true;\n                    if (running <= 0) {\n                        callback(null);\n                    }\n                    return;\n                }\n                running += 1;\n                iteratee(elem.value, elem.key, (0, _onlyOnce2.default)(iterateeCallback));\n            }\n            looping = false;\n        }\n\n        replenish();\n    };\n};\n\nmodule.exports = exports.default;", "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _eachOfLimit2 = require('./internal/eachOfLimit.js');\n\nvar _eachOfLimit3 = _interopRequireDefault(_eachOfLimit2);\n\nvar _wrapAsync = require('./internal/wrapAsync.js');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nvar _awaitify = require('./internal/awaitify.js');\n\nvar _awaitify2 = _interopRequireDefault(_awaitify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * The same as [`eachOf`]{@link module:Collections.eachOf} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name eachOfLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.eachOf]{@link module:Collections.eachOf}\n * @alias forEachOfLimit\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each\n * item in `coll`. The `key` is the item's key, or index in the case of an\n * array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n */\nfunction eachOfLimit(coll, limit, iteratee, callback) {\n    return (0, _eachOfLimit3.default)(limit)(coll, (0, _wrapAsync2.default)(iteratee), callback);\n}\n\nexports.default = (0, _awaitify2.default)(eachOfLimit, 4);\nmodule.exports = exports.default;", "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _eachOfLimit = require('./eachOfLimit.js');\n\nvar _eachOfLimit2 = _interopRequireDefault(_eachOfLimit);\n\nvar _awaitify = require('./internal/awaitify.js');\n\nvar _awaitify2 = _interopRequireDefault(_awaitify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * The same as [`eachOf`]{@link module:Collections.eachOf} but runs only a single async operation at a time.\n *\n * @name eachOfSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.eachOf]{@link module:Collections.eachOf}\n * @alias forEachOfSeries\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n */\nfunction eachOfSeries(coll, iteratee, callback) {\n    return (0, _eachOfLimit2.default)(coll, 1, iteratee, callback);\n}\nexports.default = (0, _awaitify2.default)(eachOfSeries, 3);\nmodule.exports = exports.default;", "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = series;\n\nvar _parallel2 = require('./internal/parallel.js');\n\nvar _parallel3 = _interopRequireDefault(_parallel2);\n\nvar _eachOfSeries = require('./eachOfSeries.js');\n\nvar _eachOfSeries2 = _interopRequireDefault(_eachOfSeries);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Run the functions in the `tasks` collection in series, each one running once\n * the previous function has completed. If any functions in the series pass an\n * error to its callback, no more functions are run, and `callback` is\n * immediately called with the value of the error. Otherwise, `callback`\n * receives an array of results when `tasks` have completed.\n *\n * It is also possible to use an object instead of an array. Each property will\n * be run as a function, and the results will be passed to the final `callback`\n * as an object instead of an array. This can be a more readable way of handling\n *  results from {@link async.series}.\n *\n * **Note** that while many implementations preserve the order of object\n * properties, the [ECMAScript Language Specification](http://www.ecma-international.org/ecma-262/5.1/#sec-8.6)\n * explicitly states that\n *\n * > The mechanics and order of enumerating the properties is not specified.\n *\n * So if you rely on the order in which your series of functions are executed,\n * and want this to work on all platforms, consider using an array.\n *\n * @name series\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|AsyncIterable|Object} tasks - A collection containing\n * [async functions]{@link AsyncFunction} to run in series.\n * Each function can complete with any number of optional `result` values.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed. This function gets a results array (or object)\n * containing all the result arguments passed to the `task` callbacks. Invoked\n * with (err, result).\n * @return {Promise} a promise, if no callback is passed\n * @example\n *\n * //Using Callbacks\n * async.series([\n *     function(callback) {\n *         setTimeout(function() {\n *             // do some async task\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             // then do another async task\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ], function(err, results) {\n *     console.log(results);\n *     // results is equal to ['one','two']\n * });\n *\n * // an example using objects instead of arrays\n * async.series({\n *     one: function(callback) {\n *         setTimeout(function() {\n *             // do some async task\n *             callback(null, 1);\n *         }, 200);\n *     },\n *     two: function(callback) {\n *         setTimeout(function() {\n *             // then do another async task\n *             callback(null, 2);\n *         }, 100);\n *     }\n * }, function(err, results) {\n *     console.log(results);\n *     // results is equal to: { one: 1, two: 2 }\n * });\n *\n * //Using Promises\n * async.series([\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ]).then(results => {\n *     console.log(results);\n *     // results is equal to ['one','two']\n * }).catch(err => {\n *     console.log(err);\n * });\n *\n * // an example using an object instead of an array\n * async.series({\n *     one: function(callback) {\n *         setTimeout(function() {\n *             // do some async task\n *             callback(null, 1);\n *         }, 200);\n *     },\n *     two: function(callback) {\n *         setTimeout(function() {\n *             // then do another async task\n *             callback(null, 2);\n *         }, 100);\n *     }\n * }).then(results => {\n *     console.log(results);\n *     // results is equal to: { one: 1, two: 2 }\n * }).catch(err => {\n *     console.log(err);\n * });\n *\n * //Using async/await\n * async () => {\n *     try {\n *         let results = await async.series([\n *             function(callback) {\n *                 setTimeout(function() {\n *                     // do some async task\n *                     callback(null, 'one');\n *                 }, 200);\n *             },\n *             function(callback) {\n *                 setTimeout(function() {\n *                     // then do another async task\n *                     callback(null, 'two');\n *                 }, 100);\n *             }\n *         ]);\n *         console.log(results);\n *         // results is equal to ['one','two']\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n * // an example using an object instead of an array\n * async () => {\n *     try {\n *         let results = await async.parallel({\n *             one: function(callback) {\n *                 setTimeout(function() {\n *                     // do some async task\n *                     callback(null, 1);\n *                 }, 200);\n *             },\n *            two: function(callback) {\n *                 setTimeout(function() {\n *                     // then do another async task\n *                     callback(null, 2);\n *                 }, 100);\n *            }\n *         });\n *         console.log(results);\n *         // results is equal to: { one: 1, two: 2 }\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n */\nfunction series(tasks, callback) {\n    return (0, _parallel3.default)(_eachOfSeries2.default, tasks, callback);\n}\nmodule.exports = exports.default;", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\nvar _require$codes = require('../errors').codes,\n  ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n  ERR_TRANSFORM_ALREADY_TRANSFORMING = _require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,\n  ERR_TRANSFORM_WITH_LENGTH_0 = _require$codes.ERR_TRANSFORM_WITH_LENGTH_0;\nvar Duplex = require('./_stream_duplex');\nrequire('inherits')(Transform, Duplex);\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n  var cb = ts.writecb;\n  if (cb === null) {\n    return this.emit('error', new ERR_MULTIPLE_CALLBACK());\n  }\n  ts.writechunk = null;\n  ts.writecb = null;\n  if (data != null)\n    // single equals check for both `null` and `undefined`\n    this.push(data);\n  cb(er);\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n  Duplex.call(this, options);\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\nfunction prefinish() {\n  var _this = this;\n  if (typeof this._flush === 'function' && !this._readableState.destroyed) {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_transform()'));\n};\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n  if (ts.writechunk !== null && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\nTransform.prototype._destroy = function (err, cb) {\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n  });\n};\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n  if (data != null)\n    // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // TODO(BridgeAR): Write a test for these two error cases\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new ERR_TRANSFORM_WITH_LENGTH_0();\n  if (stream._transformState.transforming) throw new ERR_TRANSFORM_ALREADY_TRANSFORMING();\n  return stream.push(null);\n}", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\nvar Transform = require('./_stream_transform');\nrequire('inherits')(PassThrough, Transform);\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n  Transform.call(this, options);\n}\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};", "// Ported from https://github.com/mafintosh/pump with\n// permission from the author, Mathias Buus (@mafintosh).\n\n'use strict';\n\nvar eos;\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    callback.apply(void 0, arguments);\n  };\n}\nvar _require$codes = require('../../../errors').codes,\n  ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS,\n  ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED;\nfunction noop(err) {\n  // Rethrow the error if it exists to avoid swallowing it\n  if (err) throw err;\n}\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\nfunction destroyer(stream, reading, writing, callback) {\n  callback = once(callback);\n  var closed = false;\n  stream.on('close', function () {\n    closed = true;\n  });\n  if (eos === undefined) eos = require('./end-of-stream');\n  eos(stream, {\n    readable: reading,\n    writable: writing\n  }, function (err) {\n    if (err) return callback(err);\n    closed = true;\n    callback();\n  });\n  var destroyed = false;\n  return function (err) {\n    if (closed) return;\n    if (destroyed) return;\n    destroyed = true;\n\n    // request.destroy just do .end - .abort is what we want\n    if (isRequest(stream)) return stream.abort();\n    if (typeof stream.destroy === 'function') return stream.destroy();\n    callback(err || new ERR_STREAM_DESTROYED('pipe'));\n  };\n}\nfunction call(fn) {\n  fn();\n}\nfunction pipe(from, to) {\n  return from.pipe(to);\n}\nfunction popCallback(streams) {\n  if (!streams.length) return noop;\n  if (typeof streams[streams.length - 1] !== 'function') return noop;\n  return streams.pop();\n}\nfunction pipeline() {\n  for (var _len = arguments.length, streams = new Array(_len), _key = 0; _key < _len; _key++) {\n    streams[_key] = arguments[_key];\n  }\n  var callback = popCallback(streams);\n  if (Array.isArray(streams[0])) streams = streams[0];\n  if (streams.length < 2) {\n    throw new ERR_MISSING_ARGS('streams');\n  }\n  var error;\n  var destroys = streams.map(function (stream, i) {\n    var reading = i < streams.length - 1;\n    var writing = i > 0;\n    return destroyer(stream, reading, writing, function (err) {\n      if (!error) error = err;\n      if (err) destroys.forEach(call);\n      if (reading) return;\n      destroys.forEach(call);\n      callback(error);\n    });\n  });\n  return streams.reduce(pipe);\n}\nmodule.exports = pipeline;", "var Stream = require('stream');\nif (process.env.READABLE_STREAM === 'disable' && Stream) {\n  module.exports = Stream.Readable;\n  Object.assign(module.exports, Stream);\n  module.exports.Stream = Stream;\n} else {\n  exports = module.exports = require('./lib/_stream_readable.js');\n  exports.Stream = Stream || exports;\n  exports.Readable = exports;\n  exports.Writable = require('./lib/_stream_writable.js');\n  exports.Duplex = require('./lib/_stream_duplex.js');\n  exports.Transform = require('./lib/_stream_transform.js');\n  exports.PassThrough = require('./lib/_stream_passthrough.js');\n  exports.finished = require('./lib/internal/streams/end-of-stream.js');\n  exports.pipeline = require('./lib/internal/streams/pipeline.js');\n}\n", "/**\n * Contains all configured adapters for the given environment.\n *\n * @type {Array}\n * @public\n */\nvar adapters = [];\n\n/**\n * Contains all modifier functions.\n *\n * @typs {Array}\n * @public\n */\nvar modifiers = [];\n\n/**\n * Our default logger.\n *\n * @public\n */\nvar logger = function devnull() {};\n\n/**\n * Register a new adapter that will used to find environments.\n *\n * @param {Function} adapter A function that will return the possible env.\n * @returns {Boolean} Indication of a successful add.\n * @public\n */\nfunction use(adapter) {\n  if (~adapters.indexOf(adapter)) return false;\n\n  adapters.push(adapter);\n  return true;\n}\n\n/**\n * Assign a new log method.\n *\n * @param {Function} custom The log method.\n * @public\n */\nfunction set(custom) {\n  logger = custom;\n}\n\n/**\n * Check if the namespace is allowed by any of our adapters.\n *\n * @param {String} namespace The namespace that needs to be enabled\n * @returns {Boolean|Promise} Indication if the namespace is enabled by our adapters.\n * @public\n */\nfunction enabled(namespace) {\n  var async = [];\n\n  for (var i = 0; i < adapters.length; i++) {\n    if (adapters[i].async) {\n      async.push(adapters[i]);\n      continue;\n    }\n\n    if (adapters[i](namespace)) return true;\n  }\n\n  if (!async.length) return false;\n\n  //\n  // Now that we know that we Async functions, we know we run in an ES6\n  // environment and can use all the API's that they offer, in this case\n  // we want to return a Promise so that we can `await` in React-Native\n  // for an async adapter.\n  //\n  return new Promise(function pinky(resolve) {\n    Promise.all(\n      async.map(function prebind(fn) {\n        return fn(namespace);\n      })\n    ).then(function resolved(values) {\n      resolve(values.some(Boolean));\n    });\n  });\n}\n\n/**\n * Add a new message modifier to the debugger.\n *\n * @param {Function} fn Modification function.\n * @returns {Boolean} Indication of a successful add.\n * @public\n */\nfunction modify(fn) {\n  if (~modifiers.indexOf(fn)) return false;\n\n  modifiers.push(fn);\n  return true;\n}\n\n/**\n * Write data to the supplied logger.\n *\n * @param {Object} meta Meta information about the log.\n * @param {Array} args Arguments for console.log.\n * @public\n */\nfunction write() {\n  logger.apply(logger, arguments);\n}\n\n/**\n * Process the message with the modifiers.\n *\n * @param {Mixed} message The message to be transformed by modifers.\n * @returns {String} Transformed message.\n * @public\n */\nfunction process(message) {\n  for (var i = 0; i < modifiers.length; i++) {\n    message = modifiers[i].apply(modifiers[i], arguments);\n  }\n\n  return message;\n}\n\n/**\n * Introduce options to the logger function.\n *\n * @param {Function} fn Calback function.\n * @param {Object} options Properties to introduce on fn.\n * @returns {Function} The passed function\n * @public\n */\nfunction introduce(fn, options) {\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var key in options) {\n    if (has.call(options, key)) {\n      fn[key] = options[key];\n    }\n  }\n\n  return fn;\n}\n\n/**\n * Nope, we're not allowed to write messages.\n *\n * @returns {Boolean} false\n * @public\n */\nfunction nope(options) {\n  options.enabled = false;\n  options.modify = modify;\n  options.set = set;\n  options.use = use;\n\n  return introduce(function diagnopes() {\n    return false;\n  }, options);\n}\n\n/**\n * Yep, we're allowed to write debug messages.\n *\n * @param {Object} options The options for the process.\n * @returns {Function} The function that does the logging.\n * @public\n */\nfunction yep(options) {\n  /**\n   * The function that receives the actual debug information.\n   *\n   * @returns {Boolean} indication that we're logging.\n   * @public\n   */\n  function diagnostics() {\n    var args = Array.prototype.slice.call(arguments, 0);\n\n    write.call(write, options, process(args, options));\n    return true;\n  }\n\n  options.enabled = true;\n  options.modify = modify;\n  options.set = set;\n  options.use = use;\n\n  return introduce(diagnostics, options);\n}\n\n/**\n * Simple helper function to introduce various of helper methods to our given\n * diagnostics function.\n *\n * @param {Function} diagnostics The diagnostics function.\n * @returns {Function} diagnostics\n * @public\n */\nmodule.exports = function create(diagnostics) {\n  diagnostics.introduce = introduce;\n  diagnostics.enabled = enabled;\n  diagnostics.process = process;\n  diagnostics.modify = modify;\n  diagnostics.write = write;\n  diagnostics.nope = nope;\n  diagnostics.yep = yep;\n  diagnostics.set = set;\n  diagnostics.use = use;\n\n  return diagnostics;\n}\n", "var create = require('../diagnostics');\n\n/**\n * Create a new diagnostics logger.\n *\n * @param {String} namespace The namespace it should enable.\n * @param {Object} options Additional options.\n * @returns {Function} The logger.\n * @public\n */\nvar diagnostics = create(function prod(namespace, options) {\n  options = options || {};\n  options.namespace = namespace;\n  options.prod = true;\n  options.dev = false;\n\n  if (!(options.force || prod.force)) return prod.nope(options);\n  return prod.yep(options);\n});\n\n//\n// Expose the diagnostics logger.\n//\nmodule.exports = diagnostics;\n", "//\n// Select the correct build version depending on the environment.\n//\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./production.js');\n} else {\n  module.exports = require('./development.js');\n}\n", "/**\n * tail-file.js: TODO: add file header description.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst fs = require('fs');\nconst { StringDecoder } = require('string_decoder');\nconst { Stream } = require('readable-stream');\n\n/**\n * Simple no-op function.\n * @returns {undefined}\n */\nfunction noop() {}\n\n/**\n * TODO: add function description.\n * @param {Object} options - Options for tail.\n * @param {function} iter - Iterator function to execute on every line.\n* `tail -f` a file. Options must include file.\n * @returns {mixed} - TODO: add return description.\n */\nmodule.exports = (options, iter) => {\n  const buffer = Buffer.alloc(64 * 1024);\n  const decode = new StringDecoder('utf8');\n  const stream = new Stream();\n  let buff = '';\n  let pos = 0;\n  let row = 0;\n\n  if (options.start === -1) {\n    delete options.start;\n  }\n\n  stream.readable = true;\n  stream.destroy = () => {\n    stream.destroyed = true;\n    stream.emit('end');\n    stream.emit('close');\n  };\n\n  fs.open(options.file, 'a+', '0644', (err, fd) => {\n    if (err) {\n      if (!iter) {\n        stream.emit('error', err);\n      } else {\n        iter(err);\n      }\n      stream.destroy();\n      return;\n    }\n\n    (function read() {\n      if (stream.destroyed) {\n        fs.close(fd, noop);\n        return;\n      }\n\n      return fs.read(fd, buffer, 0, buffer.length, pos, (error, bytes) => {\n        if (error) {\n          if (!iter) {\n            stream.emit('error', error);\n          } else {\n            iter(error);\n          }\n          stream.destroy();\n          return;\n        }\n\n        if (!bytes) {\n          if (buff) {\n            // eslint-disable-next-line eqeqeq\n            if (options.start == null || row > options.start) {\n              if (!iter) {\n                stream.emit('line', buff);\n              } else {\n                iter(null, buff);\n              }\n            }\n            row++;\n            buff = '';\n          }\n          return setTimeout(read, 1000);\n        }\n\n        let data = decode.write(buffer.slice(0, bytes));\n        if (!iter) {\n          stream.emit('data', data);\n        }\n\n        data = (buff + data).split(/\\n+/);\n\n        const l = data.length - 1;\n        let i = 0;\n\n        for (; i < l; i++) {\n          // eslint-disable-next-line eqeqeq\n          if (options.start == null || row > options.start) {\n            if (!iter) {\n              stream.emit('line', data[i]);\n            } else {\n              iter(null, data[i]);\n            }\n          }\n          row++;\n        }\n\n        buff = data[l];\n        pos += bytes;\n        return read();\n      });\n    }());\n  });\n\n  if (!iter) {\n    return stream;\n  }\n\n  return stream.destroy;\n};\n", "/* eslint-disable complexity,max-statements */\n/**\n * file.js: Transport for outputting to a local log file.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst fs = require('fs');\nconst path = require('path');\nconst asyncSeries = require('async/series');\nconst zlib = require('zlib');\nconst { MESSAGE } = require('triple-beam');\nconst { Stream, PassThrough } = require('readable-stream');\nconst TransportStream = require('winston-transport');\nconst debug = require('@dabh/diagnostics')('winston:file');\nconst os = require('os');\nconst tailFile = require('../tail-file');\n\n/**\n * Transport for outputting to a local log file.\n * @type {File}\n * @extends {TransportStream}\n */\nmodule.exports = class File extends TransportStream {\n  /**\n   * Constructor function for the File transport object responsible for\n   * persisting log messages and metadata to one or more files.\n   * @param {Object} options - Options for this instance.\n   */\n  constructor(options = {}) {\n    super(options);\n\n    // Expose the name of this Transport on the prototype.\n    this.name = options.name || 'file';\n\n    // Helper function which throws an `Error` in the event that any of the\n    // rest of the arguments is present in `options`.\n    function throwIf(target, ...args) {\n      args.slice(1).forEach(name => {\n        if (options[name]) {\n          throw new Error(`Cannot set ${name} and ${target} together`);\n        }\n      });\n    }\n\n    // Setup the base stream that always gets piped to to handle buffering.\n    this._stream = new PassThrough();\n    this._stream.setMaxListeners(30);\n\n    // Bind this context for listener methods.\n    this._onError = this._onError.bind(this);\n\n    if (options.filename || options.dirname) {\n      throwIf('filename or dirname', 'stream');\n      this._basename = this.filename = options.filename\n        ? path.basename(options.filename)\n        : 'winston.log';\n\n      this.dirname = options.dirname || path.dirname(options.filename);\n      this.options = options.options || { flags: 'a' };\n    } else if (options.stream) {\n      // eslint-disable-next-line no-console\n      console.warn('options.stream will be removed in winston@4. Use winston.transports.Stream');\n      throwIf('stream', 'filename', 'maxsize');\n      this._dest = this._stream.pipe(this._setupStream(options.stream));\n      this.dirname = path.dirname(this._dest.path);\n      // We need to listen for drain events when write() returns false. This\n      // can make node mad at times.\n    } else {\n      throw new Error('Cannot log to file without filename or stream.');\n    }\n\n    this.maxsize = options.maxsize || null;\n    this.rotationFormat = options.rotationFormat || false;\n    this.zippedArchive = options.zippedArchive || false;\n    this.maxFiles = options.maxFiles || null;\n    this.eol = (typeof options.eol === 'string') ? options.eol : os.EOL;\n    this.tailable = options.tailable || false;\n    this.lazy = options.lazy || false;\n\n    // Internal state variables representing the number of files this instance\n    // has created and the current size (in bytes) of the current logfile.\n    this._size = 0;\n    this._pendingSize = 0;\n    this._created = 0;\n    this._drain = false;\n    this._opening = false;\n    this._ending = false;\n    this._fileExist = false;\n\n    if (this.dirname) this._createLogDirIfNotExist(this.dirname);\n    if (!this.lazy) this.open();\n  }\n\n  finishIfEnding() {\n    if (this._ending) {\n      if (this._opening) {\n        this.once('open', () => {\n          this._stream.once('finish', () => this.emit('finish'));\n          setImmediate(() => this._stream.end());\n        });\n      } else {\n        this._stream.once('finish', () => this.emit('finish'));\n        setImmediate(() => this._stream.end());\n      }\n    }\n  }\n\n  /**\n   * Core logging method exposed to Winston. Metadata is optional.\n   * @param {Object} info - TODO: add param description.\n   * @param {Function} callback - TODO: add param description.\n   * @returns {undefined}\n   */\n  log(info, callback = () => { }) {\n    // Remark: (jcrugzz) What is necessary about this callback(null, true) now\n    // when thinking about 3.x? Should silent be handled in the base\n    // TransportStream _write method?\n    if (this.silent) {\n      callback();\n      return true;\n    }\n\n\n    // Output stream buffer is full and has asked us to wait for the drain event\n    if (this._drain) {\n      this._stream.once('drain', () => {\n        this._drain = false;\n        this.log(info, callback);\n      });\n      return;\n    }\n    if (this._rotate) {\n      this._stream.once('rotate', () => {\n        this._rotate = false;\n        this.log(info, callback);\n      });\n      return;\n    }\n    if (this.lazy) {\n      if (!this._fileExist) {\n        if (!this._opening) {\n          this.open();\n        }\n        this.once('open', () => {\n          this._fileExist = true;\n          this.log(info, callback);\n          return;\n        });\n        return;\n      }\n      if (this._needsNewFile(this._pendingSize)) {\n        this._dest.once('close', () => {\n          if (!this._opening) {\n            this.open();\n          }\n          this.once('open', () => {\n            this.log(info, callback);\n            return;\n          });\n          return;\n        });\n        return;\n      }\n    }\n\n    // Grab the raw string and append the expected EOL.\n    const output = `${info[MESSAGE]}${this.eol}`;\n    const bytes = Buffer.byteLength(output);\n\n    // After we have written to the PassThrough check to see if we need\n    // to rotate to the next file.\n    //\n    // Remark: This gets called too early and does not depict when data\n    // has been actually flushed to disk.\n    function logged() {\n      this._size += bytes;\n      this._pendingSize -= bytes;\n\n      debug('logged %s %s', this._size, output);\n      this.emit('logged', info);\n\n      // Do not attempt to rotate files while rotating\n      if (this._rotate) {\n        return;\n      }\n\n      // Do not attempt to rotate files while opening\n      if (this._opening) {\n        return;\n      }\n\n      // Check to see if we need to end the stream and create a new one.\n      if (!this._needsNewFile()) {\n        return;\n      }\n      if (this.lazy) {\n        this._endStream(() => {this.emit('fileclosed');});\n        return;\n      }\n\n      // End the current stream, ensure it flushes and create a new one.\n      // This could potentially be optimized to not run a stat call but its\n      // the safest way since we are supporting `maxFiles`.\n      this._rotate = true;\n      this._endStream(() => this._rotateFile());\n    }\n\n    // Keep track of the pending bytes being written while files are opening\n    // in order to properly rotate the PassThrough this._stream when the file\n    // eventually does open.\n    this._pendingSize += bytes;\n    if (this._opening\n      && !this.rotatedWhileOpening\n      && this._needsNewFile(this._size + this._pendingSize)) {\n      this.rotatedWhileOpening = true;\n    }\n\n    const written = this._stream.write(output, logged.bind(this));\n    if (!written) {\n      this._drain = true;\n      this._stream.once('drain', () => {\n        this._drain = false;\n        callback();\n      });\n    } else {\n      callback(); // eslint-disable-line callback-return\n    }\n\n    debug('written', written, this._drain);\n\n    this.finishIfEnding();\n\n    return written;\n  }\n\n  /**\n   * Query the transport. Options object is optional.\n   * @param {Object} options - Loggly-like query options for this instance.\n   * @param {function} callback - Continuation to respond to when complete.\n   * TODO: Refactor me.\n   */\n  query(options, callback) {\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n\n    options = normalizeQuery(options);\n    const file = path.join(this.dirname, this.filename);\n    let buff = '';\n    let results = [];\n    let row = 0;\n\n    const stream = fs.createReadStream(file, {\n      encoding: 'utf8'\n    });\n\n    stream.on('error', err => {\n      if (stream.readable) {\n        stream.destroy();\n      }\n      if (!callback) {\n        return;\n      }\n\n      return err.code !== 'ENOENT' ? callback(err) : callback(null, results);\n    });\n\n    stream.on('data', data => {\n      data = (buff + data).split(/\\n+/);\n      const l = data.length - 1;\n      let i = 0;\n\n      for (; i < l; i++) {\n        if (!options.start || row >= options.start) {\n          add(data[i]);\n        }\n        row++;\n      }\n\n      buff = data[l];\n    });\n\n    stream.on('close', () => {\n      if (buff) {\n        add(buff, true);\n      }\n      if (options.order === 'desc') {\n        results = results.reverse();\n      }\n\n      // eslint-disable-next-line callback-return\n      if (callback) callback(null, results);\n    });\n\n    function add(buff, attempt) {\n      try {\n        const log = JSON.parse(buff);\n        if (check(log)) {\n          push(log);\n        }\n      } catch (e) {\n        if (!attempt) {\n          stream.emit('error', e);\n        }\n      }\n    }\n\n    function push(log) {\n      if (\n        options.rows &&\n        results.length >= options.rows &&\n        options.order !== 'desc'\n      ) {\n        if (stream.readable) {\n          stream.destroy();\n        }\n        return;\n      }\n\n      if (options.fields) {\n        log = options.fields.reduce((obj, key) => {\n          obj[key] = log[key];\n          return obj;\n        }, {});\n      }\n\n      if (options.order === 'desc') {\n        if (results.length >= options.rows) {\n          results.shift();\n        }\n      }\n      results.push(log);\n    }\n\n    function check(log) {\n      if (!log) {\n        return;\n      }\n\n      if (typeof log !== 'object') {\n        return;\n      }\n\n      const time = new Date(log.timestamp);\n      if (\n        (options.from && time < options.from) ||\n        (options.until && time > options.until) ||\n        (options.level && options.level !== log.level)\n      ) {\n        return;\n      }\n\n      return true;\n    }\n\n    function normalizeQuery(options) {\n      options = options || {};\n\n      // limit\n      options.rows = options.rows || options.limit || 10;\n\n      // starting row offset\n      options.start = options.start || 0;\n\n      // now\n      options.until = options.until || new Date();\n      if (typeof options.until !== 'object') {\n        options.until = new Date(options.until);\n      }\n\n      // now - 24\n      options.from = options.from || (options.until - (24 * 60 * 60 * 1000));\n      if (typeof options.from !== 'object') {\n        options.from = new Date(options.from);\n      }\n\n      // 'asc' or 'desc'\n      options.order = options.order || 'desc';\n\n      return options;\n    }\n  }\n\n  /**\n   * Returns a log stream for this transport. Options object is optional.\n   * @param {Object} options - Stream options for this instance.\n   * @returns {Stream} - TODO: add return description.\n   * TODO: Refactor me.\n   */\n  stream(options = {}) {\n    const file = path.join(this.dirname, this.filename);\n    const stream = new Stream();\n    const tail = {\n      file,\n      start: options.start\n    };\n\n    stream.destroy = tailFile(tail, (err, line) => {\n      if (err) {\n        return stream.emit('error', err);\n      }\n\n      try {\n        stream.emit('data', line);\n        line = JSON.parse(line);\n        stream.emit('log', line);\n      } catch (e) {\n        stream.emit('error', e);\n      }\n    });\n\n    return stream;\n  }\n\n  /**\n   * Checks to see the filesize of.\n   * @returns {undefined}\n   */\n  open() {\n    // If we do not have a filename then we were passed a stream and\n    // don't need to keep track of size.\n    if (!this.filename) return;\n    if (this._opening) return;\n\n    this._opening = true;\n\n    // Stat the target file to get the size and create the stream.\n    this.stat((err, size) => {\n      if (err) {\n        return this.emit('error', err);\n      }\n      debug('stat done: %s { size: %s }', this.filename, size);\n      this._size = size;\n      this._dest = this._createStream(this._stream);\n      this._opening = false;\n      this.once('open', () => {\n        if (!this._stream.emit('rotate')) {\n          this._rotate = false;\n        }\n      });\n    });\n  }\n\n  /**\n   * Stat the file and assess information in order to create the proper stream.\n   * @param {function} callback - TODO: add param description.\n   * @returns {undefined}\n   */\n  stat(callback) {\n    const target = this._getFile();\n    const fullpath = path.join(this.dirname, target);\n\n    fs.stat(fullpath, (err, stat) => {\n      if (err && err.code === 'ENOENT') {\n        debug('ENOENT\u00A0ok', fullpath);\n        // Update internally tracked filename with the new target name.\n        this.filename = target;\n        return callback(null, 0);\n      }\n\n      if (err) {\n        debug(`err ${err.code} ${fullpath}`);\n        return callback(err);\n      }\n\n      if (!stat || this._needsNewFile(stat.size)) {\n        // If `stats.size` is greater than the `maxsize` for this\n        // instance then try again.\n        return this._incFile(() => this.stat(callback));\n      }\n\n      // Once we have figured out what the filename is, set it\n      // and return the size.\n      this.filename = target;\n      callback(null, stat.size);\n    });\n  }\n\n  /**\n   * Closes the stream associated with this instance.\n   * @param {function} cb - TODO: add param description.\n   * @returns {undefined}\n   */\n  close(cb) {\n    if (!this._stream) {\n      return;\n    }\n\n    this._stream.end(() => {\n      if (cb) {\n        cb(); // eslint-disable-line callback-return\n      }\n      this.emit('flush');\n      this.emit('closed');\n    });\n  }\n\n  /**\n   * TODO: add method description.\n   * @param {number} size - TODO: add param description.\n   * @returns {undefined}\n   */\n  _needsNewFile(size) {\n    size = size || this._size;\n    return this.maxsize && size >= this.maxsize;\n  }\n\n  /**\n   * TODO: add method description.\n   * @param {Error} err - TODO: add param description.\n   * @returns {undefined}\n   */\n  _onError(err) {\n    this.emit('error', err);\n  }\n\n  /**\n   * TODO: add method description.\n   * @param {Stream} stream - TODO: add param description.\n   * @returns {mixed} - TODO: add return description.\n   */\n  _setupStream(stream) {\n    stream.on('error', this._onError);\n\n    return stream;\n  }\n\n  /**\n   * TODO: add method description.\n   * @param {Stream} stream - TODO: add param description.\n   * @returns {mixed} - TODO: add return description.\n   */\n  _cleanupStream(stream) {\n    stream.removeListener('error', this._onError);\n    stream.destroy();\n    return stream;\n  }\n\n  /**\n   * TODO: add method description.\n   */\n  _rotateFile() {\n    this._incFile(() => this.open());\n  }\n\n  /**\n   * Unpipe from the stream that has been marked as full and end it so it\n   * flushes to disk.\n   *\n   * @param {function} callback - Callback for when the current file has closed.\n   * @private\n   */\n  _endStream(callback = () => { }) {\n    if (this._dest) {\n      this._stream.unpipe(this._dest);\n      this._dest.end(() => {\n        this._cleanupStream(this._dest);\n        callback();\n      });\n    } else {\n      callback(); // eslint-disable-line callback-return\n    }\n  }\n\n  /**\n   * Returns the WritableStream for the active file on this instance. If we\n   * should gzip the file then a zlib stream is returned.\n   *\n   * @param {ReadableStream} source \u2013PassThrough to pipe to the file when open.\n   * @returns {WritableStream} Stream that writes to disk for the active file.\n   */\n  _createStream(source) {\n    const fullpath = path.join(this.dirname, this.filename);\n\n    debug('create stream start', fullpath, this.options);\n    const dest = fs.createWriteStream(fullpath, this.options)\n      // TODO: What should we do with errors here?\n      .on('error', err => debug(err))\n      .on('close', () => debug('close', dest.path, dest.bytesWritten))\n      .on('open', () => {\n        debug('file open ok', fullpath);\n        this.emit('open', fullpath);\n        source.pipe(dest);\n\n        // If rotation occured during the open operation then we immediately\n        // start writing to a new PassThrough, begin opening the next file\n        // and cleanup the previous source and dest once the source has drained.\n        if (this.rotatedWhileOpening) {\n          this._stream = new PassThrough();\n          this._stream.setMaxListeners(30);\n          this._rotateFile();\n          this.rotatedWhileOpening = false;\n          this._cleanupStream(dest);\n          source.end();\n        }\n      });\n\n    debug('create stream ok', fullpath);\n    return dest;\n  }\n\n  /**\n   * TODO: add method description.\n   * @param {function} callback - TODO: add param description.\n   * @returns {undefined}\n   */\n  _incFile(callback) {\n    debug('_incFile', this.filename);\n    const ext = path.extname(this._basename);\n    const basename = path.basename(this._basename, ext);\n    const tasks = [];\n\n    if (this.zippedArchive) {\n      tasks.push(\n        function (cb) {\n          const num = this._created > 0 && !this.tailable ? this._created : '';\n          this._compressFile(\n            path.join(this.dirname, `${basename}${num}${ext}`),\n            path.join(this.dirname, `${basename}${num}${ext}.gz`),\n            cb\n          );\n        }.bind(this)\n      );\n    }\n\n    tasks.push(\n      function (cb) {\n        if (!this.tailable) {\n          this._created += 1;\n          this._checkMaxFilesIncrementing(ext, basename, cb);\n        } else {\n          this._checkMaxFilesTailable(ext, basename, cb);\n        }\n      }.bind(this)\n    );\n\n    asyncSeries(tasks, callback);\n  }\n\n  /**\n   * Gets the next filename to use for this instance in the case that log\n   * filesizes are being capped.\n   * @returns {string} - TODO: add return description.\n   * @private\n   */\n  _getFile() {\n    const ext = path.extname(this._basename);\n    const basename = path.basename(this._basename, ext);\n    const isRotation = this.rotationFormat\n      ? this.rotationFormat()\n      : this._created;\n\n    // Caveat emptor (indexzero): rotationFormat() was broken by design When\n    // combined with max files because the set of files to unlink is never\n    // stored.\n    return !this.tailable && this._created\n      ? `${basename}${isRotation}${ext}`\n      : `${basename}${ext}`;\n  }\n\n  /**\n   * Increment the number of files created or checked by this instance.\n   * @param {mixed} ext - TODO: add param description.\n   * @param {mixed} basename - TODO: add param description.\n   * @param {mixed} callback - TODO: add param description.\n   * @returns {undefined}\n   * @private\n   */\n  _checkMaxFilesIncrementing(ext, basename, callback) {\n    // Check for maxFiles option and delete file.\n    if (!this.maxFiles || this._created < this.maxFiles) {\n      return setImmediate(callback);\n    }\n\n    const oldest = this._created - this.maxFiles;\n    const isOldest = oldest !== 0 ? oldest : '';\n    const isZipped = this.zippedArchive ? '.gz' : '';\n    const filePath = `${basename}${isOldest}${ext}${isZipped}`;\n    const target = path.join(this.dirname, filePath);\n\n    fs.unlink(target, callback);\n  }\n\n  /**\n   * Roll files forward based on integer, up to maxFiles. e.g. if base if\n   * file.log and it becomes oversized, roll to file1.log, and allow file.log\n   * to be re-used. If file is oversized again, roll file1.log to file2.log,\n   * roll file.log to file1.log, and so on.\n   * @param {mixed} ext - TODO: add param description.\n   * @param {mixed} basename - TODO: add param description.\n   * @param {mixed} callback - TODO: add param description.\n   * @returns {undefined}\n   * @private\n   */\n  _checkMaxFilesTailable(ext, basename, callback) {\n    const tasks = [];\n    if (!this.maxFiles) {\n      return;\n    }\n\n    // const isZipped = this.zippedArchive ? '.gz' : '';\n    const isZipped = this.zippedArchive ? '.gz' : '';\n    for (let x = this.maxFiles - 1; x > 1; x--) {\n      tasks.push(function (i, cb) {\n        let fileName = `${basename}${(i - 1)}${ext}${isZipped}`;\n        const tmppath = path.join(this.dirname, fileName);\n\n        fs.exists(tmppath, exists => {\n          if (!exists) {\n            return cb(null);\n          }\n\n          fileName = `${basename}${i}${ext}${isZipped}`;\n          fs.rename(tmppath, path.join(this.dirname, fileName), cb);\n        });\n      }.bind(this, x));\n    }\n\n    asyncSeries(tasks, () => {\n      fs.rename(\n        path.join(this.dirname, `${basename}${ext}${isZipped}`),\n        path.join(this.dirname, `${basename}1${ext}${isZipped}`),\n        callback\n      );\n    });\n  }\n\n  /**\n   * Compresses src to dest with gzip and unlinks src\n   * @param {string} src - path to source file.\n   * @param {string} dest - path to zipped destination file.\n   * @param {Function} callback - callback called after file has been compressed.\n   * @returns {undefined}\n   * @private\n   */\n  _compressFile(src, dest, callback) {\n    fs.access(src, fs.F_OK, (err) => {\n      if (err) {\n        return callback();\n      }\n      var gzip = zlib.createGzip();\n      var inp = fs.createReadStream(src);\n      var out = fs.createWriteStream(dest);\n      out.on('finish', () => {\n        fs.unlink(src, callback);\n      });\n      inp.pipe(gzip).pipe(out);\n    });\n  }\n\n  _createLogDirIfNotExist(dirPath) {\n    /* eslint-disable no-sync */\n    if (!fs.existsSync(dirPath)) {\n      fs.mkdirSync(dirPath, { recursive: true });\n    }\n    /* eslint-enable no-sync */\n  }\n};\n", "/**\n * http.js: Transport for outputting to a json-rpcserver.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst http = require('http');\nconst https = require('https');\nconst { Stream } = require('readable-stream');\nconst TransportStream = require('winston-transport');\nconst { configure } = require('safe-stable-stringify');\n\n/**\n * Transport for outputting to a json-rpc server.\n * @type {Stream}\n * @extends {TransportStream}\n */\nmodule.exports = class Http extends TransportStream {\n  /**\n   * Constructor function for the Http transport object responsible for\n   * persisting log messages and metadata to a terminal or TTY.\n   * @param {!Object} [options={}] - Options for this instance.\n   */\n  // eslint-disable-next-line max-statements\n  constructor(options = {}) {\n    super(options);\n\n    this.options = options;\n    this.name = options.name || 'http';\n    this.ssl = !!options.ssl;\n    this.host = options.host || 'localhost';\n    this.port = options.port;\n    this.auth = options.auth;\n    this.path = options.path || '';\n    this.maximumDepth = options.maximumDepth;\n    this.agent = options.agent;\n    this.headers = options.headers || {};\n    this.headers['content-type'] = 'application/json';\n    this.batch = options.batch || false;\n    this.batchInterval = options.batchInterval || 5000;\n    this.batchCount = options.batchCount || 10;\n    this.batchOptions = [];\n    this.batchTimeoutID = -1;\n    this.batchCallback = {};\n\n    if (!this.port) {\n      this.port = this.ssl ? 443 : 80;\n    }\n  }\n\n  /**\n   * Core logging method exposed to Winston.\n   * @param {Object} info - TODO: add param description.\n   * @param {function} callback - TODO: add param description.\n   * @returns {undefined}\n   */\n  log(info, callback) {\n    this._request(info, null, null, (err, res) => {\n      if (res && res.statusCode !== 200) {\n        err = new Error(`Invalid HTTP Status Code: ${res.statusCode}`);\n      }\n\n      if (err) {\n        this.emit('warn', err);\n      } else {\n        this.emit('logged', info);\n      }\n    });\n\n    // Remark: (jcrugzz) Fire and forget here so requests dont cause buffering\n    // and block more requests from happening?\n    if (callback) {\n      setImmediate(callback);\n    }\n  }\n\n  /**\n   * Query the transport. Options object is optional.\n   * @param {Object} options -  Loggly-like query options for this instance.\n   * @param {function} callback - Continuation to respond to when complete.\n   * @returns {undefined}\n   */\n  query(options, callback) {\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n\n    options = {\n      method: 'query',\n      params: this.normalizeQuery(options)\n    };\n\n    const auth = options.params.auth || null;\n    delete options.params.auth;\n\n    const path = options.params.path || null;\n    delete options.params.path;\n\n    this._request(options, auth, path, (err, res, body) => {\n      if (res && res.statusCode !== 200) {\n        err = new Error(`Invalid HTTP Status Code: ${res.statusCode}`);\n      }\n\n      if (err) {\n        return callback(err);\n      }\n\n      if (typeof body === 'string') {\n        try {\n          body = JSON.parse(body);\n        } catch (e) {\n          return callback(e);\n        }\n      }\n\n      callback(null, body);\n    });\n  }\n\n  /**\n   * Returns a log stream for this transport. Options object is optional.\n   * @param {Object} options - Stream options for this instance.\n   * @returns {Stream} - TODO: add return description\n   */\n  stream(options = {}) {\n    const stream = new Stream();\n    options = {\n      method: 'stream',\n      params: options\n    };\n\n    const path = options.params.path || null;\n    delete options.params.path;\n\n    const auth = options.params.auth || null;\n    delete options.params.auth;\n\n    let buff = '';\n    const req = this._request(options, auth, path);\n\n    stream.destroy = () => req.destroy();\n    req.on('data', data => {\n      data = (buff + data).split(/\\n+/);\n      const l = data.length - 1;\n\n      let i = 0;\n      for (; i < l; i++) {\n        try {\n          stream.emit('log', JSON.parse(data[i]));\n        } catch (e) {\n          stream.emit('error', e);\n        }\n      }\n\n      buff = data[l];\n    });\n    req.on('error', err => stream.emit('error', err));\n\n    return stream;\n  }\n\n  /**\n   * Make a request to a winstond server or any http server which can\n   * handle json-rpc.\n   * @param {function} options - Options to sent the request.\n   * @param {Object?} auth - authentication options\n   * @param {string} path - request path\n   * @param {function} callback - Continuation to respond to when complete.\n   */\n  _request(options, auth, path, callback) {\n    options = options || {};\n\n    auth = auth || this.auth;\n    path = path || this.path || '';\n\n    if (this.batch) {\n      this._doBatch(options, callback, auth, path);\n    } else {\n      this._doRequest(options, callback, auth, path);\n    }\n  }\n\n  /**\n   * Send or memorize the options according to batch configuration\n   * @param {function} options - Options to sent the request.\n   * @param {function} callback - Continuation to respond to when complete.\n   * @param {Object?} auth - authentication options\n   * @param {string} path - request path\n   */\n  _doBatch(options, callback, auth, path) {\n    this.batchOptions.push(options);\n    if (this.batchOptions.length === 1) {\n      // First message stored, it's time to start the timeout!\n      const me = this;\n      this.batchCallback = callback;\n      this.batchTimeoutID = setTimeout(function () {\n        // timeout is reached, send all messages to endpoint\n        me.batchTimeoutID = -1;\n        me._doBatchRequest(me.batchCallback, auth, path);\n      }, this.batchInterval);\n    }\n    if (this.batchOptions.length === this.batchCount) {\n      // max batch count is reached, send all messages to endpoint\n      this._doBatchRequest(this.batchCallback, auth, path);\n    }\n  }\n\n  /**\n   * Initiate a request with the memorized batch options, stop the batch timeout\n   * @param {function} callback - Continuation to respond to when complete.\n   * @param {Object?} auth - authentication options\n   * @param {string} path - request path\n   */\n  _doBatchRequest(callback, auth, path) {\n    if (this.batchTimeoutID > 0) {\n      clearTimeout(this.batchTimeoutID);\n      this.batchTimeoutID = -1;\n    }\n    const batchOptionsCopy = this.batchOptions.slice();\n    this.batchOptions = [];\n    this._doRequest(batchOptionsCopy, callback, auth, path);\n  }\n\n  /**\n   * Make a request to a winstond server or any http server which can\n   * handle json-rpc.\n   * @param {function} options - Options to sent the request.\n   * @param {function} callback - Continuation to respond to when complete.\n   * @param {Object?} auth - authentication options\n   * @param {string} path - request path\n   */\n  _doRequest(options, callback, auth, path) {\n    // Prepare options for outgoing HTTP request\n    const headers = Object.assign({}, this.headers);\n    if (auth && auth.bearer) {\n      headers.Authorization = `Bearer ${auth.bearer}`;\n    }\n    const req = (this.ssl ? https : http).request({\n      ...this.options,\n      method: 'POST',\n      host: this.host,\n      port: this.port,\n      path: `/${path.replace(/^\\//, '')}`,\n      headers: headers,\n      auth: (auth && auth.username && auth.password) ? (`${auth.username}:${auth.password}`) : '',\n      agent: this.agent\n    });\n\n    req.on('error', callback);\n    req.on('response', res => (\n      res.on('end', () => callback(null, res)).resume()\n    ));\n    const jsonStringify = configure({\n      ...(this.maximumDepth && { maximumDepth: this.maximumDepth })\n    });\n    req.end(Buffer.from(jsonStringify(options, this.options.replacer), 'utf8'));\n  }\n};\n", "'use strict';\n\nconst isStream = stream =>\n\tstream !== null &&\n\ttypeof stream === 'object' &&\n\ttypeof stream.pipe === 'function';\n\nisStream.writable = stream =>\n\tisStream(stream) &&\n\tstream.writable !== false &&\n\ttypeof stream._write === 'function' &&\n\ttypeof stream._writableState === 'object';\n\nisStream.readable = stream =>\n\tisStream(stream) &&\n\tstream.readable !== false &&\n\ttypeof stream._read === 'function' &&\n\ttypeof stream._readableState === 'object';\n\nisStream.duplex = stream =>\n\tisStream.writable(stream) &&\n\tisStream.readable(stream);\n\nisStream.transform = stream =>\n\tisStream.duplex(stream) &&\n\ttypeof stream._transform === 'function';\n\nmodule.exports = isStream;\n", "/**\n * stream.js: Transport for outputting to any arbitrary stream.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst isStream = require('is-stream');\nconst { MESSAGE } = require('triple-beam');\nconst os = require('os');\nconst TransportStream = require('winston-transport');\n\n/**\n * Transport for outputting to any arbitrary stream.\n * @type {Stream}\n * @extends {TransportStream}\n */\nmodule.exports = class Stream extends TransportStream {\n  /**\n   * Constructor function for the Console transport object responsible for\n   * persisting log messages and metadata to a terminal or TTY.\n   * @param {!Object} [options={}] - Options for this instance.\n   */\n  constructor(options = {}) {\n    super(options);\n\n    if (!options.stream || !isStream(options.stream)) {\n      throw new Error('options.stream is required.');\n    }\n\n    // We need to listen for drain events when write() returns false. This can\n    // make node mad at times.\n    this._stream = options.stream;\n    this._stream.setMaxListeners(Infinity);\n    this.isObjectMode = options.stream._writableState.objectMode;\n    this.eol = (typeof options.eol === 'string') ? options.eol : os.EOL;\n  }\n\n  /**\n   * Core logging method exposed to Winston.\n   * @param {Object} info - TODO: add param description.\n   * @param {Function} callback - TODO: add param description.\n   * @returns {undefined}\n   */\n  log(info, callback) {\n    setImmediate(() => this.emit('logged', info));\n    if (this.isObjectMode) {\n      this._stream.write(info);\n      if (callback) {\n        callback(); // eslint-disable-line callback-return\n      }\n      return;\n    }\n\n    this._stream.write(`${info[MESSAGE]}${this.eol}`);\n    if (callback) {\n      callback(); // eslint-disable-line callback-return\n    }\n    return;\n  }\n};\n", "/**\n * transports.js: Set of all transports Winston knows about.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\n/**\n * TODO: add property description.\n * @type {Console}\n */\nObject.defineProperty(exports, 'Console', {\n  configurable: true,\n  enumerable: true,\n  get() {\n    return require('./console');\n  }\n});\n\n/**\n * TODO: add property description.\n * @type {File}\n */\nObject.defineProperty(exports, 'File', {\n  configurable: true,\n  enumerable: true,\n  get() {\n    return require('./file');\n  }\n});\n\n/**\n * TODO: add property description.\n * @type {Http}\n */\nObject.defineProperty(exports, 'Http', {\n  configurable: true,\n  enumerable: true,\n  get() {\n    return require('./http');\n  }\n});\n\n/**\n * TODO: add property description.\n * @type {Stream}\n */\nObject.defineProperty(exports, 'Stream', {\n  configurable: true,\n  enumerable: true,\n  get() {\n    return require('./stream');\n  }\n});\n", "/**\n * index.js: Default settings for all levels that winston knows about.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst logform = require('logform');\nconst { configs } = require('triple-beam');\n\n/**\n * Export config set for the CLI.\n * @type {Object}\n */\nexports.cli = logform.levels(configs.cli);\n\n/**\n * Export config set for npm.\n * @type {Object}\n */\nexports.npm = logform.levels(configs.npm);\n\n/**\n * Export config set for the syslog.\n * @type {Object}\n */\nexports.syslog = logform.levels(configs.syslog);\n\n/**\n * Hoist addColors from logform where it was refactored into in winston@3.\n * @type {Object}\n */\nexports.addColors = logform.levels;\n", "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _isArrayLike = require('./internal/isArrayLike.js');\n\nvar _isArrayLike2 = _interopRequireDefault(_isArrayLike);\n\nvar _breakLoop = require('./internal/breakLoop.js');\n\nvar _breakLoop2 = _interopRequireDefault(_breakLoop);\n\nvar _eachOfLimit = require('./eachOfLimit.js');\n\nvar _eachOfLimit2 = _interopRequireDefault(_eachOfLimit);\n\nvar _once = require('./internal/once.js');\n\nvar _once2 = _interopRequireDefault(_once);\n\nvar _onlyOnce = require('./internal/onlyOnce.js');\n\nvar _onlyOnce2 = _interopRequireDefault(_onlyOnce);\n\nvar _wrapAsync = require('./internal/wrapAsync.js');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nvar _awaitify = require('./internal/awaitify.js');\n\nvar _awaitify2 = _interopRequireDefault(_awaitify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// eachOf implementation optimized for array-likes\nfunction eachOfArrayLike(coll, iteratee, callback) {\n    callback = (0, _once2.default)(callback);\n    var index = 0,\n        completed = 0,\n        { length } = coll,\n        canceled = false;\n    if (length === 0) {\n        callback(null);\n    }\n\n    function iteratorCallback(err, value) {\n        if (err === false) {\n            canceled = true;\n        }\n        if (canceled === true) return;\n        if (err) {\n            callback(err);\n        } else if (++completed === length || value === _breakLoop2.default) {\n            callback(null);\n        }\n    }\n\n    for (; index < length; index++) {\n        iteratee(coll[index], index, (0, _onlyOnce2.default)(iteratorCallback));\n    }\n}\n\n// a generic version of eachOf which can handle array, object, and iterator cases.\nfunction eachOfGeneric(coll, iteratee, callback) {\n    return (0, _eachOfLimit2.default)(coll, Infinity, iteratee, callback);\n}\n\n/**\n * Like [`each`]{@link module:Collections.each}, except that it passes the key (or index) as the second argument\n * to the iteratee.\n *\n * @name eachOf\n * @static\n * @memberOf module:Collections\n * @method\n * @alias forEachOf\n * @category Collection\n * @see [async.each]{@link module:Collections.each}\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each\n * item in `coll`.\n * The `key` is the item's key, or index in the case of an array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n * @example\n *\n * // dev.json is a file containing a valid json object config for dev environment\n * // dev.json is a file containing a valid json object config for test environment\n * // prod.json is a file containing a valid json object config for prod environment\n * // invalid.json is a file with a malformed json object\n *\n * let configs = {}; //global variable\n * let validConfigFileMap = {dev: 'dev.json', test: 'test.json', prod: 'prod.json'};\n * let invalidConfigFileMap = {dev: 'dev.json', test: 'test.json', invalid: 'invalid.json'};\n *\n * // asynchronous function that reads a json file and parses the contents as json object\n * function parseFile(file, key, callback) {\n *     fs.readFile(file, \"utf8\", function(err, data) {\n *         if (err) return calback(err);\n *         try {\n *             configs[key] = JSON.parse(data);\n *         } catch (e) {\n *             return callback(e);\n *         }\n *         callback();\n *     });\n * }\n *\n * // Using callbacks\n * async.forEachOf(validConfigFileMap, parseFile, function (err) {\n *     if (err) {\n *         console.error(err);\n *     } else {\n *         console.log(configs);\n *         // configs is now a map of JSON data, e.g.\n *         // { dev: //parsed dev.json, test: //parsed test.json, prod: //parsed prod.json}\n *     }\n * });\n *\n * //Error handing\n * async.forEachOf(invalidConfigFileMap, parseFile, function (err) {\n *     if (err) {\n *         console.error(err);\n *         // JSON parse error exception\n *     } else {\n *         console.log(configs);\n *     }\n * });\n *\n * // Using Promises\n * async.forEachOf(validConfigFileMap, parseFile)\n * .then( () => {\n *     console.log(configs);\n *     // configs is now a map of JSON data, e.g.\n *     // { dev: //parsed dev.json, test: //parsed test.json, prod: //parsed prod.json}\n * }).catch( err => {\n *     console.error(err);\n * });\n *\n * //Error handing\n * async.forEachOf(invalidConfigFileMap, parseFile)\n * .then( () => {\n *     console.log(configs);\n * }).catch( err => {\n *     console.error(err);\n *     // JSON parse error exception\n * });\n *\n * // Using async/await\n * async () => {\n *     try {\n *         let result = await async.forEachOf(validConfigFileMap, parseFile);\n *         console.log(configs);\n *         // configs is now a map of JSON data, e.g.\n *         // { dev: //parsed dev.json, test: //parsed test.json, prod: //parsed prod.json}\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n * //Error handing\n * async () => {\n *     try {\n *         let result = await async.forEachOf(invalidConfigFileMap, parseFile);\n *         console.log(configs);\n *     }\n *     catch (err) {\n *         console.log(err);\n *         // JSON parse error exception\n *     }\n * }\n *\n */\nfunction eachOf(coll, iteratee, callback) {\n    var eachOfImplementation = (0, _isArrayLike2.default)(coll) ? eachOfArrayLike : eachOfGeneric;\n    return eachOfImplementation(coll, (0, _wrapAsync2.default)(iteratee), callback);\n}\n\nexports.default = (0, _awaitify2.default)(eachOf, 3);\nmodule.exports = exports.default;", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _withoutIndex;\nfunction _withoutIndex(iteratee) {\n    return (value, index, callback) => iteratee(value, callback);\n}\nmodule.exports = exports.default;", "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _eachOf = require('./eachOf.js');\n\nvar _eachOf2 = _interopRequireDefault(_eachOf);\n\nvar _withoutIndex = require('./internal/withoutIndex.js');\n\nvar _withoutIndex2 = _interopRequireDefault(_withoutIndex);\n\nvar _wrapAsync = require('./internal/wrapAsync.js');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nvar _awaitify = require('./internal/awaitify.js');\n\nvar _awaitify2 = _interopRequireDefault(_awaitify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Applies the function `iteratee` to each item in `coll`, in parallel.\n * The `iteratee` is called with an item from the list, and a callback for when\n * it has finished. If the `iteratee` passes an error to its `callback`, the\n * main `callback` (for the `each` function) is immediately called with the\n * error.\n *\n * Note, that since this function applies `iteratee` to each item in parallel,\n * there is no guarantee that the iteratee functions will complete in order.\n *\n * @name each\n * @static\n * @memberOf module:Collections\n * @method\n * @alias forEach\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to\n * each item in `coll`. Invoked with (item, callback).\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOf`.\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n * @example\n *\n * // dir1 is a directory that contains file1.txt, file2.txt\n * // dir2 is a directory that contains file3.txt, file4.txt\n * // dir3 is a directory that contains file5.txt\n * // dir4 does not exist\n *\n * const fileList = [ 'dir1/file2.txt', 'dir2/file3.txt', 'dir/file5.txt'];\n * const withMissingFileList = ['dir1/file1.txt', 'dir4/file2.txt'];\n *\n * // asynchronous function that deletes a file\n * const deleteFile = function(file, callback) {\n *     fs.unlink(file, callback);\n * };\n *\n * // Using callbacks\n * async.each(fileList, deleteFile, function(err) {\n *     if( err ) {\n *         console.log(err);\n *     } else {\n *         console.log('All files have been deleted successfully');\n *     }\n * });\n *\n * // Error Handling\n * async.each(withMissingFileList, deleteFile, function(err){\n *     console.log(err);\n *     // [ Error: ENOENT: no such file or directory ]\n *     // since dir4/file2.txt does not exist\n *     // dir1/file1.txt could have been deleted\n * });\n *\n * // Using Promises\n * async.each(fileList, deleteFile)\n * .then( () => {\n *     console.log('All files have been deleted successfully');\n * }).catch( err => {\n *     console.log(err);\n * });\n *\n * // Error Handling\n * async.each(fileList, deleteFile)\n * .then( () => {\n *     console.log('All files have been deleted successfully');\n * }).catch( err => {\n *     console.log(err);\n *     // [ Error: ENOENT: no such file or directory ]\n *     // since dir4/file2.txt does not exist\n *     // dir1/file1.txt could have been deleted\n * });\n *\n * // Using async/await\n * async () => {\n *     try {\n *         await async.each(files, deleteFile);\n *     }\n *     catch (err) {\n *         console.log(err);\n *     }\n * }\n *\n * // Error Handling\n * async () => {\n *     try {\n *         await async.each(withMissingFileList, deleteFile);\n *     }\n *     catch (err) {\n *         console.log(err);\n *         // [ Error: ENOENT: no such file or directory ]\n *         // since dir4/file2.txt does not exist\n *         // dir1/file1.txt could have been deleted\n *     }\n * }\n *\n */\nfunction eachLimit(coll, iteratee, callback) {\n    return (0, _eachOf2.default)(coll, (0, _withoutIndex2.default)((0, _wrapAsync2.default)(iteratee)), callback);\n}\n\nexports.default = (0, _awaitify2.default)(eachLimit, 3);\nmodule.exports = exports.default;", "'use strict';\n\nvar toString = Object.prototype.toString;\n\n/**\n * Extract names from functions.\n *\n * @param {Function} fn The function who's name we need to extract.\n * @returns {String} The name of the function.\n * @public\n */\nmodule.exports = function name(fn) {\n  if ('string' === typeof fn.displayName && fn.constructor.name) {\n    return fn.displayName;\n  } else if ('string' === typeof fn.name && fn.name) {\n    return fn.name;\n  }\n\n  //\n  // Check to see if the constructor has a name.\n  //\n  if (\n       'object' === typeof fn\n    && fn.constructor\n    && 'string' === typeof fn.constructor.name\n  ) return fn.constructor.name;\n\n  //\n  // toString the given function and attempt to parse it out of it, or determine\n  // the class.\n  //\n  var named = fn.toString()\n    , type = toString.call(fn).slice(8, -1);\n\n  if ('Function' === type) {\n    named = named.substring(named.indexOf('(') + 1, named.indexOf(')'));\n  } else {\n    named = type;\n  }\n\n  return named || 'anonymous';\n};\n", "'use strict';\n\nvar name = require('fn.name');\n\n/**\n * Wrap callbacks to prevent double execution.\n *\n * @param {Function} fn Function that should only be called once.\n * @returns {Function} A wrapped callback which prevents multiple executions.\n * @public\n */\nmodule.exports = function one(fn) {\n  var called = 0\n    , value;\n\n  /**\n   * The function that prevents double execution.\n   *\n   * @private\n   */\n  function onetime() {\n    if (called) return value;\n\n    called = 1;\n    value = fn.apply(this, arguments);\n    fn = null;\n\n    return value;\n  }\n\n  //\n  // To make debugging more easy we want to use the name of the supplied\n  // function. So when you look at the functions that are assigned to event\n  // listeners you don't see a load of `onetime` functions but actually the\n  // names of the functions that this module will call.\n  //\n  // NOTE: We cannot override the `name` property, as that is `readOnly`\n  // property, so displayName will have to do.\n  //\n  onetime.displayName = name(fn);\n  return onetime;\n};\n", "exports.get = function(belowFn) {\n  var oldLimit = Error.stackTraceLimit;\n  Error.stackTraceLimit = Infinity;\n\n  var dummyObject = {};\n\n  var v8Handler = Error.prepareStackTrace;\n  Error.prepareStackTrace = function(dummyObject, v8StackTrace) {\n    return v8StackTrace;\n  };\n  Error.captureStackTrace(dummyObject, belowFn || exports.get);\n\n  var v8StackTrace = dummyObject.stack;\n  Error.prepareStackTrace = v8Handler;\n  Error.stackTraceLimit = oldLimit;\n\n  return v8StackTrace;\n};\n\nexports.parse = function(err) {\n  if (!err.stack) {\n    return [];\n  }\n\n  var self = this;\n  var lines = err.stack.split('\\n').slice(1);\n\n  return lines\n    .map(function(line) {\n      if (line.match(/^\\s*[-]{4,}$/)) {\n        return self._createParsedCallSite({\n          fileName: line,\n          lineNumber: null,\n          functionName: null,\n          typeName: null,\n          methodName: null,\n          columnNumber: null,\n          'native': null,\n        });\n      }\n\n      var lineMatch = line.match(/at (?:(.+)\\s+\\()?(?:(.+?):(\\d+)(?::(\\d+))?|([^)]+))\\)?/);\n      if (!lineMatch) {\n        return;\n      }\n\n      var object = null;\n      var method = null;\n      var functionName = null;\n      var typeName = null;\n      var methodName = null;\n      var isNative = (lineMatch[5] === 'native');\n\n      if (lineMatch[1]) {\n        functionName = lineMatch[1];\n        var methodStart = functionName.lastIndexOf('.');\n        if (functionName[methodStart-1] == '.')\n          methodStart--;\n        if (methodStart > 0) {\n          object = functionName.substr(0, methodStart);\n          method = functionName.substr(methodStart + 1);\n          var objectEnd = object.indexOf('.Module');\n          if (objectEnd > 0) {\n            functionName = functionName.substr(objectEnd + 1);\n            object = object.substr(0, objectEnd);\n          }\n        }\n        typeName = null;\n      }\n\n      if (method) {\n        typeName = object;\n        methodName = method;\n      }\n\n      if (method === '<anonymous>') {\n        methodName = null;\n        functionName = null;\n      }\n\n      var properties = {\n        fileName: lineMatch[2] || null,\n        lineNumber: parseInt(lineMatch[3], 10) || null,\n        functionName: functionName,\n        typeName: typeName,\n        methodName: methodName,\n        columnNumber: parseInt(lineMatch[4], 10) || null,\n        'native': isNative,\n      };\n\n      return self._createParsedCallSite(properties);\n    })\n    .filter(function(callSite) {\n      return !!callSite;\n    });\n};\n\nfunction CallSite(properties) {\n  for (var property in properties) {\n    this[property] = properties[property];\n  }\n}\n\nvar strProperties = [\n  'this',\n  'typeName',\n  'functionName',\n  'methodName',\n  'fileName',\n  'lineNumber',\n  'columnNumber',\n  'function',\n  'evalOrigin'\n];\nvar boolProperties = [\n  'topLevel',\n  'eval',\n  'native',\n  'constructor'\n];\nstrProperties.forEach(function (property) {\n  CallSite.prototype[property] = null;\n  CallSite.prototype['get' + property[0].toUpperCase() + property.substr(1)] = function () {\n    return this[property];\n  }\n});\nboolProperties.forEach(function (property) {\n  CallSite.prototype[property] = false;\n  CallSite.prototype['is' + property[0].toUpperCase() + property.substr(1)] = function () {\n    return this[property];\n  }\n});\n\nexports._createParsedCallSite = function(properties) {\n  return new CallSite(properties);\n};\n", "/**\n * exception-stream.js: TODO: add file header handler.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst { Writable } = require('readable-stream');\n\n/**\n * TODO: add class description.\n * @type {ExceptionStream}\n * @extends {Writable}\n */\nmodule.exports = class ExceptionStream extends Writable {\n  /**\n   * Constructor function for the ExceptionStream responsible for wrapping a\n   * TransportStream; only allowing writes of `info` objects with\n   * `info.exception` set to true.\n   * @param {!TransportStream} transport - Stream to filter to exceptions\n   */\n  constructor(transport) {\n    super({ objectMode: true });\n\n    if (!transport) {\n      throw new Error('ExceptionStream requires a TransportStream instance.');\n    }\n\n    // Remark (indexzero): we set `handleExceptions` here because it's the\n    // predicate checked in ExceptionHandler.prototype.__getExceptionHandlers\n    this.handleExceptions = true;\n    this.transport = transport;\n  }\n\n  /**\n   * Writes the info object to our transport instance if (and only if) the\n   * `exception` property is set on the info.\n   * @param {mixed} info - TODO: add param description.\n   * @param {mixed} enc - TODO: add param description.\n   * @param {mixed} callback - TODO: add param description.\n   * @returns {mixed} - TODO: add return description.\n   * @private\n   */\n  _write(info, enc, callback) {\n    if (info.exception) {\n      return this.transport.log(info, callback);\n    }\n\n    callback();\n    return true;\n  }\n};\n", "/**\n * exception-handler.js: Object for handling uncaughtException events.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst os = require('os');\nconst asyncForEach = require('async/forEach');\nconst debug = require('@dabh/diagnostics')('winston:exception');\nconst once = require('one-time');\nconst stackTrace = require('stack-trace');\nconst ExceptionStream = require('./exception-stream');\n\n/**\n * Object for handling uncaughtException events.\n * @type {ExceptionHandler}\n */\nmodule.exports = class ExceptionHandler {\n  /**\n   * TODO: add contructor description\n   * @param {!Logger} logger - TODO: add param description\n   */\n  constructor(logger) {\n    if (!logger) {\n      throw new Error('Logger is required to handle exceptions');\n    }\n\n    this.logger = logger;\n    this.handlers = new Map();\n  }\n\n  /**\n   * Handles `uncaughtException` events for the current process by adding any\n   * handlers passed in.\n   * @returns {undefined}\n   */\n  handle(...args) {\n    args.forEach(arg => {\n      if (Array.isArray(arg)) {\n        return arg.forEach(handler => this._addHandler(handler));\n      }\n\n      this._addHandler(arg);\n    });\n\n    if (!this.catcher) {\n      this.catcher = this._uncaughtException.bind(this);\n      process.on('uncaughtException', this.catcher);\n    }\n  }\n\n  /**\n   * Removes any handlers to `uncaughtException` events for the current\n   * process. This does not modify the state of the `this.handlers` set.\n   * @returns {undefined}\n   */\n  unhandle() {\n    if (this.catcher) {\n      process.removeListener('uncaughtException', this.catcher);\n      this.catcher = false;\n\n      Array.from(this.handlers.values())\n        .forEach(wrapper => this.logger.unpipe(wrapper));\n    }\n  }\n\n  /**\n   * TODO: add method description\n   * @param {Error} err - Error to get information about.\n   * @returns {mixed} - TODO: add return description.\n   */\n  getAllInfo(err) {\n    let message = null;\n    if (err) {\n      message = typeof err === 'string' ? err : err.message;\n    }\n\n    return {\n      error: err,\n      // TODO (indexzero): how do we configure this?\n      level: 'error',\n      message: [\n        `uncaughtException: ${(message || '(no error message)')}`,\n        err && err.stack || '  No stack trace'\n      ].join('\\n'),\n      stack: err && err.stack,\n      exception: true,\n      date: new Date().toString(),\n      process: this.getProcessInfo(),\n      os: this.getOsInfo(),\n      trace: this.getTrace(err)\n    };\n  }\n\n  /**\n   * Gets all relevant process information for the currently running process.\n   * @returns {mixed} - TODO: add return description.\n   */\n  getProcessInfo() {\n    return {\n      pid: process.pid,\n      uid: process.getuid ? process.getuid() : null,\n      gid: process.getgid ? process.getgid() : null,\n      cwd: process.cwd(),\n      execPath: process.execPath,\n      version: process.version,\n      argv: process.argv,\n      memoryUsage: process.memoryUsage()\n    };\n  }\n\n  /**\n   * Gets all relevant OS information for the currently running process.\n   * @returns {mixed} - TODO: add return description.\n   */\n  getOsInfo() {\n    return {\n      loadavg: os.loadavg(),\n      uptime: os.uptime()\n    };\n  }\n\n  /**\n   * Gets a stack trace for the specified error.\n   * @param {mixed} err - TODO: add param description.\n   * @returns {mixed} - TODO: add return description.\n   */\n  getTrace(err) {\n    const trace = err ? stackTrace.parse(err) : stackTrace.get();\n    return trace.map(site => {\n      return {\n        column: site.getColumnNumber(),\n        file: site.getFileName(),\n        function: site.getFunctionName(),\n        line: site.getLineNumber(),\n        method: site.getMethodName(),\n        native: site.isNative()\n      };\n    });\n  }\n\n  /**\n   * Helper method to add a transport as an exception handler.\n   * @param {Transport} handler - The transport to add as an exception handler.\n   * @returns {void}\n   */\n  _addHandler(handler) {\n    if (!this.handlers.has(handler)) {\n      handler.handleExceptions = true;\n      const wrapper = new ExceptionStream(handler);\n      this.handlers.set(handler, wrapper);\n      this.logger.pipe(wrapper);\n    }\n  }\n\n  /**\n   * Logs all relevant information around the `err` and exits the current\n   * process.\n   * @param {Error} err - Error to handle\n   * @returns {mixed} - TODO: add return description.\n   * @private\n   */\n  _uncaughtException(err) {\n    const info = this.getAllInfo(err);\n    const handlers = this._getExceptionHandlers();\n    // Calculate if we should exit on this error\n    let doExit = typeof this.logger.exitOnError === 'function'\n      ? this.logger.exitOnError(err)\n      : this.logger.exitOnError;\n    let timeout;\n\n    if (!handlers.length && doExit) {\n      // eslint-disable-next-line no-console\n      console.warn('winston: exitOnError cannot be true with no exception handlers.');\n      // eslint-disable-next-line no-console\n      console.warn('winston: not exiting process.');\n      doExit = false;\n    }\n\n    function gracefulExit() {\n      debug('doExit', doExit);\n      debug('process._exiting', process._exiting);\n\n      if (doExit && !process._exiting) {\n        // Remark: Currently ignoring any exceptions from transports when\n        // catching uncaught exceptions.\n        if (timeout) {\n          clearTimeout(timeout);\n        }\n        // eslint-disable-next-line no-process-exit\n        process.exit(1);\n      }\n    }\n\n    if (!handlers || handlers.length === 0) {\n      return process.nextTick(gracefulExit);\n    }\n\n    // Log to all transports attempting to listen for when they are completed.\n    asyncForEach(handlers, (handler, next) => {\n      const done = once(next);\n      const transport = handler.transport || handler;\n\n      // Debug wrapping so that we can inspect what's going on under the covers.\n      function onDone(event) {\n        return () => {\n          debug(event);\n          done();\n        };\n      }\n\n      transport._ending = true;\n      transport.once('finish', onDone('finished'));\n      transport.once('error', onDone('error'));\n    }, () => doExit && gracefulExit());\n\n    this.logger.log(info);\n\n    // If exitOnError is true, then only allow the logging of exceptions to\n    // take up to `3000ms`.\n    if (doExit) {\n      timeout = setTimeout(gracefulExit, 3000);\n    }\n  }\n\n  /**\n   * Returns the list of transports and exceptionHandlers for this instance.\n   * @returns {Array} - List of transports and exceptionHandlers for this\n   * instance.\n   * @private\n   */\n  _getExceptionHandlers() {\n    // Remark (indexzero): since `logger.transports` returns all of the pipes\n    // from the _readableState of the stream we actually get the join of the\n    // explicit handlers and the implicit transports with\n    // `handleExceptions: true`\n    return this.logger.transports.filter(wrap => {\n      const transport = wrap.transport || wrap;\n      return transport.handleExceptions;\n    });\n  }\n};\n", "/**\n * rejection-stream.js: TODO: add file header handler.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst { Writable } = require('readable-stream');\n\n/**\n * TODO: add class description.\n * @type {RejectionStream}\n * @extends {Writable}\n */\nmodule.exports = class RejectionStream extends Writable {\n  /**\n   * Constructor function for the RejectionStream responsible for wrapping a\n   * TransportStream; only allowing writes of `info` objects with\n   * `info.rejection` set to true.\n   * @param {!TransportStream} transport - Stream to filter to rejections\n   */\n  constructor(transport) {\n    super({ objectMode: true });\n\n    if (!transport) {\n      throw new Error('RejectionStream requires a TransportStream instance.');\n    }\n\n    this.handleRejections = true;\n    this.transport = transport;\n  }\n\n  /**\n   * Writes the info object to our transport instance if (and only if) the\n   * `rejection` property is set on the info.\n   * @param {mixed} info - TODO: add param description.\n   * @param {mixed} enc - TODO: add param description.\n   * @param {mixed} callback - TODO: add param description.\n   * @returns {mixed} - TODO: add return description.\n   * @private\n   */\n  _write(info, enc, callback) {\n    if (info.rejection) {\n      return this.transport.log(info, callback);\n    }\n\n    callback();\n    return true;\n  }\n};\n", "/**\n * exception-handler.js: Object for handling uncaughtException events.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst os = require('os');\nconst asyncForEach = require('async/forEach');\nconst debug = require('@dabh/diagnostics')('winston:rejection');\nconst once = require('one-time');\nconst stackTrace = require('stack-trace');\nconst RejectionStream = require('./rejection-stream');\n\n/**\n * Object for handling unhandledRejection events.\n * @type {RejectionHandler}\n */\nmodule.exports = class RejectionHandler {\n  /**\n   * TODO: add contructor description\n   * @param {!Logger} logger - TODO: add param description\n   */\n  constructor(logger) {\n    if (!logger) {\n      throw new Error('Logger is required to handle rejections');\n    }\n\n    this.logger = logger;\n    this.handlers = new Map();\n  }\n\n  /**\n   * Handles `unhandledRejection` events for the current process by adding any\n   * handlers passed in.\n   * @returns {undefined}\n   */\n  handle(...args) {\n    args.forEach(arg => {\n      if (Array.isArray(arg)) {\n        return arg.forEach(handler => this._addHandler(handler));\n      }\n\n      this._addHandler(arg);\n    });\n\n    if (!this.catcher) {\n      this.catcher = this._unhandledRejection.bind(this);\n      process.on('unhandledRejection', this.catcher);\n    }\n  }\n\n  /**\n   * Removes any handlers to `unhandledRejection` events for the current\n   * process. This does not modify the state of the `this.handlers` set.\n   * @returns {undefined}\n   */\n  unhandle() {\n    if (this.catcher) {\n      process.removeListener('unhandledRejection', this.catcher);\n      this.catcher = false;\n\n      Array.from(this.handlers.values()).forEach(wrapper =>\n        this.logger.unpipe(wrapper)\n      );\n    }\n  }\n\n  /**\n   * TODO: add method description\n   * @param {Error} err - Error to get information about.\n   * @returns {mixed} - TODO: add return description.\n   */\n  getAllInfo(err) {\n    let message = null;\n    if (err) {\n      message = typeof err === 'string' ? err : err.message;\n    }\n\n    return {\n      error: err,\n      // TODO (indexzero): how do we configure this?\n      level: 'error',\n      message: [\n        `unhandledRejection: ${message || '(no error message)'}`,\n        err && err.stack || '  No stack trace'\n      ].join('\\n'),\n      stack: err && err.stack,\n      rejection: true,\n      date: new Date().toString(),\n      process: this.getProcessInfo(),\n      os: this.getOsInfo(),\n      trace: this.getTrace(err)\n    };\n  }\n\n  /**\n   * Gets all relevant process information for the currently running process.\n   * @returns {mixed} - TODO: add return description.\n   */\n  getProcessInfo() {\n    return {\n      pid: process.pid,\n      uid: process.getuid ? process.getuid() : null,\n      gid: process.getgid ? process.getgid() : null,\n      cwd: process.cwd(),\n      execPath: process.execPath,\n      version: process.version,\n      argv: process.argv,\n      memoryUsage: process.memoryUsage()\n    };\n  }\n\n  /**\n   * Gets all relevant OS information for the currently running process.\n   * @returns {mixed} - TODO: add return description.\n   */\n  getOsInfo() {\n    return {\n      loadavg: os.loadavg(),\n      uptime: os.uptime()\n    };\n  }\n\n  /**\n   * Gets a stack trace for the specified error.\n   * @param {mixed} err - TODO: add param description.\n   * @returns {mixed} - TODO: add return description.\n   */\n  getTrace(err) {\n    const trace = err ? stackTrace.parse(err) : stackTrace.get();\n    return trace.map(site => {\n      return {\n        column: site.getColumnNumber(),\n        file: site.getFileName(),\n        function: site.getFunctionName(),\n        line: site.getLineNumber(),\n        method: site.getMethodName(),\n        native: site.isNative()\n      };\n    });\n  }\n\n  /**\n   * Helper method to add a transport as an exception handler.\n   * @param {Transport} handler - The transport to add as an exception handler.\n   * @returns {void}\n   */\n  _addHandler(handler) {\n    if (!this.handlers.has(handler)) {\n      handler.handleRejections = true;\n      const wrapper = new RejectionStream(handler);\n      this.handlers.set(handler, wrapper);\n      this.logger.pipe(wrapper);\n    }\n  }\n\n  /**\n   * Logs all relevant information around the `err` and exits the current\n   * process.\n   * @param {Error} err - Error to handle\n   * @returns {mixed} - TODO: add return description.\n   * @private\n   */\n  _unhandledRejection(err) {\n    const info = this.getAllInfo(err);\n    const handlers = this._getRejectionHandlers();\n    // Calculate if we should exit on this error\n    let doExit =\n      typeof this.logger.exitOnError === 'function'\n        ? this.logger.exitOnError(err)\n        : this.logger.exitOnError;\n    let timeout;\n\n    if (!handlers.length && doExit) {\n      // eslint-disable-next-line no-console\n      console.warn('winston: exitOnError cannot be true with no rejection handlers.');\n      // eslint-disable-next-line no-console\n      console.warn('winston: not exiting process.');\n      doExit = false;\n    }\n\n    function gracefulExit() {\n      debug('doExit', doExit);\n      debug('process._exiting', process._exiting);\n\n      if (doExit && !process._exiting) {\n        // Remark: Currently ignoring any rejections from transports when\n        // catching unhandled rejections.\n        if (timeout) {\n          clearTimeout(timeout);\n        }\n        // eslint-disable-next-line no-process-exit\n        process.exit(1);\n      }\n    }\n\n    if (!handlers || handlers.length === 0) {\n      return process.nextTick(gracefulExit);\n    }\n\n    // Log to all transports attempting to listen for when they are completed.\n    asyncForEach(\n      handlers,\n      (handler, next) => {\n        const done = once(next);\n        const transport = handler.transport || handler;\n\n        // Debug wrapping so that we can inspect what's going on under the covers.\n        function onDone(event) {\n          return () => {\n            debug(event);\n            done();\n          };\n        }\n\n        transport._ending = true;\n        transport.once('finish', onDone('finished'));\n        transport.once('error', onDone('error'));\n      },\n      () => doExit && gracefulExit()\n    );\n\n    this.logger.log(info);\n\n    // If exitOnError is true, then only allow the logging of exceptions to\n    // take up to `3000ms`.\n    if (doExit) {\n      timeout = setTimeout(gracefulExit, 3000);\n    }\n  }\n\n  /**\n   * Returns the list of transports and exceptionHandlers for this instance.\n   * @returns {Array} - List of transports and exceptionHandlers for this\n   * instance.\n   * @private\n   */\n  _getRejectionHandlers() {\n    // Remark (indexzero): since `logger.transports` returns all of the pipes\n    // from the _readableState of the stream we actually get the join of the\n    // explicit handlers and the implicit transports with\n    // `handleRejections: true`\n    return this.logger.transports.filter(wrap => {\n      const transport = wrap.transport || wrap;\n      return transport.handleRejections;\n    });\n  }\n};\n", "/**\n * profiler.js: TODO: add file header description.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n/**\n * TODO: add class description.\n * @type {Profiler}\n * @private\n */\nclass Profiler {\n  /**\n   * Constructor function for the Profiler instance used by\n   * `Logger.prototype.startTimer`. When done is called the timer will finish\n   * and log the duration.\n   * @param {!Logger} logger - TODO: add param description.\n   * @private\n   */\n  constructor(logger) {\n    const Logger = require('./logger');\n    if (typeof logger !== 'object' || Array.isArray(logger) || !(logger instanceof Logger)) {\n      throw new Error('Logger is required for profiling');\n    } else {\n      this.logger = logger;\n      this.start = Date.now();\n    }\n  }\n\n  /**\n   * Ends the current timer (i.e. Profiler) instance and logs the `msg` along\n   * with the duration since creation.\n   * @returns {mixed} - TODO: add return description.\n   * @private\n   */\n  done(...args) {\n    if (typeof args[args.length - 1] === 'function') {\n      // eslint-disable-next-line no-console\n      console.warn('Callback function no longer supported as of winston@3.0.0');\n      args.pop();\n    }\n\n    const info = typeof args[args.length - 1] === 'object' ? args.pop() : {};\n    info.level = info.level || 'info';\n    info.durationMs = (Date.now()) - this.start;\n\n    return this.logger.write(info);\n  }\n};\n\nmodule.exports = Profiler;\n", "/**\n * logger.js: TODO: add file header description.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst { Stream, Transform } = require('readable-stream');\nconst asyncForEach = require('async/forEach');\nconst { LEVEL, SPLAT } = require('triple-beam');\nconst isStream = require('is-stream');\nconst ExceptionHandler = require('./exception-handler');\nconst RejectionHandler = require('./rejection-handler');\nconst LegacyTransportStream = require('winston-transport/legacy');\nconst Profiler = require('./profiler');\nconst { warn } = require('./common');\nconst config = require('./config');\n\n/**\n * Captures the number of format (i.e. %s strings) in a given string.\n * Based on `util.format`, see Node.js source:\n * https://github.com/nodejs/node/blob/b1c8f15c5f169e021f7c46eb7b219de95fe97603/lib/util.js#L201-L230\n * @type {RegExp}\n */\nconst formatRegExp = /%[scdjifoO%]/g;\n\n/**\n * TODO: add class description.\n * @type {Logger}\n * @extends {Transform}\n */\nclass Logger extends Transform {\n  /**\n   * Constructor function for the Logger object responsible for persisting log\n   * messages and metadata to one or more transports.\n   * @param {!Object} options - foo\n   */\n  constructor(options) {\n    super({ objectMode: true });\n    this.configure(options);\n  }\n\n  child(defaultRequestMetadata) {\n    const logger = this;\n    return Object.create(logger, {\n      write: {\n        value: function (info) {\n          const infoClone = Object.assign(\n            {},\n            defaultRequestMetadata,\n            info\n          );\n\n          // Object.assign doesn't copy inherited Error\n          // properties so we have to do that explicitly\n          //\n          // Remark (indexzero): we should remove this\n          // since the errors format will handle this case.\n          //\n          if (info instanceof Error) {\n            infoClone.stack = info.stack;\n            infoClone.message = info.message;\n          }\n\n          logger.write(infoClone);\n        }\n      }\n    });\n  }\n\n  /**\n   * This will wholesale reconfigure this instance by:\n   * 1. Resetting all transports. Older transports will be removed implicitly.\n   * 2. Set all other options including levels, colors, rewriters, filters,\n   *    exceptionHandlers, etc.\n   * @param {!Object} options - TODO: add param description.\n   * @returns {undefined}\n   */\n  configure({\n    silent,\n    format,\n    defaultMeta,\n    levels,\n    level = 'info',\n    exitOnError = true,\n    transports,\n    colors,\n    emitErrs,\n    formatters,\n    padLevels,\n    rewriters,\n    stripColors,\n    exceptionHandlers,\n    rejectionHandlers\n  } = {}) {\n    // Reset transports if we already have them\n    if (this.transports.length) {\n      this.clear();\n    }\n\n    this.silent = silent;\n    this.format = format || this.format || require('logform/json')();\n\n    this.defaultMeta = defaultMeta || null;\n    // Hoist other options onto this instance.\n    this.levels = levels || this.levels || config.npm.levels;\n    this.level = level;\n    if (this.exceptions) {\n      this.exceptions.unhandle();\n    }\n    if (this.rejections) {\n      this.rejections.unhandle();\n    }\n    this.exceptions = new ExceptionHandler(this);\n    this.rejections = new RejectionHandler(this);\n    this.profilers = {};\n    this.exitOnError = exitOnError;\n\n    // Add all transports we have been provided.\n    if (transports) {\n      transports = Array.isArray(transports) ? transports : [transports];\n      transports.forEach(transport => this.add(transport));\n    }\n\n    if (\n      colors ||\n      emitErrs ||\n      formatters ||\n      padLevels ||\n      rewriters ||\n      stripColors\n    ) {\n      throw new Error(\n        [\n          '{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.',\n          'Use a custom winston.format(function) instead.',\n          'See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md'\n        ].join('\\n')\n      );\n    }\n\n    if (exceptionHandlers) {\n      this.exceptions.handle(exceptionHandlers);\n    }\n    if (rejectionHandlers) {\n      this.rejections.handle(rejectionHandlers);\n    }\n  }\n\n  isLevelEnabled(level) {\n    const givenLevelValue = getLevelValue(this.levels, level);\n    if (givenLevelValue === null) {\n      return false;\n    }\n\n    const configuredLevelValue = getLevelValue(this.levels, this.level);\n    if (configuredLevelValue === null) {\n      return false;\n    }\n\n    if (!this.transports || this.transports.length === 0) {\n      return configuredLevelValue >= givenLevelValue;\n    }\n\n    const index = this.transports.findIndex(transport => {\n      let transportLevelValue = getLevelValue(this.levels, transport.level);\n      if (transportLevelValue === null) {\n        transportLevelValue = configuredLevelValue;\n      }\n      return transportLevelValue >= givenLevelValue;\n    });\n    return index !== -1;\n  }\n\n  /* eslint-disable valid-jsdoc */\n  /**\n   * Ensure backwards compatibility with a `log` method\n   * @param {mixed} level - Level the log message is written at.\n   * @param {mixed} msg - TODO: add param description.\n   * @param {mixed} meta - TODO: add param description.\n   * @returns {Logger} - TODO: add return description.\n   *\n   * @example\n   *    // Supports the existing API:\n   *    logger.log('info', 'Hello world', { custom: true });\n   *    logger.log('info', new Error('Yo, it\\'s on fire'));\n   *\n   *    // Requires winston.format.splat()\n   *    logger.log('info', '%s %d%%', 'A string', 50, { thisIsMeta: true });\n   *\n   *    // And the new API with a single JSON literal:\n   *    logger.log({ level: 'info', message: 'Hello world', custom: true });\n   *    logger.log({ level: 'info', message: new Error('Yo, it\\'s on fire') });\n   *\n   *    // Also requires winston.format.splat()\n   *    logger.log({\n   *      level: 'info',\n   *      message: '%s %d%%',\n   *      [SPLAT]: ['A string', 50],\n   *      meta: { thisIsMeta: true }\n   *    });\n   *\n   */\n  /* eslint-enable valid-jsdoc */\n  log(level, msg, ...splat) {\n    // eslint-disable-line max-params\n    // Optimize for the hotpath of logging JSON literals\n    if (arguments.length === 1) {\n      // Yo dawg, I heard you like levels ... seriously ...\n      // In this context the LHS `level` here is actually the `info` so read\n      // this as: info[LEVEL] = info.level;\n      level[LEVEL] = level.level;\n      this._addDefaultMeta(level);\n      this.write(level);\n      return this;\n    }\n\n    // Slightly less hotpath, but worth optimizing for.\n    if (arguments.length === 2) {\n      if (msg && typeof msg === 'object') {\n        msg[LEVEL] = msg.level = level;\n        this._addDefaultMeta(msg);\n        this.write(msg);\n        return this;\n      }\n\n      msg = { [LEVEL]: level, level, message: msg };\n      this._addDefaultMeta(msg);\n      this.write(msg);\n      return this;\n    }\n\n    const [meta] = splat;\n    if (typeof meta === 'object' && meta !== null) {\n      // Extract tokens, if none available default to empty array to\n      // ensure consistancy in expected results\n      const tokens = msg && msg.match && msg.match(formatRegExp);\n\n      if (!tokens) {\n        const info = Object.assign({}, this.defaultMeta, meta, {\n          [LEVEL]: level,\n          [SPLAT]: splat,\n          level,\n          message: msg\n        });\n\n        if (meta.message) info.message = `${info.message} ${meta.message}`;\n        if (meta.stack) info.stack = meta.stack;\n        if (meta.cause) info.cause = meta.cause;\n\n        this.write(info);\n        return this;\n      }\n    }\n\n    this.write(Object.assign({}, this.defaultMeta, {\n      [LEVEL]: level,\n      [SPLAT]: splat,\n      level,\n      message: msg\n    }));\n\n    return this;\n  }\n\n  /**\n   * Pushes data so that it can be picked up by all of our pipe targets.\n   * @param {mixed} info - TODO: add param description.\n   * @param {mixed} enc - TODO: add param description.\n   * @param {mixed} callback - Continues stream processing.\n   * @returns {undefined}\n   * @private\n   */\n  _transform(info, enc, callback) {\n    if (this.silent) {\n      return callback();\n    }\n\n    // [LEVEL] is only soft guaranteed to be set here since we are a proper\n    // stream. It is likely that `info` came in through `.log(info)` or\n    // `.info(info)`. If it is not defined, however, define it.\n    // This LEVEL symbol is provided by `triple-beam` and also used in:\n    // - logform\n    // - winston-transport\n    // - abstract-winston-transport\n    if (!info[LEVEL]) {\n      info[LEVEL] = info.level;\n    }\n\n    // Remark: really not sure what to do here, but this has been reported as\n    // very confusing by pre winston@2.0.0 users as quite confusing when using\n    // custom levels.\n    if (!this.levels[info[LEVEL]] && this.levels[info[LEVEL]] !== 0) {\n      // eslint-disable-next-line no-console\n      console.error('[winston] Unknown logger level: %s', info[LEVEL]);\n    }\n\n    // Remark: not sure if we should simply error here.\n    if (!this._readableState.pipes) {\n      // eslint-disable-next-line no-console\n      console.error(\n        '[winston] Attempt to write logs with no transports, which can increase memory usage: %j',\n        info\n      );\n    }\n\n    // Here we write to the `format` pipe-chain, which on `readable` above will\n    // push the formatted `info` Object onto the buffer for this instance. We trap\n    // (and re-throw) any errors generated by the user-provided format, but also\n    // guarantee that the streams callback is invoked so that we can continue flowing.\n    try {\n      this.push(this.format.transform(info, this.format.options));\n    } finally {\n      this._writableState.sync = false;\n      // eslint-disable-next-line callback-return\n      callback();\n    }\n  }\n\n  /**\n   * Delays the 'finish' event until all transport pipe targets have\n   * also emitted 'finish' or are already finished.\n   * @param {mixed} callback - Continues stream processing.\n   */\n  _final(callback) {\n    const transports = this.transports.slice();\n    asyncForEach(\n      transports,\n      (transport, next) => {\n        if (!transport || transport.finished) return setImmediate(next);\n        transport.once('finish', next);\n        transport.end();\n      },\n      callback\n    );\n  }\n\n  /**\n   * Adds the transport to this logger instance by piping to it.\n   * @param {mixed} transport - TODO: add param description.\n   * @returns {Logger} - TODO: add return description.\n   */\n  add(transport) {\n    // Support backwards compatibility with all existing `winston < 3.x.x`\n    // transports which meet one of two criteria:\n    // 1. They inherit from winston.Transport in  < 3.x.x which is NOT a stream.\n    // 2. They expose a log method which has a length greater than 2 (i.e. more then\n    //    just `log(info, callback)`.\n    const target =\n      !isStream(transport) || transport.log.length > 2\n        ? new LegacyTransportStream({ transport })\n        : transport;\n\n    if (!target._writableState || !target._writableState.objectMode) {\n      throw new Error(\n        'Transports must WritableStreams in objectMode. Set { objectMode: true }.'\n      );\n    }\n\n    // Listen for the `error` event and the `warn` event on the new Transport.\n    this._onEvent('error', target);\n    this._onEvent('warn', target);\n    this.pipe(target);\n\n    if (transport.handleExceptions) {\n      this.exceptions.handle();\n    }\n\n    if (transport.handleRejections) {\n      this.rejections.handle();\n    }\n\n    return this;\n  }\n\n  /**\n   * Removes the transport from this logger instance by unpiping from it.\n   * @param {mixed} transport - TODO: add param description.\n   * @returns {Logger} - TODO: add return description.\n   */\n  remove(transport) {\n    if (!transport) return this;\n    let target = transport;\n    if (!isStream(transport) || transport.log.length > 2) {\n      target = this.transports.filter(\n        match => match.transport === transport\n      )[0];\n    }\n\n    if (target) {\n      this.unpipe(target);\n    }\n    return this;\n  }\n\n  /**\n   * Removes all transports from this logger instance.\n   * @returns {Logger} - TODO: add return description.\n   */\n  clear() {\n    this.unpipe();\n    return this;\n  }\n\n  /**\n   * Cleans up resources (streams, event listeners) for all transports\n   * associated with this instance (if necessary).\n   * @returns {Logger} - TODO: add return description.\n   */\n  close() {\n    this.exceptions.unhandle();\n    this.rejections.unhandle();\n    this.clear();\n    this.emit('close');\n    return this;\n  }\n\n  /**\n   * Sets the `target` levels specified on this instance.\n   * @param {Object} Target levels to use on this instance.\n   */\n  setLevels() {\n    warn.deprecated('setLevels');\n  }\n\n  /**\n   * Queries the all transports for this instance with the specified `options`.\n   * This will aggregate each transport's results into one object containing\n   * a property per transport.\n   * @param {Object} options - Query options for this instance.\n   * @param {function} callback - Continuation to respond to when complete.\n   */\n  query(options, callback) {\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n\n    options = options || {};\n    const results = {};\n    const queryObject = Object.assign({}, options.query || {});\n\n    // Helper function to query a single transport\n    function queryTransport(transport, next) {\n      if (options.query && typeof transport.formatQuery === 'function') {\n        options.query = transport.formatQuery(queryObject);\n      }\n\n      transport.query(options, (err, res) => {\n        if (err) {\n          return next(err);\n        }\n\n        if (typeof transport.formatResults === 'function') {\n          res = transport.formatResults(res, options.format);\n        }\n\n        next(null, res);\n      });\n    }\n\n    // Helper function to accumulate the results from `queryTransport` into\n    // the `results`.\n    function addResults(transport, next) {\n      queryTransport(transport, (err, result) => {\n        // queryTransport could potentially invoke the callback multiple times\n        // since Transport code can be unpredictable.\n        if (next) {\n          result = err || result;\n          if (result) {\n            results[transport.name] = result;\n          }\n\n          // eslint-disable-next-line callback-return\n          next();\n        }\n\n        next = null;\n      });\n    }\n\n    // Iterate over the transports in parallel setting the appropriate key in\n    // the `results`.\n    asyncForEach(\n      this.transports.filter(transport => !!transport.query),\n      addResults,\n      () => callback(null, results)\n    );\n  }\n\n  /**\n   * Returns a log stream for all transports. Options object is optional.\n   * @param{Object} options={} - Stream options for this instance.\n   * @returns {Stream} - TODO: add return description.\n   */\n  stream(options = {}) {\n    const out = new Stream();\n    const streams = [];\n\n    out._streams = streams;\n    out.destroy = () => {\n      let i = streams.length;\n      while (i--) {\n        streams[i].destroy();\n      }\n    };\n\n    // Create a list of all transports for this instance.\n    this.transports\n      .filter(transport => !!transport.stream)\n      .forEach(transport => {\n        const str = transport.stream(options);\n        if (!str) {\n          return;\n        }\n\n        streams.push(str);\n\n        str.on('log', log => {\n          log.transport = log.transport || [];\n          log.transport.push(transport.name);\n          out.emit('log', log);\n        });\n\n        str.on('error', err => {\n          err.transport = err.transport || [];\n          err.transport.push(transport.name);\n          out.emit('error', err);\n        });\n      });\n\n    return out;\n  }\n\n  /**\n   * Returns an object corresponding to a specific timing. When done is called\n   * the timer will finish and log the duration. e.g.:\n   * @returns {Profile} - TODO: add return description.\n   * @example\n   *    const timer = winston.startTimer()\n   *    setTimeout(() => {\n   *      timer.done({\n   *        message: 'Logging message'\n   *      });\n   *    }, 1000);\n   */\n  startTimer() {\n    return new Profiler(this);\n  }\n\n  /**\n   * Tracks the time inbetween subsequent calls to this method with the same\n   * `id` parameter. The second call to this method will log the difference in\n   * milliseconds along with the message.\n   * @param {string} id Unique id of the profiler\n   * @returns {Logger} - TODO: add return description.\n   */\n  profile(id, ...args) {\n    const time = Date.now();\n    if (this.profilers[id]) {\n      const timeEnd = this.profilers[id];\n      delete this.profilers[id];\n\n      // Attempt to be kind to users if they are still using older APIs.\n      if (typeof args[args.length - 2] === 'function') {\n        // eslint-disable-next-line no-console\n        console.warn(\n          'Callback function no longer supported as of winston@3.0.0'\n        );\n        args.pop();\n      }\n\n      // Set the duration property of the metadata\n      const info = typeof args[args.length - 1] === 'object' ? args.pop() : {};\n      info.level = info.level || 'info';\n      info.durationMs = time - timeEnd;\n      info.message = info.message || id;\n      return this.write(info);\n    }\n\n    this.profilers[id] = time;\n    return this;\n  }\n\n  /**\n   * Backwards compatibility to `exceptions.handle` in winston < 3.0.0.\n   * @returns {undefined}\n   * @deprecated\n   */\n  handleExceptions(...args) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      'Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()'\n    );\n    this.exceptions.handle(...args);\n  }\n\n  /**\n   * Backwards compatibility to `exceptions.handle` in winston < 3.0.0.\n   * @returns {undefined}\n   * @deprecated\n   */\n  unhandleExceptions(...args) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      'Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()'\n    );\n    this.exceptions.unhandle(...args);\n  }\n\n  /**\n   * Throw a more meaningful deprecation notice\n   * @throws {Error} - TODO: add throws description.\n   */\n  cli() {\n    throw new Error(\n      [\n        'Logger.cli() was removed in winston@3.0.0',\n        'Use a custom winston.formats.cli() instead.',\n        'See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md'\n      ].join('\\n')\n    );\n  }\n\n  /**\n   * Bubbles the `event` that occured on the specified `transport` up\n   * from this instance.\n   * @param {string} event - The event that occured\n   * @param {Object} transport - Transport on which the event occured\n   * @private\n   */\n  _onEvent(event, transport) {\n    function transportEvent(err) {\n      // https://github.com/winstonjs/winston/issues/1364\n      if (event === 'error' && !this.transports.includes(transport)) {\n        this.add(transport);\n      }\n      this.emit(event, err, transport);\n    }\n\n    if (!transport['__winston' + event]) {\n      transport['__winston' + event] = transportEvent.bind(this);\n      transport.on(event, transport['__winston' + event]);\n    }\n  }\n\n  _addDefaultMeta(msg) {\n    if (this.defaultMeta) {\n      Object.assign(msg, this.defaultMeta);\n    }\n  }\n}\n\nfunction getLevelValue(levels, level) {\n  const value = levels[level];\n  if (!value && value !== 0) {\n    return null;\n  }\n  return value;\n}\n\n/**\n * Represents the current readableState pipe targets for this Logger instance.\n * @type {Array|Object}\n */\nObject.defineProperty(Logger.prototype, 'transports', {\n  configurable: false,\n  enumerable: true,\n  get() {\n    const { pipes } = this._readableState;\n    return !Array.isArray(pipes) ? [pipes].filter(Boolean) : pipes;\n  }\n});\n\nmodule.exports = Logger;\n", "/**\n * create-logger.js: Logger factory for winston logger instances.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst { LEVEL } = require('triple-beam');\nconst config = require('./config');\nconst Logger = require('./logger');\nconst debug = require('@dabh/diagnostics')('winston:create-logger');\n\nfunction isLevelEnabledFunctionName(level) {\n  return 'is' + level.charAt(0).toUpperCase() + level.slice(1) + 'Enabled';\n}\n\n/**\n * Create a new instance of a winston Logger. Creates a new\n * prototype for each instance.\n * @param {!Object} opts - Options for the created logger.\n * @returns {Logger} - A newly created logger instance.\n */\nmodule.exports = function (opts = {}) {\n  //\n  // Default levels: npm\n  //\n  opts.levels = opts.levels || config.npm.levels;\n\n  /**\n   * DerivedLogger to attach the logs level methods.\n   * @type {DerivedLogger}\n   * @extends {Logger}\n   */\n  class DerivedLogger extends Logger {\n    /**\n     * Create a new class derived logger for which the levels can be attached to\n     * the prototype of. This is a V8 optimization that is well know to increase\n     * performance of prototype functions.\n     * @param {!Object} options - Options for the created logger.\n     */\n    constructor(options) {\n      super(options);\n    }\n  }\n\n  const logger = new DerivedLogger(opts);\n\n  //\n  // Create the log level methods for the derived logger.\n  //\n  Object.keys(opts.levels).forEach(function (level) {\n    debug('Define prototype method for \"%s\"', level);\n    if (level === 'log') {\n      // eslint-disable-next-line no-console\n      console.warn('Level \"log\" not defined: conflicts with the method \"log\". Use a different level name.');\n      return;\n    }\n\n    //\n    // Define prototype methods for each log level e.g.:\n    // logger.log('info', msg) implies these methods are defined:\n    // - logger.info(msg)\n    // - logger.isInfoEnabled()\n    //\n    // Remark: to support logger.child this **MUST** be a function\n    // so it'll always be called on the instance instead of a fixed\n    // place in the prototype chain.\n    //\n    DerivedLogger.prototype[level] = function (...args) {\n      // Prefer any instance scope, but default to \"root\" logger\n      const self = this || logger;\n\n      // Optimize the hot-path which is the single object.\n      if (args.length === 1) {\n        const [msg] = args;\n        const info = msg && msg.message && msg || { message: msg };\n        info.level = info[LEVEL] = level;\n        self._addDefaultMeta(info);\n        self.write(info);\n        return (this || logger);\n      }\n\n      // When provided nothing assume the empty string\n      if (args.length === 0) {\n        self.log(level, '');\n        return self;\n      }\n\n      // Otherwise build argument list which could potentially conform to\n      // either:\n      // . v3 API: log(obj)\n      // 2. v1/v2 API: log(level, msg, ... [string interpolate], [{metadata}], [callback])\n      return self.log(level, ...args);\n    };\n\n    DerivedLogger.prototype[isLevelEnabledFunctionName(level)] = function () {\n      return (this || logger).isLevelEnabled(level);\n    };\n  });\n\n  return logger;\n};\n", "/**\n * container.js: Inversion of control container for winston logger instances.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst createLogger = require('./create-logger');\n\n/**\n * Inversion of control container for winston logger instances.\n * @type {Container}\n */\nmodule.exports = class Container {\n  /**\n   * Constructor function for the Container object responsible for managing a\n   * set of `winston.Logger` instances based on string ids.\n   * @param {!Object} [options={}] - Default pass-thru options for Loggers.\n   */\n  constructor(options = {}) {\n    this.loggers = new Map();\n    this.options = options;\n  }\n\n  /**\n   * Retrieves a `winston.Logger` instance for the specified `id`. If an\n   * instance does not exist, one is created.\n   * @param {!string} id - The id of the Logger to get.\n   * @param {?Object} [options] - Options for the Logger instance.\n   * @returns {Logger} - A configured Logger instance with a specified id.\n   */\n  add(id, options) {\n    if (!this.loggers.has(id)) {\n      // Remark: Simple shallow clone for configuration options in case we pass\n      // in instantiated protoypal objects\n      options = Object.assign({}, options || this.options);\n      const existing = options.transports || this.options.transports;\n\n      // Remark: Make sure if we have an array of transports we slice it to\n      // make copies of those references.\n      if (existing) {\n        options.transports = Array.isArray(existing) ? existing.slice() : [existing];\n      } else {\n        options.transports = [];\n      }\n\n      const logger = createLogger(options);\n      logger.on('close', () => this._delete(id));\n      this.loggers.set(id, logger);\n    }\n\n    return this.loggers.get(id);\n  }\n\n  /**\n   * Retreives a `winston.Logger` instance for the specified `id`. If\n   * an instance does not exist, one is created.\n   * @param {!string} id - The id of the Logger to get.\n   * @param {?Object} [options] - Options for the Logger instance.\n   * @returns {Logger} - A configured Logger instance with a specified id.\n   */\n  get(id, options) {\n    return this.add(id, options);\n  }\n\n  /**\n   * Check if the container has a logger with the id.\n   * @param {?string} id - The id of the Logger instance to find.\n   * @returns {boolean} - Boolean value indicating if this instance has a\n   * logger with the specified `id`.\n   */\n  has(id) {\n    return !!this.loggers.has(id);\n  }\n\n  /**\n   * Closes a `Logger` instance with the specified `id` if it exists.\n   * If no `id` is supplied then all Loggers are closed.\n   * @param {?string} id - The id of the Logger instance to close.\n   * @returns {undefined}\n   */\n  close(id) {\n    if (id) {\n      return this._removeLogger(id);\n    }\n\n    this.loggers.forEach((val, key) => this._removeLogger(key));\n  }\n\n  /**\n   * Remove a logger based on the id.\n   * @param {!string} id - The id of the logger to remove.\n   * @returns {undefined}\n   * @private\n   */\n  _removeLogger(id) {\n    if (!this.loggers.has(id)) {\n      return;\n    }\n\n    const logger = this.loggers.get(id);\n    logger.close();\n    this._delete(id);\n  }\n\n  /**\n   * Deletes a `Logger` instance with the specified `id`.\n   * @param {!string} id - The id of the Logger instance to delete from\n   * container.\n   * @returns {undefined}\n   * @private\n   */\n  _delete(id) {\n    this.loggers.delete(id);\n  }\n};\n", "/**\n * winston.js: Top-level include defining Winston.\n *\n * (C) 2010 Charlie Robbins\n * MIT LICENCE\n */\n\n'use strict';\n\nconst logform = require('logform');\nconst { warn } = require('./winston/common');\n\n/**\n * Expose version. Use `require` method for `webpack` support.\n * @type {string}\n */\nexports.version = require('../package.json').version;\n/**\n * Include transports defined by default by winston\n * @type {Array}\n */\nexports.transports = require('./winston/transports');\n/**\n * Expose utility methods\n * @type {Object}\n */\nexports.config = require('./winston/config');\n/**\n * Hoist format-related functionality from logform.\n * @type {Object}\n */\nexports.addColors = logform.levels;\n/**\n * Hoist format-related functionality from logform.\n * @type {Object}\n */\nexports.format = logform.format;\n/**\n * Expose core Logging-related prototypes.\n * @type {function}\n */\nexports.createLogger = require('./winston/create-logger');\n/**\n * Expose core Logging-related prototypes.\n * @type {function}\n */\nexports.Logger = require('./winston/logger');\n/**\n * Expose core Logging-related prototypes.\n * @type {Object}\n */\nexports.ExceptionHandler = require('./winston/exception-handler');\n/**\n * Expose core Logging-related prototypes.\n * @type {Object}\n */\nexports.RejectionHandler = require('./winston/rejection-handler');\n/**\n * Expose core Logging-related prototypes.\n * @type {Container}\n */\nexports.Container = require('./winston/container');\n/**\n * Expose core Logging-related prototypes.\n * @type {Object}\n */\nexports.Transport = require('winston-transport');\n/**\n * We create and expose a default `Container` to `winston.loggers` so that the\n * programmer may manage multiple `winston.Logger` instances without any\n * additional overhead.\n * @example\n *   // some-file1.js\n *   const logger = require('winston').loggers.get('something');\n *\n *   // some-file2.js\n *   const logger = require('winston').loggers.get('something');\n */\nexports.loggers = new exports.Container();\n\n/**\n * We create and expose a 'defaultLogger' so that the programmer may do the\n * following without the need to create an instance of winston.Logger directly:\n * @example\n *   const winston = require('winston');\n *   winston.log('info', 'some message');\n *   winston.error('some error');\n */\nconst defaultLogger = exports.createLogger();\n\n// Pass through the target methods onto `winston.\nObject.keys(exports.config.npm.levels)\n  .concat([\n    'log',\n    'query',\n    'stream',\n    'add',\n    'remove',\n    'clear',\n    'profile',\n    'startTimer',\n    'handleExceptions',\n    'unhandleExceptions',\n    'handleRejections',\n    'unhandleRejections',\n    'configure',\n    'child'\n  ])\n  .forEach(\n    method => (exports[method] = (...args) => defaultLogger[method](...args))\n  );\n\n/**\n * Define getter / setter for the default logger level which need to be exposed\n * by winston.\n * @type {string}\n */\nObject.defineProperty(exports, 'level', {\n  get() {\n    return defaultLogger.level;\n  },\n  set(val) {\n    defaultLogger.level = val;\n  }\n});\n\n/**\n * Define getter for `exceptions` which replaces `handleExceptions` and\n * `unhandleExceptions`.\n * @type {Object}\n */\nObject.defineProperty(exports, 'exceptions', {\n  get() {\n    return defaultLogger.exceptions;\n  }\n});\n\n/**\n * Define getter for `rejections` which replaces `handleRejections` and\n * `unhandleRejections`.\n * @type {Object}\n */\nObject.defineProperty(exports, 'rejections', {\n  get() {\n    return defaultLogger.rejections;\n  }\n});\n\n/**\n * Define getters / setters for appropriate properties of the default logger\n * which need to be exposed by winston.\n * @type {Logger}\n */\n['exitOnError'].forEach(prop => {\n  Object.defineProperty(exports, prop, {\n    get() {\n      return defaultLogger[prop];\n    },\n    set(val) {\n      defaultLogger[prop] = val;\n    }\n  });\n});\n\n/**\n * The default transports and exceptionHandlers for the default winston logger.\n * @type {Object}\n */\nObject.defineProperty(exports, 'default', {\n  get() {\n    return {\n      exceptionHandlers: defaultLogger.exceptionHandlers,\n      rejectionHandlers: defaultLogger.rejectionHandlers,\n      transports: defaultLogger.transports\n    };\n  }\n});\n\n// Have friendlier breakage notices for properties that were exposed by default\n// on winston < 3.0.\nwarn.deprecated(exports, 'setLevels');\nwarn.forFunctions(exports, 'useFormat', ['cli']);\nwarn.forProperties(exports, 'useFormat', ['padLevels', 'stripColors']);\nwarn.forFunctions(exports, 'deprecated', [\n  'addRewriter',\n  'addFilter',\n  'clone',\n  'extend'\n]);\nwarn.forProperties(exports, 'deprecated', ['emitErrs', 'levelLength']);\n\n", "/**\n * TaskFlow AI\n * \u667A\u80FDPRD\u6587\u6863\u89E3\u6790\u4E0E\u4EFB\u52A1\u7BA1\u7406\u52A9\u624B\uFF0C\u4E13\u4E3A\u5F00\u53D1\u56E2\u961F\u8BBE\u8BA1\u7684AI\u9A71\u52A8\u4EFB\u52A1\u7F16\u6392\u5DE5\u5177\n */\n\n// \u5BFC\u51FA\u6838\u5FC3\u5F15\u64CE\nexport { TaskFlowEngine } from './core/engine/taskflow-engine';\n\n// \u5BFC\u51FA\u6838\u5FC3\u7EC4\u4EF6\nexport { PRDParser, PRDParseResult } from './core/parser/prd-parser';\nexport { TaskPlanner } from './core/planner/task-planner';\nexport { TaskManager } from './core/task/task-manager';\nexport { TaskVisualizer, VisualizationType } from './core/visualizer/task-visualizer';\n\n// \u5BFC\u51FAMCP\u670D\u52A1\u63A5\u53E3\nexport * from './mcp/service';\n\n// \u5BFC\u51FA\u4E3B\u8981\u670D\u52A1\u7C7B\nexport { TaskFlowService } from './mcp/index';\n\n// \u5BFC\u51FA\u6838\u5FC3\u7C7B\u578B\nexport { ModelType, LogLevel } from './types/config';\nexport { FileType, MessageRole, ModelCallOptions, ServiceResponse, ParseOptions } from './types/model';\nexport {\n  Task,\n  TaskPlan,\n  TaskStatus,\n  TaskPriority,\n  TaskType,\n  ParsedPRD,\n  Feature\n} from './types/task';\n\n// \u5BFC\u51FAMCP\u670D\u52A1\nexport { taskFlowService } from './mcp/index';\n\n// \u7248\u672C\u4FE1\u606F\nexport const VERSION = '1.2.0';\n", "import * as fs from 'fs-extra';\nimport * as path from 'path';\nimport { ModelCoordinator } from '../models/coordinator';\nimport { FileType, ParseOptions } from '../../types/model';\nimport { Logger } from '../../infra/logger';\n// ConfigManager \u672A\u4F7F\u7528\uFF0C\u5DF2\u79FB\u9664\nimport { DocumentProcessor, DocumentStructure, ProcessingOptions } from './document-processor';\nimport { RequirementExtractor, ExtractionOptions, ExtractionResult } from './requirement-extractor';\nimport { ParsedPRD, Feature } from '../../types/task';\n\n/**\n * PRD\u89E3\u6790\u7ED3\u679C\u63A5\u53E3\n */\nexport interface PRDParseResult {\n  title: string;\n  description: string;\n  sections: PRDSection[];\n}\n\n/**\n * PRD\u7AE0\u8282\u63A5\u53E3\n */\nexport interface PRDSection {\n  title: string;\n  content: string;\n  level: number;\n  features: PRDFeature[];\n}\n\n/**\n * PRD\u529F\u80FD\u7279\u6027\u63A5\u53E3\n */\nexport interface PRDFeature {\n  name: string;\n  description: string;\n  priority: 'high' | 'medium' | 'low';\n}\n\n/**\n * PRD\u89E3\u6790\u5668\u7C7B\n * \u8D1F\u8D23\u89E3\u6790\u4EA7\u54C1\u9700\u6C42\u6587\u6863\uFF0C\u6574\u5408\u6587\u6863\u5904\u7406\u548C\u9700\u6C42\u63D0\u53D6\u529F\u80FD\n */\nexport class PRDParser {\n  private modelCoordinator: ModelCoordinator;\n  private logger: Logger;\n  private documentProcessor: DocumentProcessor;\n  private requirementExtractor: RequirementExtractor;\n\n  /**\n   * \u521B\u5EFAPRD\u89E3\u6790\u5668\u5B9E\u4F8B\n   * @param modelCoordinator \u6A21\u578B\u534F\u8C03\u5668\u5B9E\u4F8B\n   * @param logger \u65E5\u5FD7\u8BB0\u5F55\u5668\u5B9E\u4F8B\n   */\n  constructor(modelCoordinator: ModelCoordinator, logger: Logger) {\n    this.modelCoordinator = modelCoordinator;\n    this.logger = logger;\n    this.documentProcessor = new DocumentProcessor(logger);\n    this.requirementExtractor = new RequirementExtractor(logger);\n  }\n\n  /**\n   * \u4ECE\u6587\u4EF6\u4E2D\u89E3\u6790PRD\n   * @param filePath PRD\u6587\u4EF6\u8DEF\u5F84\n   * @param options \u89E3\u6790\u9009\u9879\n   */\n  public async parseFromFile(filePath: string, options?: any): Promise<ParsedPRD> {\n    try {\n      this.logger.info(`\u5F00\u59CB\u89E3\u6790PRD\u6587\u4EF6\uFF1A${filePath}`);\n\n      // \u68C0\u67E5\u6587\u4EF6\u662F\u5426\u5B58\u5728\n      if (!await fs.pathExists(filePath)) {\n        throw new Error(`\u6587\u4EF6\u4E0D\u5B58\u5728\uFF1A${filePath}`);\n      }\n\n      // \u4F7F\u7528\u6587\u6863\u5904\u7406\u5668\u5904\u7406\u6587\u6863\n      const processingOptions: ProcessingOptions = {\n        extractTables: true,\n        extractImages: false,\n        detectLanguage: true,\n        analyzeStructure: true,\n        extractKeywords: true,\n        calculateImportance: true\n      };\n\n      const documentStructure = await this.documentProcessor.processDocument(filePath, processingOptions);\n\n      // \u4F7F\u7528\u9700\u6C42\u63D0\u53D6\u5668\u63D0\u53D6\u9700\u6C42\n      const extractionOptions: ExtractionOptions = {\n        includeUserStories: options?.extractUserStories ?? true,\n        detectDependencies: options?.detectDependencies ?? true,\n        estimateEffort: options?.estimateEffort ?? true,\n        analyzePriority: options?.analyzePriority ?? true,\n        extractAcceptanceCriteria: options?.extractAcceptanceCriteria ?? true,\n        detectStakeholders: options?.detectStakeholders ?? true\n      };\n\n      const extractionResult = await this.requirementExtractor.extractRequirements(\n        documentStructure,\n        extractionOptions\n      );\n\n      // \u8F6C\u6362\u4E3AParsedPRD\u683C\u5F0F\n      return this.convertToParseResult(documentStructure, extractionResult);\n\n    } catch (error) {\n      this.logger.error(`\u89E3\u6790PRD\u6587\u4EF6\u5931\u8D25\uFF1A${(error as Error).message}`);\n      throw error;\n    }\n  }\n\n  /**\n   * \u89E3\u6790PRD\u5185\u5BB9\n   * @param content PRD\u6587\u6863\u5185\u5BB9\n   * @param fileType \u6587\u4EF6\u7C7B\u578B\n   * @param options \u89E3\u6790\u9009\u9879\n   */\n  public async parseContent(content: string, fileType: FileType = FileType.MARKDOWN, options?: ParseOptions): Promise<PRDParseResult> {\n    try {\n      // \u5904\u7406\u4E0D\u540C\u6587\u4EF6\u7C7B\u578B\u7684\u5185\u5BB9\n      const processedContent = this.preprocessContent(content, fileType);\n\n      // \u4F7F\u7528\u6A21\u578B\u89E3\u6790\u5185\u5BB9\n      const response = await this.modelCoordinator.parsePRD(processedContent, options);\n\n      // \u89E3\u6790\u5E76\u9A8C\u8BC1\u6A21\u578B\u8FD4\u56DE\u7684JSON\u7ED3\u679C\n      try {\n        const result = JSON.parse(response.content) as PRDParseResult;\n        this.validateParseResult(result);\n        this.logger.info('PRD\u89E3\u6790\u6210\u529F');\n        return result;\n      } catch (error) {\n        this.logger.error(`\u89E3\u6790\u6A21\u578B\u8FD4\u56DE\u7ED3\u679C\u5931\u8D25\uFF1A${(error as Error).message}`);\n        throw new Error(`\u65E0\u6CD5\u89E3\u6790\u6A21\u578B\u8FD4\u56DE\u7684JSON\u7ED3\u679C\uFF1A${(error as Error).message}`);\n      }\n    } catch (error) {\n      this.logger.error(`\u89E3\u6790PRD\u5185\u5BB9\u5931\u8D25\uFF1A${(error as Error).message}`);\n      throw error;\n    }\n  }\n\n  /**\n   * \u9884\u5904\u7406\u4E0D\u540C\u7C7B\u578B\u7684\u6587\u6863\u5185\u5BB9\n   * @param content \u6587\u6863\u5185\u5BB9\n   * @param fileType \u6587\u4EF6\u7C7B\u578B\n   */\n  private preprocessContent(content: string, fileType: FileType): string {\n    // \u6839\u636E\u4E0D\u540C\u6587\u4EF6\u7C7B\u578B\u8FDB\u884C\u9884\u5904\u7406\n    switch (fileType) {\n      case FileType.MARKDOWN:\n        // Markdown\u683C\u5F0F\u4E0D\u9700\u8981\u7279\u6B8A\u5904\u7406\n        return content;\n      case FileType.JSON:\n        // \u5982\u679C\u662FJSON\u683C\u5F0F\uFF0C\u5C1D\u8BD5\u89E3\u6790\u5E76\u7F8E\u5316\u8F93\u51FA\n        try {\n          const parsed = JSON.parse(content);\n          return JSON.stringify(parsed, null, 2);\n        } catch {\n          // \u5982\u679C\u89E3\u6790\u5931\u8D25\uFF0C\u76F4\u63A5\u8FD4\u56DE\u539F\u5185\u5BB9\n          return content;\n        }\n      default:\n        // \u5176\u4ED6\u683C\u5F0F\u6682\u65F6\u4E0D\u505A\u7279\u6B8A\u5904\u7406\n        return content;\n    }\n  }\n\n  /**\n   * \u6839\u636E\u6587\u4EF6\u6269\u5C55\u540D\u68C0\u6D4B\u6587\u4EF6\u7C7B\u578B\n   * @param filePath \u6587\u4EF6\u8DEF\u5F84\n   */\n  private detectFileType(filePath: string): FileType {\n    const ext = path.extname(filePath).toLowerCase();\n\n    switch (ext) {\n      case '.md':\n      case '.markdown':\n        return FileType.MARKDOWN;\n      case '.pdf':\n        return FileType.PDF;\n      case '.docx':\n      case '.doc':\n        return FileType.WORD;\n      case '.txt':\n        return FileType.TEXT;\n      case '.json':\n        return FileType.JSON;\n      default:\n        return FileType.UNKNOWN;\n    }\n  }\n\n  /**\n   * \u9A8C\u8BC1\u89E3\u6790\u7ED3\u679C\u662F\u5426\u7B26\u5408\u9884\u671F\u683C\u5F0F\n   * @param result \u89E3\u6790\u7ED3\u679C\n   */\n  private validateParseResult(result: PRDParseResult): void {\n    // \u9A8C\u8BC1\u57FA\u672C\u7ED3\u6784\n    if (!result.title) {\n      this.logger.warn('\u89E3\u6790\u7ED3\u679C\u7F3A\u5C11\u6807\u9898');\n    }\n\n    if (!result.description) {\n      this.logger.warn('\u89E3\u6790\u7ED3\u679C\u7F3A\u5C11\u63CF\u8FF0');\n    }\n\n    if (!Array.isArray(result.sections) || result.sections.length === 0) {\n      throw new Error('\u89E3\u6790\u7ED3\u679C\u5FC5\u987B\u5305\u542B\u81F3\u5C11\u4E00\u4E2A\u7AE0\u8282');\n    }\n\n    // \u9A8C\u8BC1\u6BCF\u4E2A\u7AE0\u8282\u7684\u7ED3\u6784\n    result.sections.forEach((section, index) => {\n      if (!section.title) {\n        this.logger.warn(`\u7B2C${index + 1}\u4E2A\u7AE0\u8282\u7F3A\u5C11\u6807\u9898`);\n      }\n\n      if (!Array.isArray(section.features)) {\n        this.logger.warn(`\u7B2C${index + 1}\u4E2A\u7AE0\u8282\u7684features\u5B57\u6BB5\u4E0D\u662F\u6570\u7EC4`);\n        section.features = [];\n      }\n    });\n  }\n\n  /**\n   * \u8F6C\u6362\u4E3AParsedPRD\u683C\u5F0F\n   * @param documentStructure \u6587\u6863\u7ED3\u6784\n   * @param extractionResult \u9700\u6C42\u63D0\u53D6\u7ED3\u679C\n   */\n  private convertToParseResult(\n    documentStructure: DocumentStructure,\n    extractionResult: ExtractionResult\n  ): ParsedPRD {\n    // \u5C06\u9700\u6C42\u8F6C\u6362\u4E3A\u529F\u80FD\u7279\u6027\n    const features: Feature[] = extractionResult.requirements.map(req => ({\n      id: req.id,\n      name: req.title,\n      description: req.description,\n      priority: req.priority,\n      type: req.type as any,\n      dependencies: req.dependencies,\n      estimatedHours: req.estimatedEffort,\n      tags: req.tags,\n      acceptanceCriteria: req.acceptanceCriteria,\n      complexity: req.complexity,\n      businessValue: req.businessValue,\n      technicalRisk: req.technicalRisk,\n      stakeholders: req.stakeholders,\n      category: req.category,\n      status: 'not_started' as any,\n      createdAt: req.metadata.extractedAt,\n      updatedAt: req.metadata.extractedAt\n    }));\n\n    // \u6784\u5EFAParsedPRD\u5BF9\u8C61\n    const parsedPRD: ParsedPRD = {\n      id: `prd-${Date.now()}`,\n      title: documentStructure.title,\n      description: this.extractDescription(documentStructure),\n      sections: [], // \u4E34\u65F6\u7A7A\u6570\u7EC4\uFF0C\u540E\u7EED\u4F1A\u586B\u5145\n      metadata: {\n        version: '1.0.0',\n        features,\n        fileName: documentStructure.metadata.fileName,\n        fileSize: documentStructure.metadata.fileSize,\n        parsedAt: new Date(),\n        language: documentStructure.metadata.language,\n        wordCount: documentStructure.metadata.wordCount,\n        estimatedReadTime: documentStructure.metadata.estimatedReadTime,\n        extractionSummary: extractionResult.summary,\n        warnings: extractionResult.warnings,\n        suggestions: extractionResult.suggestions,\n        documentStructure: {\n          sectionsCount: documentStructure.sections.length,\n          maxDepth: this.calculateMaxDepth(documentStructure.sections),\n          hasTableOfContents: this.hasTableOfContents(documentStructure),\n          primaryLanguage: documentStructure.metadata.language\n        },\n        createdAt: new Date(),\n        updatedAt: new Date()\n      }\n    };\n\n    return parsedPRD;\n  }\n\n  /**\n   * \u63D0\u53D6\u6587\u6863\u63CF\u8FF0\n   * @param documentStructure \u6587\u6863\u7ED3\u6784\n   */\n  private extractDescription(documentStructure: DocumentStructure): string {\n    // \u67E5\u627E\u6982\u8FF0\u6216\u7B80\u4ECB\u7AE0\u8282\n    const overviewSection = documentStructure.sections.find(section =>\n      section.type === 'overview' ||\n      section.title.toLowerCase().includes('\u6982\u8FF0') ||\n      section.title.toLowerCase().includes('\u7B80\u4ECB') ||\n      section.title.toLowerCase().includes('overview')\n    );\n\n    if (overviewSection) {\n      return overviewSection.content.substring(0, 500).trim();\n    }\n\n    // \u5982\u679C\u6CA1\u6709\u627E\u5230\u6982\u8FF0\u7AE0\u8282\uFF0C\u4F7F\u7528\u7B2C\u4E00\u4E2A\u7AE0\u8282\u7684\u5185\u5BB9\n    if (documentStructure.sections.length > 0) {\n      return documentStructure.sections[0].content.substring(0, 500).trim();\n    }\n\n    return '\u4ECEPRD\u6587\u6863\u81EA\u52A8\u63D0\u53D6\u7684\u4EA7\u54C1\u9700\u6C42';\n  }\n\n  /**\n   * \u8BA1\u7B97\u6700\u5927\u6DF1\u5EA6\n   * @param sections \u7AE0\u8282\u5217\u8868\n   */\n  private calculateMaxDepth(sections: any[]): number {\n    let maxDepth = 0;\n\n    const calculateDepth = (sectionList: any[], currentDepth: number = 1): void => {\n      maxDepth = Math.max(maxDepth, currentDepth);\n\n      sectionList.forEach(section => {\n        if (section.subsections && section.subsections.length > 0) {\n          calculateDepth(section.subsections, currentDepth + 1);\n        }\n      });\n    };\n\n    calculateDepth(sections);\n    return maxDepth;\n  }\n\n  /**\n   * \u68C0\u67E5\u662F\u5426\u6709\u76EE\u5F55\n   * @param documentStructure \u6587\u6863\u7ED3\u6784\n   */\n  private hasTableOfContents(documentStructure: DocumentStructure): boolean {\n    return documentStructure.sections.some(section =>\n      section.title.toLowerCase().includes('\u76EE\u5F55') ||\n      section.title.toLowerCase().includes('contents') ||\n      section.title.toLowerCase().includes('toc')\n    );\n  }\n}", "/**\n * \u6A21\u578B\u76F8\u5173\u7C7B\u578B\u5B9A\u4E49\n */\n\n/**\n * \u670D\u52A1\u54CD\u5E94\u7C7B\u578B\n */\nexport interface ServiceResponse<T> {\n  success: boolean;\n  data?: T;\n  error?: string;\n}\nimport { ModelType } from './config';\n\n/**\n * \u6D88\u606F\u89D2\u8272\n */\nexport enum MessageRole {\n  USER = 'user',\n  ASSISTANT = 'assistant',\n  SYSTEM = 'system',\n}\n\n/**\n * \u804A\u5929\u6D88\u606F\n */\nexport interface ChatMessage {\n  role: MessageRole;\n  content: string;\n}\n\n/**\n * \u57FA\u672C\u6A21\u578B\u8BF7\u6C42\u53C2\u6570\n */\nexport interface ModelRequestParams {\n  messages: ChatMessage[];\n  temperature?: number;\n  maxTokens?: number;\n  topP?: number;\n  frequencyPenalty?: number;\n  presencePenalty?: number;\n  stopSequences?: string[];\n}\n\n/**\n * \u57FA\u672C\u6A21\u578B\u54CD\u5E94\n */\nexport interface ModelResponse {\n  content: string;\n  finishReason?: string;\n  usage?: {\n    promptTokens: number;\n    completionTokens: number;\n    totalTokens: number;\n  };\n}\n\n/**\n * \u6A21\u578B\u8C03\u7528\u9009\u9879\n */\nexport interface ModelCallOptions {\n  temperature?: number;\n  maxTokens?: number;\n  stream?: boolean;\n  timeout?: number;\n}\n\n/**\n * \u6A21\u578B\u670D\u52A1\u80FD\u529B\n */\nexport interface ModelCapabilities {\n  modelType: ModelType;\n  maxContextLength: number;\n  supportsStreaming: boolean;\n  supportsFunctionCalling?: boolean;\n  supportsMultimodalInput?: boolean;\n  supportsVision?: boolean;\n  maxResponseTokens: number;\n}\n\n/**\n * \u591A\u6A21\u578B\u914D\u7F6E\n */\nexport interface MultiModelConfig {\n  enabled: boolean;\n  primary: ModelType;\n  fallback: ModelType[];\n  loadBalancing?: boolean;\n  costOptimization?: boolean;\n}\n\n/**\n * PRD\u89E3\u6790\u9009\u9879\n */\nexport interface ParseOptions {\n  modelType?: ModelType;\n  multiModel?: MultiModelConfig;\n  extractSections?: boolean;\n  extractFeatures?: boolean;\n  prioritize?: boolean;\n  outputPath?: string;\n}\n\n/**\n * \u4EFB\u52A1\u89C4\u5212\u9009\u9879\n */\nexport interface PlanningOptions {\n  modelType?: ModelType;\n  taskTemplate?: string;\n  estimateDuration?: boolean;\n  assignTasks?: boolean;\n  suggestDependencies?: boolean;\n  // \u4EFB\u52A1\u7F16\u6392\u9009\u9879\n  optimizeForTime?: boolean;\n  optimizeForResources?: boolean;\n  considerTeamSize?: number;\n  maxParallelTasks?: number;\n  includeTestTasks?: boolean;\n  includeDocTasks?: boolean;\n}\n\n/**\n * \u6D4B\u8BD5\u751F\u6210\u9009\u9879\n */\nexport interface TestGenerationOptions {\n  modelType?: ModelType;\n  framework?: string;\n  coverage?: boolean;\n  includeEdgeCases?: boolean;\n  mockDependencies?: boolean;\n}\n\n/**\n * \u6587\u4EF6\u7C7B\u578B\n */\nexport enum FileType {\n  MARKDOWN = 'markdown',\n  PDF = 'pdf',\n  WORD = 'word',\n  TEXT = 'text',\n  JSON = 'json',\n  UNKNOWN = 'unknown',\n}\n\n/**\n * \u767E\u5EA6\u6587\u5FC3API\u8BF7\u6C42\u4F53\n */\nexport interface BaiduRequestBody {\n  messages: {\n    role: string;\n    content: string;\n  }[];\n  temperature?: number;\n  top_p?: number;\n  stream?: boolean;\n  user_id?: string;\n}\n\n/**\n * \u767E\u5EA6\u6587\u5FC3API\u54CD\u5E94\u4F53\n */\nexport interface BaiduResponseBody {\n  id: string;\n  object: string;\n  created: number;\n  sentence_id?: number;\n  is_end?: boolean;\n  result: string;\n  need_clear_history: boolean;\n  usage: {\n    prompt_tokens: number;\n    completion_tokens: number;\n    total_tokens: number;\n  };\n}\n\n/**\n * \u8BAF\u98DE\u661F\u706BAPI\u8BF7\u6C42\u4F53\n */\nexport interface XunfeiRequestBody {\n  header: {\n    app_id: string;\n    uid?: string;\n  };\n  parameter: {\n    chat: {\n      domain: string;\n      temperature?: number;\n      max_tokens?: number;\n      top_k?: number;\n    };\n  };\n  payload: {\n    message: {\n      text: {\n        role: string;\n        content: string;\n      }[];\n    };\n  };\n}\n\n/**\n * \u8BAF\u98DE\u661F\u706BAPI\u54CD\u5E94\u4F53\n */\nexport interface XunfeiResponseBody {\n  header: {\n    code: number;\n    message: string;\n    sid: string;\n    status: number;\n  };\n  payload: {\n    choices: {\n      status: number;\n      seq: number;\n      text: {\n        content: string;\n        role: string;\n      }[];\n    };\n    usage?: {\n      text: {\n        prompt_tokens: number;\n        completion_tokens: number;\n        total_tokens: number;\n      };\n    };\n  };\n}\n\n/**\n * \u667A\u8C31API\u8BF7\u6C42\u4F53\n */\nexport interface ZhipuRequestBody {\n  model: string;\n  messages: {\n    role: string;\n    content: string;\n  }[];\n  temperature?: number;\n  top_p?: number;\n  max_tokens?: number;\n  stream?: boolean;\n}\n\n/**\n * \u667A\u8C31API\u54CD\u5E94\u4F53\n */\nexport interface ZhipuResponseBody {\n  id: string;\n  created: number;\n  model: string;\n  choices: {\n    index: number;\n    message: {\n      role: string;\n      content: string;\n    };\n    finish_reason: string;\n  }[];\n  usage: {\n    prompt_tokens: number;\n    completion_tokens: number;\n    total_tokens: number;\n  };\n}\n\n/**\n * DeepSeek API\u8BF7\u6C42\u4F53\n */\nexport interface DeepseekRequestBody {\n  model: string;\n  messages: {\n    role: string;\n    content: string;\n  }[];\n  temperature?: number;\n  top_p?: number;\n  max_tokens?: number;\n  stream?: boolean;\n}\n\n/**\n * DeepSeek API\u54CD\u5E94\u4F53\n */\nexport interface DeepseekResponseBody {\n  id: string;\n  object: string;\n  created: number;\n  model: string;\n  choices: {\n    index: number;\n    message: {\n      role: string;\n      content: string;\n    };\n    finish_reason: string;\n  }[];\n  usage: {\n    prompt_tokens: number;\n    completion_tokens: number;\n    total_tokens: number;\n  };\n} ", "/**\n * \u6587\u6863\u5904\u7406\u5668 - \u652F\u6301\u591A\u79CD\u683C\u5F0F\u7684\u6587\u6863\u89E3\u6790\n * \u4F5C\u4E3APRD\u89E3\u6790\u5F15\u64CE\u7684\u6838\u5FC3\u7EC4\u4EF6\n */\n\nimport * as fs from 'fs-extra';\nimport * as path from 'path';\nimport MarkdownIt from 'markdown-it';\nimport { Logger } from '../../infra/logger';\n\n/**\n * \u6587\u6863\u7C7B\u578B\u679A\u4E3E\n */\nexport enum DocumentType {\n  MARKDOWN = 'markdown',\n  TEXT = 'text',\n  JSON = 'json',\n  HTML = 'html',\n  WORD = 'word',\n  PDF = 'pdf'\n}\n\n/**\n * \u6587\u6863\u7ED3\u6784\u63A5\u53E3\n */\nexport interface DocumentStructure {\n  title: string;\n  sections: DocumentSection[];\n  metadata: DocumentMetadata;\n}\n\n/**\n * \u6587\u6863\u7AE0\u8282\u63A5\u53E3\n */\nexport interface DocumentSection {\n  id: string;\n  title: string;\n  content: string;\n  level: number;\n  subsections: DocumentSection[];\n  type: SectionType;\n  keywords: string[];\n  importance: number; // 0-1 \u91CD\u8981\u6027\u8BC4\u5206\n}\n\n/**\n * \u7AE0\u8282\u7C7B\u578B\u679A\u4E3E\n */\nexport enum SectionType {\n  OVERVIEW = 'overview',\n  REQUIREMENTS = 'requirements',\n  FEATURES = 'features',\n  TECHNICAL = 'technical',\n  TIMELINE = 'timeline',\n  RESOURCES = 'resources',\n  APPENDIX = 'appendix',\n  OTHER = 'other'\n}\n\n/**\n * \u6587\u6863\u5143\u6570\u636E\u63A5\u53E3\n */\nexport interface DocumentMetadata {\n  fileName: string;\n  fileSize: number;\n  createdAt: Date;\n  modifiedAt: Date;\n  documentType: DocumentType;\n  language: string;\n  wordCount: number;\n  estimatedReadTime: number; // \u5206\u949F\n}\n\n/**\n * \u6587\u6863\u5904\u7406\u9009\u9879\n */\nexport interface ProcessingOptions {\n  extractTables?: boolean;\n  extractImages?: boolean;\n  detectLanguage?: boolean;\n  analyzeStructure?: boolean;\n  extractKeywords?: boolean;\n  calculateImportance?: boolean;\n}\n\n/**\n * \u6587\u6863\u5904\u7406\u5668\u7C7B\n */\nexport class DocumentProcessor {\n  private logger: Logger;\n  private markdownParser: MarkdownIt;\n\n  constructor(logger: Logger) {\n    this.logger = logger;\n    this.markdownParser = new MarkdownIt({\n      html: true,\n      linkify: true,\n      typographer: true\n    });\n  }\n\n  /**\n   * \u5904\u7406\u6587\u6863\u6587\u4EF6\n   * @param filePath \u6587\u4EF6\u8DEF\u5F84\n   * @param options \u5904\u7406\u9009\u9879\n   */\n  public async processDocument(\n    filePath: string, \n    options: ProcessingOptions = {}\n  ): Promise<DocumentStructure> {\n    try {\n      this.logger.info(`\u5F00\u59CB\u5904\u7406\u6587\u6863: ${filePath}`);\n\n      // \u68C0\u67E5\u6587\u4EF6\u662F\u5426\u5B58\u5728\n      if (!await fs.pathExists(filePath)) {\n        throw new Error(`\u6587\u4EF6\u4E0D\u5B58\u5728: ${filePath}`);\n      }\n\n      // \u83B7\u53D6\u6587\u4EF6\u4FE1\u606F\n      const stats = await fs.stat(filePath);\n      const documentType = this.detectDocumentType(filePath);\n\n      // \u8BFB\u53D6\u6587\u4EF6\u5185\u5BB9\n      const content = await this.readFileContent(filePath, documentType);\n\n      // \u751F\u6210\u5143\u6570\u636E\n      const metadata: DocumentMetadata = {\n        fileName: path.basename(filePath),\n        fileSize: stats.size,\n        createdAt: stats.birthtime,\n        modifiedAt: stats.mtime,\n        documentType,\n        language: options.detectLanguage ? this.detectLanguage(content) : 'zh-CN',\n        wordCount: this.countWords(content),\n        estimatedReadTime: Math.ceil(this.countWords(content) / 200) // \u5047\u8BBE\u6BCF\u5206\u949F200\u5B57\n      };\n\n      // \u89E3\u6790\u6587\u6863\u7ED3\u6784\n      const sections = await this.parseDocumentStructure(content, documentType, options);\n\n      const documentStructure: DocumentStructure = {\n        title: this.extractTitle(content, documentType) || metadata.fileName,\n        sections,\n        metadata\n      };\n\n      this.logger.info(`\u6587\u6863\u5904\u7406\u5B8C\u6210: ${sections.length} \u4E2A\u7AE0\u8282`);\n      return documentStructure;\n\n    } catch (error) {\n      this.logger.error(`\u6587\u6863\u5904\u7406\u5931\u8D25: ${(error as Error).message}`);\n      throw error;\n    }\n  }\n\n  /**\n   * \u68C0\u6D4B\u6587\u6863\u7C7B\u578B\n   * @param filePath \u6587\u4EF6\u8DEF\u5F84\n   */\n  private detectDocumentType(filePath: string): DocumentType {\n    const ext = path.extname(filePath).toLowerCase();\n    \n    switch (ext) {\n      case '.md':\n      case '.markdown':\n        return DocumentType.MARKDOWN;\n      case '.txt':\n        return DocumentType.TEXT;\n      case '.json':\n        return DocumentType.JSON;\n      case '.html':\n      case '.htm':\n        return DocumentType.HTML;\n      case '.docx':\n      case '.doc':\n        return DocumentType.WORD;\n      case '.pdf':\n        return DocumentType.PDF;\n      default:\n        return DocumentType.TEXT;\n    }\n  }\n\n  /**\n   * \u8BFB\u53D6\u6587\u4EF6\u5185\u5BB9\n   * @param filePath \u6587\u4EF6\u8DEF\u5F84\n   * @param documentType \u6587\u6863\u7C7B\u578B\n   */\n  private async readFileContent(filePath: string, documentType: DocumentType): Promise<string> {\n    switch (documentType) {\n      case DocumentType.MARKDOWN:\n      case DocumentType.TEXT:\n      case DocumentType.HTML:\n      case DocumentType.JSON:\n        return await fs.readFile(filePath, 'utf-8');\n      \n      case DocumentType.WORD:\n        // TODO: \u5B9E\u73B0Word\u6587\u6863\u89E3\u6790\n        this.logger.warn('Word\u6587\u6863\u89E3\u6790\u6682\u672A\u5B9E\u73B0\uFF0C\u5C06\u4F5C\u4E3A\u6587\u672C\u5904\u7406');\n        return await fs.readFile(filePath, 'utf-8');\n      \n      case DocumentType.PDF:\n        // TODO: \u5B9E\u73B0PDF\u6587\u6863\u89E3\u6790\n        this.logger.warn('PDF\u6587\u6863\u89E3\u6790\u6682\u672A\u5B9E\u73B0\uFF0C\u5C06\u4F5C\u4E3A\u6587\u672C\u5904\u7406');\n        return await fs.readFile(filePath, 'utf-8');\n      \n      default:\n        return await fs.readFile(filePath, 'utf-8');\n    }\n  }\n\n  /**\n   * \u89E3\u6790\u6587\u6863\u7ED3\u6784\n   * @param content \u6587\u6863\u5185\u5BB9\n   * @param documentType \u6587\u6863\u7C7B\u578B\n   * @param options \u5904\u7406\u9009\u9879\n   */\n  private async parseDocumentStructure(\n    content: string, \n    documentType: DocumentType, \n    options: ProcessingOptions\n  ): Promise<DocumentSection[]> {\n    switch (documentType) {\n      case DocumentType.MARKDOWN:\n        return this.parseMarkdownStructure(content, options);\n      case DocumentType.TEXT:\n        return this.parseTextStructure(content, options);\n      case DocumentType.JSON:\n        return this.parseJsonStructure(content, options);\n      case DocumentType.HTML:\n        return this.parseHtmlStructure(content, options);\n      default:\n        return this.parseTextStructure(content, options);\n    }\n  }\n\n  /**\n   * \u89E3\u6790Markdown\u6587\u6863\u7ED3\u6784\n   * @param content Markdown\u5185\u5BB9\n   * @param options \u5904\u7406\u9009\u9879\n   */\n  private parseMarkdownStructure(content: string, options: ProcessingOptions): DocumentSection[] {\n    const sections: DocumentSection[] = [];\n    const lines = content.split('\\n');\n    let currentSection: DocumentSection | null = null;\n    let sectionCounter = 0;\n\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i].trim();\n      \n      // \u68C0\u6D4B\u6807\u9898\n      const headerMatch = line.match(/^(#{1,6})\\s+(.+)$/);\n      if (headerMatch) {\n        const level = headerMatch[1].length;\n        const title = headerMatch[2].trim();\n        \n        // \u4FDD\u5B58\u4E0A\u4E00\u4E2A\u7AE0\u8282\n        if (currentSection) {\n          sections.push(currentSection);\n        }\n        \n        // \u521B\u5EFA\u65B0\u7AE0\u8282\n        currentSection = {\n          id: `section-${++sectionCounter}`,\n          title,\n          content: '',\n          level,\n          subsections: [],\n          type: this.classifySectionType(title),\n          keywords: options.extractKeywords ? this.extractKeywords(title) : [],\n          importance: options.calculateImportance ? this.calculateImportance(title, '') : 0.5\n        };\n      } else if (currentSection && line) {\n        // \u6DFB\u52A0\u5185\u5BB9\u5230\u5F53\u524D\u7AE0\u8282\n        currentSection.content += line + '\\n';\n      }\n    }\n\n    // \u6DFB\u52A0\u6700\u540E\u4E00\u4E2A\u7AE0\u8282\n    if (currentSection) {\n      sections.push(currentSection);\n    }\n\n    // \u540E\u5904\u7406\uFF1A\u66F4\u65B0\u91CD\u8981\u6027\u8BC4\u5206\u548C\u5173\u952E\u8BCD\n    if (options.calculateImportance || options.extractKeywords) {\n      sections.forEach(section => {\n        if (options.extractKeywords) {\n          section.keywords = this.extractKeywords(section.title + ' ' + section.content);\n        }\n        if (options.calculateImportance) {\n          section.importance = this.calculateImportance(section.title, section.content);\n        }\n      });\n    }\n\n    return this.buildSectionHierarchy(sections);\n  }\n\n  /**\n   * \u89E3\u6790\u7EAF\u6587\u672C\u6587\u6863\u7ED3\u6784\n   * @param content \u6587\u672C\u5185\u5BB9\n   * @param options \u5904\u7406\u9009\u9879\n   */\n  private parseTextStructure(content: string, options: ProcessingOptions): DocumentSection[] {\n    const sections: DocumentSection[] = [];\n    const paragraphs = content.split(/\\n\\s*\\n/).filter(p => p.trim());\n    \n    paragraphs.forEach((paragraph, index) => {\n      const lines = paragraph.trim().split('\\n');\n      const title = lines[0].trim();\n      const content = lines.slice(1).join('\\n').trim();\n      \n      sections.push({\n        id: `section-${index + 1}`,\n        title: title || `\u6BB5\u843D ${index + 1}`,\n        content,\n        level: 1,\n        subsections: [],\n        type: this.classifySectionType(title),\n        keywords: options.extractKeywords ? this.extractKeywords(paragraph) : [],\n        importance: options.calculateImportance ? this.calculateImportance(title, content) : 0.5\n      });\n    });\n\n    return sections;\n  }\n\n  /**\n   * \u89E3\u6790JSON\u6587\u6863\u7ED3\u6784\n   * @param content JSON\u5185\u5BB9\n   * @param options \u5904\u7406\u9009\u9879\n   */\n  private parseJsonStructure(content: string, _options: ProcessingOptions): DocumentSection[] {\n    try {\n      const data = JSON.parse(content);\n      const sections: DocumentSection[] = [];\n      \n      if (Array.isArray(data)) {\n        data.forEach((item, index) => {\n          sections.push(this.createSectionFromObject(item, `item-${index}`, 1));\n        });\n      } else if (typeof data === 'object') {\n        Object.entries(data).forEach(([key, value], index) => {\n          sections.push(this.createSectionFromObject(\n            { [key]: value }, \n            `section-${index + 1}`, \n            1\n          ));\n        });\n      }\n\n      return sections;\n    } catch (error) {\n      this.logger.error(`JSON\u89E3\u6790\u5931\u8D25: ${(error as Error).message}`);\n      return [];\n    }\n  }\n\n  /**\n   * \u89E3\u6790HTML\u6587\u6863\u7ED3\u6784\n   * @param content HTML\u5185\u5BB9\n   * @param options \u5904\u7406\u9009\u9879\n   */\n  private parseHtmlStructure(content: string, options: ProcessingOptions): DocumentSection[] {\n    // \u7B80\u5316\u7684HTML\u89E3\u6790\uFF0C\u63D0\u53D6\u6807\u9898\u548C\u5185\u5BB9\n    const sections: DocumentSection[] = [];\n    const headerRegex = /<h([1-6])[^>]*>(.*?)<\\/h[1-6]>/gi;\n    let match;\n    let sectionCounter = 0;\n\n    while ((match = headerRegex.exec(content)) !== null) {\n      const level = parseInt(match[1]);\n      const title = match[2].replace(/<[^>]*>/g, '').trim();\n      \n      sections.push({\n        id: `section-${++sectionCounter}`,\n        title,\n        content: '', // TODO: \u63D0\u53D6\u5BF9\u5E94\u7684\u5185\u5BB9\n        level,\n        subsections: [],\n        type: this.classifySectionType(title),\n        keywords: options.extractKeywords ? this.extractKeywords(title) : [],\n        importance: options.calculateImportance ? this.calculateImportance(title, '') : 0.5\n      });\n    }\n\n    return this.buildSectionHierarchy(sections);\n  }\n\n  /**\n   * \u4ECE\u5BF9\u8C61\u521B\u5EFA\u7AE0\u8282\n   * @param obj \u5BF9\u8C61\n   * @param id \u7AE0\u8282ID\n   * @param level \u5C42\u7EA7\n   */\n  private createSectionFromObject(obj: any, id: string, level: number): DocumentSection {\n    const title = typeof obj === 'object' && obj !== null ? \n      Object.keys(obj)[0] || id : \n      String(obj);\n    \n    const content = typeof obj === 'object' && obj !== null ? \n      JSON.stringify(obj, null, 2) : \n      String(obj);\n\n    return {\n      id,\n      title,\n      content,\n      level,\n      subsections: [],\n      type: this.classifySectionType(title),\n      keywords: this.extractKeywords(content),\n      importance: this.calculateImportance(title, content)\n    };\n  }\n\n  /**\n   * \u6784\u5EFA\u7AE0\u8282\u5C42\u6B21\u7ED3\u6784\n   * @param sections \u6241\u5E73\u7684\u7AE0\u8282\u5217\u8868\n   */\n  private buildSectionHierarchy(sections: DocumentSection[]): DocumentSection[] {\n    const result: DocumentSection[] = [];\n    const stack: DocumentSection[] = [];\n\n    for (const section of sections) {\n      // \u627E\u5230\u5408\u9002\u7684\u7236\u7EA7\n      while (stack.length > 0 && stack[stack.length - 1].level >= section.level) {\n        stack.pop();\n      }\n\n      if (stack.length === 0) {\n        // \u9876\u7EA7\u7AE0\u8282\n        result.push(section);\n      } else {\n        // \u5B50\u7AE0\u8282\n        stack[stack.length - 1].subsections.push(section);\n      }\n\n      stack.push(section);\n    }\n\n    return result;\n  }\n\n  /**\n   * \u5206\u7C7B\u7AE0\u8282\u7C7B\u578B\n   * @param title \u7AE0\u8282\u6807\u9898\n   */\n  private classifySectionType(title: string): SectionType {\n    const titleLower = title.toLowerCase();\n    \n    if (titleLower.includes('\u6982\u8FF0') || titleLower.includes('overview') || titleLower.includes('\u7B80\u4ECB')) {\n      return SectionType.OVERVIEW;\n    }\n    if (titleLower.includes('\u9700\u6C42') || titleLower.includes('requirement')) {\n      return SectionType.REQUIREMENTS;\n    }\n    if (titleLower.includes('\u529F\u80FD') || titleLower.includes('feature')) {\n      return SectionType.FEATURES;\n    }\n    if (titleLower.includes('\u6280\u672F') || titleLower.includes('technical') || titleLower.includes('\u67B6\u6784')) {\n      return SectionType.TECHNICAL;\n    }\n    if (titleLower.includes('\u65F6\u95F4') || titleLower.includes('timeline') || titleLower.includes('\u8BA1\u5212')) {\n      return SectionType.TIMELINE;\n    }\n    if (titleLower.includes('\u8D44\u6E90') || titleLower.includes('resource')) {\n      return SectionType.RESOURCES;\n    }\n    if (titleLower.includes('\u9644\u5F55') || titleLower.includes('appendix')) {\n      return SectionType.APPENDIX;\n    }\n    \n    return SectionType.OTHER;\n  }\n\n  /**\n   * \u63D0\u53D6\u5173\u952E\u8BCD\n   * @param text \u6587\u672C\u5185\u5BB9\n   */\n  private extractKeywords(text: string): string[] {\n    // \u7B80\u5316\u7684\u5173\u952E\u8BCD\u63D0\u53D6\n    const words = text\n      .toLowerCase()\n      .replace(/[^\\u4e00-\\u9fa5a-zA-Z0-9\\s]/g, ' ')\n      .split(/\\s+/)\n      .filter(word => word.length > 1);\n    \n    // \u7EDF\u8BA1\u8BCD\u9891\n    const wordCount = new Map<string, number>();\n    words.forEach(word => {\n      wordCount.set(word, (wordCount.get(word) || 0) + 1);\n    });\n    \n    // \u8FD4\u56DE\u51FA\u73B0\u9891\u7387\u6700\u9AD8\u7684\u8BCD\n    return Array.from(wordCount.entries())\n      .sort((a, b) => b[1] - a[1])\n      .slice(0, 10)\n      .map(([word]) => word);\n  }\n\n  /**\n   * \u8BA1\u7B97\u7AE0\u8282\u91CD\u8981\u6027\n   * @param title \u6807\u9898\n   * @param content \u5185\u5BB9\n   */\n  private calculateImportance(title: string, content: string): number {\n    let score = 0.5; // \u57FA\u7840\u5206\u6570\n    \n    // \u57FA\u4E8E\u6807\u9898\u7684\u91CD\u8981\u6027\u5173\u952E\u8BCD\n    const importantKeywords = [\n      '\u6838\u5FC3', '\u5173\u952E', '\u91CD\u8981', '\u5FC5\u987B', '\u4E3B\u8981', 'core', 'key', 'important', 'critical', 'main'\n    ];\n    \n    const titleLower = title.toLowerCase();\n    importantKeywords.forEach(keyword => {\n      if (titleLower.includes(keyword)) {\n        score += 0.1;\n      }\n    });\n    \n    // \u57FA\u4E8E\u5185\u5BB9\u957F\u5EA6\n    const contentLength = content.length;\n    if (contentLength > 1000) score += 0.1;\n    if (contentLength > 2000) score += 0.1;\n    \n    // \u57FA\u4E8E\u7AE0\u8282\u7C7B\u578B\n    const sectionType = this.classifySectionType(title);\n    switch (sectionType) {\n      case SectionType.REQUIREMENTS:\n      case SectionType.FEATURES:\n        score += 0.2;\n        break;\n      case SectionType.TECHNICAL:\n        score += 0.15;\n        break;\n      case SectionType.OVERVIEW:\n        score += 0.1;\n        break;\n    }\n    \n    return Math.min(1.0, score);\n  }\n\n  /**\n   * \u63D0\u53D6\u6587\u6863\u6807\u9898\n   * @param content \u6587\u6863\u5185\u5BB9\n   * @param documentType \u6587\u6863\u7C7B\u578B\n   */\n  private extractTitle(content: string, documentType: DocumentType): string | null {\n    switch (documentType) {\n      case DocumentType.MARKDOWN: {\n        const mdTitleMatch = content.match(/^#\\s+(.+)$/m);\n        return mdTitleMatch ? mdTitleMatch[1].trim() : null;\n      }\n\n      case DocumentType.HTML: {\n        const htmlTitleMatch = content.match(/<h1[^>]*>(.*?)<\\/h1>/i);\n        return htmlTitleMatch ? htmlTitleMatch[1].replace(/<[^>]*>/g, '').trim() : null;\n      }\n\n      default: {\n        const firstLine = content.split('\\n')[0].trim();\n        return firstLine.length > 0 && firstLine.length < 100 ? firstLine : null;\n      }\n    }\n  }\n\n  /**\n   * \u68C0\u6D4B\u6587\u6863\u8BED\u8A00\n   * @param content \u6587\u6863\u5185\u5BB9\n   */\n  private detectLanguage(content: string): string {\n    // \u7B80\u5316\u7684\u8BED\u8A00\u68C0\u6D4B\n    const chineseChars = content.match(/[\\u4e00-\\u9fa5]/g);\n    const totalChars = content.replace(/\\s/g, '').length;\n    \n    if (chineseChars && chineseChars.length / totalChars > 0.3) {\n      return 'zh-CN';\n    }\n    \n    return 'en-US';\n  }\n\n  /**\n   * \u7EDF\u8BA1\u5355\u8BCD\u6570\u91CF\n   * @param content \u6587\u6863\u5185\u5BB9\n   */\n  private countWords(content: string): number {\n    // \u4E2D\u82F1\u6587\u6DF7\u5408\u7684\u5355\u8BCD\u7EDF\u8BA1\n    const chineseChars = content.match(/[\\u4e00-\\u9fa5]/g);\n    const englishWords = content.match(/[a-zA-Z]+/g);\n    \n    const chineseCount = chineseChars ? chineseChars.length : 0;\n    const englishCount = englishWords ? englishWords.length : 0;\n    \n    return chineseCount + englishCount;\n  }\n}\n", "/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * TaskFlow AI \u4EFB\u52A1\u76F8\u5173\u7C7B\u578B\u5B9A\u4E49\n */\n\n/**\n * \u4EFB\u52A1\u72B6\u6001\u679A\u4E3E\n */\nexport enum TaskStatus {\n  NOT_STARTED = 'not_started',   // \u672A\u5F00\u59CB\n  PENDING = 'pending',           // \u7B49\u5F85\u4E2D\n  IN_PROGRESS = 'in_progress',   // \u8FDB\u884C\u4E2D\n  RUNNING = 'running',           // \u6267\u884C\u4E2D\n  COMPLETED = 'completed',       // \u5DF2\u5B8C\u6210\n  DONE = 'done',                 // \u5B8C\u6210\uFF08\u517C\u5BB9\u6027\uFF09\n  CANCELLED = 'cancelled',       // \u5DF2\u53D6\u6D88\n  FAILED = 'failed',             // \u5931\u8D25\n  BLOCKED = 'blocked',           // \u88AB\u963B\u585E\n  ON_HOLD = 'on_hold',          // \u6682\u505C\n  REVIEW = 'review',            // \u5BA1\u6838\u4E2D\n  TODO = 'todo',                // \u5F85\u529E\uFF08\u517C\u5BB9\u6027\uFF09\n}\n\n/**\n * \u4EFB\u52A1\u4F18\u5148\u7EA7\n */\nexport enum TaskPriority {\n  LOW = 'low',\n  MEDIUM = 'medium',\n  HIGH = 'high',\n  CRITICAL = 'critical',\n}\n\n/**\n * \u4EFB\u52A1\u7C7B\u578B\n */\nexport enum TaskType {\n  FEATURE = 'feature',           // \u529F\u80FD\u5F00\u53D1\n  BUG_FIX = 'bug_fix',          // \u7F3A\u9677\u4FEE\u590D\n  REFACTOR = 'refactor',        // \u4EE3\u7801\u91CD\u6784\n  TEST = 'test',                // \u6D4B\u8BD5\u4EFB\u52A1\n  DOCUMENT = 'document',        // \u6587\u6863\u4EFB\u52A1\n  ANALYSIS = 'analysis',        // \u5206\u6790\u4EFB\u52A1\n  DESIGN = 'design',            // \u8BBE\u8BA1\u4EFB\u52A1\n  DEPLOYMENT = 'deployment',    // \u90E8\u7F72\u4EFB\u52A1\n  RESEARCH = 'research',        // \u7814\u7A76\u4EFB\u52A1\n}\n\n/**\n * \u57FA\u672C\u4EFB\u52A1\u63A5\u53E3\n */\nexport interface Task {\n  id: string;\n  name: string;                  // \u4EFB\u52A1\u540D\u79F0\n  title: string;                 // \u4EFB\u52A1\u6807\u9898\uFF08\u517C\u5BB9\u6027\uFF09\n  description: string;\n  status: TaskStatus;\n  priority: TaskPriority;\n  type: TaskType;\n  dependencies: string[];        // \u4F9D\u8D56\u4EFB\u52A1\u7684ID\u5217\u8868\n  estimatedHours?: number;       // \u9884\u8BA1\u8017\u65F6(\u5C0F\u65F6)\n  actualHours?: number;          // \u5B9E\u9645\u8017\u65F6(\u5C0F\u65F6)\n  createdAt: Date;\n  updatedAt: Date;\n  startedAt?: Date;\n  completedAt?: Date;\n  dueDate?: Date;                // \u622A\u6B62\u65E5\u671F\n  assignee?: string;             // \u8D1F\u8D23\u4EBA\n  tags: string[];                // \u6807\u7B7E\n  acceptance?: string[];         // \u9A8C\u6536\u6807\u51C6\n  notes?: string;                // \u5907\u6CE8\n  progress?: number;             // \u8FDB\u5EA6\u767E\u5206\u6BD4 (0-100)\n  metadata?: Record<string, any>; // \u5143\u6570\u636E\n  subtasks?: Task[];             // \u5B50\u4EFB\u52A1\u5217\u8868\n}\n\n/**\n * \u590D\u5408\u4EFB\u52A1\uFF08\u5305\u542B\u5B50\u4EFB\u52A1\uFF09\n */\nexport interface CompositeTask extends Task {\n  subtasks: Task[];\n}\n\n/**\n * \u6D4B\u8BD5\u7528\u4F8B\n */\nexport interface TestCase {\n  id: string;\n  taskId: string;\n  name: string;\n  description: string;\n  steps: string[];\n  expectedResults: string[];\n  framework?: string;\n  filePath?: string;\n  status?: 'passed' | 'failed' | 'pending';\n}\n\n/**\n * \u4EFB\u52A1\u6267\u884C\u7ED3\u679C\n */\nexport interface TaskResult {\n  taskId: string;\n  success: boolean;\n  message?: string;\n  artifacts?: string[];\n  duration?: number;\n  startTime: Date;\n  endTime?: Date;\n  testResults?: TestResult[];\n}\n\n/**\n * \u6D4B\u8BD5\u7ED3\u679C\n */\nexport interface TestResult {\n  testCaseId: string;\n  passed: boolean;\n  message?: string;\n  executionTime: number;\n  coverage?: {\n    lines: number;\n    functions: number;\n    statements: number;\n    branches: number;\n  };\n}\n\n/**\n * \u4EFB\u52A1\u8BA1\u5212\n */\nexport interface TaskPlan {\n  id: string;\n  name: string;\n  description: string;\n  tasks: Task[];\n  createdAt: Date;\n  updatedAt: Date;\n  dueDate?: Date;              // \u8BA1\u5212\u622A\u6B62\u65E5\u671F\n  source?: string;             // \u6765\u6E90\u6587\u6863\n  status: 'draft' | 'active' | 'completed' | 'archived';\n  metadata?: Record<string, any>;\n}\n\n/**\n * PRD\u89E3\u6790\u7ED3\u679C\n */\nexport interface ParsedPRD {\n  id?: string;                   // PRD\u6807\u8BC6\u7B26\n  title: string;\n  description: string;\n  sections: PRDSection[];\n  metadata: Record<string, any>;\n}\n\n/**\n * PRD\u7AE0\u8282\n */\nexport interface PRDSection {\n  title: string;\n  content: string;\n  level: number;\n  features: Feature[];\n  subsections?: PRDSection[];\n}\n\n/**\n * \u529F\u80FD\u70B9\n */\nexport interface Feature {\n  name: string;\n  description: string;\n  priority?: TaskPriority;\n  acceptance?: string[];\n}\n\n/**\n * \u521B\u5EFA\u4EFB\u52A1\u9009\u9879\n */\nexport interface CreateTaskOptions {\n  name: string;\n  description: string;\n  priority?: TaskPriority;\n  type?: TaskType;\n  dependencies?: string[];\n  assignee?: string;\n  tags?: string[];\n  subtasks?: Omit<CreateTaskOptions, 'subtasks'>[];\n}\n\n/**\n * \u521B\u5EFA\u6D4B\u8BD5\u7528\u4F8B\u9009\u9879\n */\nexport interface CreateTestCaseOptions {\n  taskId: string;\n  name: string;\n  description: string;\n  steps: string[];\n  expectedResults: string[];\n} ", "/**\n * \u9700\u6C42\u63D0\u53D6\u5668 - \u4ECE\u6587\u6863\u4E2D\u667A\u80FD\u63D0\u53D6\u548C\u5206\u6790\u9700\u6C42\n * \u4F7F\u7528\u81EA\u7136\u8BED\u8A00\u5904\u7406\u548C\u6A21\u5F0F\u5339\u914D\u6280\u672F\n */\n\nimport { Logger } from '../../infra/logger';\nimport { DocumentStructure, DocumentSection, SectionType } from './document-processor';\nimport { TaskPriority } from '../../types/task';\n\n/**\n * \u9700\u6C42\u7C7B\u578B\u679A\u4E3E\n */\nexport enum RequirementType {\n  FUNCTIONAL = 'functional',           // \u529F\u80FD\u9700\u6C42\n  NON_FUNCTIONAL = 'non_functional',   // \u975E\u529F\u80FD\u9700\u6C42\n  BUSINESS = 'business',               // \u4E1A\u52A1\u9700\u6C42\n  TECHNICAL = 'technical',             // \u6280\u672F\u9700\u6C42\n  USER_STORY = 'user_story',          // \u7528\u6237\u6545\u4E8B\n  CONSTRAINT = 'constraint',           // \u7EA6\u675F\u6761\u4EF6\n  ASSUMPTION = 'assumption'            // \u5047\u8BBE\u6761\u4EF6\n}\n\n/**\n * \u9700\u6C42\u63A5\u53E3\n */\nexport interface Requirement {\n  id: string;\n  title: string;\n  description: string;\n  type: RequirementType;\n  priority: TaskPriority;\n  category: string;\n  source: string;                      // \u6765\u6E90\u7AE0\u8282\n  dependencies: string[];              // \u4F9D\u8D56\u7684\u5176\u4ED6\u9700\u6C42\n  acceptanceCriteria: string[];        // \u9A8C\u6536\u6807\u51C6\n  estimatedEffort: number;             // \u9884\u4F30\u5DE5\u4F5C\u91CF(\u5C0F\u65F6)\n  complexity: 'low' | 'medium' | 'high'; // \u590D\u6742\u5EA6\n  tags: string[];                      // \u6807\u7B7E\n  stakeholders: string[];              // \u76F8\u5173\u5E72\u7CFB\u4EBA\n  businessValue: number;               // \u4E1A\u52A1\u4EF7\u503C(1-10)\n  technicalRisk: number;               // \u6280\u672F\u98CE\u9669(1-10)\n  metadata: RequirementMetadata;\n}\n\n/**\n * \u9700\u6C42\u5143\u6570\u636E\n */\nexport interface RequirementMetadata {\n  extractedAt: Date;\n  confidence: number;                  // \u63D0\u53D6\u7F6E\u4FE1\u5EA6(0-1)\n  extractionMethod: string;            // \u63D0\u53D6\u65B9\u6CD5\n  keywords: string[];                  // \u5173\u952E\u8BCD\n  relatedSections: string[];           // \u76F8\u5173\u7AE0\u8282ID\n}\n\n/**\n * \u63D0\u53D6\u9009\u9879\n */\nexport interface ExtractionOptions {\n  includeUserStories?: boolean;        // \u662F\u5426\u63D0\u53D6\u7528\u6237\u6545\u4E8B\n  detectDependencies?: boolean;        // \u662F\u5426\u68C0\u6D4B\u4F9D\u8D56\u5173\u7CFB\n  estimateEffort?: boolean;            // \u662F\u5426\u4F30\u7B97\u5DE5\u4F5C\u91CF\n  analyzePriority?: boolean;           // \u662F\u5426\u5206\u6790\u4F18\u5148\u7EA7\n  extractAcceptanceCriteria?: boolean; // \u662F\u5426\u63D0\u53D6\u9A8C\u6536\u6807\u51C6\n  detectStakeholders?: boolean;        // \u662F\u5426\u68C0\u6D4B\u5E72\u7CFB\u4EBA\n}\n\n/**\n * \u9700\u6C42\u63D0\u53D6\u7ED3\u679C\n */\nexport interface ExtractionResult {\n  requirements: Requirement[];\n  summary: ExtractionSummary;\n  warnings: string[];\n  suggestions: string[];\n}\n\n/**\n * \u63D0\u53D6\u6458\u8981\n */\nexport interface ExtractionSummary {\n  totalRequirements: number;\n  functionalRequirements: number;\n  nonFunctionalRequirements: number;\n  userStories: number;\n  highPriorityRequirements: number;\n  estimatedTotalEffort: number;\n  averageComplexity: string;\n  coverageScore: number;              // \u8986\u76D6\u5EA6\u8BC4\u5206(0-1)\n}\n\n/**\n * \u9700\u6C42\u63D0\u53D6\u5668\u7C7B\n */\nexport class RequirementExtractor {\n  private logger: Logger;\n  \n  // \u9700\u6C42\u8BC6\u522B\u6A21\u5F0F\n  private readonly requirementPatterns = {\n    functional: [\n      /\u7CFB\u7EDF(\u5E94\u8BE5|\u5FC5\u987B|\u9700\u8981|\u80FD\u591F)(.+)/gi,\n      /\u7528\u6237(\u53EF\u4EE5|\u80FD\u591F|\u5E94\u8BE5)(.+)/gi,\n      /\u5E94\u7528\u7A0B\u5E8F(\u5E94\u8BE5|\u5FC5\u987B|\u9700\u8981)(.+)/gi,\n      /(\u5B9E\u73B0|\u652F\u6301|\u63D0\u4F9B)(.+)\u529F\u80FD/gi,\n      /the system (should|must|shall|will)(.+)/gi,\n      /users (can|should|must|will be able to)(.+)/gi\n    ],\n    nonFunctional: [\n      /(\u6027\u80FD|\u54CD\u5E94\u65F6\u95F4|\u541E\u5410\u91CF)(.+)/gi,\n      /(\u5B89\u5168|\u6743\u9650|\u8BA4\u8BC1)(.+)/gi,\n      /(\u53EF\u7528\u6027|\u7A33\u5B9A\u6027|\u53EF\u9760\u6027)(.+)/gi,\n      /(\u517C\u5BB9\u6027|\u6269\u5C55\u6027|\u53EF\u7EF4\u62A4\u6027)(.+)/gi,\n      /(performance|security|usability|reliability)(.+)/gi\n    ],\n    userStory: [\n      /\u4F5C\u4E3A(.+?)\uFF0C\u6211\u5E0C\u671B(.+?)\uFF0C\u4EE5\u4FBF(.+)/gi,\n      /As a (.+?), I want (.+?) so that (.+)/gi,\n      /Given (.+?) when (.+?) then (.+)/gi\n    ],\n    constraint: [\n      /(\u9650\u5236|\u7EA6\u675F|\u4E0D\u80FD|\u7981\u6B62)(.+)/gi,\n      /(constraint|limitation|restriction)(.+)/gi\n    ]\n  };\n\n  // \u4F18\u5148\u7EA7\u5173\u952E\u8BCD\n  private readonly priorityKeywords = {\n    critical: ['\u5173\u952E', '\u6838\u5FC3', '\u91CD\u8981', '\u5FC5\u987B', 'critical', 'essential', 'must', 'key'],\n    high: ['\u9AD8', '\u4F18\u5148', '\u91CD\u70B9', 'high', 'priority', 'important'],\n    medium: ['\u4E2D\u7B49', '\u4E00\u822C', '\u666E\u901A', 'medium', 'normal', 'standard'],\n    low: ['\u4F4E', '\u6B21\u8981', '\u53EF\u9009', 'low', 'optional', 'nice to have']\n  };\n\n  // \u590D\u6742\u5EA6\u5173\u952E\u8BCD\n  private readonly complexityKeywords = {\n    high: ['\u590D\u6742', '\u56F0\u96BE', '\u6311\u6218', '\u96C6\u6210', '\u7B97\u6CD5', 'complex', 'difficult', 'challenging', 'integration'],\n    medium: ['\u4E2D\u7B49', '\u6807\u51C6', '\u5E38\u89C4', 'medium', 'standard', 'typical'],\n    low: ['\u7B80\u5355', '\u57FA\u7840', '\u76F4\u63A5', 'simple', 'basic', 'straightforward']\n  };\n\n  constructor(logger: Logger) {\n    this.logger = logger;\n  }\n\n  /**\n   * \u4ECE\u6587\u6863\u7ED3\u6784\u4E2D\u63D0\u53D6\u9700\u6C42\n   * @param documentStructure \u6587\u6863\u7ED3\u6784\n   * @param options \u63D0\u53D6\u9009\u9879\n   */\n  public async extractRequirements(\n    documentStructure: DocumentStructure,\n    options: ExtractionOptions = {}\n  ): Promise<ExtractionResult> {\n    try {\n      this.logger.info('\u5F00\u59CB\u63D0\u53D6\u9700\u6C42');\n\n      const requirements: Requirement[] = [];\n      const warnings: string[] = [];\n      const suggestions: string[] = [];\n\n      // \u904D\u5386\u6240\u6709\u7AE0\u8282\u63D0\u53D6\u9700\u6C42\n      for (const section of documentStructure.sections) {\n        const sectionRequirements = await this.extractFromSection(section, options);\n        requirements.push(...sectionRequirements);\n      }\n\n      // \u540E\u5904\u7406\uFF1A\u68C0\u6D4B\u4F9D\u8D56\u5173\u7CFB\n      if (options.detectDependencies) {\n        this.detectDependencies(requirements);\n      }\n\n      // \u751F\u6210\u6458\u8981\n      const summary = this.generateSummary(requirements);\n\n      // \u751F\u6210\u5EFA\u8BAE\n      suggestions.push(...this.generateSuggestions(requirements, summary));\n\n      // \u9A8C\u8BC1\u7ED3\u679C\n      warnings.push(...this.validateRequirements(requirements));\n\n      this.logger.info(`\u9700\u6C42\u63D0\u53D6\u5B8C\u6210: ${requirements.length} \u4E2A\u9700\u6C42`);\n\n      return {\n        requirements,\n        summary,\n        warnings,\n        suggestions\n      };\n\n    } catch (error) {\n      this.logger.error(`\u9700\u6C42\u63D0\u53D6\u5931\u8D25: ${(error as Error).message}`);\n      throw error;\n    }\n  }\n\n  /**\n   * \u4ECE\u5355\u4E2A\u7AE0\u8282\u63D0\u53D6\u9700\u6C42\n   * @param section \u6587\u6863\u7AE0\u8282\n   * @param options \u63D0\u53D6\u9009\u9879\n   */\n  private async extractFromSection(\n    section: DocumentSection,\n    options: ExtractionOptions\n  ): Promise<Requirement[]> {\n    const requirements: Requirement[] = [];\n    const content = section.title + '\\n' + section.content;\n\n    // \u6839\u636E\u7AE0\u8282\u7C7B\u578B\u9009\u62E9\u63D0\u53D6\u7B56\u7565\n    switch (section.type) {\n      case SectionType.REQUIREMENTS:\n        requirements.push(...this.extractFunctionalRequirements(section, content));\n        requirements.push(...this.extractNonFunctionalRequirements(section, content));\n        break;\n      \n      case SectionType.FEATURES:\n        requirements.push(...this.extractFeatureRequirements(section, content));\n        if (options.includeUserStories) {\n          requirements.push(...this.extractUserStories(section, content));\n        }\n        break;\n      \n      case SectionType.TECHNICAL:\n        requirements.push(...this.extractTechnicalRequirements(section, content));\n        break;\n      \n      default:\n        // \u901A\u7528\u63D0\u53D6\n        requirements.push(...this.extractGeneralRequirements(section, content));\n        break;\n    }\n\n    // \u9012\u5F52\u5904\u7406\u5B50\u7AE0\u8282\n    for (const subsection of section.subsections) {\n      const subRequirements = await this.extractFromSection(subsection, options);\n      requirements.push(...subRequirements);\n    }\n\n    return requirements;\n  }\n\n  /**\n   * \u63D0\u53D6\u529F\u80FD\u9700\u6C42\n   * @param section \u7AE0\u8282\n   * @param content \u5185\u5BB9\n   */\n  private extractFunctionalRequirements(section: DocumentSection, content: string): Requirement[] {\n    const requirements: Requirement[] = [];\n    let reqCounter = 1;\n\n    this.requirementPatterns.functional.forEach(pattern => {\n      let match;\n      while ((match = pattern.exec(content)) !== null) {\n        const description = match[0].trim();\n        if (description.length > 10) { // \u8FC7\u6EE4\u592A\u77ED\u7684\u5339\u914D\n          requirements.push(this.createRequirement(\n            `${section.id}-func-${reqCounter++}`,\n            this.extractTitle(description),\n            description,\n            RequirementType.FUNCTIONAL,\n            section,\n            content\n          ));\n        }\n      }\n    });\n\n    return requirements;\n  }\n\n  /**\n   * \u63D0\u53D6\u975E\u529F\u80FD\u9700\u6C42\n   * @param section \u7AE0\u8282\n   * @param content \u5185\u5BB9\n   */\n  private extractNonFunctionalRequirements(section: DocumentSection, content: string): Requirement[] {\n    const requirements: Requirement[] = [];\n    let reqCounter = 1;\n\n    this.requirementPatterns.nonFunctional.forEach(pattern => {\n      let match;\n      while ((match = pattern.exec(content)) !== null) {\n        const description = match[0].trim();\n        if (description.length > 10) {\n          requirements.push(this.createRequirement(\n            `${section.id}-nonfunc-${reqCounter++}`,\n            this.extractTitle(description),\n            description,\n            RequirementType.NON_FUNCTIONAL,\n            section,\n            content\n          ));\n        }\n      }\n    });\n\n    return requirements;\n  }\n\n  /**\n   * \u63D0\u53D6\u529F\u80FD\u7279\u6027\u9700\u6C42\n   * @param section \u7AE0\u8282\n   * @param content \u5185\u5BB9\n   */\n  private extractFeatureRequirements(section: DocumentSection, content: string): Requirement[] {\n    const requirements: Requirement[] = [];\n    \n    // \u6309\u884C\u5206\u6790\uFF0C\u67E5\u627E\u529F\u80FD\u63CF\u8FF0\n    const lines = content.split('\\n').filter(line => line.trim());\n    let reqCounter = 1;\n\n    lines.forEach(line => {\n      const trimmedLine = line.trim();\n      \n      // \u68C0\u67E5\u662F\u5426\u662F\u529F\u80FD\u63CF\u8FF0\uFF08\u5217\u8868\u9879\u3001\u7F16\u53F7\u9879\u7B49\uFF09\n      if (this.isFunctionDescription(trimmedLine)) {\n        requirements.push(this.createRequirement(\n          `${section.id}-feature-${reqCounter++}`,\n          this.extractTitle(trimmedLine),\n          trimmedLine,\n          RequirementType.FUNCTIONAL,\n          section,\n          content\n        ));\n      }\n    });\n\n    return requirements;\n  }\n\n  /**\n   * \u63D0\u53D6\u7528\u6237\u6545\u4E8B\n   * @param section \u7AE0\u8282\n   * @param content \u5185\u5BB9\n   */\n  private extractUserStories(section: DocumentSection, content: string): Requirement[] {\n    const requirements: Requirement[] = [];\n    let storyCounter = 1;\n\n    this.requirementPatterns.userStory.forEach(pattern => {\n      let match;\n      while ((match = pattern.exec(content)) !== null) {\n        const description = match[0].trim();\n        requirements.push(this.createRequirement(\n          `${section.id}-story-${storyCounter++}`,\n          `\u7528\u6237\u6545\u4E8B ${storyCounter}`,\n          description,\n          RequirementType.USER_STORY,\n          section,\n          content\n        ));\n      }\n    });\n\n    return requirements;\n  }\n\n  /**\n   * \u63D0\u53D6\u6280\u672F\u9700\u6C42\n   * @param section \u7AE0\u8282\n   * @param content \u5185\u5BB9\n   */\n  private extractTechnicalRequirements(section: DocumentSection, content: string): Requirement[] {\n    const requirements: Requirement[] = [];\n    \n    // \u67E5\u627E\u6280\u672F\u76F8\u5173\u7684\u63CF\u8FF0\n    const techKeywords = ['\u6280\u672F\u6808', '\u67B6\u6784', '\u6570\u636E\u5E93', '\u6846\u67B6', '\u63A5\u53E3', 'API', '\u670D\u52A1', '\u7EC4\u4EF6'];\n    const lines = content.split('\\n').filter(line => line.trim());\n    let reqCounter = 1;\n\n    lines.forEach(line => {\n      const trimmedLine = line.trim();\n      \n      if (techKeywords.some(keyword => trimmedLine.includes(keyword)) && trimmedLine.length > 10) {\n        requirements.push(this.createRequirement(\n          `${section.id}-tech-${reqCounter++}`,\n          this.extractTitle(trimmedLine),\n          trimmedLine,\n          RequirementType.TECHNICAL,\n          section,\n          content\n        ));\n      }\n    });\n\n    return requirements;\n  }\n\n  /**\n   * \u63D0\u53D6\u901A\u7528\u9700\u6C42\n   * @param section \u7AE0\u8282\n   * @param content \u5185\u5BB9\n   */\n  private extractGeneralRequirements(section: DocumentSection, content: string): Requirement[] {\n    const requirements: Requirement[] = [];\n    \n    // \u7B80\u5355\u7684\u57FA\u4E8E\u5173\u952E\u8BCD\u7684\u63D0\u53D6\n    const lines = content.split('\\n').filter(line => line.trim());\n    let reqCounter = 1;\n\n    lines.forEach(line => {\n      const trimmedLine = line.trim();\n      \n      if (this.isRequirementLike(trimmedLine)) {\n        requirements.push(this.createRequirement(\n          `${section.id}-req-${reqCounter++}`,\n          this.extractTitle(trimmedLine),\n          trimmedLine,\n          RequirementType.BUSINESS,\n          section,\n          content\n        ));\n      }\n    });\n\n    return requirements;\n  }\n\n  /**\n   * \u521B\u5EFA\u9700\u6C42\u5BF9\u8C61\n   * @param id \u9700\u6C42ID\n   * @param title \u6807\u9898\n   * @param description \u63CF\u8FF0\n   * @param type \u7C7B\u578B\n   * @param section \u6765\u6E90\u7AE0\u8282\n   * @param content \u7AE0\u8282\u5185\u5BB9\n   */\n  private createRequirement(\n    id: string,\n    title: string,\n    description: string,\n    type: RequirementType,\n    section: DocumentSection,\n    _content: string\n  ): Requirement {\n    return {\n      id,\n      title,\n      description,\n      type,\n      priority: this.analyzePriority(description),\n      category: section.title,\n      source: section.id,\n      dependencies: [],\n      acceptanceCriteria: this.extractAcceptanceCriteria(description),\n      estimatedEffort: this.estimateEffort(description, type),\n      complexity: this.analyzeComplexity(description),\n      tags: this.extractTags(description),\n      stakeholders: this.extractStakeholders(description),\n      businessValue: this.calculateBusinessValue(description, type),\n      technicalRisk: this.calculateTechnicalRisk(description, type),\n      metadata: {\n        extractedAt: new Date(),\n        confidence: this.calculateConfidence(description, type),\n        extractionMethod: 'pattern_matching',\n        keywords: section.keywords,\n        relatedSections: [section.id]\n      }\n    };\n  }\n\n  /**\n   * \u5206\u6790\u4F18\u5148\u7EA7\n   * @param text \u6587\u672C\n   */\n  private analyzePriority(text: string): TaskPriority {\n    const textLower = text.toLowerCase();\n    \n    for (const [priority, keywords] of Object.entries(this.priorityKeywords)) {\n      if (keywords.some(keyword => textLower.includes(keyword))) {\n        return priority as TaskPriority;\n      }\n    }\n    \n    return TaskPriority.MEDIUM;\n  }\n\n  /**\n   * \u5206\u6790\u590D\u6742\u5EA6\n   * @param text \u6587\u672C\n   */\n  private analyzeComplexity(text: string): 'low' | 'medium' | 'high' {\n    const textLower = text.toLowerCase();\n    \n    for (const [complexity, keywords] of Object.entries(this.complexityKeywords)) {\n      if (keywords.some(keyword => textLower.includes(keyword))) {\n        return complexity as 'low' | 'medium' | 'high';\n      }\n    }\n    \n    // \u57FA\u4E8E\u6587\u672C\u957F\u5EA6\u5224\u65AD\n    if (text.length > 200) return 'high';\n    if (text.length > 100) return 'medium';\n    return 'low';\n  }\n\n  /**\n   * \u4F30\u7B97\u5DE5\u4F5C\u91CF\n   * @param description \u63CF\u8FF0\n   * @param type \u7C7B\u578B\n   */\n  private estimateEffort(description: string, type: RequirementType): number {\n    let baseHours = 8; // \u57FA\u7840\u5DE5\u4F5C\u91CF\n    \n    // \u6839\u636E\u7C7B\u578B\u8C03\u6574\n    switch (type) {\n      case RequirementType.TECHNICAL:\n        baseHours = 16;\n        break;\n      case RequirementType.NON_FUNCTIONAL:\n        baseHours = 12;\n        break;\n      case RequirementType.USER_STORY:\n        baseHours = 6;\n        break;\n    }\n    \n    // \u6839\u636E\u590D\u6742\u5EA6\u8C03\u6574\n    const complexity = this.analyzeComplexity(description);\n    switch (complexity) {\n      case 'high':\n        baseHours *= 2;\n        break;\n      case 'low':\n        baseHours *= 0.5;\n        break;\n    }\n    \n    return Math.round(baseHours);\n  }\n\n  /**\n   * \u8BA1\u7B97\u4E1A\u52A1\u4EF7\u503C\n   * @param description \u63CF\u8FF0\n   * @param type \u7C7B\u578B\n   */\n  private calculateBusinessValue(description: string, type: RequirementType): number {\n    let value = 5; // \u57FA\u7840\u503C\n    \n    const valueKeywords = ['\u6536\u5165', '\u7528\u6237', '\u4F53\u9A8C', '\u6548\u7387', '\u6210\u672C', 'revenue', 'user', 'experience', 'efficiency'];\n    const textLower = description.toLowerCase();\n    \n    valueKeywords.forEach(keyword => {\n      if (textLower.includes(keyword)) {\n        value += 1;\n      }\n    });\n    \n    // \u6839\u636E\u7C7B\u578B\u8C03\u6574\n    if (type === RequirementType.BUSINESS) value += 2;\n    if (type === RequirementType.USER_STORY) value += 1;\n    \n    return Math.min(10, value);\n  }\n\n  /**\n   * \u8BA1\u7B97\u6280\u672F\u98CE\u9669\n   * @param description \u63CF\u8FF0\n   * @param type \u7C7B\u578B\n   */\n  private calculateTechnicalRisk(description: string, type: RequirementType): number {\n    let risk = 3; // \u57FA\u7840\u98CE\u9669\n    \n    const riskKeywords = ['\u96C6\u6210', '\u65B0\u6280\u672F', '\u7B97\u6CD5', '\u6027\u80FD', '\u5B89\u5168', 'integration', 'new', 'algorithm', 'performance', 'security'];\n    const textLower = description.toLowerCase();\n    \n    riskKeywords.forEach(keyword => {\n      if (textLower.includes(keyword)) {\n        risk += 1;\n      }\n    });\n    \n    // \u6839\u636E\u7C7B\u578B\u8C03\u6574\n    if (type === RequirementType.TECHNICAL) risk += 2;\n    if (type === RequirementType.NON_FUNCTIONAL) risk += 1;\n    \n    return Math.min(10, risk);\n  }\n\n  /**\n   * \u8BA1\u7B97\u63D0\u53D6\u7F6E\u4FE1\u5EA6\n   * @param description \u63CF\u8FF0\n   * @param type \u7C7B\u578B\n   */\n  private calculateConfidence(description: string, _type: RequirementType): number {\n    let confidence = 0.5;\n    \n    // \u57FA\u4E8E\u6A21\u5F0F\u5339\u914D\u7684\u7F6E\u4FE1\u5EA6\n    if (this.requirementPatterns.functional.some(pattern => pattern.test(description))) {\n      confidence += 0.3;\n    }\n    \n    // \u57FA\u4E8E\u957F\u5EA6\u548C\u7ED3\u6784\n    if (description.length > 20 && description.length < 500) {\n      confidence += 0.2;\n    }\n    \n    return Math.min(1.0, confidence);\n  }\n\n  /**\n   * \u63D0\u53D6\u9A8C\u6536\u6807\u51C6\n   * @param description \u63CF\u8FF0\n   */\n  private extractAcceptanceCriteria(description: string): string[] {\n    const criteria: string[] = [];\n    \n    // \u67E5\u627E\u9A8C\u6536\u6807\u51C6\u76F8\u5173\u7684\u6A21\u5F0F\n    const criteriaPatterns = [\n      /\u9A8C\u6536\u6807\u51C6[\uFF1A:]\\s*(.+)/gi,\n      /acceptance criteria[\uFF1A:]\\s*(.+)/gi,\n      /given (.+?) when (.+?) then (.+)/gi\n    ];\n    \n    criteriaPatterns.forEach(pattern => {\n      let match;\n      while ((match = pattern.exec(description)) !== null) {\n        criteria.push(match[1] || match[0]);\n      }\n    });\n    \n    return criteria;\n  }\n\n  /**\n   * \u63D0\u53D6\u6807\u7B7E\n   * @param description \u63CF\u8FF0\n   */\n  private extractTags(description: string): string[] {\n    const tags: string[] = [];\n    \n    // \u57FA\u4E8E\u5173\u952E\u8BCD\u751F\u6210\u6807\u7B7E\n    const tagKeywords = {\n      'UI': ['\u754C\u9762', '\u9875\u9762', '\u6309\u94AE', 'UI', 'interface', 'page', 'button'],\n      'API': ['\u63A5\u53E3', 'API', 'service', '\u670D\u52A1'],\n      'Database': ['\u6570\u636E\u5E93', '\u5B58\u50A8', 'database', 'storage'],\n      'Security': ['\u5B89\u5168', '\u6743\u9650', 'security', 'permission', 'auth'],\n      'Performance': ['\u6027\u80FD', '\u901F\u5EA6', 'performance', 'speed']\n    };\n    \n    const textLower = description.toLowerCase();\n    \n    Object.entries(tagKeywords).forEach(([tag, keywords]) => {\n      if (keywords.some(keyword => textLower.includes(keyword))) {\n        tags.push(tag);\n      }\n    });\n    \n    return tags;\n  }\n\n  /**\n   * \u63D0\u53D6\u5E72\u7CFB\u4EBA\n   * @param description \u63CF\u8FF0\n   */\n  private extractStakeholders(description: string): string[] {\n    const stakeholders: string[] = [];\n    \n    const stakeholderPatterns = [\n      /\u7528\u6237/g, /\u7BA1\u7406\u5458/g, /\u5F00\u53D1\u8005/g, /\u6D4B\u8BD5\u4EBA\u5458/g,\n      /user/gi, /admin/gi, /developer/gi, /tester/gi\n    ];\n    \n    stakeholderPatterns.forEach(pattern => {\n      const matches = description.match(pattern);\n      if (matches) {\n        stakeholders.push(...matches);\n      }\n    });\n    \n    return [...new Set(stakeholders)]; // \u53BB\u91CD\n  }\n\n  /**\n   * \u68C0\u6D4B\u4F9D\u8D56\u5173\u7CFB\n   * @param requirements \u9700\u6C42\u5217\u8868\n   */\n  private detectDependencies(requirements: Requirement[]): void {\n    // \u7B80\u5316\u7684\u4F9D\u8D56\u68C0\u6D4B\uFF1A\u57FA\u4E8E\u5173\u952E\u8BCD\u5339\u914D\n    requirements.forEach(req => {\n      requirements.forEach(otherReq => {\n        if (req.id !== otherReq.id) {\n          // \u68C0\u67E5\u662F\u5426\u6709\u4F9D\u8D56\u5173\u7CFB\u7684\u5173\u952E\u8BCD\n          if (this.hasDependencyRelation(req.description, otherReq.description)) {\n            req.dependencies.push(otherReq.id);\n          }\n        }\n      });\n    });\n  }\n\n  /**\n   * \u68C0\u67E5\u662F\u5426\u6709\u4F9D\u8D56\u5173\u7CFB\n   * @param desc1 \u63CF\u8FF01\n   * @param desc2 \u63CF\u8FF02\n   */\n  private hasDependencyRelation(desc1: string, desc2: string): boolean {\n    // \u7B80\u5316\u7684\u4F9D\u8D56\u68C0\u6D4B\u903B\u8F91\n    const dependencyKeywords = ['\u57FA\u4E8E', '\u4F9D\u8D56', '\u9700\u8981', '\u4F7F\u7528', 'based on', 'depends on', 'requires', 'uses'];\n    \n    return dependencyKeywords.some(keyword => \n      desc1.toLowerCase().includes(keyword) && \n      desc2.toLowerCase().includes(keyword)\n    );\n  }\n\n  /**\n   * \u751F\u6210\u6458\u8981\n   * @param requirements \u9700\u6C42\u5217\u8868\n   */\n  private generateSummary(requirements: Requirement[]): ExtractionSummary {\n    const functionalCount = requirements.filter(r => r.type === RequirementType.FUNCTIONAL).length;\n    const nonFunctionalCount = requirements.filter(r => r.type === RequirementType.NON_FUNCTIONAL).length;\n    const userStoryCount = requirements.filter(r => r.type === RequirementType.USER_STORY).length;\n    const highPriorityCount = requirements.filter(r => r.priority === TaskPriority.HIGH || r.priority === TaskPriority.CRITICAL).length;\n    \n    const totalEffort = requirements.reduce((sum, req) => sum + req.estimatedEffort, 0);\n    \n    const complexityScores = requirements.map(r => {\n      switch (r.complexity) {\n        case 'high': return 3;\n        case 'medium': return 2;\n        case 'low': return 1;\n        default: return 2;\n      }\n    });\n    \n    const avgComplexityScore = complexityScores.reduce((sum, score) => sum + score, 0) / complexityScores.length;\n    const avgComplexity = avgComplexityScore > 2.5 ? 'high' : avgComplexityScore > 1.5 ? 'medium' : 'low';\n    \n    // \u8BA1\u7B97\u8986\u76D6\u5EA6\u8BC4\u5206\uFF08\u57FA\u4E8E\u9700\u6C42\u7684\u5B8C\u6574\u6027\u548C\u8D28\u91CF\uFF09\n    const avgConfidence = requirements.reduce((sum, req) => sum + req.metadata.confidence, 0) / requirements.length;\n    const coverageScore = Math.min(1.0, avgConfidence * (requirements.length / 10)); // \u5047\u8BBE10\u4E2A\u9700\u6C42\u4E3A\u5B8C\u6574\u8986\u76D6\n    \n    return {\n      totalRequirements: requirements.length,\n      functionalRequirements: functionalCount,\n      nonFunctionalRequirements: nonFunctionalCount,\n      userStories: userStoryCount,\n      highPriorityRequirements: highPriorityCount,\n      estimatedTotalEffort: totalEffort,\n      averageComplexity: avgComplexity,\n      coverageScore\n    };\n  }\n\n  /**\n   * \u751F\u6210\u5EFA\u8BAE\n   * @param requirements \u9700\u6C42\u5217\u8868\n   * @param summary \u6458\u8981\n   */\n  private generateSuggestions(requirements: Requirement[], summary: ExtractionSummary): string[] {\n    const suggestions: string[] = [];\n    \n    if (summary.totalRequirements < 5) {\n      suggestions.push('\u9700\u6C42\u6570\u91CF\u8F83\u5C11\uFF0C\u5EFA\u8BAE\u68C0\u67E5\u662F\u5426\u9057\u6F0F\u4E86\u91CD\u8981\u9700\u6C42');\n    }\n    \n    if (summary.nonFunctionalRequirements === 0) {\n      suggestions.push('\u672A\u53D1\u73B0\u975E\u529F\u80FD\u9700\u6C42\uFF0C\u5EFA\u8BAE\u8865\u5145\u6027\u80FD\u3001\u5B89\u5168\u3001\u53EF\u7528\u6027\u7B49\u65B9\u9762\u7684\u9700\u6C42');\n    }\n    \n    if (summary.highPriorityRequirements / summary.totalRequirements > 0.8) {\n      suggestions.push('\u9AD8\u4F18\u5148\u7EA7\u9700\u6C42\u6BD4\u4F8B\u8FC7\u9AD8\uFF0C\u5EFA\u8BAE\u91CD\u65B0\u8BC4\u4F30\u9700\u6C42\u4F18\u5148\u7EA7');\n    }\n    \n    if (summary.coverageScore < 0.6) {\n      suggestions.push('\u9700\u6C42\u8986\u76D6\u5EA6\u8F83\u4F4E\uFF0C\u5EFA\u8BAE\u8865\u5145\u66F4\u8BE6\u7EC6\u7684\u9700\u6C42\u63CF\u8FF0');\n    }\n    \n    const avgEffort = summary.estimatedTotalEffort / summary.totalRequirements;\n    if (avgEffort > 20) {\n      suggestions.push('\u5E73\u5747\u5DE5\u4F5C\u91CF\u8F83\u9AD8\uFF0C\u5EFA\u8BAE\u5C06\u590D\u6742\u9700\u6C42\u62C6\u5206\u4E3A\u66F4\u5C0F\u7684\u4EFB\u52A1');\n    }\n    \n    return suggestions;\n  }\n\n  /**\n   * \u9A8C\u8BC1\u9700\u6C42\n   * @param requirements \u9700\u6C42\u5217\u8868\n   */\n  private validateRequirements(requirements: Requirement[]): string[] {\n    const warnings: string[] = [];\n    \n    requirements.forEach(req => {\n      if (req.description.length < 10) {\n        warnings.push(`\u9700\u6C42 ${req.id} \u63CF\u8FF0\u8FC7\u4E8E\u7B80\u77ED`);\n      }\n      \n      if (req.metadata.confidence < 0.3) {\n        warnings.push(`\u9700\u6C42 ${req.id} \u63D0\u53D6\u7F6E\u4FE1\u5EA6\u8F83\u4F4E`);\n      }\n      \n      if (req.acceptanceCriteria.length === 0) {\n        warnings.push(`\u9700\u6C42 ${req.id} \u7F3A\u5C11\u9A8C\u6536\u6807\u51C6`);\n      }\n    });\n    \n    return warnings;\n  }\n\n  /**\n   * \u5224\u65AD\u662F\u5426\u662F\u529F\u80FD\u63CF\u8FF0\n   * @param line \u6587\u672C\u884C\n   */\n  private isFunctionDescription(line: string): boolean {\n    const patterns = [\n      /^[-*+]\\s+/, // \u5217\u8868\u9879\n      /^\\d+\\.\\s+/, // \u7F16\u53F7\u9879\n      /^[a-zA-Z0-9]+[.)]\\s+/, // \u5B57\u6BCD\u6216\u6570\u5B57\u7F16\u53F7\n      /\u529F\u80FD|\u7279\u6027|\u80FD\u529B/\n    ];\n    \n    return patterns.some(pattern => pattern.test(line)) && line.length > 10;\n  }\n\n  /**\n   * \u5224\u65AD\u662F\u5426\u50CF\u9700\u6C42\n   * @param line \u6587\u672C\u884C\n   */\n  private isRequirementLike(line: string): boolean {\n    const requirementIndicators = [\n      '\u9700\u8981', '\u5E94\u8BE5', '\u5FC5\u987B', '\u80FD\u591F', '\u652F\u6301', '\u5B9E\u73B0', '\u63D0\u4F9B',\n      'need', 'should', 'must', 'shall', 'support', 'implement', 'provide'\n    ];\n    \n    return requirementIndicators.some(indicator => \n      line.toLowerCase().includes(indicator)\n    ) && line.length > 15;\n  }\n\n  /**\n   * \u63D0\u53D6\u6807\u9898\n   * @param text \u6587\u672C\n   */\n  private extractTitle(text: string): string {\n    // \u63D0\u53D6\u524D50\u4E2A\u5B57\u7B26\u4F5C\u4E3A\u6807\u9898\n    const title = text.substring(0, 50).trim();\n    return title.endsWith('...') ? title : title + (text.length > 50 ? '...' : '');\n  }\n}\n", "/* eslint-disable @typescript-eslint/no-unused-vars */\nimport * as fs from 'fs-extra';\nimport * as path from 'path';\nimport { ModelCoordinator } from '../models/coordinator';\nimport { PRDParseResult } from '../parser/prd-parser';\nimport { PlanningOptions } from '../../types/model';\nimport { Logger } from '../../infra/logger';\nimport { Task, TaskPlan, TaskStatus, TaskPriority, TaskType, ParsedPRD } from '../../types/task';\n\n\n\n/**\n * \u4EFB\u52A1\u89C4\u5212\u5668\u7C7B\n * \u8D1F\u8D23\u6839\u636EPRD\u751F\u6210\u4EFB\u52A1\u8BA1\u5212\n */\nexport class TaskPlanner {\n  private modelCoordinator: ModelCoordinator;\n  private logger: Logger;\n\n  /**\n   * \u521B\u5EFA\u4EFB\u52A1\u89C4\u5212\u5668\u5B9E\u4F8B\n   * @param modelCoordinator \u6A21\u578B\u534F\u8C03\u5668\u5B9E\u4F8B\n   * @param logger \u65E5\u5FD7\u8BB0\u5F55\u5668\n   */\n  constructor(modelCoordinator: ModelCoordinator, logger: Logger) {\n    this.modelCoordinator = modelCoordinator;\n    this.logger = logger;\n  }\n\n  /**\n   * \u6839\u636EPRD\u89E3\u6790\u7ED3\u679C\u751F\u6210\u4EFB\u52A1\u8BA1\u5212\n   * @param prdResult PRD\u89E3\u6790\u7ED3\u679C\n   * @param options \u89C4\u5212\u9009\u9879\n   */\n  public async generateTaskPlan(prdResult: ParsedPRD | PRDParseResult, options?: PlanningOptions): Promise<TaskPlan> {\n    try {\n      this.logger.info('\u5F00\u59CB\u751F\u6210\u4EFB\u52A1\u8BA1\u5212');\n\n      // \u4F7F\u7528\u6A21\u578B\u751F\u6210\u4EFB\u52A1\u8BA1\u5212\n      const response = await this.modelCoordinator.planTasks(prdResult as ParsedPRD, options);\n\n      try {\n        // \u89E3\u6790\u6A21\u578B\u8FD4\u56DE\u7684\u4EFB\u52A1\u8BA1\u5212\n        const taskPlan = JSON.parse(response.content) as TaskPlan;\n        this.validateTaskPlan(taskPlan);\n\n        // \u540E\u5904\u7406\u4EFB\u52A1\u8BA1\u5212\n        this.postProcessTaskPlan(taskPlan);\n\n        this.logger.info(`\u4EFB\u52A1\u8BA1\u5212\u751F\u6210\u6210\u529F\uFF0C\u5171 ${taskPlan.tasks.length} \u4E2A\u4EFB\u52A1`);\n        return taskPlan;\n      } catch (error) {\n        this.logger.error(`\u89E3\u6790\u6A21\u578B\u8FD4\u56DE\u7684\u4EFB\u52A1\u8BA1\u5212\u5931\u8D25\uFF1A${(error as Error).message}`);\n        throw new Error(`\u65E0\u6CD5\u89E3\u6790\u6A21\u578B\u8FD4\u56DE\u7684JSON\u7ED3\u679C\uFF1A${(error as Error).message}`);\n      }\n    } catch (error) {\n      this.logger.error(`\u751F\u6210\u4EFB\u52A1\u8BA1\u5212\u5931\u8D25\uFF1A${(error as Error).message}`);\n      throw error;\n    }\n  }\n\n  /**\n   * \u4F18\u5316\u4EFB\u52A1\u8BA1\u5212\n   * @param taskPlan \u539F\u59CB\u4EFB\u52A1\u8BA1\u5212\n   * @param options \u4F18\u5316\u9009\u9879\n   */\n  public async optimizeTaskPlan(taskPlan: TaskPlan, options?: PlanningOptions): Promise<TaskPlan> {\n    try {\n      this.logger.info('\u5F00\u59CB\u4F18\u5316\u4EFB\u52A1\u8BA1\u5212');\n\n      // 1. \u4F9D\u8D56\u5173\u7CFB\u4F18\u5316\n      this.optimizeDependencies(taskPlan);\n\n      // 2. \u4F18\u5148\u7EA7\u4F18\u5316\n      this.optimizePriorities(taskPlan, options);\n\n      // 3. \u5E76\u884C\u4EFB\u52A1\u8BC6\u522B\n      this.identifyParallelTasks(taskPlan, options);\n\n      // 4. \u5DE5\u4F5C\u91CF\u5E73\u8861\n      this.balanceWorkload(taskPlan, options);\n\n      this.logger.info('\u4EFB\u52A1\u8BA1\u5212\u4F18\u5316\u5B8C\u6210');\n      return taskPlan;\n\n    } catch (error) {\n      this.logger.error(`\u4F18\u5316\u4EFB\u52A1\u8BA1\u5212\u5931\u8D25\uFF1A${(error as Error).message}`);\n      throw error;\n    }\n  }\n\n  /**\n   * \u5C06\u4EFB\u52A1\u8BA1\u5212\u4FDD\u5B58\u5230\u6587\u4EF6\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   * @param outputPath \u8F93\u51FA\u8DEF\u5F84\n   */\n  public async saveTaskPlan(taskPlan: TaskPlan, outputPath: string): Promise<void> {\n    try {\n      // \u786E\u4FDD\u76EE\u5F55\u5B58\u5728\n      await fs.ensureDir(path.dirname(outputPath));\n\n      // \u5199\u5165\u6587\u4EF6\n      await fs.writeFile(outputPath, JSON.stringify(taskPlan, null, 2), 'utf-8');\n\n      this.logger.info(`\u4EFB\u52A1\u8BA1\u5212\u5DF2\u4FDD\u5B58\u81F3 ${outputPath}`);\n    } catch (error) {\n      this.logger.error(`\u4FDD\u5B58\u4EFB\u52A1\u8BA1\u5212\u5931\u8D25\uFF1A${(error as Error).message}`);\n      throw error;\n    }\n  }\n\n  /**\n   * \u9A8C\u8BC1\u4EFB\u52A1\u8BA1\u5212\u662F\u5426\u7B26\u5408\u9884\u671F\u683C\u5F0F\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   */\n  private validateTaskPlan(taskPlan: TaskPlan): void {\n    // \u9A8C\u8BC1\u57FA\u672C\u7ED3\u6784\n    if (!taskPlan.name) {\n      this.logger.warn('\u4EFB\u52A1\u8BA1\u5212\u7F3A\u5C11\u540D\u79F0');\n    }\n\n    if (!taskPlan.description) {\n      this.logger.warn('\u4EFB\u52A1\u8BA1\u5212\u7F3A\u5C11\u63CF\u8FF0');\n    }\n\n    if (!Array.isArray(taskPlan.tasks)) {\n      throw new Error('\u4EFB\u52A1\u8BA1\u5212\u5FC5\u987B\u5305\u542Btasks\u6570\u7EC4');\n    }\n\n    // \u9A8C\u8BC1\u6BCF\u4E2A\u4EFB\u52A1\u7684\u7ED3\u6784\n    taskPlan.tasks.forEach((task, index) => {\n      if (!task.id) {\n        throw new Error(`\u7B2C${index + 1}\u4E2A\u4EFB\u52A1\u7F3A\u5C11ID`);\n      }\n\n      if (!task.title) {\n        this.logger.warn(`\u4EFB\u52A1 ${task.id} \u7F3A\u5C11\u6807\u9898`);\n      }\n\n      if (!task.priority) {\n        this.logger.warn(`\u4EFB\u52A1 ${task.id} \u7F3A\u5C11\u4F18\u5148\u7EA7\uFF0C\u8BBE\u7F6E\u4E3A\u9ED8\u8BA4\u503C'medium'`);\n        task.priority = TaskPriority.MEDIUM;\n      }\n\n      if (!task.type) {\n        this.logger.warn(`\u4EFB\u52A1 ${task.id} \u7F3A\u5C11\u7C7B\u578B\uFF0C\u8BBE\u7F6E\u4E3A\u9ED8\u8BA4\u503C'feature'`);\n        task.type = TaskType.FEATURE;\n      }\n\n      if (!Array.isArray(task.dependencies)) {\n        this.logger.warn(`\u4EFB\u52A1 ${task.id} \u7684dependencies\u5B57\u6BB5\u4E0D\u662F\u6570\u7EC4\uFF0C\u8BBE\u7F6E\u4E3A\u7A7A\u6570\u7EC4`);\n        task.dependencies = [];\n      }\n\n      // \u8BBE\u7F6E\u9ED8\u8BA4\u72B6\u6001\n      if (!task.status) {\n        task.status = TaskStatus.NOT_STARTED;\n      }\n    });\n  }\n\n  /**\n   * \u540E\u5904\u7406\u4EFB\u52A1\u8BA1\u5212\uFF0C\u6DFB\u52A0\u4E00\u4E9B\u81EA\u52A8\u751F\u6210\u7684\u4FE1\u606F\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   */\n  private postProcessTaskPlan(taskPlan: TaskPlan): void {\n    // \u68C0\u67E5\u4EFB\u52A1ID\u7684\u552F\u4E00\u6027\n    const taskIds = new Set<string>();\n\n    taskPlan.tasks.forEach(task => {\n      if (taskIds.has(task.id)) {\n        // \u5982\u679CID\u91CD\u590D\uFF0C\u751F\u6210\u65B0\u7684ID\n        const newId = this.generateUniqueId(task.id, taskIds);\n        this.logger.warn(`\u53D1\u73B0\u91CD\u590D\u7684\u4EFB\u52A1ID: ${task.id}\uFF0C\u81EA\u52A8\u66F4\u65B0\u4E3A: ${newId}`);\n        task.id = newId;\n      }\n      taskIds.add(task.id);\n\n      // \u9A8C\u8BC1\u4F9D\u8D56\u662F\u5426\u5B58\u5728\n      task.dependencies = task.dependencies.filter(depId => {\n        if (!taskIds.has(depId) && depId !== task.id) {\n          this.logger.warn(`\u4EFB\u52A1 ${task.id} \u4F9D\u8D56\u7684\u4EFB\u52A1 ${depId} \u4E0D\u5B58\u5728\uFF0C\u5DF2\u79FB\u9664\u6B64\u4F9D\u8D56`);\n          return false;\n        }\n\n        if (depId === task.id) {\n          this.logger.warn(`\u4EFB\u52A1 ${task.id} \u4E0D\u80FD\u4F9D\u8D56\u81EA\u8EAB\uFF0C\u5DF2\u79FB\u9664\u6B64\u4F9D\u8D56`);\n          return false;\n        }\n\n        return true;\n      });\n\n      // Note: Subtasks are not part of the Task interface in this implementation\n    });\n\n    // \u68C0\u6D4B\u4F9D\u8D56\u73AF\n    this.checkCircularDependencies(taskPlan);\n  }\n\n  /**\n   * \u751F\u6210\u552F\u4E00ID\n   * @param baseId \u57FA\u7840ID\n   * @param existingIds \u5DF2\u5B58\u5728\u7684ID\u96C6\u5408\n   */\n  private generateUniqueId(baseId: string, existingIds: Set<string>): string {\n    let counter = 1;\n    let newId = `${baseId}_${counter}`;\n\n    while (existingIds.has(newId)) {\n      counter++;\n      newId = `${baseId}_${counter}`;\n    }\n\n    return newId;\n  }\n\n  /**\n   * \u68C0\u6D4B\u4EFB\u52A1\u4F9D\u8D56\u662F\u5426\u5B58\u5728\u5FAA\u73AF\u4F9D\u8D56\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   */\n  private checkCircularDependencies(taskPlan: TaskPlan): void {\n    const graph: Map<string, string[]> = new Map();\n\n    // \u6784\u5EFA\u4F9D\u8D56\u56FE\n    taskPlan.tasks.forEach(task => {\n      graph.set(task.id, [...task.dependencies]);\n    });\n\n    const visited = new Set<string>();\n    const recStack = new Set<string>();\n\n    // \u5BF9\u6BCF\u4E2A\u4EFB\u52A1\u8FDB\u884CDFS\u68C0\u6D4B\n    taskPlan.tasks.forEach(task => {\n      this.detectCycle(task.id, graph, visited, recStack);\n    });\n  }\n\n  /**\n   * \u4F7F\u7528DFS\u68C0\u6D4B\u6709\u5411\u56FE\u4E2D\u7684\u73AF\n   * @param node \u5F53\u524D\u8282\u70B9\n   * @param graph \u4F9D\u8D56\u56FE\n   * @param visited \u5DF2\u8BBF\u95EE\u8282\u70B9\u96C6\u5408\n   * @param recStack \u9012\u5F52\u6808\n   */\n  private detectCycle(node: string, graph: Map<string, string[]>, visited: Set<string>, recStack: Set<string>): boolean {\n    if (recStack.has(node)) {\n      // \u68C0\u6D4B\u5230\u73AF\uFF0C\u8BB0\u5F55\u5E76\u79FB\u9664\u9020\u6210\u73AF\u7684\u4F9D\u8D56\n      this.logger.warn(`\u68C0\u6D4B\u5230\u5FAA\u73AF\u4F9D\u8D56\uFF0C\u5305\u542B\u4EFB\u52A1: ${node}`);\n      return true;\n    }\n\n    if (visited.has(node)) {\n      return false;\n    }\n\n    visited.add(node);\n    recStack.add(node);\n\n    const neighbors = graph.get(node) || [];\n\n    for (const neighbor of neighbors) {\n      if (this.detectCycle(neighbor, graph, visited, recStack)) {\n        // \u53D1\u73B0\u5FAA\u73AF\u4F9D\u8D56\uFF0C\u4ECE\u56FE\u4E2D\u79FB\u9664\u8FD9\u6761\u8FB9\n        const deps = graph.get(node) || [];\n        graph.set(node, deps.filter(d => d !== neighbor));\n        this.logger.warn(`\u79FB\u9664\u5FAA\u73AF\u4F9D\u8D56: ${node} -> ${neighbor}`);\n      }\n    }\n\n    recStack.delete(node);\n    return false;\n  }\n\n  /**\n   * \u4F18\u5316\u4EFB\u52A1\u4F9D\u8D56\u5173\u7CFB\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   */\n  private optimizeDependencies(taskPlan: TaskPlan): void {\n    this.logger.info('\u4F18\u5316\u4EFB\u52A1\u4F9D\u8D56\u5173\u7CFB');\n\n    // \u79FB\u9664\u5197\u4F59\u4F9D\u8D56\n    taskPlan.tasks.forEach(task => {\n      const optimizedDeps = this.removeRedundantDependencies(task.dependencies, taskPlan);\n      task.dependencies = optimizedDeps;\n    });\n\n    // \u91CD\u65B0\u68C0\u6D4B\u5FAA\u73AF\u4F9D\u8D56\n    this.checkCircularDependencies(taskPlan);\n  }\n\n  /**\n   * \u79FB\u9664\u5197\u4F59\u4F9D\u8D56\uFF08\u4F20\u9012\u4F9D\u8D56\uFF09\n   * @param dependencies \u4F9D\u8D56\u5217\u8868\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   */\n  private removeRedundantDependencies(dependencies: string[], taskPlan: TaskPlan): string[] {\n    if (dependencies.length <= 1) {\n      return dependencies;\n    }\n\n    const taskMap = new Map<string, Task>();\n    taskPlan.tasks.forEach(task => taskMap.set(task.id, task));\n\n    const result: string[] = [];\n\n    for (const depId of dependencies) {\n      const depTask = taskMap.get(depId);\n      if (!depTask) continue;\n\n      // \u68C0\u67E5\u662F\u5426\u5B58\u5728\u4F20\u9012\u4F9D\u8D56\n      let isRedundant = false;\n      for (const otherId of dependencies) {\n        if (otherId === depId) continue;\n\n        if (this.hasTransitiveDependency(otherId, depId, taskMap)) {\n          isRedundant = true;\n          break;\n        }\n      }\n\n      if (!isRedundant) {\n        result.push(depId);\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * \u68C0\u67E5\u662F\u5426\u5B58\u5728\u4F20\u9012\u4F9D\u8D56\n   * @param fromId \u8D77\u59CB\u4EFB\u52A1ID\n   * @param toId \u76EE\u6807\u4EFB\u52A1ID\n   * @param taskMap \u4EFB\u52A1\u6620\u5C04\n   */\n  private hasTransitiveDependency(fromId: string, toId: string, taskMap: Map<string, Task>): boolean {\n    const visited = new Set<string>();\n    const queue = [fromId];\n\n    while (queue.length > 0) {\n      const currentId = queue.shift()!;\n      if (visited.has(currentId)) continue;\n      visited.add(currentId);\n\n      const currentTask = taskMap.get(currentId);\n      if (!currentTask) continue;\n\n      for (const depId of currentTask.dependencies) {\n        if (depId === toId) {\n          return true;\n        }\n        if (!visited.has(depId)) {\n          queue.push(depId);\n        }\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * \u4F18\u5316\u4EFB\u52A1\u4F18\u5148\u7EA7\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   * @param options \u4F18\u5316\u9009\u9879\n   */\n  private optimizePriorities(taskPlan: TaskPlan, _options?: PlanningOptions): void {\n    this.logger.info('\u4F18\u5316\u4EFB\u52A1\u4F18\u5148\u7EA7');\n\n    // \u57FA\u4E8E\u4F9D\u8D56\u5173\u7CFB\u8C03\u6574\u4F18\u5148\u7EA7\n    taskPlan.tasks.forEach(task => {\n      // \u5982\u679C\u4EFB\u52A1\u6709\u5F88\u591A\u4F9D\u8D56\u8005\uFF0C\u63D0\u9AD8\u5176\u4F18\u5148\u7EA7\n      const dependents = this.findDependentTasks(task.id, taskPlan);\n      if (dependents.length >= 3) {\n        task.priority = TaskPriority.HIGH;\n      } else if (dependents.length >= 2) {\n        task.priority = TaskPriority.MEDIUM;\n      }\n\n      // \u5173\u952E\u8DEF\u5F84\u4E0A\u7684\u4EFB\u52A1\u63D0\u9AD8\u4F18\u5148\u7EA7\n      if (this.isOnCriticalPath(task.id, taskPlan)) {\n        task.priority = TaskPriority.CRITICAL;\n      }\n    });\n  }\n\n  /**\n   * \u67E5\u627E\u4F9D\u8D56\u67D0\u4E2A\u4EFB\u52A1\u7684\u6240\u6709\u4EFB\u52A1\n   * @param taskId \u4EFB\u52A1ID\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   */\n  private findDependentTasks(taskId: string, taskPlan: TaskPlan): Task[] {\n    return taskPlan.tasks.filter(task =>\n      task.dependencies.includes(taskId)\n    );\n  }\n\n  /**\n   * \u68C0\u67E5\u4EFB\u52A1\u662F\u5426\u5728\u5173\u952E\u8DEF\u5F84\u4E0A\n   * @param taskId \u4EFB\u52A1ID\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   */\n  private isOnCriticalPath(taskId: string, taskPlan: TaskPlan): boolean {\n    // \u7B80\u5316\u7684\u5173\u952E\u8DEF\u5F84\u68C0\u6D4B\uFF1A\u68C0\u67E5\u4EFB\u52A1\u662F\u5426\u6709\u957F\u4F9D\u8D56\u94FE\n    const task = taskPlan.tasks.find(t => t.id === taskId);\n    if (!task) return false;\n\n    const maxDepth = this.calculateDependencyDepth(taskId, taskPlan);\n    const avgDepth = this.calculateAverageDependencyDepth(taskPlan);\n\n    return maxDepth > avgDepth * 1.5;\n  }\n\n  /**\n   * \u8BA1\u7B97\u4EFB\u52A1\u7684\u4F9D\u8D56\u6DF1\u5EA6\n   * @param taskId \u4EFB\u52A1ID\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   */\n  private calculateDependencyDepth(taskId: string, taskPlan: TaskPlan): number {\n    const visited = new Set<string>();\n\n    const dfs = (id: string): number => {\n      if (visited.has(id)) return 0;\n      visited.add(id);\n\n      const task = taskPlan.tasks.find(t => t.id === id);\n      if (!task || task.dependencies.length === 0) {\n        return 1;\n      }\n\n      let maxDepth = 0;\n      for (const depId of task.dependencies) {\n        maxDepth = Math.max(maxDepth, dfs(depId));\n      }\n\n      return maxDepth + 1;\n    };\n\n    return dfs(taskId);\n  }\n\n  /**\n   * \u8BA1\u7B97\u5E73\u5747\u4F9D\u8D56\u6DF1\u5EA6\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   */\n  private calculateAverageDependencyDepth(taskPlan: TaskPlan): number {\n    const depths = taskPlan.tasks.map(task =>\n      this.calculateDependencyDepth(task.id, taskPlan)\n    );\n\n    return depths.reduce((sum, depth) => sum + depth, 0) / depths.length;\n  }\n\n  /**\n   * \u8BC6\u522B\u53EF\u5E76\u884C\u6267\u884C\u7684\u4EFB\u52A1\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   * @param options \u4F18\u5316\u9009\u9879\n   */\n  private identifyParallelTasks(taskPlan: TaskPlan, _options?: PlanningOptions): void {\n    this.logger.info('\u8BC6\u522B\u5E76\u884C\u4EFB\u52A1');\n\n    const maxParallel = 3; // Default maximum parallel tasks\n\n    // \u4E3A\u53EF\u5E76\u884C\u7684\u4EFB\u52A1\u6DFB\u52A0\u6807\u7B7E\n    const parallelGroups = this.findParallelGroups(taskPlan, maxParallel);\n\n    parallelGroups.forEach((group, index) => {\n      group.forEach(task => {\n        if (!task.tags) task.tags = [];\n        task.tags.push(`parallel-group-${index + 1}`);\n      });\n    });\n  }\n\n  /**\n   * \u67E5\u627E\u53EF\u5E76\u884C\u6267\u884C\u7684\u4EFB\u52A1\u7EC4\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   * @param maxGroupSize \u6700\u5927\u7EC4\u5927\u5C0F\n   */\n  private findParallelGroups(taskPlan: TaskPlan, maxGroupSize: number): Task[][] {\n    const groups: Task[][] = [];\n    const processed = new Set<string>();\n\n    taskPlan.tasks.forEach(task => {\n      if (processed.has(task.id)) return;\n\n      const parallelTasks = this.findParallelTasks(task, taskPlan, processed);\n      if (parallelTasks.length > 1 && parallelTasks.length <= maxGroupSize) {\n        groups.push(parallelTasks);\n        parallelTasks.forEach(t => processed.add(t.id));\n      }\n    });\n\n    return groups;\n  }\n\n  /**\n   * \u67E5\u627E\u4E0E\u6307\u5B9A\u4EFB\u52A1\u53EF\u5E76\u884C\u6267\u884C\u7684\u4EFB\u52A1\n   * @param task \u57FA\u51C6\u4EFB\u52A1\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   * @param processed \u5DF2\u5904\u7406\u7684\u4EFB\u52A1\n   */\n  private findParallelTasks(task: Task, taskPlan: TaskPlan, processed: Set<string>): Task[] {\n    const parallel = [task];\n\n    taskPlan.tasks.forEach(otherTask => {\n      if (otherTask.id === task.id || processed.has(otherTask.id)) return;\n\n      // \u68C0\u67E5\u662F\u5426\u53EF\u4EE5\u5E76\u884C\u6267\u884C\n      if (this.canRunInParallel(task, otherTask, taskPlan)) {\n        parallel.push(otherTask);\n      }\n    });\n\n    return parallel;\n  }\n\n  /**\n   * \u68C0\u67E5\u4E24\u4E2A\u4EFB\u52A1\u662F\u5426\u53EF\u4EE5\u5E76\u884C\u6267\u884C\n   * @param task1 \u4EFB\u52A11\n   * @param task2 \u4EFB\u52A12\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   */\n  private canRunInParallel(task1: Task, task2: Task, taskPlan: TaskPlan): boolean {\n    // \u68C0\u67E5\u76F4\u63A5\u4F9D\u8D56\u5173\u7CFB\n    if (task1.dependencies.includes(task2.id) || task2.dependencies.includes(task1.id)) {\n      return false;\n    }\n\n    // \u68C0\u67E5\u95F4\u63A5\u4F9D\u8D56\u5173\u7CFB\n    if (this.hasIndirectDependency(task1.id, task2.id, taskPlan) ||\n      this.hasIndirectDependency(task2.id, task1.id, taskPlan)) {\n      return false;\n    }\n\n    // \u68C0\u67E5\u8D44\u6E90\u51B2\u7A81\uFF08\u7B80\u5316\u7248\u672C\uFF1A\u540C\u7C7B\u578B\u4EFB\u52A1\u53EF\u80FD\u51B2\u7A81\uFF09\n    if (task1.type === task2.type &&\n      (task1.type === TaskType.DEPLOYMENT || task1.type === TaskType.TEST)) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * \u68C0\u67E5\u662F\u5426\u5B58\u5728\u95F4\u63A5\u4F9D\u8D56\u5173\u7CFB\n   * @param fromId \u8D77\u59CB\u4EFB\u52A1ID\n   * @param toId \u76EE\u6807\u4EFB\u52A1ID\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   */\n  private hasIndirectDependency(fromId: string, toId: string, taskPlan: TaskPlan): boolean {\n    const taskMap = new Map<string, Task>();\n    taskPlan.tasks.forEach(task => taskMap.set(task.id, task));\n\n    return this.hasTransitiveDependency(fromId, toId, taskMap);\n  }\n\n  /**\n   * \u5E73\u8861\u5DE5\u4F5C\u91CF\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   * @param options \u4F18\u5316\u9009\u9879\n   */\n  private balanceWorkload(taskPlan: TaskPlan, options?: PlanningOptions): void {\n    this.logger.info('\u5E73\u8861\u5DE5\u4F5C\u91CF');\n\n    const teamSize = options?.considerTeamSize || 3;\n\n    // \u8BA1\u7B97\u603B\u5DE5\u4F5C\u91CF\n    const totalHours = taskPlan.tasks.reduce((sum, task) =>\n      sum + (task.estimatedHours || 8), 0\n    );\n\n    const avgHoursPerPerson = totalHours / teamSize;\n\n    // \u6807\u8BB0\u5DE5\u4F5C\u91CF\u8FC7\u5927\u7684\u4EFB\u52A1\uFF0C\u5EFA\u8BAE\u62C6\u5206\n    taskPlan.tasks.forEach(task => {\n      const estimatedHours = task.estimatedHours || 8;\n\n      if (estimatedHours > avgHoursPerPerson * 0.5) {\n        if (!task.tags) task.tags = [];\n        task.tags.push('consider-splitting');\n\n        if (!task.notes) {\n          task.notes = '';\n        }\n        task.notes += `\\n\u5EFA\u8BAE\u62C6\u5206\uFF1A\u9884\u8BA1\u5DE5\u4F5C\u91CF ${estimatedHours} \u5C0F\u65F6\uFF0C\u8D85\u8FC7\u5E73\u5747\u503C\u768450%`;\n      }\n    });\n  }\n}", "/* eslint-disable @typescript-eslint/no-explicit-any */\nimport * as fs from 'fs-extra';\nimport * as path from 'path';\nimport { Task, TaskPlan, TaskStatus, TaskPriority, TaskType } from '../../types/task';\nimport { Logger } from '../../infra/logger';\nimport { ConfigManager } from '../../infra/config';\n\n/**\n * \u4EFB\u52A1\u8FC7\u6EE4\u6761\u4EF6\n */\nexport interface TaskFilter {\n  status?: TaskStatus | TaskStatus[];\n  type?: string | string[];\n  assignee?: string;\n  priority?: string | string[];\n}\n\n/**\n * \u4EFB\u52A1\u66F4\u65B0\u6570\u636E\n */\nexport interface TaskUpdateData {\n  name?: string;\n  description?: string;\n  status?: TaskStatus;\n  priority?: string;\n  assignee?: string;\n}\n\n/**\n * \u4EFB\u52A1\u7BA1\u7406\u5668\u7C7B\n * \u8D1F\u8D23\u7BA1\u7406\u4EFB\u52A1\u8BA1\u5212\u4E2D\u7684\u4EFB\u52A1\n */\nexport class TaskManager {\n  private taskPlan: TaskPlan | null = null;\n  private taskFilePath: string;\n  private logger: Logger;\n  private configManager: ConfigManager;\n  private autoSaveInterval: NodeJS.Timeout | null = null;\n\n  /**\n   * \u521B\u5EFA\u4EFB\u52A1\u7BA1\u7406\u5668\u5B9E\u4F8B\n   * @param logger \u65E5\u5FD7\u8BB0\u5F55\u5668\n   * @param configManager \u914D\u7F6E\u7BA1\u7406\u5668\n   */\n  constructor(logger: Logger, configManager: ConfigManager) {\n    this.logger = logger;\n    this.configManager = configManager;\n\n    // \u83B7\u53D6\u4EFB\u52A1\u6587\u4EF6\u8DEF\u5F84\u914D\u7F6E\n    const taskSettings = this.configManager.get('taskSettings', {\n      outputDir: './tasks',\n      autoSave: true,\n      saveInterval: 300\n    });\n\n    this.taskFilePath = path.join(taskSettings.outputDir, 'tasks.json');\n\n    // \u542F\u52A8\u81EA\u52A8\u4FDD\u5B58\n    if (taskSettings.autoSave) {\n      this.startAutoSave(taskSettings.saveInterval * 1000);\n    }\n  }\n\n  /**\n   * \u52A0\u8F7D\u4EFB\u52A1\u8BA1\u5212\n   * @param filePath \u4EFB\u52A1\u8BA1\u5212\u6587\u4EF6\u8DEF\u5F84\uFF0C\u4E0D\u6307\u5B9A\u5219\u4F7F\u7528\u9ED8\u8BA4\u8DEF\u5F84\n   */\n  public async loadTaskPlan(filePath?: string): Promise<TaskPlan> {\n    const targetPath = filePath || this.taskFilePath;\n\n    try {\n      // \u68C0\u67E5\u6587\u4EF6\u662F\u5426\u5B58\u5728\n      if (!fs.existsSync(targetPath)) {\n        throw new Error(`\u4EFB\u52A1\u8BA1\u5212\u6587\u4EF6\u4E0D\u5B58\u5728\uFF1A${targetPath}`);\n      }\n\n      // \u8BFB\u53D6\u4EFB\u52A1\u6587\u4EF6\n      const content = await fs.readFile(targetPath, 'utf-8');\n      this.taskPlan = JSON.parse(content) as TaskPlan;\n\n      this.logger.info(`\u6210\u529F\u52A0\u8F7D\u4EFB\u52A1\u8BA1\u5212\uFF0C\u5171 ${this.taskPlan.tasks.length} \u4E2A\u4EFB\u52A1`);\n      return this.taskPlan;\n    } catch (error) {\n      this.logger.error(`\u52A0\u8F7D\u4EFB\u52A1\u8BA1\u5212\u5931\u8D25\uFF1A${(error as Error).message}`);\n      throw error;\n    }\n  }\n\n  /**\n   * \u4FDD\u5B58\u4EFB\u52A1\u8BA1\u5212\n   * @param filePath \u4FDD\u5B58\u8DEF\u5F84\uFF0C\u4E0D\u6307\u5B9A\u5219\u4F7F\u7528\u9ED8\u8BA4\u8DEF\u5F84\n   */\n  public async saveTaskPlan(filePath?: string): Promise<void> {\n    const targetPath = filePath || this.taskFilePath;\n\n    if (!this.taskPlan) {\n      throw new Error('\u6CA1\u6709\u4EFB\u52A1\u8BA1\u5212\u53EF\u4FDD\u5B58\uFF0C\u8BF7\u5148\u52A0\u8F7D\u6216\u521B\u5EFA\u4EFB\u52A1\u8BA1\u5212');\n    }\n\n    try {\n      // \u786E\u4FDD\u76EE\u5F55\u5B58\u5728\n      await fs.ensureDir(path.dirname(targetPath));\n\n      // \u5199\u5165\u6587\u4EF6\n      await fs.writeFile(targetPath, JSON.stringify(this.taskPlan, null, 2), 'utf-8');\n\n      this.logger.info(`\u4EFB\u52A1\u8BA1\u5212\u5DF2\u4FDD\u5B58\u81F3 ${targetPath}`);\n    } catch (error) {\n      this.logger.error(`\u4FDD\u5B58\u4EFB\u52A1\u8BA1\u5212\u5931\u8D25\uFF1A${(error as Error).message}`);\n      throw error;\n    }\n  }\n\n  /**\n   * \u8BBE\u7F6E\u4EFB\u52A1\u8BA1\u5212\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   */\n  public setTaskPlan(taskPlan: TaskPlan): void {\n    this.taskPlan = taskPlan;\n    this.logger.info(`\u8BBE\u7F6E\u4EFB\u52A1\u8BA1\u5212\u6210\u529F\uFF0C\u5171 ${taskPlan.tasks.length} \u4E2A\u4EFB\u52A1`);\n  }\n\n  /**\n   * \u83B7\u53D6\u4EFB\u52A1\u8BA1\u5212\n   */\n  public getTaskPlan(): TaskPlan | null {\n    return this.taskPlan;\n  }\n\n  /**\n   * \u83B7\u53D6\u6240\u6709\u4EFB\u52A1\n   */\n  public getAllTasks(): Task[] {\n    if (!this.taskPlan) {\n      throw new Error('\u6CA1\u6709\u52A0\u8F7D\u4EFB\u52A1\u8BA1\u5212');\n    }\n\n    return [...this.taskPlan.tasks];\n  }\n\n  /**\n   * \u6839\u636EID\u83B7\u53D6\u4EFB\u52A1\n   * @param id \u4EFB\u52A1ID\n   */\n  public getTaskById(id: string): Task | null {\n    if (!this.taskPlan) {\n      throw new Error('\u6CA1\u6709\u52A0\u8F7D\u4EFB\u52A1\u8BA1\u5212');\n    }\n\n    // \u68C0\u67E5\u662F\u5426\u662F\u5B50\u4EFB\u52A1ID\uFF08\u5305\u542B\u70B9\u53F7\uFF09\n    if (id.includes('.')) {\n      const [parentId, subtaskId] = id.split('.');\n\n      // \u627E\u5230\u7236\u4EFB\u52A1\n      const parentTask = this.taskPlan.tasks.find(task => task.id === parentId);\n      if (!parentTask || !parentTask.subtasks) {\n        return null;\n      }\n\n      // \u67E5\u627E\u5B8C\u6574\u7684\u5B50\u4EFB\u52A1ID\n      const fullSubtaskId = `${parentId}.${subtaskId}`;\n      const subtask = parentTask.subtasks.find(st => st.id === fullSubtaskId);\n\n      // \u5982\u679C\u627E\u5230\u5B50\u4EFB\u52A1\uFF0C\u5C06\u5176\u8F6C\u6362\u4E3ATask\u7C7B\u578B\u8FD4\u56DE\n      if (subtask) {\n        return {\n          id: subtask.id,\n          name: subtask.name,\n          title: subtask.name,\n          description: subtask.description,\n          status: subtask.status,\n          priority: TaskPriority.MEDIUM, // \u5B50\u4EFB\u52A1\u9ED8\u8BA4\u7EE7\u627F\u7236\u4EFB\u52A1\u7684\u4F18\u5148\u7EA7\n          type: TaskType.FEATURE, // \u5B50\u4EFB\u52A1\u9ED8\u8BA4\u7C7B\u578B\n          dependencies: [],\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          tags: [],\n          subtasks: []\n        };\n      }\n\n      return null;\n    }\n\n    // \u67E5\u627E\u4E3B\u4EFB\u52A1\n    return this.taskPlan.tasks.find(task => task.id === id) || null;\n  }\n\n  /**\n   * \u8FC7\u6EE4\u4EFB\u52A1\n   * @param filter \u8FC7\u6EE4\u6761\u4EF6\n   */\n  public filterTasks(filter: TaskFilter): Task[] {\n    if (!this.taskPlan) {\n      throw new Error('\u6CA1\u6709\u52A0\u8F7D\u4EFB\u52A1\u8BA1\u5212');\n    }\n\n    return this.taskPlan.tasks.filter(task => {\n      // \u6309\u72B6\u6001\u8FC7\u6EE4\n      if (filter.status) {\n        if (Array.isArray(filter.status)) {\n          if (!filter.status.includes(task.status)) {\n            return false;\n          }\n        } else if (task.status !== filter.status) {\n          return false;\n        }\n      }\n\n      // \u6309\u7C7B\u578B\u8FC7\u6EE4\n      if (filter.type) {\n        if (Array.isArray(filter.type)) {\n          if (!filter.type.includes(task.type)) {\n            return false;\n          }\n        } else if (task.type !== filter.type) {\n          return false;\n        }\n      }\n\n      // \u6309\u8D1F\u8D23\u4EBA\u8FC7\u6EE4\n      if (filter.assignee && task.assignee !== filter.assignee) {\n        return false;\n      }\n\n      // \u6309\u4F18\u5148\u7EA7\u8FC7\u6EE4\n      if (filter.priority) {\n        if (Array.isArray(filter.priority)) {\n          if (!filter.priority.includes(task.priority)) {\n            return false;\n          }\n        } else if (task.priority !== filter.priority) {\n          return false;\n        }\n      }\n\n      return true;\n    });\n  }\n\n  /**\n   * \u6DFB\u52A0\u65B0\u4EFB\u52A1\n   * @param task \u4EFB\u52A1\n   */\n  public addTask(task: Task): Task {\n    if (!this.taskPlan) {\n      throw new Error('\u6CA1\u6709\u52A0\u8F7D\u4EFB\u52A1\u8BA1\u5212');\n    }\n\n    // \u68C0\u67E5ID\u662F\u5426\u5DF2\u5B58\u5728\n    const existingTask = this.taskPlan.tasks.find(t => t.id === task.id);\n    if (existingTask) {\n      throw new Error(`\u4EFB\u52A1ID ${task.id} \u5DF2\u5B58\u5728`);\n    }\n\n    // \u6DFB\u52A0\u65B0\u4EFB\u52A1\n    this.taskPlan.tasks.push(task);\n    this.logger.info(`\u6DFB\u52A0\u65B0\u4EFB\u52A1 ${task.id}: ${task.name}`);\n\n    return task;\n  }\n\n  /**\n   * \u66F4\u65B0\u4EFB\u52A1\n   * @param id \u4EFB\u52A1ID\n   * @param data \u66F4\u65B0\u6570\u636E\n   */\n  public updateTask(id: string, data: TaskUpdateData): Task | null {\n    if (!this.taskPlan) {\n      throw new Error('\u6CA1\u6709\u52A0\u8F7D\u4EFB\u52A1\u8BA1\u5212');\n    }\n\n    // \u68C0\u67E5\u662F\u5426\u662F\u5B50\u4EFB\u52A1\n    if (id.includes('.')) {\n      const [parentId] = id.split('.');\n\n      // \u627E\u5230\u7236\u4EFB\u52A1\n      const parentTaskIndex = this.taskPlan.tasks.findIndex(task => task.id === parentId);\n      if (parentTaskIndex < 0 || !this.taskPlan.tasks[parentTaskIndex].subtasks) {\n        return null;\n      }\n\n      // \u67E5\u627E\u5B8C\u6574\u7684\u5B50\u4EFB\u52A1ID\n      const fullSubtaskId = id;\n      const subtaskIndex = this.taskPlan.tasks[parentTaskIndex].subtasks.findIndex(\n        st => st.id === fullSubtaskId\n      );\n\n      if (subtaskIndex < 0) {\n        return null;\n      }\n\n      // \u66F4\u65B0\u5B50\u4EFB\u52A1\n      const subtask = this.taskPlan.tasks[parentTaskIndex].subtasks[subtaskIndex];\n\n      if (data.name) subtask.name = data.name;\n      if (data.description) subtask.description = data.description;\n      if (data.status) subtask.status = data.status;\n\n      this.logger.info(`\u66F4\u65B0\u5B50\u4EFB\u52A1 ${id}: ${subtask.name}`);\n\n      // \u6784\u9020\u8FD4\u56DE\u7684\u4EFB\u52A1\u5BF9\u8C61\n      return {\n        id: subtask.id,\n        name: subtask.name,\n        title: subtask.name,\n        description: subtask.description,\n        status: subtask.status,\n        priority: TaskPriority.MEDIUM,\n        type: TaskType.FEATURE,\n        dependencies: [],\n        subtasks: [],\n        createdAt: new Date(),\n        updatedAt: new Date(),\n        tags: []\n      };\n    }\n\n    // \u66F4\u65B0\u4E3B\u4EFB\u52A1\n    const taskIndex = this.taskPlan.tasks.findIndex(task => task.id === id);\n    if (taskIndex < 0) {\n      return null;\n    }\n\n    const task = this.taskPlan.tasks[taskIndex];\n\n    if (data.name) task.name = data.name;\n    if (data.description) task.description = data.description;\n    if (data.status) task.status = data.status;\n    if (data.priority) task.priority = data.priority as any;\n    if (data.assignee) task.assignee = data.assignee;\n\n    this.logger.info(`\u66F4\u65B0\u4EFB\u52A1 ${id}: ${task.name}`);\n\n    return task;\n  }\n\n  /**\n   * \u5220\u9664\u4EFB\u52A1\n   * @param id \u4EFB\u52A1ID\n   */\n  public removeTask(id: string): boolean {\n    if (!this.taskPlan) {\n      throw new Error('\u6CA1\u6709\u52A0\u8F7D\u4EFB\u52A1\u8BA1\u5212');\n    }\n\n    // \u68C0\u67E5\u662F\u5426\u662F\u5B50\u4EFB\u52A1\n    if (id.includes('.')) {\n      const [parentId] = id.split('.');\n\n      // \u627E\u5230\u7236\u4EFB\u52A1\n      const parentTaskIndex = this.taskPlan.tasks.findIndex(task => task.id === parentId);\n      if (parentTaskIndex < 0 || !this.taskPlan.tasks[parentTaskIndex].subtasks) {\n        return false;\n      }\n\n      // \u67E5\u627E\u5B8C\u6574\u7684\u5B50\u4EFB\u52A1ID\n      const fullSubtaskId = id;\n      const subtaskIndex = this.taskPlan.tasks[parentTaskIndex].subtasks.findIndex(\n        st => st.id === fullSubtaskId\n      );\n\n      if (subtaskIndex < 0) {\n        return false;\n      }\n\n      // \u5220\u9664\u5B50\u4EFB\u52A1\n      this.taskPlan.tasks[parentTaskIndex].subtasks.splice(subtaskIndex, 1);\n      this.logger.info(`\u5220\u9664\u5B50\u4EFB\u52A1 ${id}`);\n\n      return true;\n    }\n\n    // \u5220\u9664\u4E3B\u4EFB\u52A1\n    const taskIndex = this.taskPlan.tasks.findIndex(task => task.id === id);\n    if (taskIndex < 0) {\n      return false;\n    }\n\n    // \u5220\u9664\u4EFB\u52A1\n    this.taskPlan.tasks.splice(taskIndex, 1);\n\n    // \u6E05\u7406\u5176\u4ED6\u4EFB\u52A1\u5BF9\u8BE5\u4EFB\u52A1\u7684\u4F9D\u8D56\n    this.taskPlan.tasks.forEach(task => {\n      task.dependencies = task.dependencies.filter(depId => depId !== id);\n    });\n\n    this.logger.info(`\u5220\u9664\u4EFB\u52A1 ${id}`);\n\n    return true;\n  }\n\n  /**\n   * \u6DFB\u52A0\u5B50\u4EFB\u52A1\n   * @param parentId \u7236\u4EFB\u52A1ID\n   * @param subtask \u5B50\u4EFB\u52A1\n   */\n  public addSubtask(parentId: string, subtask: any): any {\n    if (!this.taskPlan) {\n      throw new Error('\u6CA1\u6709\u52A0\u8F7D\u4EFB\u52A1\u8BA1\u5212');\n    }\n\n    // \u627E\u5230\u7236\u4EFB\u52A1\n    const parentTask = this.taskPlan.tasks.find(task => task.id === parentId);\n    if (!parentTask) {\n      throw new Error(`\u7236\u4EFB\u52A1 ${parentId} \u4E0D\u5B58\u5728`);\n    }\n\n    // \u786E\u4FDDsubtasks\u662F\u6570\u7EC4\n    if (!Array.isArray(parentTask.subtasks)) {\n      parentTask.subtasks = [];\n    }\n\n    // \u8BBE\u7F6E\u5B50\u4EFB\u52A1ID\uFF08\u5982\u679C\u6CA1\u6709\u7684\u8BDD\uFF09\n    if (!subtask.id) {\n      subtask.id = `${parentId}.${parentTask.subtasks.length + 1}`;\n    }\n\n    // \u8BBE\u7F6E\u9ED8\u8BA4\u72B6\u6001\n    if (!subtask.status) {\n      subtask.status = TaskStatus.TODO;\n    }\n\n    // \u6DFB\u52A0\u5B50\u4EFB\u52A1\n    parentTask.subtasks.push(subtask);\n\n    this.logger.info(`\u4E3A\u4EFB\u52A1 ${parentId} \u6DFB\u52A0\u5B50\u4EFB\u52A1 ${subtask.id}: ${subtask.name}`);\n\n    return subtask;\n  }\n\n  /**\n   * \u83B7\u53D6\u4E0B\u4E00\u4E2A\u8981\u5904\u7406\u7684\u4EFB\u52A1\n   */\n  public getNextTasks(): Task[] {\n    if (!this.taskPlan) {\n      throw new Error('\u6CA1\u6709\u52A0\u8F7D\u4EFB\u52A1\u8BA1\u5212');\n    }\n\n    // \u67E5\u627E\u6240\u6709\u672A\u5B8C\u6210\u7684\u4EFB\u52A1\n    const pendingTasks = this.taskPlan.tasks.filter(task =>\n      task.status !== TaskStatus.DONE && task.status !== TaskStatus.REVIEW\n    );\n\n    // \u7B5B\u9009\u51FA\u53EF\u4EE5\u5F00\u59CB\u7684\u4EFB\u52A1\uFF08\u6CA1\u6709\u672A\u5B8C\u6210\u7684\u4F9D\u8D56\u9879\uFF09\n    return pendingTasks.filter(task => {\n      // \u68C0\u67E5\u4F9D\u8D56\n      if (!task.dependencies || task.dependencies.length === 0) {\n        return true;\n      }\n\n      // \u68C0\u67E5\u6240\u6709\u4F9D\u8D56\u4EFB\u52A1\u662F\u5426\u5DF2\u5B8C\u6210\n      return task.dependencies.every(depId => {\n        const depTask = this.getTaskById(depId);\n        return depTask && depTask.status === TaskStatus.DONE;\n      });\n    });\n  }\n\n  /**\n   * \u6DFB\u52A0\u4F9D\u8D56\u5173\u7CFB\n   * @param taskId \u4EFB\u52A1ID\n   * @param dependsOnId \u4F9D\u8D56\u7684\u4EFB\u52A1ID\n   */\n  public addDependency(taskId: string, dependsOnId: string): boolean {\n    if (!this.taskPlan) {\n      throw new Error('\u6CA1\u6709\u52A0\u8F7D\u4EFB\u52A1\u8BA1\u5212');\n    }\n\n    // \u627E\u5230\u4EFB\u52A1\n    const task = this.getTaskById(taskId);\n    if (!task) {\n      throw new Error(`\u4EFB\u52A1 ${taskId} \u4E0D\u5B58\u5728`);\n    }\n\n    // \u68C0\u67E5\u4F9D\u8D56\u4EFB\u52A1\u662F\u5426\u5B58\u5728\n    const dependsOnTask = this.getTaskById(dependsOnId);\n    if (!dependsOnTask) {\n      throw new Error(`\u4F9D\u8D56\u7684\u4EFB\u52A1 ${dependsOnId} \u4E0D\u5B58\u5728`);\n    }\n\n    // \u68C0\u67E5\u662F\u5426\u4E3A\u81EA\u8EAB\n    if (taskId === dependsOnId) {\n      throw new Error('\u4EFB\u52A1\u4E0D\u80FD\u4F9D\u8D56\u81EA\u8EAB');\n    }\n\n    // \u68C0\u67E5\u5FAA\u73AF\u4F9D\u8D56\n    if (this.checkCircularDependency(dependsOnId, taskId)) {\n      throw new Error('\u6DFB\u52A0\u6B64\u4F9D\u8D56\u4F1A\u5BFC\u81F4\u5FAA\u73AF\u4F9D\u8D56');\n    }\n\n    // \u68C0\u67E5\u4F9D\u8D56\u662F\u5426\u5DF2\u5B58\u5728\n    if (!Array.isArray(task.dependencies)) {\n      task.dependencies = [];\n    }\n\n    if (task.dependencies.includes(dependsOnId)) {\n      return false; // \u4F9D\u8D56\u5DF2\u5B58\u5728\n    }\n\n    // \u6DFB\u52A0\u4F9D\u8D56\n    task.dependencies.push(dependsOnId);\n\n    this.logger.info(`\u4E3A\u4EFB\u52A1 ${taskId} \u6DFB\u52A0\u4F9D\u8D56: ${dependsOnId}`);\n\n    return true;\n  }\n\n  /**\n   * \u79FB\u9664\u4F9D\u8D56\u5173\u7CFB\n   * @param taskId \u4EFB\u52A1ID\n   * @param dependsOnId \u4F9D\u8D56\u7684\u4EFB\u52A1ID\n   */\n  public removeDependency(taskId: string, dependsOnId: string): boolean {\n    if (!this.taskPlan) {\n      throw new Error('\u6CA1\u6709\u52A0\u8F7D\u4EFB\u52A1\u8BA1\u5212');\n    }\n\n    // \u627E\u5230\u4EFB\u52A1\n    const task = this.getTaskById(taskId);\n    if (!task || !Array.isArray(task.dependencies)) {\n      return false;\n    }\n\n    // \u67E5\u627E\u4F9D\u8D56\u7D22\u5F15\n    const index = task.dependencies.indexOf(dependsOnId);\n    if (index < 0) {\n      return false;\n    }\n\n    // \u79FB\u9664\u4F9D\u8D56\n    task.dependencies.splice(index, 1);\n\n    this.logger.info(`\u4ECE\u4EFB\u52A1 ${taskId} \u79FB\u9664\u4F9D\u8D56: ${dependsOnId}`);\n\n    return true;\n  }\n\n  /**\n   * \u68C0\u67E5\u662F\u5426\u5B58\u5728\u5FAA\u73AF\u4F9D\u8D56\n   * @param task1Id \u4EFB\u52A11ID\n   * @param task2Id \u4EFB\u52A12ID\n   */\n  private checkCircularDependency(task1Id: string, task2Id: string): boolean {\n    if (!this.taskPlan) {\n      return false;\n    }\n\n    // \u6784\u5EFA\u4F9D\u8D56\u56FE\n    const graph: Map<string, string[]> = new Map();\n\n    this.taskPlan.tasks.forEach(task => {\n      graph.set(task.id, [...(task.dependencies || [])]);\n    });\n\n    // \u4E34\u65F6\u6DFB\u52A0\u65B0\u4F9D\u8D56\n    const task1Deps = graph.get(task1Id) || [];\n    task1Deps.push(task2Id);\n    graph.set(task1Id, task1Deps);\n\n    // \u68C0\u67E5\u662F\u5426\u6709\u73AF\n    const visited = new Set<string>();\n    const recStack = new Set<string>();\n\n    const hasCycle = (node: string): boolean => {\n      if (recStack.has(node)) {\n        return true;\n      }\n\n      if (visited.has(node)) {\n        return false;\n      }\n\n      visited.add(node);\n      recStack.add(node);\n\n      const neighbors = graph.get(node) || [];\n\n      for (const neighbor of neighbors) {\n        if (hasCycle(neighbor)) {\n          return true;\n        }\n      }\n\n      recStack.delete(node);\n      return false;\n    };\n\n    return hasCycle(task1Id);\n  }\n\n  /**\n   * \u5F00\u59CB\u81EA\u52A8\u4FDD\u5B58\u4EFB\u52A1\u8BA1\u5212\n   * @param interval \u4FDD\u5B58\u95F4\u9694\uFF08\u6BEB\u79D2\uFF09\n   */\n  private startAutoSave(interval: number): void {\n    // \u505C\u6B62\u73B0\u6709\u7684\u81EA\u52A8\u4FDD\u5B58\n    if (this.autoSaveInterval) {\n      clearInterval(this.autoSaveInterval);\n    }\n\n    // \u8BBE\u7F6E\u65B0\u7684\u81EA\u52A8\u4FDD\u5B58\n    this.autoSaveInterval = setInterval(async () => {\n      if (this.taskPlan) {\n        try {\n          await this.saveTaskPlan();\n        } catch (error) {\n          this.logger.error(`\u81EA\u52A8\u4FDD\u5B58\u4EFB\u52A1\u8BA1\u5212\u5931\u8D25\uFF1A${(error as Error).message}`);\n        }\n      }\n    }, interval);\n\n    this.logger.info(`\u542F\u52A8\u81EA\u52A8\u4FDD\u5B58\uFF0C\u95F4\u9694: ${interval / 1000} \u79D2`);\n  }\n\n  /**\n   * \u505C\u6B62\u81EA\u52A8\u4FDD\u5B58\n   */\n  public stopAutoSave(): void {\n    if (this.autoSaveInterval) {\n      clearInterval(this.autoSaveInterval);\n      this.autoSaveInterval = null;\n      this.logger.info('\u505C\u6B62\u81EA\u52A8\u4FDD\u5B58');\n    }\n  }\n\n  /**\n   * \u6790\u6784\u51FD\u6570\uFF0C\u6E05\u7406\u8D44\u6E90\n   */\n  public destroy(): void {\n    this.stopAutoSave();\n  }\n} ", "/**\n * TaskFlow AI \u6838\u5FC3\u5F15\u64CE\n * \u8D1F\u8D23\u534F\u8C03PRD\u89E3\u6790\u3001\u4EFB\u52A1\u7F16\u6392\u548C\u7BA1\u7406\u7684\u6838\u5FC3\u903B\u8F91\n */\n\nimport { Logger } from '../../infra/logger';\nimport { ConfigManager } from '../../infra/config';\nimport { ModelCoordinator } from '../models/coordinator';\nimport { PRDParser } from '../parser/prd-parser';\nimport { TaskPlanner } from '../planner/task-planner';\nimport { TaskManager } from '../task/task-manager';\nimport { Task, TaskPlan, ParsedPRD, TaskStatus } from '../../types/task';\nimport { PlanningOptions } from '../../types/model';\n\n/**\n * \u5F15\u64CE\u914D\u7F6E\u63A5\u53E3\n */\nexport interface EngineConfig {\n  autoSave?: boolean;\n  saveInterval?: number;\n  outputDir?: string;\n  defaultModel?: string;\n  enableOptimization?: boolean;\n}\n\n/**\n * PRD\u89E3\u6790\u9009\u9879\n */\nexport interface ParseOptions {\n  extractDependencies?: boolean;\n  generateSubtasks?: boolean;\n  estimateEffort?: boolean;\n  detectPriorities?: boolean;\n}\n\n\n\n/**\n * \u5F15\u64CE\u6267\u884C\u7ED3\u679C\n */\nexport interface EngineResult<T = unknown> {\n  success: boolean;\n  data?: T;\n  message?: string;\n  errors?: string[];\n  warnings?: string[];\n  metadata?: Record<string, unknown>;\n}\n\n/**\n * TaskFlow AI \u6838\u5FC3\u5F15\u64CE\u7C7B\n */\nexport class TaskFlowEngine {\n  private logger: Logger;\n  private configManager: ConfigManager;\n  private modelCoordinator: ModelCoordinator;\n  private prdParser: PRDParser;\n  private taskPlanner: TaskPlanner;\n  private taskManager: TaskManager;\n  private config: EngineConfig;\n\n  /**\n   * \u521B\u5EFATaskFlow\u5F15\u64CE\u5B9E\u4F8B\n   */\n  constructor(\n    logger: Logger,\n    configManager: ConfigManager,\n    modelCoordinator: ModelCoordinator\n  ) {\n    this.logger = logger;\n    this.configManager = configManager;\n    this.modelCoordinator = modelCoordinator;\n\n    // \u52A0\u8F7D\u5F15\u64CE\u914D\u7F6E\n    this.config = this.configManager.get('engine', {\n      autoSave: true,\n      saveInterval: 300,\n      outputDir: './taskflow',\n      defaultModel: 'deepseek',\n      enableOptimization: true\n    });\n\n    // \u521D\u59CB\u5316\u6838\u5FC3\u7EC4\u4EF6\n    this.prdParser = new PRDParser(this.modelCoordinator, this.logger);\n    this.taskPlanner = new TaskPlanner(this.modelCoordinator, this.logger);\n    this.taskManager = new TaskManager(this.logger, this.configManager);\n\n    this.logger.info('TaskFlow AI \u5F15\u64CE\u521D\u59CB\u5316\u5B8C\u6210');\n  }\n\n  /**\n   * \u4ECEPRD\u6587\u4EF6\u89E3\u6790\u5E76\u751F\u6210\u5B8C\u6574\u7684\u4EFB\u52A1\u8BA1\u5212\n   * @param prdFilePath PRD\u6587\u4EF6\u8DEF\u5F84\n   * @param parseOptions \u89E3\u6790\u9009\u9879\n   * @param planningOptions \u89C4\u5212\u9009\u9879\n   */\n  public async processFromPRD(\n    prdFilePath: string,\n    parseOptions?: ParseOptions,\n    planningOptions?: PlanningOptions\n  ): Promise<EngineResult<TaskPlan>> {\n    try {\n      this.logger.info(`\u5F00\u59CB\u5904\u7406PRD\u6587\u4EF6: ${prdFilePath}`);\n\n      // \u7B2C\u4E00\u6B65\uFF1A\u89E3\u6790PRD\u6587\u6863\n      const parseResult = await this.parsePRD(prdFilePath, parseOptions);\n      if (!parseResult.success || !parseResult.data) {\n        return {\n          success: false,\n          message: 'PRD\u89E3\u6790\u5931\u8D25',\n          errors: parseResult.errors\n        };\n      }\n\n      // \u7B2C\u4E8C\u6B65\uFF1A\u751F\u6210\u4EFB\u52A1\u8BA1\u5212\n      const planResult = await this.generateTaskPlan(parseResult.data, planningOptions);\n      if (!planResult.success || !planResult.data) {\n        return {\n          success: false,\n          message: '\u4EFB\u52A1\u8BA1\u5212\u751F\u6210\u5931\u8D25',\n          errors: planResult.errors\n        };\n      }\n\n      // \u7B2C\u4E09\u6B65\uFF1A\u4F18\u5316\u4EFB\u52A1\u8BA1\u5212\n      if (this.config.enableOptimization) {\n        const optimizeResult = await this.optimizeTaskPlan(planResult.data, planningOptions);\n        if (optimizeResult.success && optimizeResult.data) {\n          planResult.data = optimizeResult.data;\n        }\n      }\n\n      // \u7B2C\u56DB\u6B65\uFF1A\u8BBE\u7F6E\u4EFB\u52A1\u7BA1\u7406\u5668\n      this.taskManager.setTaskPlan(planResult.data);\n\n      // \u7B2C\u4E94\u6B65\uFF1A\u4FDD\u5B58\u4EFB\u52A1\u8BA1\u5212\n      if (this.config.autoSave) {\n        await this.taskManager.saveTaskPlan();\n      }\n\n      this.logger.info('PRD\u5904\u7406\u5B8C\u6210\uFF0C\u4EFB\u52A1\u8BA1\u5212\u5DF2\u751F\u6210');\n\n      return {\n        success: true,\n        data: planResult.data,\n        message: `\u6210\u529F\u751F\u6210\u5305\u542B ${planResult.data.tasks.length} \u4E2A\u4EFB\u52A1\u7684\u8BA1\u5212`,\n        metadata: {\n          prdFile: prdFilePath,\n          tasksCount: planResult.data.tasks.length,\n          processedAt: new Date().toISOString()\n        }\n      };\n\n    } catch (error) {\n      this.logger.error(`\u5904\u7406PRD\u5931\u8D25: ${(error as Error).message}`);\n      return {\n        success: false,\n        message: '\u5904\u7406PRD\u65F6\u53D1\u751F\u9519\u8BEF',\n        errors: [(error as Error).message]\n      };\n    }\n  }\n\n  /**\n   * \u89E3\u6790PRD\u6587\u6863\n   * @param prdFilePath PRD\u6587\u4EF6\u8DEF\u5F84\n   * @param options \u89E3\u6790\u9009\u9879\n   */\n  public async parsePRD(\n    prdFilePath: string,\n    options?: ParseOptions\n  ): Promise<EngineResult<ParsedPRD>> {\n    try {\n      this.logger.info(`\u5F00\u59CB\u89E3\u6790PRD: ${prdFilePath}`);\n\n      const result = await this.prdParser.parseFromFile(prdFilePath, options);\n\n      return {\n        success: true,\n        data: result,\n        message: 'PRD\u89E3\u6790\u6210\u529F'\n      };\n\n    } catch (error) {\n      this.logger.error(`PRD\u89E3\u6790\u5931\u8D25: ${(error as Error).message}`);\n      return {\n        success: false,\n        message: 'PRD\u89E3\u6790\u5931\u8D25',\n        errors: [(error as Error).message]\n      };\n    }\n  }\n\n  /**\n   * \u751F\u6210\u4EFB\u52A1\u8BA1\u5212\n   * @param prdData \u89E3\u6790\u540E\u7684PRD\u6570\u636E\n   * @param options \u89C4\u5212\u9009\u9879\n   */\n  public async generateTaskPlan(\n    prdData: ParsedPRD,\n    options?: PlanningOptions\n  ): Promise<EngineResult<TaskPlan>> {\n    try {\n      this.logger.info('\u5F00\u59CB\u751F\u6210\u4EFB\u52A1\u8BA1\u5212');\n\n      const result = await this.taskPlanner.generateTaskPlan(prdData, options);\n\n      return {\n        success: true,\n        data: result,\n        message: `\u4EFB\u52A1\u8BA1\u5212\u751F\u6210\u6210\u529F\uFF0C\u5305\u542B ${result.tasks.length} \u4E2A\u4EFB\u52A1`\n      };\n\n    } catch (error) {\n      this.logger.error(`\u4EFB\u52A1\u8BA1\u5212\u751F\u6210\u5931\u8D25: ${(error as Error).message}`);\n      return {\n        success: false,\n        message: '\u4EFB\u52A1\u8BA1\u5212\u751F\u6210\u5931\u8D25',\n        errors: [(error as Error).message]\n      };\n    }\n  }\n\n  /**\n   * \u4F18\u5316\u4EFB\u52A1\u8BA1\u5212\n   * @param taskPlan \u539F\u59CB\u4EFB\u52A1\u8BA1\u5212\n   * @param options \u4F18\u5316\u9009\u9879\n   */\n  public async optimizeTaskPlan(\n    taskPlan: TaskPlan,\n    options?: PlanningOptions\n  ): Promise<EngineResult<TaskPlan>> {\n    try {\n      this.logger.info('\u5F00\u59CB\u4F18\u5316\u4EFB\u52A1\u8BA1\u5212');\n\n      // \u4F7F\u7528AI\u6A21\u578B\u4F18\u5316\u4EFB\u52A1\u987A\u5E8F\u548C\u4F9D\u8D56\u5173\u7CFB\n      const optimizedPlan = await this.taskPlanner.optimizeTaskPlan(taskPlan, options);\n\n      return {\n        success: true,\n        data: optimizedPlan,\n        message: '\u4EFB\u52A1\u8BA1\u5212\u4F18\u5316\u5B8C\u6210'\n      };\n\n    } catch (error) {\n      this.logger.error(`\u4EFB\u52A1\u8BA1\u5212\u4F18\u5316\u5931\u8D25: ${(error as Error).message}`);\n      return {\n        success: false,\n        message: '\u4EFB\u52A1\u8BA1\u5212\u4F18\u5316\u5931\u8D25',\n        errors: [(error as Error).message]\n      };\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u5F53\u524D\u4EFB\u52A1\u8BA1\u5212\n   */\n  public getCurrentTaskPlan(): TaskPlan | null {\n    return this.taskManager.getTaskPlan();\n  }\n\n  /**\n   * \u83B7\u53D6\u63A8\u8350\u7684\u4E0B\u4E00\u4E2A\u4EFB\u52A1\n   */\n  public getRecommendedTasks(): Task[] {\n    return this.taskManager.getNextTasks();\n  }\n\n  /**\n   * \u66F4\u65B0\u4EFB\u52A1\u72B6\u6001\n   * @param taskId \u4EFB\u52A1ID\n   * @param status \u65B0\u72B6\u6001\n   */\n  public async updateTaskStatus(taskId: string, status: string): Promise<EngineResult<Task>> {\n    try {\n      const task = this.taskManager.updateTask(taskId, { status: status as TaskStatus });\n\n      if (!task) {\n        return {\n          success: false,\n          message: `\u4EFB\u52A1 ${taskId} \u4E0D\u5B58\u5728`\n        };\n      }\n\n      // \u81EA\u52A8\u4FDD\u5B58\n      if (this.config.autoSave) {\n        await this.taskManager.saveTaskPlan();\n      }\n\n      return {\n        success: true,\n        data: task,\n        message: `\u4EFB\u52A1 ${taskId} \u72B6\u6001\u5DF2\u66F4\u65B0\u4E3A ${status}`\n      };\n\n    } catch (error) {\n      this.logger.error(`\u66F4\u65B0\u4EFB\u52A1\u72B6\u6001\u5931\u8D25: ${(error as Error).message}`);\n      return {\n        success: false,\n        message: '\u66F4\u65B0\u4EFB\u52A1\u72B6\u6001\u5931\u8D25',\n        errors: [(error as Error).message]\n      };\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u9879\u76EE\u8FDB\u5EA6\u7EDF\u8BA1\n   */\n  public getProgressStats(): {\n    total: number;\n    completed: number;\n    inProgress: number;\n    notStarted: number;\n    blocked: number;\n    completionRate: number;\n  } {\n    const taskPlan = this.taskManager.getTaskPlan();\n    if (!taskPlan) {\n      return {\n        total: 0,\n        completed: 0,\n        inProgress: 0,\n        notStarted: 0,\n        blocked: 0,\n        completionRate: 0\n      };\n    }\n\n    const stats = {\n      total: taskPlan.tasks.length,\n      completed: 0,\n      inProgress: 0,\n      notStarted: 0,\n      blocked: 0,\n      completionRate: 0\n    };\n\n    taskPlan.tasks.forEach(task => {\n      switch (task.status) {\n        case 'completed':\n          stats.completed++;\n          break;\n        case 'in_progress':\n          stats.inProgress++;\n          break;\n        case 'not_started':\n          stats.notStarted++;\n          break;\n        case 'blocked':\n          stats.blocked++;\n          break;\n      }\n    });\n\n    stats.completionRate = stats.total > 0 ? (stats.completed / stats.total) * 100 : 0;\n\n    return stats;\n  }\n\n  /**\n   * \u9500\u6BC1\u5F15\u64CE\uFF0C\u6E05\u7406\u8D44\u6E90\n   */\n  public destroy(): void {\n    this.taskManager.destroy();\n    this.logger.info('TaskFlow AI \u5F15\u64CE\u5DF2\u9500\u6BC1');\n  }\n}\n", "/**\n * TaskFlow AI \u4EFB\u52A1\u53EF\u89C6\u5316\u6A21\u5757\n * \u8D1F\u8D23\u751F\u6210\u5404\u79CD\u4EFB\u52A1\u53EF\u89C6\u5316\u56FE\u8868\n */\n\nimport { Task, TaskPlan, TaskStatus } from '../../types/task';\nimport { Logger } from '../../infra/logger';\n\n/**\n * \u53EF\u89C6\u5316\u7C7B\u578B\u679A\u4E3E\n */\nexport enum VisualizationType {\n  GANTT = 'gantt',\n  DEPENDENCY = 'dependency',\n  KANBAN = 'kanban',\n  TIMELINE = 'timeline',\n  PROGRESS = 'progress'\n}\n\n/**\n * \u53EF\u89C6\u5316\u9009\u9879\n */\nexport interface VisualizationOptions {\n  type: VisualizationType;\n  format?: 'mermaid' | 'json' | 'html';\n  includeSubtasks?: boolean;\n  showProgress?: boolean;\n  groupBy?: 'type' | 'assignee' | 'priority';\n  timeUnit?: 'days' | 'hours';\n}\n\n/**\n * \u7518\u7279\u56FE\u6570\u636E\n */\nexport interface GanttData {\n  title: string;\n  tasks: GanttTask[];\n}\n\nexport interface GanttTask {\n  id: string;\n  name: string;\n  start: string;\n  duration: number;\n  dependencies?: string[];\n  progress?: number;\n  assignee?: string;\n}\n\n/**\n * \u4F9D\u8D56\u5173\u7CFB\u56FE\u6570\u636E\n */\nexport interface DependencyGraph {\n  nodes: DependencyNode[];\n  edges: DependencyEdge[];\n}\n\nexport interface DependencyNode {\n  id: string;\n  label: string;\n  type: string;\n  status: string;\n  priority: string;\n}\n\nexport interface DependencyEdge {\n  from: string;\n  to: string;\n  type: 'dependency';\n}\n\n/**\n * \u770B\u677F\u6570\u636E\n */\nexport interface KanbanData {\n  columns: KanbanColumn[];\n}\n\nexport interface KanbanColumn {\n  id: string;\n  title: string;\n  tasks: KanbanTask[];\n}\n\nexport interface KanbanTask {\n  id: string;\n  title: string;\n  description: string;\n  priority: string;\n  assignee?: string;\n  tags: string[];\n}\n\n/**\n * \u4EFB\u52A1\u53EF\u89C6\u5316\u5668\u7C7B\n */\nexport class TaskVisualizer {\n  private logger: Logger;\n\n  constructor(logger: Logger) {\n    this.logger = logger;\n  }\n\n  /**\n   * \u751F\u6210\u53EF\u89C6\u5316\u6570\u636E\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   * @param options \u53EF\u89C6\u5316\u9009\u9879\n   */\n  public generateVisualization(taskPlan: TaskPlan, options: VisualizationOptions): any {\n    this.logger.info(`\u751F\u6210 ${options.type} \u53EF\u89C6\u5316`);\n\n    switch (options.type) {\n      case VisualizationType.GANTT:\n        return this.generateGanttChart(taskPlan, options);\n      case VisualizationType.DEPENDENCY:\n        return this.generateDependencyGraph(taskPlan, options);\n      case VisualizationType.KANBAN:\n        return this.generateKanbanBoard(taskPlan, options);\n      case VisualizationType.TIMELINE:\n        return this.generateTimeline(taskPlan, options);\n      case VisualizationType.PROGRESS:\n        return this.generateProgressChart(taskPlan, options);\n      default:\n        throw new Error(`\u4E0D\u652F\u6301\u7684\u53EF\u89C6\u5316\u7C7B\u578B: ${options.type}`);\n    }\n  }\n\n  /**\n   * \u751F\u6210\u7518\u7279\u56FE\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   * @param options \u9009\u9879\n   */\n  private generateGanttChart(taskPlan: TaskPlan, options: VisualizationOptions): GanttData | string {\n    const ganttTasks: GanttTask[] = [];\n    let currentDate = new Date();\n\n    taskPlan.tasks.forEach(task => {\n      const ganttTask: GanttTask = {\n        id: task.id,\n        name: task.title,\n        start: this.formatDate(currentDate),\n        duration: task.estimatedHours || 8,\n        dependencies: task.dependencies.length > 0 ? task.dependencies : undefined,\n        progress: task.progress || 0,\n        assignee: task.assignee\n      };\n\n      ganttTasks.push(ganttTask);\n\n      // \u8BA1\u7B97\u4E0B\u4E00\u4E2A\u4EFB\u52A1\u7684\u5F00\u59CB\u65F6\u95F4\n      currentDate = new Date(currentDate.getTime() + (task.estimatedHours || 8) * 60 * 60 * 1000);\n    });\n\n    const ganttData: GanttData = {\n      title: taskPlan.name || '\u4EFB\u52A1\u7518\u7279\u56FE',\n      tasks: ganttTasks\n    };\n\n    if (options.format === 'mermaid') {\n      return this.generateMermaidGantt(ganttData);\n    }\n\n    return ganttData;\n  }\n\n  /**\n   * \u751F\u6210Mermaid\u683C\u5F0F\u7684\u7518\u7279\u56FE\n   * @param ganttData \u7518\u7279\u56FE\u6570\u636E\n   */\n  private generateMermaidGantt(ganttData: GanttData): string {\n    let mermaid = `gantt\\n    title ${ganttData.title}\\n    dateFormat YYYY-MM-DD\\n    axisFormat %m-%d\\n\\n`;\n\n    ganttData.tasks.forEach(task => {\n      const progress = task.progress ?? 0;\n      const status = progress === 100 ? 'done' : progress > 0 ? 'active' : '';\n      const duration = `${task.duration}h`;\n\n      mermaid += `    ${task.name} :${status}, ${task.id}, ${task.start}, ${duration}\\n`;\n    });\n\n    return mermaid;\n  }\n\n  /**\n   * \u751F\u6210\u4F9D\u8D56\u5173\u7CFB\u56FE\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   * @param options \u9009\u9879\n   */\n  private generateDependencyGraph(taskPlan: TaskPlan, options: VisualizationOptions): DependencyGraph | string {\n    const nodes: DependencyNode[] = [];\n    const edges: DependencyEdge[] = [];\n\n    // \u751F\u6210\u8282\u70B9\n    taskPlan.tasks.forEach(task => {\n      nodes.push({\n        id: task.id,\n        label: task.title,\n        type: task.type,\n        status: task.status,\n        priority: task.priority\n      });\n    });\n\n    // \u751F\u6210\u8FB9\n    taskPlan.tasks.forEach(task => {\n      task.dependencies.forEach(depId => {\n        edges.push({\n          from: depId,\n          to: task.id,\n          type: 'dependency'\n        });\n      });\n    });\n\n    const graph: DependencyGraph = { nodes, edges };\n\n    if (options.format === 'mermaid') {\n      return this.generateMermaidDependencyGraph(graph);\n    }\n\n    return graph;\n  }\n\n  /**\n   * \u751F\u6210Mermaid\u683C\u5F0F\u7684\u4F9D\u8D56\u5173\u7CFB\u56FE\n   * @param graph \u4F9D\u8D56\u5173\u7CFB\u56FE\u6570\u636E\n   */\n  private generateMermaidDependencyGraph(graph: DependencyGraph): string {\n    let mermaid = `graph TD\\n`;\n\n    // \u6DFB\u52A0\u8282\u70B9\u5B9A\u4E49\n    graph.nodes.forEach(node => {\n      const shape = this.getNodeShape(node.status);\n      const style = this.getNodeStyle(node.priority);\n      mermaid += `    ${node.id}${shape}[\"${node.label}\"]\\n`;\n      if (style) {\n        mermaid += `    class ${node.id} ${style}\\n`;\n      }\n    });\n\n    mermaid += '\\n';\n\n    // \u6DFB\u52A0\u8FB9\n    graph.edges.forEach(edge => {\n      mermaid += `    ${edge.from} --> ${edge.to}\\n`;\n    });\n\n    // \u6DFB\u52A0\u6837\u5F0F\u5B9A\u4E49\n    mermaid += '\\n';\n    mermaid += '    classDef high fill:#ff6b6b,stroke:#333,stroke-width:2px\\n';\n    mermaid += '    classDef medium fill:#feca57,stroke:#333,stroke-width:2px\\n';\n    mermaid += '    classDef low fill:#48dbfb,stroke:#333,stroke-width:2px\\n';\n    mermaid += '    classDef critical fill:#ff3838,stroke:#333,stroke-width:3px\\n';\n\n    return mermaid;\n  }\n\n  /**\n   * \u83B7\u53D6\u8282\u70B9\u5F62\u72B6\n   * @param status \u4EFB\u52A1\u72B6\u6001\n   */\n  private getNodeShape(status: string): string {\n    switch (status) {\n      case TaskStatus.COMPLETED:\n        return '(())';\n      case TaskStatus.IN_PROGRESS:\n        return '([])';\n      case TaskStatus.BLOCKED:\n        return '{[]}';\n      default:\n        return '[]';\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u8282\u70B9\u6837\u5F0F\n   * @param priority \u4F18\u5148\u7EA7\n   */\n  private getNodeStyle(priority: string): string {\n    switch (priority) {\n      case 'critical':\n        return 'critical';\n      case 'high':\n        return 'high';\n      case 'medium':\n        return 'medium';\n      case 'low':\n        return 'low';\n      default:\n        return '';\n    }\n  }\n\n  /**\n   * \u751F\u6210\u770B\u677F\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   * @param options \u9009\u9879\n   */\n  private generateKanbanBoard(taskPlan: TaskPlan, _options: VisualizationOptions): KanbanData {\n    const columns: KanbanColumn[] = [\n      { id: 'not_started', title: '\u5F85\u5F00\u59CB', tasks: [] },\n      { id: 'in_progress', title: '\u8FDB\u884C\u4E2D', tasks: [] },\n      { id: 'completed', title: '\u5DF2\u5B8C\u6210', tasks: [] },\n      { id: 'blocked', title: '\u88AB\u963B\u585E', tasks: [] }\n    ];\n\n    taskPlan.tasks.forEach(task => {\n      const kanbanTask: KanbanTask = {\n        id: task.id,\n        title: task.title,\n        description: task.description,\n        priority: task.priority,\n        assignee: task.assignee,\n        tags: task.tags\n      };\n\n      const column = columns.find(col => col.id === task.status);\n      if (column) {\n        column.tasks.push(kanbanTask);\n      }\n    });\n\n    return { columns };\n  }\n\n  /**\n   * \u751F\u6210\u65F6\u95F4\u7EBF\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   * @param options \u9009\u9879\n   */\n  private generateTimeline(taskPlan: TaskPlan, _options: VisualizationOptions): any {\n    // \u7B80\u5316\u7684\u65F6\u95F4\u7EBF\u5B9E\u73B0\n    const timeline = {\n      title: taskPlan.name || '\u9879\u76EE\u65F6\u95F4\u7EBF',\n      events: taskPlan.tasks.map((task, index) => ({\n        id: task.id,\n        title: task.title,\n        date: this.calculateTaskStartDate(task, index),\n        duration: task.estimatedHours || 8,\n        status: task.status,\n        priority: task.priority\n      }))\n    };\n\n    return timeline;\n  }\n\n  /**\n   * \u751F\u6210\u8FDB\u5EA6\u56FE\u8868\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   * @param options \u9009\u9879\n   */\n  private generateProgressChart(taskPlan: TaskPlan, _options: VisualizationOptions): any {\n    const stats = {\n      total: taskPlan.tasks.length,\n      completed: 0,\n      inProgress: 0,\n      notStarted: 0,\n      blocked: 0\n    };\n\n    taskPlan.tasks.forEach(task => {\n      switch (task.status) {\n        case TaskStatus.COMPLETED:\n          stats.completed++;\n          break;\n        case TaskStatus.IN_PROGRESS:\n          stats.inProgress++;\n          break;\n        case TaskStatus.NOT_STARTED:\n          stats.notStarted++;\n          break;\n        case TaskStatus.BLOCKED:\n          stats.blocked++;\n          break;\n      }\n    });\n\n    const completionRate = (stats.completed / stats.total) * 100;\n\n    return {\n      stats,\n      completionRate,\n      chartData: [\n        { label: '\u5DF2\u5B8C\u6210', value: stats.completed, color: '#4CAF50' },\n        { label: '\u8FDB\u884C\u4E2D', value: stats.inProgress, color: '#FF9800' },\n        { label: '\u672A\u5F00\u59CB', value: stats.notStarted, color: '#9E9E9E' },\n        { label: '\u88AB\u963B\u585E', value: stats.blocked, color: '#F44336' }\n      ]\n    };\n  }\n\n  /**\n   * \u683C\u5F0F\u5316\u65E5\u671F\n   * @param date \u65E5\u671F\n   */\n  private formatDate(date: Date): string {\n    return date.toISOString().split('T')[0];\n  }\n\n  /**\n   * \u8BA1\u7B97\u4EFB\u52A1\u5F00\u59CB\u65E5\u671F\n   * @param task \u4EFB\u52A1\n   * @param index \u7D22\u5F15\n   */\n  private calculateTaskStartDate(task: Task, index: number): string {\n    // \u7B80\u5316\u5B9E\u73B0\uFF1A\u57FA\u4E8E\u7D22\u5F15\u8BA1\u7B97\u5F00\u59CB\u65E5\u671F\n    const startDate = new Date();\n    startDate.setDate(startDate.getDate() + index);\n    return this.formatDate(startDate);\n  }\n}\n", "import * as fs from 'fs';\nimport * as path from 'path';\nimport * as os from 'os';\nimport { ModelType } from '../types/config';\n\n/**\n * \u7B80\u5316\u7684\u914D\u7F6E\u7BA1\u7406\u5668\n * \u8D1F\u8D23\u7BA1\u7406\u5E94\u7528\u7A0B\u5E8F\u7684\u914D\u7F6E\u4FE1\u606F\n */\nexport class SimpleConfigManager {\n  private configPath: string;\n  private config: any;\n\n  constructor() {\n    this.configPath = path.join(os.homedir(), '.taskflow-ai', 'config.json');\n    this.config = this.loadConfig();\n  }\n\n  private loadConfig(): any {\n    try {\n      if (fs.existsSync(this.configPath)) {\n        const configData = fs.readFileSync(this.configPath, 'utf8');\n        return JSON.parse(configData);\n      }\n    } catch (error) {\n      console.warn(`\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\u5931\u8D25: ${(error as Error).message}`);\n    }\n\n    // \u8FD4\u56DE\u9ED8\u8BA4\u914D\u7F6E\n    return {\n      models: {\n        default: ModelType.DEEPSEEK,\n        apiKeys: {},\n        endpoints: {}\n      },\n      ui: {\n        theme: 'light',\n        language: 'zh-CN'\n      },\n      features: {\n        autoSave: true,\n        notifications: true\n      }\n    };\n  }\n\n  private saveConfig(): void {\n    try {\n      const configDir = path.dirname(this.configPath);\n      if (!fs.existsSync(configDir)) {\n        fs.mkdirSync(configDir, { recursive: true });\n      }\n      fs.writeFileSync(this.configPath, JSON.stringify(this.config, null, 2));\n    } catch (error) {\n      console.error(`\u4FDD\u5B58\u914D\u7F6E\u6587\u4EF6\u5931\u8D25: ${(error as Error).message}`);\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u914D\u7F6E\u503C\n   */\n  get(key: string, defaultValue?: any): any {\n    const keys = key.split('.');\n    let value = this.config;\n\n    for (const k of keys) {\n      if (value && typeof value === 'object' && k in value) {\n        value = value[k];\n      } else {\n        return defaultValue;\n      }\n    }\n\n    return value;\n  }\n\n  /**\n   * \u8BBE\u7F6E\u914D\u7F6E\u503C\n   */\n  set(key: string, value: any): void {\n    const keys = key.split('.');\n    let current = this.config;\n\n    for (let i = 0; i < keys.length - 1; i++) {\n      const k = keys[i];\n      if (!current[k] || typeof current[k] !== 'object') {\n        current[k] = {};\n      }\n      current = current[k];\n    }\n\n    current[keys[keys.length - 1]] = value;\n    this.saveConfig();\n  }\n\n  /**\n   * \u83B7\u53D6\u6240\u6709\u914D\u7F6E\n   */\n  getAll(): any {\n    return { ...this.config };\n  }\n\n  /**\n   * \u66F4\u65B0\u914D\u7F6E\n   */\n  update(newConfig: any): void {\n    this.config = { ...this.config, ...newConfig };\n    this.saveConfig();\n  }\n\n  /**\n   * \u91CD\u7F6E\u914D\u7F6E\n   */\n  reset(): void {\n    this.config = this.loadConfig();\n  }\n\n  /**\n   * \u83B7\u53D6\u914D\u7F6E\uFF08\u517C\u5BB9\u539FConfigManager\u63A5\u53E3\uFF09\n   */\n  getConfig(): any {\n    return this.getAll();\n  }\n\n  /**\n   * \u66F4\u65B0\u914D\u7F6E\uFF08\u517C\u5BB9\u539FConfigManager\u63A5\u53E3\uFF09\n   */\n  updateConfig(config: any, _isProjectLevel = false): void {\n    this.update(config);\n  }\n\n  /**\n   * \u83B7\u53D6\u9ED8\u8BA4\u6A21\u578B\u7C7B\u578B\n   */\n  getDefaultModelType(): ModelType {\n    return this.get('models.default', ModelType.DEEPSEEK);\n  }\n}\n", "/**\n * \u914D\u7F6E\u76F8\u5173\u7C7B\u578B\u5B9A\u4E49\n */\n\n/**\n * \u6A21\u578B\u7C7B\u578B\u679A\u4E3E\n */\nexport enum ModelType {\n  BAIDU = 'baidu',\n  XUNFEI = 'xunfei',\n  ZHIPU = 'zhipu',\n  DEEPSEEK = 'deepseek',\n  QWEN = 'qwen',\n  SPARK = 'spark',\n  MOONSHOT = 'moonshot',\n}\n\n/**\n * \u65E5\u5FD7\u7EA7\u522B\n */\nexport enum LogLevel {\n  ERROR = 'error',\n  WARN = 'warn',\n  INFO = 'info',\n  DEBUG = 'debug',\n}\n\n/**\n * \u901A\u7528\u6A21\u578B\u914D\u7F6E\u63A5\u53E3\n */\nexport interface ModelConfig {\n  apiKey: string;\n  endpoint?: string;\n}\n\n/**\n * \u767E\u5EA6\u6587\u5FC3\u6A21\u578B\u914D\u7F6E\n */\nexport interface BaiduModelConfig extends ModelConfig {\n  secretKey: string;\n  modelVersion?: string;\n}\n\n/**\n * \u8BAF\u98DE\u661F\u706B\u6A21\u578B\u914D\u7F6E\n */\nexport interface XunfeiModelConfig extends ModelConfig {\n  appId: string;\n  apiSecret: string;\n}\n\n/**\n * \u667A\u8C31AI\u6A21\u578B\u914D\u7F6E\n */\nexport interface ZhipuModelConfig extends ModelConfig {\n  modelVersion?: string;\n}\n\n/**\n * DeepSeek\u6A21\u578B\u914D\u7F6E\n */\nexport interface DeepseekModelConfig extends ModelConfig {\n  modelVersion?: string;\n}\n\n/**\n * \u963F\u91CC\u901A\u4E49\u5343\u95EE\u6A21\u578B\u914D\u7F6E\n */\nexport interface QwenModelConfig extends ModelConfig {\n  modelVersion?: string;\n  region?: string;\n}\n\n/**\n * \u8BAF\u98DE\u661F\u706B\u6A21\u578B\u914D\u7F6E\uFF08\u6269\u5C55\u7248\uFF09\n */\nexport interface SparkModelConfig extends ModelConfig {\n  appId: string;\n  apiSecret: string;\n  domain?: string;\n}\n\n/**\n * \u6708\u4E4B\u6697\u9762\u6A21\u578B\u914D\u7F6E\n */\nexport interface MoonshotModelConfig extends ModelConfig {\n  modelVersion?: string;\n}\n\n/**\n * \u591A\u6A21\u578B\u534F\u4F5C\u914D\u7F6E\n */\nexport interface MultiModelConfig {\n  enabled: boolean;\n  primary: ModelType;\n  fallback: ModelType[];\n  loadBalancing: boolean;\n  costOptimization: boolean;\n}\n\n/**\n * \u6240\u6709\u6A21\u578B\u914D\u7F6E\u6620\u5C04\n */\nexport interface ModelsConfig {\n  default: ModelType;\n  multiModel?: MultiModelConfig;\n  [ModelType.BAIDU]?: BaiduModelConfig;\n  [ModelType.XUNFEI]?: XunfeiModelConfig;\n  [ModelType.ZHIPU]?: ZhipuModelConfig;\n  [ModelType.DEEPSEEK]?: DeepseekModelConfig;\n  [ModelType.QWEN]?: QwenModelConfig;\n  [ModelType.SPARK]?: SparkModelConfig;\n  [ModelType.MOONSHOT]?: MoonshotModelConfig;\n}\n\n/**\n * \u4EFB\u52A1\u8BBE\u7F6E\u914D\u7F6E\n */\nexport interface TaskSettings {\n  outputDir: string;\n  autoSave: boolean;\n  saveInterval: number;\n}\n\n/**\n * \u6D4B\u8BD5\u914D\u7F6E\n */\nexport interface TestSettings {\n  framework: string;\n  outputDir: string;\n  coverage: boolean;\n}\n\n/**\n * \u65E5\u5FD7\u914D\u7F6E\n */\nexport interface LoggerConfig {\n  level: LogLevel;\n  output: 'console' | 'file' | 'both';\n  file?: string;\n}\n\n/**\n * \u5B8C\u6574\u5E94\u7528\u914D\u7F6E\n */\nexport interface AppConfig {\n  models: ModelsConfig;\n  taskSettings: TaskSettings;\n  testSettings: TestSettings;\n  logger: LoggerConfig;\n}\n\n/**\n * \u9ED8\u8BA4\u914D\u7F6E\n */\nexport const DEFAULT_CONFIG: AppConfig = {\n  models: {\n    default: ModelType.BAIDU,\n  },\n  taskSettings: {\n    outputDir: './tasks',\n    autoSave: true,\n    saveInterval: 300,\n  },\n  testSettings: {\n    framework: 'jest',\n    outputDir: './tests',\n    coverage: true,\n  },\n  logger: {\n    level: LogLevel.INFO,\n    output: 'console',\n  },\n}; ", "import winston from 'winston';\nimport path from 'path';\nimport fs from 'fs-extra';\nimport {  LoggerConfig } from '../types/config';\n\n/**\n * \u65E5\u5FD7\u670D\u52A1\uFF0C\u7528\u4E8E\u8BB0\u5F55\u5E94\u7528\u8FD0\u884C\u65E5\u5FD7\n */\nexport class Logger {\n  private static instance: Logger;\n  private logger: winston.Logger;\n\n  /**\n   * \u521B\u5EFA\u65E5\u5FD7\u670D\u52A1\u5B9E\u4F8B\n   * @param config \u65E5\u5FD7\u914D\u7F6E\n   */\n  private constructor(config: LoggerConfig) {\n    const logDir = path.join(process.env.HOME || process.env.USERPROFILE || '.', '.config', 'mcp', 'logs');\n    fs.ensureDirSync(logDir);\n\n    const logFile = config.file || path.join(logDir, 'mcp.log');\n\n    const consoleFormat = winston.format.combine(\n      winston.format.colorize(),\n      winston.format.timestamp(),\n      winston.format.printf(({ timestamp, level, message }) => {\n        return `${timestamp} ${level}: ${message}`;\n      })\n    );\n\n    const fileFormat = winston.format.combine(\n      winston.format.timestamp(),\n      winston.format.json()\n    );\n\n    const transports: winston.transport[] = [];\n\n    // \u6839\u636E\u914D\u7F6E\u6DFB\u52A0\u63A7\u5236\u53F0\u65E5\u5FD7\u4F20\u8F93\n    if (config.output === 'console' || config.output === 'both') {\n      transports.push(\n        new winston.transports.Console({\n          format: consoleFormat,\n          level: config.level,\n        })\n      );\n    }\n\n    // \u6839\u636E\u914D\u7F6E\u6DFB\u52A0\u6587\u4EF6\u65E5\u5FD7\u4F20\u8F93\n    if (config.output === 'file' || config.output === 'both') {\n      transports.push(\n        new winston.transports.File({\n          filename: logFile,\n          format: fileFormat,\n          level: config.level,\n          maxsize: 5242880, // 5MB\n          maxFiles: 5,\n        })\n      );\n    }\n\n    this.logger = winston.createLogger({\n      level: config.level,\n      levels: winston.config.npm.levels,\n      defaultMeta: { service: 'mcp' },\n      transports,\n    });\n  }\n\n  /**\n   * \u83B7\u53D6\u65E5\u5FD7\u670D\u52A1\u5B9E\u4F8B\n   * @param config \u65E5\u5FD7\u914D\u7F6E\n   */\n  public static getInstance(config: LoggerConfig): Logger {\n    if (!Logger.instance) {\n      Logger.instance = new Logger(config);\n    }\n    return Logger.instance;\n  }\n\n  /**\n   * \u66F4\u65B0\u65E5\u5FD7\u914D\u7F6E\n   * @param config \u65E5\u5FD7\u914D\u7F6E\n   */\n  public updateConfig(config: LoggerConfig): void {\n    Logger.instance = new Logger(config);\n  }\n\n  /**\n   * \u8BB0\u5F55\u9519\u8BEF\u7EA7\u522B\u65E5\u5FD7\n   * @param message \u65E5\u5FD7\u6D88\u606F\n   * @param meta \u5143\u6570\u636E\n   */\n  public error(message: string, meta?: any): void {\n    this.logger.error(message, meta);\n  }\n\n  /**\n   * \u8BB0\u5F55\u8B66\u544A\u7EA7\u522B\u65E5\u5FD7\n   * @param message \u65E5\u5FD7\u6D88\u606F\n   * @param meta \u5143\u6570\u636E\n   */\n  public warn(message: string, meta?: any): void {\n    this.logger.warn(message, meta);\n  }\n\n  /**\n   * \u8BB0\u5F55\u4FE1\u606F\u7EA7\u522B\u65E5\u5FD7\n   * @param message \u65E5\u5FD7\u6D88\u606F\n   * @param meta \u5143\u6570\u636E\n   */\n  public info(message: string, meta?: any): void {\n    this.logger.info(message, meta);\n  }\n\n  /**\n   * \u8BB0\u5F55\u8C03\u8BD5\u7EA7\u522B\u65E5\u5FD7\n   * @param message \u65E5\u5FD7\u6D88\u606F\n   * @param meta \u5143\u6570\u636E\n   */\n  public debug(message: string, meta?: any): void {\n    this.logger.debug(message, meta);\n  }\n\n  /**\n   * \u901A\u7528\u65E5\u5FD7\u8BB0\u5F55\u65B9\u6CD5\n   * @param level \u65E5\u5FD7\u7EA7\u522B\n   * @param message \u65E5\u5FD7\u6D88\u606F\n   * @param meta \u5143\u6570\u636E\n   */\n  public log(level: string, message: string, meta?: any): void {\n    this.logger.log(level, message, meta);\n  }\n}", "import axios from 'axios';\nimport { \n  ModelCallOptions, \n  ModelRequestParams, \n  ModelResponse,\n  BaiduRequestBody,\n  BaiduResponseBody,\n  MessageRole\n} from '../../../types/model';\nimport { ModelType, BaiduModelConfig } from '../../../types/config';\nimport { BaseModelAdapter } from './base';\nimport { ConfigManager } from '../../../infra/config';\n\n/**\n * \u767E\u5EA6\u6587\u5FC3\u5927\u6A21\u578B\u9002\u914D\u5668\n */\nexport class BaiduModelAdapter extends BaseModelAdapter {\n  private apiKey: string;\n  private secretKey: string;\n  private endpoint: string;\n  private accessToken: string | null = null;\n  private tokenExpireTime: number = 0;\n  private modelVersion: string;\n\n  /**\n   * \u521B\u5EFA\u767E\u5EA6\u6587\u5FC3\u5927\u6A21\u578B\u9002\u914D\u5668\u5B9E\u4F8B\n   * @param configManager \u914D\u7F6E\u7BA1\u7406\u5668\u5B9E\u4F8B\n   */\n  constructor(configManager: ConfigManager) {\n    super(ModelType.BAIDU);\n\n    const config = configManager.get<BaiduModelConfig>(`models.${ModelType.BAIDU}`, {\n      apiKey: '',\n      secretKey: '',\n      endpoint: 'https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/',\n      modelVersion: 'ernie-bot-4',\n    });\n\n    this.apiKey = config.apiKey;\n    this.secretKey = config.secretKey;\n    this.endpoint = config.endpoint || 'https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/';\n    this.modelVersion = config.modelVersion || 'ernie-bot-4';\n\n    if (!this.apiKey || !this.secretKey) {\n      throw new Error('\u767E\u5EA6\u6587\u5FC3API\u5BC6\u94A5\u672A\u914D\u7F6E\uFF0C\u8BF7\u4F7F\u7528 mcp config \u547D\u4EE4\u8BBE\u7F6E model.baidu.apiKey \u548C model.baidu.secretKey');\n    }\n  }\n\n  /**\n   * \u6267\u884C\u804A\u5929\u8BF7\u6C42\n   * @param params \u8BF7\u6C42\u53C2\u6570\n   * @param options \u8C03\u7528\u9009\u9879\n   */\n  public async chat(params: ModelRequestParams, options?: ModelCallOptions): Promise<ModelResponse> {\n    try {\n      await this.ensureAccessToken();\n      \n      const requestBody = this.buildRequestBody(params, options);\n      const url = `${this.endpoint}${this.modelVersion}?access_token=${this.accessToken}`;\n      \n      const response = await axios.post<BaiduResponseBody>(url, requestBody, {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        timeout: options?.timeout || 30000,\n      });\n      \n      return this.processResponse(response.data);\n    } catch (error) {\n      return this.handleRequestError(error);\n    }\n  }\n\n  /**\n   * \u6D41\u5F0F\u804A\u5929\u8BF7\u6C42\n   * @param params \u8BF7\u6C42\u53C2\u6570 \n   * @param onData \u6570\u636E\u56DE\u8C03\u51FD\u6570\n   * @param options \u8C03\u7528\u9009\u9879\n   */\n  public async chatStream(\n    params: ModelRequestParams,\n    onData: (content: string, done: boolean) => void,\n    options?: ModelCallOptions\n  ): Promise<void> {\n    try {\n      await this.ensureAccessToken();\n      \n      const requestBody = this.buildRequestBody(params, { ...options, stream: true });\n      const url = `${this.endpoint}${this.modelVersion}?access_token=${this.accessToken}`;\n      \n      const response = await axios.post(url, requestBody, {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        responseType: 'stream',\n        timeout: options?.timeout || 60000,\n      });\n\n      const stream = response.data;\n      \n      return new Promise((resolve, reject) => {\n        let buffer = '';\n        \n        stream.on('data', (chunk: Buffer) => {\n          const chunkString = chunk.toString();\n          buffer += chunkString;\n          \n          // \u5904\u7406SSE\u683C\u5F0F\u7684\u54CD\u5E94\n          const lines = buffer.split('\\n');\n          buffer = lines.pop() || '';\n          \n          for (const line of lines) {\n            if (line.startsWith('data: ')) {\n              const data = line.substring(6);\n              try {\n                const parsedData = JSON.parse(data) as BaiduResponseBody;\n                onData(parsedData.result, parsedData.is_end || false);\n              } catch (e) {\n                // \u5FFD\u7565\u975EJSON\u6570\u636E\n              }\n            }\n          }\n        });\n        \n        stream.on('end', () => {\n          onData('', true);\n          resolve();\n        });\n        \n        stream.on('error', (err: Error) => {\n          reject(err);\n        });\n      });\n    } catch (error) {\n      return this.handleRequestError(error);\n    }\n  }\n\n  /**\n   * \u9A8C\u8BC1API\u5BC6\u94A5\n   */\n  public async validateApiKey(): Promise<boolean> {\n    try {\n      await this.ensureAccessToken();\n      return !!this.accessToken;\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * \u6784\u5EFA\u8BF7\u6C42\u4F53\n   * @param params \u8BF7\u6C42\u53C2\u6570\n   * @param options \u8C03\u7528\u9009\u9879\n   */\n  private buildRequestBody(params: ModelRequestParams, options?: ModelCallOptions): BaiduRequestBody {\n    const messages = params.messages.map(msg => ({\n      role: this.mapRole(msg.role),\n      content: msg.content,\n    }));\n\n    return {\n      messages,\n      temperature: options?.temperature ?? params.temperature ?? 0.7,\n      top_p: params.topP ?? 0.8,\n      stream: options?.stream ?? false,\n      user_id: 'mcp-user',\n    };\n  }\n\n  /**\n   * \u5904\u7406\u54CD\u5E94\u6570\u636E\n   * @param response \u54CD\u5E94\u6570\u636E\n   */\n  private processResponse(response: BaiduResponseBody): ModelResponse {\n    return {\n      content: response.result,\n      finishReason: response.is_end ? 'stop' : undefined,\n      usage: response.usage ? {\n        promptTokens: response.usage.prompt_tokens,\n        completionTokens: response.usage.completion_tokens,\n        totalTokens: response.usage.total_tokens,\n      } : undefined,\n    };\n  }\n\n  /**\n   * \u6620\u5C04\u6D88\u606F\u89D2\u8272\n   * @param role \u89D2\u8272\n   */\n  private mapRole(role: MessageRole): string {\n    switch (role) {\n      case MessageRole.USER:\n        return 'user';\n      case MessageRole.ASSISTANT:\n        return 'assistant';\n      case MessageRole.SYSTEM:\n        return 'system';\n      default:\n        return 'user';\n    }\n  }\n\n  /**\n   * \u786E\u4FDD\u6709\u6548\u7684\u8BBF\u95EE\u4EE4\u724C\n   */\n  private async ensureAccessToken(): Promise<void> {\n    const currentTime = Date.now();\n    \n    // \u5982\u679C\u4EE4\u724C\u6709\u6548\uFF0C\u76F4\u63A5\u8FD4\u56DE\n    if (this.accessToken && currentTime < this.tokenExpireTime) {\n      return;\n    }\n    \n    try {\n      const tokenUrl = `https://aip.baidubce.com/oauth/2.0/token?grant_type=client_credentials&client_id=${this.apiKey}&client_secret=${this.secretKey}`;\n      \n      const response = await axios.post(tokenUrl);\n      \n      if (response.data && response.data.access_token) {\n        this.accessToken = response.data.access_token;\n        // \u4EE4\u724C\u6709\u6548\u671F\u901A\u5E38\u662F30\u5929\uFF0C\u8FD9\u91CC\u8BBE\u4E3A29\u5929\uFF0C\u63D0\u524D\u5237\u65B0\n        this.tokenExpireTime = currentTime + (response.data.expires_in || 2592000) * 1000 - 86400000;\n      } else {\n        throw new Error('\u83B7\u53D6\u8BBF\u95EE\u4EE4\u724C\u5931\u8D25\uFF1A\u54CD\u5E94\u4E2D\u6CA1\u6709access_token\u5B57\u6BB5');\n      }\n    } catch (error) {\n      this.accessToken = null;\n      this.tokenExpireTime = 0;\n      throw new Error(`\u83B7\u53D6\u767E\u5EA6\u6587\u5FC3\u8BBF\u95EE\u4EE4\u724C\u5931\u8D25\uFF1A${(error as Error).message}`);\n    }\n  }\n} ", "import {\n  ModelCallOptions,\n  ModelRequestParams,\n  ModelResponse\n} from '../../../types/model';\nimport { ModelType } from '../../../types/config';\n\n/**\n * \u6A21\u578B\u9002\u914D\u5668\u63A5\u53E3\n * \u4E3A\u4E0D\u540C\u7684\u5927\u6A21\u578BAPI\u63D0\u4F9B\u7EDF\u4E00\u7684\u8C03\u7528\u63A5\u53E3\n */\nexport interface ModelAdapter {\n  /**\n   * \u83B7\u53D6\u6A21\u578B\u7C7B\u578B\n   */\n  getModelType(): ModelType;\n\n  /**\n   * \u6267\u884C\u804A\u5929\u8BF7\u6C42\n   * @param params \u8BF7\u6C42\u53C2\u6570\n   * @param options \u8C03\u7528\u9009\u9879\n   */\n  chat(params: ModelRequestParams, options?: ModelCallOptions): Promise<ModelResponse>;\n\n  /**\n   * \u6D41\u5F0F\u804A\u5929\u8BF7\u6C42\n   * @param params \u8BF7\u6C42\u53C2\u6570 \n   * @param onData \u6570\u636E\u56DE\u8C03\u51FD\u6570\n   * @param options \u8C03\u7528\u9009\u9879\n   */\n  chatStream(\n    params: ModelRequestParams,\n    onData: (content: string, done: boolean) => void,\n    options?: ModelCallOptions\n  ): Promise<void>;\n\n  /**\n   * \u9A8C\u8BC1API\u5BC6\u94A5\n   */\n  validateApiKey(): Promise<boolean>;\n}\n\n/**\n * \u57FA\u7840\u6A21\u578B\u9002\u914D\u5668\u62BD\u8C61\u7C7B\n * \u63D0\u4F9B\u6A21\u578B\u9002\u914D\u5668\u7684\u901A\u7528\u5B9E\u73B0\n */\nexport abstract class BaseModelAdapter implements ModelAdapter {\n  protected modelType: ModelType;\n\n  constructor(modelType: ModelType) {\n    this.modelType = modelType;\n  }\n\n  /**\n   * \u83B7\u53D6\u6A21\u578B\u7C7B\u578B\n   */\n  public getModelType(): ModelType {\n    return this.modelType;\n  }\n\n  /**\n   * \u6267\u884C\u804A\u5929\u8BF7\u6C42\n   * @param params \u8BF7\u6C42\u53C2\u6570\n   * @param options \u8C03\u7528\u9009\u9879\n   */\n  public abstract chat(params: ModelRequestParams, options?: ModelCallOptions): Promise<ModelResponse>;\n\n  /**\n   * \u6D41\u5F0F\u804A\u5929\u8BF7\u6C42\n   * @param params \u8BF7\u6C42\u53C2\u6570 \n   * @param onData \u6570\u636E\u56DE\u8C03\u51FD\u6570\n   * @param options \u8C03\u7528\u9009\u9879\n   */\n  public abstract chatStream(\n    params: ModelRequestParams,\n    onData: (content: string, done: boolean) => void,\n    options?: ModelCallOptions\n  ): Promise<void>;\n\n  /**\n   * \u9A8C\u8BC1API\u5BC6\u94A5\n   */\n  public abstract validateApiKey(): Promise<boolean>;\n\n  /**\n   * \u5904\u7406HTTP\u8BF7\u6C42\u9519\u8BEF\n   * @param error \u9519\u8BEF\u5BF9\u8C61\n   */\n  protected handleRequestError(error: unknown): never {\n    if (error && typeof error === 'object' && 'response' in error) {\n      // \u670D\u52A1\u5668\u54CD\u5E94\u4E86\u8BF7\u6C42\uFF0C\u4F46\u72B6\u6001\u7801\u4E0D\u662F2xx\n      const response = (error as any).response;\n      const statusCode = response?.status;\n      const data = response?.data;\n      let message = `HTTP Error ${statusCode}`;\n\n      if (data && typeof data === 'object') {\n        message += `: ${JSON.stringify(data)}`;\n      }\n\n      if (statusCode === 401 || statusCode === 403) {\n        throw new Error(`\u8BA4\u8BC1\u5931\u8D25\uFF1A${message}\uFF0C\u8BF7\u68C0\u67E5API\u5BC6\u94A5\u662F\u5426\u6B63\u786E`);\n      } else if (statusCode === 429) {\n        throw new Error(`\u8BF7\u6C42\u901F\u7387\u9650\u5236\uFF1A${message}\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5`);\n      } else {\n        throw new Error(`API\u8C03\u7528\u5931\u8D25\uFF1A${message}`);\n      }\n    } else if (error && typeof error === 'object' && 'request' in error) {\n      // \u8BF7\u6C42\u5DF2\u7ECF\u53D1\u51FA\uFF0C\u4F46\u6CA1\u6709\u6536\u5230\u54CD\u5E94\n      const message = (error as any).message || '\u7F51\u7EDC\u9519\u8BEF';\n      throw new Error(`\u8BF7\u6C42\u8D85\u65F6\u6216\u7F51\u7EDC\u9519\u8BEF\uFF1A${message}`);\n    } else {\n      // \u8BBE\u7F6E\u8BF7\u6C42\u65F6\u53D1\u751F\u4E86\u9519\u8BEF\n      const message = (error as any)?.message || '\u672A\u77E5\u9519\u8BEF';\n      throw new Error(`\u8BF7\u6C42\u914D\u7F6E\u9519\u8BEF\uFF1A${message}`);\n    }\n  }\n} ", "import axios from 'axios';\nimport { \n  ModelCallOptions, \n  ModelRequestParams, \n  ModelResponse,\n  DeepseekRequestBody,\n  DeepseekResponseBody,\n  MessageRole\n} from '../../../types/model';\nimport { ModelType, DeepseekModelConfig } from '../../../types/config';\nimport { BaseModelAdapter } from './base';\nimport { ConfigManager } from '../../../infra/config';\n\n/**\n * DeepSeek\u5927\u6A21\u578B\u9002\u914D\u5668\n */\nexport class DeepseekModelAdapter extends BaseModelAdapter {\n  private apiKey: string;\n  private endpoint: string;\n  private modelVersion: string;\n\n  /**\n   * \u521B\u5EFADeepSeek\u5927\u6A21\u578B\u9002\u914D\u5668\u5B9E\u4F8B\n   * @param configManager \u914D\u7F6E\u7BA1\u7406\u5668\u5B9E\u4F8B\n   */\n  constructor(configManager: ConfigManager) {\n    super(ModelType.DEEPSEEK);\n\n    const config = configManager.get<DeepseekModelConfig>(`models.${ModelType.DEEPSEEK}`, {\n      apiKey: '',\n      endpoint: 'https://api.deepseek.com/v1/chat/completions',\n      modelVersion: 'deepseek-chat',\n    });\n\n    this.apiKey = config.apiKey;\n    this.endpoint = config.endpoint || 'https://api.deepseek.com/v1/chat/completions';\n    this.modelVersion = config.modelVersion || 'deepseek-chat';\n\n    if (!this.apiKey) {\n      throw new Error('DeepSeek API\u5BC6\u94A5\u672A\u914D\u7F6E\uFF0C\u8BF7\u4F7F\u7528 mcp config \u547D\u4EE4\u8BBE\u7F6E model.deepseek.apiKey');\n    }\n  }\n\n  /**\n   * \u6267\u884C\u804A\u5929\u8BF7\u6C42\n   * @param params \u8BF7\u6C42\u53C2\u6570\n   * @param options \u8C03\u7528\u9009\u9879\n   */\n  public async chat(params: ModelRequestParams, options?: ModelCallOptions): Promise<ModelResponse> {\n    try {\n      const requestBody = this.buildRequestBody(params, options);\n      \n      const response = await axios.post<DeepseekResponseBody>(this.endpoint, requestBody, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.apiKey}`\n        },\n        timeout: options?.timeout || 30000,\n      });\n      \n      return this.processResponse(response.data);\n    } catch (error) {\n      return this.handleRequestError(error);\n    }\n  }\n\n  /**\n   * \u6D41\u5F0F\u804A\u5929\u8BF7\u6C42\n   * @param params \u8BF7\u6C42\u53C2\u6570 \n   * @param onData \u6570\u636E\u56DE\u8C03\u51FD\u6570\n   * @param options \u8C03\u7528\u9009\u9879\n   */\n  public async chatStream(\n    params: ModelRequestParams,\n    onData: (content: string, done: boolean) => void,\n    options?: ModelCallOptions\n  ): Promise<void> {\n    try {\n      const requestBody = this.buildRequestBody(params, { ...options, stream: true });\n      \n      const response = await axios.post(this.endpoint, requestBody, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.apiKey}`\n        },\n        responseType: 'stream',\n        timeout: options?.timeout || 60000,\n      });\n\n      const stream = response.data;\n      \n      return new Promise((resolve, reject) => {\n        let buffer = '';\n        \n        stream.on('data', (chunk: Buffer) => {\n          const chunkString = chunk.toString();\n          buffer += chunkString;\n          \n          // \u5904\u7406SSE\u683C\u5F0F\u7684\u54CD\u5E94\n          const lines = buffer.split('\\n');\n          buffer = lines.pop() || '';\n          \n          for (const line of lines) {\n            if (line.startsWith('data: ')) {\n              const data = line.substring(6);\n              \n              // \u68C0\u67E5\u662F\u5426\u662F\u6D41\u7ED3\u675F\u6807\u8BB0\n              if (data === '[DONE]') {\n                onData('', true);\n                continue;\n              }\n              \n              try {\n                const parsedData = JSON.parse(data) as DeepseekResponseBody;\n                if (parsedData.choices && parsedData.choices.length > 0) {\n                  const content = parsedData.choices[0].message?.content || '';\n                  const done = parsedData.choices[0].finish_reason === 'stop';\n                  onData(content, done);\n                }\n              } catch (e) {\n                // \u5FFD\u7565\u975EJSON\u6570\u636E\n              }\n            }\n          }\n        });\n        \n        stream.on('end', () => {\n          onData('', true);\n          resolve();\n        });\n        \n        stream.on('error', (err: Error) => {\n          reject(err);\n        });\n      });\n    } catch (error) {\n      return this.handleRequestError(error);\n    }\n  }\n\n  /**\n   * \u9A8C\u8BC1API\u5BC6\u94A5\n   */\n  public async validateApiKey(): Promise<boolean> {\n    try {\n      // \u4F7F\u7528\u4E00\u4E2A\u7B80\u5355\u7684\u8BF7\u6C42\u9A8C\u8BC1API\u5BC6\u94A5\n      await this.chat({\n        messages: [{ role: MessageRole.USER, content: 'Hello' }],\n        maxTokens: 5\n      }, { temperature: 0.1 });\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * \u6784\u5EFA\u8BF7\u6C42\u4F53\n   * @param params \u8BF7\u6C42\u53C2\u6570\n   * @param options \u8C03\u7528\u9009\u9879\n   */\n  private buildRequestBody(params: ModelRequestParams, options?: ModelCallOptions): DeepseekRequestBody {\n    const messages = params.messages.map(msg => ({\n      role: this.mapRole(msg.role),\n      content: msg.content,\n    }));\n\n    return {\n      model: this.modelVersion,\n      messages,\n      temperature: options?.temperature ?? params.temperature ?? 0.7,\n      top_p: params.topP ?? 0.8,\n      max_tokens: options?.maxTokens ?? params.maxTokens ?? 1024,\n      stream: options?.stream ?? false,\n    };\n  }\n\n  /**\n   * \u5904\u7406\u54CD\u5E94\u6570\u636E\n   * @param response \u54CD\u5E94\u6570\u636E\n   */\n  private processResponse(response: DeepseekResponseBody): ModelResponse {\n    if (!response.choices || response.choices.length === 0) {\n      throw new Error('\u65E0\u6548\u7684\u54CD\u5E94\u683C\u5F0F\uFF1A\u6CA1\u6709\u8FD4\u56DEchoices\u5B57\u6BB5');\n    }\n    \n    const choice = response.choices[0];\n    \n    return {\n      content: choice.message?.content || '',\n      finishReason: choice.finish_reason,\n      usage: response.usage ? {\n        promptTokens: response.usage.prompt_tokens,\n        completionTokens: response.usage.completion_tokens,\n        totalTokens: response.usage.total_tokens,\n      } : undefined,\n    };\n  }\n\n  /**\n   * \u6620\u5C04\u6D88\u606F\u89D2\u8272\n   * @param role \u89D2\u8272\n   */\n  private mapRole(role: MessageRole): string {\n    switch (role) {\n      case MessageRole.USER:\n        return 'user';\n      case MessageRole.ASSISTANT:\n        return 'assistant';\n      case MessageRole.SYSTEM:\n        return 'system';\n      default:\n        return 'user';\n    }\n  }\n} ", "import axios from 'axios';\nimport * as crypto from 'crypto';\nimport { \n  ModelCallOptions, \n  ModelRequestParams, \n  ModelResponse,\n  MessageRole\n} from '../../../types/model';\nimport { ModelType, ZhipuModelConfig } from '../../../types/config';\nimport { BaseModelAdapter } from './base';\nimport { ConfigManager } from '../../../infra/config';\n\n/**\n * \u667A\u8C31AI\u5927\u6A21\u578B\u9002\u914D\u5668\n */\nexport class ZhipuModelAdapter extends BaseModelAdapter {\n  private apiKey: string;\n  private endpoint: string;\n  private modelVersion: string;\n\n  /**\n   * \u521B\u5EFA\u667A\u8C31AI\u5927\u6A21\u578B\u9002\u914D\u5668\u5B9E\u4F8B\n   * @param configManager \u914D\u7F6E\u7BA1\u7406\u5668\u5B9E\u4F8B\n   */\n  constructor(configManager: ConfigManager) {\n    super(ModelType.ZHIPU);\n\n    const config = configManager.get<ZhipuModelConfig>(`models.${ModelType.ZHIPU}`, {\n      apiKey: '',\n      endpoint: 'https://open.bigmodel.cn/api/paas/v4/chat/completions',\n      modelVersion: 'glm-4',\n    });\n\n    this.apiKey = config.apiKey;\n    this.endpoint = config.endpoint || 'https://open.bigmodel.cn/api/paas/v4/chat/completions';\n    this.modelVersion = config.modelVersion || 'glm-4';\n\n    if (!this.apiKey) {\n      throw new Error('\u667A\u8C31AI API\u5BC6\u94A5\u672A\u914D\u7F6E\uFF0C\u8BF7\u4F7F\u7528 yasi config \u547D\u4EE4\u8BBE\u7F6E model.zhipu.apiKey');\n    }\n  }\n\n  /**\n   * \u6267\u884C\u804A\u5929\u8BF7\u6C42\n   * @param params \u8BF7\u6C42\u53C2\u6570\n   * @param options \u8C03\u7528\u9009\u9879\n   */\n  public async chat(params: ModelRequestParams, options?: ModelCallOptions): Promise<ModelResponse> {\n    try {\n      const requestBody = this.buildRequestBody(params, options);\n      const headers = this.generateAuthHeaders();\n      \n      const response = await axios.post(this.endpoint, requestBody, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': headers.Authorization,\n          'Date': headers.Date,\n        },\n        timeout: options?.timeout || 30000,\n      });\n      \n      return this.processResponse(response.data);\n    } catch (error) {\n      return this.handleRequestError(error);\n    }\n  }\n\n  /**\n   * \u6D41\u5F0F\u804A\u5929\u8BF7\u6C42\n   * @param params \u8BF7\u6C42\u53C2\u6570 \n   * @param onData \u6570\u636E\u56DE\u8C03\u51FD\u6570\n   * @param options \u8C03\u7528\u9009\u9879\n   */\n  public async chatStream(\n    params: ModelRequestParams,\n    onData: (content: string, done: boolean) => void,\n    options?: ModelCallOptions\n  ): Promise<void> {\n    try {\n      const requestBody = this.buildRequestBody(params, { ...options, stream: true });\n      const headers = this.generateAuthHeaders();\n      \n      const response = await axios.post(this.endpoint, requestBody, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': headers.Authorization,\n          'Date': headers.Date,\n          'Accept': 'text/event-stream',\n        },\n        responseType: 'stream',\n        timeout: options?.timeout || 60000,\n      });\n\n      const stream = response.data;\n      \n      return new Promise((resolve, reject) => {\n        let buffer = '';\n        \n        stream.on('data', (chunk: Buffer) => {\n          const chunkString = chunk.toString();\n          buffer += chunkString;\n          \n          // \u5904\u7406SSE\u683C\u5F0F\u7684\u54CD\u5E94\n          const lines = buffer.split('\\n');\n          buffer = lines.pop() || '';\n          \n          for (const line of lines) {\n            if (line.startsWith('data: ')) {\n              const data = line.substring(6);\n              \n              // \u68C0\u67E5\u662F\u5426\u662F\u6D41\u7ED3\u675F\u6807\u8BB0\n              if (data === '[DONE]') {\n                onData('', true);\n                continue;\n              }\n              \n              try {\n                const parsedData = JSON.parse(data);\n                if (parsedData.choices && parsedData.choices.length > 0) {\n                  const delta = parsedData.choices[0].delta?.content || '';\n                  const done = parsedData.choices[0].finish_reason === 'stop';\n                  onData(delta, done);\n                }\n              } catch (e) {\n                // \u5FFD\u7565\u975EJSON\u6570\u636E\n              }\n            }\n          }\n        });\n        \n        stream.on('end', () => {\n          onData('', true);\n          resolve();\n        });\n        \n        stream.on('error', (err: Error) => {\n          reject(err);\n        });\n      });\n    } catch (error) {\n      return this.handleRequestError(error);\n    }\n  }\n\n  /**\n   * \u9A8C\u8BC1API\u5BC6\u94A5\n   */\n  public async validateApiKey(): Promise<boolean> {\n    try {\n      // \u4F7F\u7528\u4E00\u4E2A\u7B80\u5355\u7684\u8BF7\u6C42\u9A8C\u8BC1API\u5BC6\u94A5\n      await this.chat({\n        messages: [{ role: MessageRole.USER, content: 'Hello' }],\n        maxTokens: 5\n      }, { temperature: 0.1 });\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * \u6784\u5EFA\u8BF7\u6C42\u4F53\n   * @param params \u8BF7\u6C42\u53C2\u6570\n   * @param options \u8C03\u7528\u9009\u9879\n   */\n  private buildRequestBody(params: ModelRequestParams, options?: ModelCallOptions): {\n    model: string;\n    messages: Array<{ role: string; content: string }>;\n    temperature?: number;\n    max_tokens?: number;\n    top_p?: number;\n    stream?: boolean;\n  } {\n    const messages = params.messages.map(msg => ({\n      role: this.mapRole(msg.role),\n      content: msg.content,\n    }));\n\n    return {\n      model: this.modelVersion,\n      messages,\n      temperature: options?.temperature ?? params.temperature ?? 0.7,\n      top_p: params.topP ?? 0.8,\n      max_tokens: options?.maxTokens ?? params.maxTokens ?? 1024,\n      stream: options?.stream ?? false,\n    };\n  }\n\n  /**\n   * \u5904\u7406\u54CD\u5E94\u6570\u636E\n   * @param response \u54CD\u5E94\u6570\u636E\n   */\n  private processResponse(response: {\n    choices: Array<{\n      message: { content: string };\n      finish_reason?: string;\n    }>;\n    usage?: {\n      prompt_tokens: number;\n      completion_tokens: number;\n      total_tokens: number;\n    };\n  }): ModelResponse {\n    if (!response.choices || response.choices.length === 0) {\n      throw new Error('\u65E0\u6548\u7684\u54CD\u5E94\u683C\u5F0F\uFF1A\u6CA1\u6709\u8FD4\u56DEchoices\u5B57\u6BB5');\n    }\n    \n    const choice = response.choices[0];\n    \n    return {\n      content: choice.message?.content || '',\n      finishReason: choice.finish_reason,\n      usage: response.usage ? {\n        promptTokens: response.usage.prompt_tokens,\n        completionTokens: response.usage.completion_tokens,\n        totalTokens: response.usage.total_tokens,\n      } : undefined,\n    };\n  }\n\n  /**\n   * \u6620\u5C04\u6D88\u606F\u89D2\u8272\n   * @param role \u89D2\u8272\n   */\n  private mapRole(role: MessageRole): string {\n    switch (role) {\n      case MessageRole.USER:\n        return 'user';\n      case MessageRole.ASSISTANT:\n        return 'assistant';\n      case MessageRole.SYSTEM:\n        return 'system';\n      default:\n        return 'user';\n    }\n  }\n\n  /**\n   * \u751F\u6210\u667A\u8C31API\u8BA4\u8BC1\u5934\u4FE1\u606F\n   */\n  private generateAuthHeaders(): { Authorization: string, Date: string } {\n    // apiKey\u683C\u5F0F\uFF1Azhipuai-api-key\n    // \u9A8C\u8BC1apiKey\u683C\u5F0F\u662F\u5426\u6B63\u786E\n    if (!this.apiKey.startsWith('zhipu-')) {\n      throw new Error('\u667A\u8C31AI API\u5BC6\u94A5\u683C\u5F0F\u4E0D\u6B63\u786E\uFF0C\u5E94\u4EE5\"zhipu-\"\u5F00\u5934');\n    }\n\n    // \u4ECEapiKey\u4E2D\u63D0\u53D6id\u548Csecret\n    const [id, secret] = this.apiKey.substring(6).split('.');\n    \n    if (!id || !secret) {\n      throw new Error('\u667A\u8C31AI API\u5BC6\u94A5\u683C\u5F0F\u4E0D\u6B63\u786E\uFF0C\u65E0\u6CD5\u63D0\u53D6id\u548Csecret');\n    }\n\n    // \u5F53\u524DGMT\u65F6\u95F4\uFF0C\u5F62\u5982\uFF1AMon, 01 Jul 2023 12:00:00 GMT\n    const date = new Date().toUTCString();\n    \n    // \u8BA1\u7B97HMAC-SHA256\u7B7E\u540D\n    const signString = `date: ${date}\\nPOST /api/paas/v4/chat/completions HTTP/1.1`;\n    const signature = crypto\n      .createHmac('sha256', secret)\n      .update(signString)\n      .digest('base64');\n    \n    // \u751F\u6210Authorization\u5934\n    const authHeader = `hmac username=\"${id}\", algorithm=\"hmac-sha256\", headers=\"date request-line\", signature=\"${signature}\"`;\n    \n    return {\n      Authorization: authHeader,\n      Date: date\n    };\n  }\n} ", "/**\n * \u963F\u91CC\u901A\u4E49\u5343\u95EE\u6A21\u578B\u63D0\u4F9B\u5546\n * \u652F\u6301\u901A\u4E49\u5343\u95EE\u7CFB\u5217\u6A21\u578B\u7684API\u8C03\u7528\n */\n\nimport axios, { AxiosInstance } from 'axios';\nimport { ConfigManager } from '../../../infra/config';\nimport { ModelType, QwenModelConfig } from '../../../types/config';\nimport {\n  MessageRole,\n  ModelCallOptions,\n  ModelRequestParams,\n  ModelResponse\n} from '../../../types/model';\nimport { BaseModelAdapter } from '../adapter/base';\n\n/**\n * \u963F\u91CC\u901A\u4E49\u5343\u95EE\u6A21\u578B\u9002\u914D\u5668\n * \u652F\u6301\u901A\u4E49\u5343\u95EE\u7CFB\u5217\u6A21\u578B\u7684API\u8C03\u7528\n */\nexport class QwenModelAdapter extends BaseModelAdapter {\n  private client: AxiosInstance;\n  private apiKey: string;\n  private endpoint: string;\n  private modelVersion: string;\n\n  constructor(configManager: ConfigManager) {\n    super(ModelType.QWEN);\n\n    const config = configManager.get<QwenModelConfig>(`models.${ModelType.QWEN}`);\n    if (!config) {\n      throw new Error('Qwen\u6A21\u578B\u914D\u7F6E\u672A\u627E\u5230');\n    }\n\n    this.apiKey = config.apiKey;\n    this.endpoint = config.endpoint || 'https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation';\n    this.modelVersion = config.modelVersion || 'qwen-turbo';\n\n    this.client = axios.create({\n      baseURL: this.endpoint,\n      headers: {\n        'Authorization': `Bearer ${this.apiKey}`,\n        'Content-Type': 'application/json',\n        'X-DashScope-SSE': 'disable'\n      },\n      timeout: 30000\n    });\n  }\n\n  /**\n   * \u6267\u884C\u804A\u5929\u8BF7\u6C42\n   */\n  public async chat(params: ModelRequestParams, _options?: ModelCallOptions): Promise<ModelResponse> {\n    try {\n      const requestData = this.buildRequestData(params);\n\n      const response = await this.client.post('', requestData);\n\n      if (response.data.output && response.data.output.text) {\n        return {\n          content: response.data.output.text,\n          usage: {\n            promptTokens: response.data.usage?.input_tokens || 0,\n            completionTokens: response.data.usage?.output_tokens || 0,\n            totalTokens: response.data.usage?.total_tokens || 0\n          },\n          finishReason: response.data.output.finish_reason || 'stop'\n        };\n      } else {\n        throw new Error('Invalid response format from Qwen API');\n      }\n    } catch (error) {\n      this.handleRequestError(error);\n    }\n  }\n\n  /**\n   * \u6D41\u5F0F\u804A\u5929\u8BF7\u6C42\n   */\n  public async chatStream(\n    params: ModelRequestParams,\n    onData: (content: string, done: boolean) => void,\n    _options?: ModelCallOptions\n  ): Promise<void> {\n    try {\n      const requestData = {\n        ...this.buildRequestData(params),\n        parameters: {\n          ...this.buildRequestData(params).parameters,\n          incremental_output: true\n        }\n      };\n\n      // \u542F\u7528SSE\n      const response = await this.client.post('', requestData, {\n        headers: {\n          'Authorization': `Bearer ${this.apiKey}`,\n          'Content-Type': 'application/json',\n          'X-DashScope-SSE': 'enable',\n          'Accept': 'text/event-stream'\n        },\n        responseType: 'stream'\n      });\n\n      let buffer = '';\n\n      response.data.on('data', (chunk: Buffer) => {\n        buffer += chunk.toString();\n        const lines = buffer.split('\\n');\n        buffer = lines.pop() || '';\n\n        for (const line of lines) {\n          if (line.startsWith('data: ')) {\n            const data = line.slice(6);\n            if (data === '[DONE]') {\n              onData('', true);\n              return;\n            }\n\n            try {\n              const parsed = JSON.parse(data);\n              if (parsed.output && parsed.output.text) {\n                onData(parsed.output.text, false);\n              }\n            } catch (e) {\n              // \u5FFD\u7565\u89E3\u6790\u9519\u8BEF\n            }\n          }\n        }\n      });\n\n      response.data.on('end', () => {\n        onData('', true);\n      });\n\n    } catch (error) {\n      this.handleRequestError(error);\n    }\n  }\n\n  /**\n   * \u9A8C\u8BC1API\u5BC6\u94A5\n   */\n  public async validateApiKey(): Promise<boolean> {\n    try {\n      const testParams: ModelRequestParams = {\n        messages: [{ role: MessageRole.USER, content: 'Hello' }],\n        maxTokens: 10\n      };\n\n      await this.chat(testParams);\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * \u6784\u5EFA\u8BF7\u6C42\u6570\u636E\n   */\n  private buildRequestData(params: ModelRequestParams) {\n    const messages = params.messages.map(msg => ({\n      role: msg.role,\n      content: msg.content\n    }));\n\n    return {\n      model: this.modelVersion,\n      input: {\n        messages: messages\n      },\n      parameters: {\n        max_tokens: params.maxTokens || 2000,\n        temperature: params.temperature || 0.7,\n        top_p: params.topP || 0.9,\n        repetition_penalty: 1.1,\n        result_format: 'text'\n      }\n    };\n  }\n}\n\n/**\n * \u521B\u5EFA\u901A\u4E49\u5343\u95EE\u6A21\u578B\u9002\u914D\u5668\u5B9E\u4F8B\n */\nexport function createQwenAdapter(\n  configManager: ConfigManager\n): QwenModelAdapter {\n  return new QwenModelAdapter(configManager);\n}\n\n/**\n * \u901A\u4E49\u5343\u95EE\u6A21\u578B\u4FE1\u606F\n */\nexport const QWEN_MODELS = {\n  'qwen-turbo': {\n    name: '\u901A\u4E49\u5343\u95EE-Turbo',\n    description: '\u5FEB\u901F\u54CD\u5E94\uFF0C\u9002\u5408\u65E5\u5E38\u5BF9\u8BDD',\n    maxTokens: 6000,\n    costPer1kTokens: 0.002\n  },\n  'qwen-plus': {\n    name: '\u901A\u4E49\u5343\u95EE-Plus',\n    description: '\u5E73\u8861\u6027\u80FD\u4E0E\u6210\u672C',\n    maxTokens: 30000,\n    costPer1kTokens: 0.004\n  },\n  'qwen-max': {\n    name: '\u901A\u4E49\u5343\u95EE-Max',\n    description: '\u6700\u5F3A\u6027\u80FD\uFF0C\u9002\u5408\u590D\u6742\u4EFB\u52A1',\n    maxTokens: 30000,\n    costPer1kTokens: 0.02\n  },\n  'qwen-max-longcontext': {\n    name: '\u901A\u4E49\u5343\u95EE-Max\u957F\u6587\u672C',\n    description: '\u652F\u6301\u957F\u6587\u672C\u5904\u7406',\n    maxTokens: 28000,\n    costPer1kTokens: 0.02\n  }\n} as const;\n\nexport type QwenModelName = keyof typeof QWEN_MODELS;\n", "import { ConfigManager } from '../../infra/config';\nimport { ModelType } from '../../types/config';\nimport { BaiduModelAdapter } from './adapter/baidu';\nimport { ModelAdapter } from './adapter/base';\nimport { DeepseekModelAdapter } from './adapter/deepseek';\nimport { ZhipuModelAdapter } from './adapter/zhipu';\nimport { QwenModelAdapter } from './providers/qwen';\n\n/**\n * \u6A21\u578B\u5DE5\u5382\u7C7B\n * \u8D1F\u8D23\u521B\u5EFA\u5404\u79CD\u6A21\u578B\u9002\u914D\u5668\n */\nexport class ModelFactory {\n  private configManager: ConfigManager;\n  private modelCache: Map<ModelType, ModelAdapter> = new Map();\n\n  /**\n   * \u521B\u5EFA\u6A21\u578B\u5DE5\u5382\u5B9E\u4F8B\n   * @param configManager \u914D\u7F6E\u7BA1\u7406\u5668\u5B9E\u4F8B\n   */\n  constructor(configManager: ConfigManager) {\n    this.configManager = configManager;\n  }\n\n  /**\n   * \u521B\u5EFA\u6A21\u578B\u9002\u914D\u5668\n   * @param modelType \u6A21\u578B\u7C7B\u578B\uFF0C\u4E0D\u4F20\u65F6\u4F7F\u7528\u9ED8\u8BA4\u6A21\u578B\u7C7B\u578B\n   */\n  public createModelAdapter(modelType?: ModelType): ModelAdapter {\n    // \u83B7\u53D6\u8981\u4F7F\u7528\u7684\u6A21\u578B\u7C7B\u578B\n    const type = modelType || this.configManager.getDefaultModelType();\n\n    // \u5982\u679C\u7F13\u5B58\u4E2D\u6709\u8FD9\u4E2A\u6A21\u578B\u7684\u9002\u914D\u5668\u5B9E\u4F8B\uFF0C\u76F4\u63A5\u8FD4\u56DE\n    const cached = this.modelCache.get(type);\n    if (cached) {\n      return cached;\n    }\n\n    // \u521B\u5EFA\u65B0\u7684\u9002\u914D\u5668\u5B9E\u4F8B\n    let adapter: ModelAdapter;\n\n    switch (type) {\n      case ModelType.BAIDU:\n        adapter = new BaiduModelAdapter(this.configManager);\n        break;\n      case ModelType.DEEPSEEK:\n        adapter = new DeepseekModelAdapter(this.configManager);\n        break;\n      case ModelType.ZHIPU:\n        adapter = new ZhipuModelAdapter(this.configManager);\n        break;\n      case ModelType.QWEN:\n        adapter = new QwenModelAdapter(this.configManager);\n        break;\n      // TODO: \u6DFB\u52A0\u5176\u4ED6\u6A21\u578B\u9002\u914D\u5668\n      // case ModelType.XUNFEI:\n      //   adapter = new XunfeiModelAdapter(this.configManager);\n      //   break;\n      default:\n        throw new Error(`\u4E0D\u652F\u6301\u7684\u6A21\u578B\u7C7B\u578B: ${type}`);\n    }\n\n    // \u5C06\u65B0\u521B\u5EFA\u7684\u9002\u914D\u5668\u5B58\u5165\u7F13\u5B58\n    this.modelCache.set(type, adapter);\n\n    return adapter;\n  }\n\n  /**\n   * \u6E05\u9664\u6A21\u578B\u9002\u914D\u5668\u7F13\u5B58\n   * @param modelType \u6A21\u578B\u7C7B\u578B\uFF0C\u4E0D\u4F20\u65F6\u6E05\u9664\u6240\u6709\n   */\n  public clearCache(modelType?: ModelType): void {\n    if (modelType) {\n      this.modelCache.delete(modelType);\n    } else {\n      this.modelCache.clear();\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u6240\u6709\u53EF\u7528\u7684\u6A21\u578B\u7C7B\u578B\n   */\n  public getAvailableModelTypes(): ModelType[] {\n    // \u66F4\u65B0\u4E3A\u5DF2\u5B9E\u73B0\u7684\u6A21\u578B\u9002\u914D\u5668\n    return [ModelType.BAIDU, ModelType.DEEPSEEK, ModelType.ZHIPU];\n    // \u540E\u7EED\u6DFB\u52A0\u5176\u4ED6\u6A21\u578B\u540E\u66F4\u65B0\u4E3A:\n    // return [ModelType.BAIDU, ModelType.DEEPSEEK, ModelType.ZHIPU, ModelType.XUNFEI];\n  }\n\n  /**\n   * \u9A8C\u8BC1\u6307\u5B9A\u7C7B\u578B\u6A21\u578B\u7684API\u5BC6\u94A5\n   * @param modelType \u6A21\u578B\u7C7B\u578B\n   */\n  public async validateModelApiKey(modelType: ModelType): Promise<boolean> {\n    try {\n      const adapter = this.createModelAdapter(modelType);\n      return await adapter.validateApiKey();\n    } catch (error) {\n      return false;\n    }\n  }\n}", "import { ModelFactory } from './factory';\nimport { ConfigManager } from '../../infra/config';\nimport { ModelType } from '../../types/config';\nimport {\n  ChatMessage,\n  ModelCallOptions,\n  ModelResponse,\n  ParseOptions,\n  PlanningOptions,\n  TestGenerationOptions,\n  MessageRole\n} from '../../types/model';\nimport { ParsedPRD } from '../../types/task';\n\n/**\n * \u6A21\u578B\u534F\u8C03\u5668\n * \u8D1F\u8D23\u534F\u8C03\u591A\u4E2A\u6A21\u578B\u7684\u4F7F\u7528\uFF0C\u6839\u636E\u4EFB\u52A1\u7C7B\u578B\u9009\u62E9\u5408\u9002\u7684\u6A21\u578B\n */\nexport class ModelCoordinator {\n  private modelFactory: ModelFactory;\n  private configManager: ConfigManager;\n\n  /**\n   * \u521B\u5EFA\u6A21\u578B\u534F\u8C03\u5668\u5B9E\u4F8B\n   * @param configManager \u914D\u7F6E\u7BA1\u7406\u5668\u5B9E\u4F8B\n   */\n  constructor(configManager: ConfigManager) {\n    this.configManager = configManager;\n    this.modelFactory = new ModelFactory(configManager);\n  }\n\n  /**\n   * \u6267\u884C\u804A\u5929\u8BF7\u6C42\n   * @param messages \u6D88\u606F\u6570\u7EC4\n   * @param modelType \u6A21\u578B\u7C7B\u578B\uFF0C\u4E0D\u4F20\u65F6\u4F7F\u7528\u9ED8\u8BA4\u6A21\u578B\n   * @param options \u8C03\u7528\u9009\u9879\n   */\n  public async chat(\n    messages: ChatMessage[],\n    modelType?: ModelType,\n    options?: ModelCallOptions\n  ): Promise<ModelResponse> {\n    const adapter = this.modelFactory.createModelAdapter(modelType);\n    return await adapter.chat({ messages }, options);\n  }\n\n  /**\n   * \u6267\u884C\u6D41\u5F0F\u804A\u5929\u8BF7\u6C42\n   * @param messages \u6D88\u606F\u6570\u7EC4\n   * @param onData \u6570\u636E\u56DE\u8C03\n   * @param modelType \u6A21\u578B\u7C7B\u578B\uFF0C\u4E0D\u4F20\u65F6\u4F7F\u7528\u9ED8\u8BA4\u6A21\u578B\n   * @param options \u8C03\u7528\u9009\u9879\n   */\n  public async chatStream(\n    messages: ChatMessage[],\n    onData: (content: string, done: boolean) => void,\n    modelType?: ModelType,\n    options?: ModelCallOptions\n  ): Promise<void> {\n    const adapter = this.modelFactory.createModelAdapter(modelType);\n    return await adapter.chatStream({ messages }, onData, options);\n  }\n\n  /**\n   * \u6267\u884CPRD\u89E3\u6790\u4EFB\u52A1\n   * @param content PRD\u6587\u6863\u5185\u5BB9\n   * @param options \u89E3\u6790\u9009\u9879\n   */\n  public async parsePRD(content: string, options?: ParseOptions): Promise<ModelResponse> {\n    const modelType = options?.modelType || this.configManager.getDefaultModelType();\n    \n    // \u6784\u5EFA\u7CFB\u7EDF\u63D0\u793A\u8BCD\n    const systemPrompt = `\u4F60\u662F\u4E00\u4F4D\u4E13\u4E1A\u7684PRD\u9700\u6C42\u5206\u6790\u5E08\uFF0C\u8BF7\u5E2E\u6211\u89E3\u6790\u4EE5\u4E0BPRD\u6587\u6863\uFF0C\u63D0\u53D6\u5176\u4E2D\u7684\u5173\u952E\u4FE1\u606F\u3002\n\u8BF7\u6309\u7167\u4EE5\u4E0BJSON\u683C\u5F0F\u8F93\u51FA\u7ED3\u679C\uFF1A\n{\n  \"title\": \"\u6587\u6863\u6807\u9898\",\n  \"description\": \"\u6587\u6863\u6574\u4F53\u63CF\u8FF0\",\n  \"sections\": [\n    {\n      \"title\": \"\u7AE0\u8282\u6807\u9898\",\n      \"content\": \"\u7AE0\u8282\u5185\u5BB9\u6982\u8FF0\",\n      \"level\": \u7AE0\u8282\u5C42\u7EA7,\n      \"features\": [\n        {\n          \"name\": \"\u529F\u80FD\u540D\u79F0\",\n          \"description\": \"\u529F\u80FD\u63CF\u8FF0\",\n          \"priority\": \"\u4F18\u5148\u7EA7\" // high, medium, low\n        }\n      ]\n    }\n  ]\n}\n\u53EA\u8FD4\u56DEJSON\u683C\u5F0F\u5185\u5BB9\uFF0C\u4E0D\u8981\u6709\u5176\u4ED6\u89E3\u91CA\u3002`;\n    \n    // \u7528\u6237\u6D88\u606F\n    const userPrompt = `\u4EE5\u4E0B\u662F\u9700\u8981\u89E3\u6790\u7684PRD\u6587\u6863\u5185\u5BB9\uFF1A\n\n${content}\n\n\u8BF7\u89E3\u6790\u8FD9\u4EFD\u6587\u6863\uFF0C\u6309\u7167\u8981\u6C42\u7684JSON\u683C\u5F0F\u8FD4\u56DE\u7ED3\u679C\u3002`;\n    \n    const messages: ChatMessage[] = [\n      { role: MessageRole.SYSTEM, content: systemPrompt },\n      { role: MessageRole.USER, content: userPrompt }\n    ];\n    \n    return await this.chat(messages, modelType);\n  }\n\n  /**\n   * \u6267\u884C\u4EFB\u52A1\u89C4\u5212\n   * @param parsedPRD \u89E3\u6790\u540E\u7684PRD\u7ED3\u679C\n   * @param options \u89C4\u5212\u9009\u9879\n   */\n  public async planTasks(parsedPRD: ParsedPRD, options?: PlanningOptions): Promise<ModelResponse> {\n    const modelType = options?.modelType || this.configManager.getDefaultModelType();\n    \n    // \u6784\u5EFA\u7CFB\u7EDF\u63D0\u793A\u8BCD\n    const systemPrompt = `\u4F60\u662F\u4E00\u4F4D\u4E13\u4E1A\u7684\u9879\u76EE\u89C4\u5212\u5E08\uFF0C\u8BF7\u6839\u636E\u89E3\u6790\u540E\u7684PRD\u5185\u5BB9\uFF0C\u751F\u6210\u8BE6\u7EC6\u7684\u4EFB\u52A1\u8BA1\u5212\u3002\n\u8BF7\u6309\u7167\u4EE5\u4E0B\u8981\u6C42\u62C6\u5206\u4EFB\u52A1\uFF1A\n1. \u5C06\u5927\u7684\u529F\u80FD\u9700\u6C42\u62C6\u5206\u4E3A\u66F4\u5C0F\u7684\u53EF\u6267\u884C\u5B50\u4EFB\u52A1\n2. \u4E3A\u6BCF\u4E2A\u4EFB\u52A1\u5206\u914D\u5408\u7406\u7684\u4F18\u5148\u7EA7\u548C\u7C7B\u578B\u6807\u7B7E\n3. \u786E\u5B9A\u4EFB\u52A1\u4E4B\u95F4\u7684\u4F9D\u8D56\u5173\u7CFB\n4. ${options?.estimateDuration ? '\u4F30\u7B97\u6BCF\u4E2A\u4EFB\u52A1\u7684\u5B8C\u6210\u65F6\u95F4\uFF08\u4EE5\u5C0F\u65F6\u4E3A\u5355\u4F4D\uFF09' : ''}\n5. ${options?.assignTasks ? '\u4E3A\u6BCF\u4E2A\u4EFB\u52A1\u5206\u914D\u5408\u9002\u7684\u89D2\u8272' : ''}\n\n\u8BF7\u6309\u7167\u4EE5\u4E0BJSON\u683C\u5F0F\u8F93\u51FA\u7ED3\u679C\uFF1A\n{\n  \"name\": \"\u9879\u76EE\u540D\u79F0\",\n  \"description\": \"\u9879\u76EE\u63CF\u8FF0\",\n  \"tasks\": [\n    {\n      \"id\": \"\u552F\u4E00ID\",\n      \"name\": \"\u4EFB\u52A1\u540D\u79F0\",\n      \"description\": \"\u4EFB\u52A1\u63CF\u8FF0\",\n      \"priority\": \"\u4F18\u5148\u7EA7\", // high, medium, low\n      \"type\": \"\u4EFB\u52A1\u7C7B\u578B\", // feature, bug_fix, refactor, test, document\n      \"dependencies\": [\"\u4F9D\u8D56\u4EFB\u52A1ID\"],\n      ${options?.estimateDuration ? '\"estimatedDuration\": \u9884\u8BA1\u8017\u65F6\uFF08\u5C0F\u65F6\uFF09,' : ''}\n      ${options?.assignTasks ? '\"assignee\": \"\u8D1F\u8D23\u89D2\u8272\",' : ''}\n      \"subtasks\": [\n        // \u5B50\u4EFB\u52A1\uFF0C\u7ED3\u6784\u4E0E\u7236\u4EFB\u52A1\u76F8\u540C\n      ]\n    }\n  ]\n}\n\u53EA\u8FD4\u56DEJSON\u683C\u5F0F\u5185\u5BB9\uFF0C\u4E0D\u8981\u6709\u5176\u4ED6\u89E3\u91CA\u3002`;\n    \n    // \u7528\u6237\u6D88\u606F\n    const userPrompt = `\u4EE5\u4E0B\u662F\u89E3\u6790\u540E\u7684PRD\u5185\u5BB9\uFF1A\n\n${JSON.stringify(parsedPRD, null, 2)}\n\n${options?.taskTemplate ? `\u8BF7\u53C2\u8003\u4EE5\u4E0B\u4EFB\u52A1\u6A21\u677F\u8FDB\u884C\u89C4\u5212\uFF1A\\n${options.taskTemplate}` : ''}\n\n\u8BF7\u751F\u6210\u8BE6\u7EC6\u7684\u4EFB\u52A1\u8BA1\u5212\uFF0C\u6309\u7167\u8981\u6C42\u7684JSON\u683C\u5F0F\u8FD4\u56DE\u7ED3\u679C\u3002`;\n    \n    const messages: ChatMessage[] = [\n      { role: MessageRole.SYSTEM, content: systemPrompt },\n      { role: MessageRole.USER, content: userPrompt }\n    ];\n    \n    return await this.chat(messages, modelType);\n  }\n\n  /**\n   * \u751F\u6210\u6D4B\u8BD5\u7528\u4F8B\n   * @param taskDescription \u4EFB\u52A1\u63CF\u8FF0\n   * @param options \u6D4B\u8BD5\u751F\u6210\u9009\u9879\n   */\n  public async generateTests(taskDescription: string, options?: TestGenerationOptions): Promise<ModelResponse> {\n    const modelType = options?.modelType || this.configManager.getDefaultModelType();\n    const framework = options?.framework || this.configManager.get<string>('testSettings.framework', 'jest');\n    \n    // \u6784\u5EFA\u7CFB\u7EDF\u63D0\u793A\u8BCD\n    const systemPrompt = `\u4F60\u662F\u4E00\u4F4D\u4E13\u4E1A\u7684\u6D4B\u8BD5\u5DE5\u7A0B\u5E08\uFF0C\u8BF7\u6839\u636E\u4EFB\u52A1\u63CF\u8FF0\uFF0C\u751F\u6210\u8BE6\u7EC6\u7684\u6D4B\u8BD5\u7528\u4F8B\u3002\n\u8BF7\u4F7F\u7528 ${framework} \u6D4B\u8BD5\u6846\u67B6\u7F16\u5199\u6D4B\u8BD5\u4EE3\u7801\u3002\n\u8981\u6C42\uFF1A\n1. \u6D4B\u8BD5\u9700\u8981\u8986\u76D6\u6B63\u5E38\u529F\u80FD\u8DEF\u5F84\n2. ${options?.includeEdgeCases ? '\u6D4B\u8BD5\u9700\u8981\u8986\u76D6\u8FB9\u754C\u6761\u4EF6\u548C\u5F02\u5E38\u60C5\u51B5' : ''}\n3. ${options?.mockDependencies ? '\u4F7F\u7528mock/stub\u5904\u7406\u5916\u90E8\u4F9D\u8D56' : ''}\n4. \u6D4B\u8BD5\u4EE3\u7801\u5E94\u8BE5\u6E05\u6670\u53EF\u8BFB\uFF0C\u5305\u542B\u5FC5\u8981\u7684\u6CE8\u91CA\n5. \u9075\u5FAA\u6D4B\u8BD5\u6846\u67B6\u7684\u6700\u4F73\u5B9E\u8DF5\n\n\u8BF7\u8F93\u51FA\u5B8C\u6574\u53EF\u6267\u884C\u7684\u6D4B\u8BD5\u4EE3\u7801\u3002`;\n    \n    // \u7528\u6237\u6D88\u606F\n    const userPrompt = `\u4EE5\u4E0B\u662F\u9700\u8981\u7F16\u5199\u6D4B\u8BD5\u7528\u4F8B\u7684\u4EFB\u52A1\u63CF\u8FF0\uFF1A\n\n${taskDescription}\n\n\u8BF7\u4E3A\u6B64\u4EFB\u52A1\u751F\u6210\u6D4B\u8BD5\u7528\u4F8B\u3002`;\n    \n    const messages: ChatMessage[] = [\n      { role: MessageRole.SYSTEM, content: systemPrompt },\n      { role: MessageRole.USER, content: userPrompt }\n    ];\n    \n    return await this.chat(messages, modelType);\n  }\n  \n  /**\n   * \u83B7\u53D6\u53EF\u7528\u7684\u6A21\u578B\u7C7B\u578B\u5217\u8868\n   */\n  public getAvailableModelTypes(): ModelType[] {\n    return this.modelFactory.getAvailableModelTypes();\n  }\n  \n  /**\n   * \u9A8C\u8BC1\u6307\u5B9A\u7C7B\u578B\u6A21\u578B\u7684API\u5BC6\u94A5\n   * @param modelType \u6A21\u578B\u7C7B\u578B\n   */\n  public async validateModelApiKey(modelType: ModelType): Promise<boolean> {\n    return await this.modelFactory.validateModelApiKey(modelType);\n  }\n} ", "/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { SimpleConfigManager } from '../infra/simple-config';\nimport { Logger } from '../infra/logger';\nimport { ModelCoordinator } from '../core/models/coordinator';\nimport { PRDParser } from '../core/parser/prd-parser';\nimport { TaskPlanner } from '../core/planner/task-planner';\nimport { TaskManager } from '../core/task/task-manager';\nimport { FileType, ParseOptions, PlanningOptions, ServiceResponse } from '../types/model';\nimport { TaskFilter, TaskUpdateData } from '../core/task/task-manager';\nimport { LogLevel, ModelType } from '../types/config';\nimport { PRDParseResult } from '../core/parser/prd-parser';\n\n/**\n * TaskFlow AI MCP \u670D\u52A1\u7C7B\n */\nexport class TaskFlowService {\n  private configManager: SimpleConfigManager;\n  private logger: Logger;\n  private modelCoordinator: ModelCoordinator;\n  private prdParser: PRDParser;\n  private taskPlanner: TaskPlanner;\n  private taskManager: TaskManager;\n\n  /**\n   * \u521B\u5EFATaskFlow AI MCP\u670D\u52A1\u5B9E\u4F8B\n   */\n  constructor() {\n    // \u521D\u59CB\u5316\u57FA\u7840\u8BBE\u65BD\n    this.configManager = new SimpleConfigManager();\n    this.logger = Logger.getInstance({\n      level: this.configManager.get('logger.level', LogLevel.INFO),\n      output: this.configManager.get('logger.output', 'console'),\n      file: this.configManager.get('logger.file')\n    });\n\n    // \u521D\u59CB\u5316\u6838\u5FC3\u670D\u52A1\n    this.modelCoordinator = new ModelCoordinator(this.configManager as any);\n    this.prdParser = new PRDParser(this.modelCoordinator, this.logger);\n    this.taskPlanner = new TaskPlanner(this.modelCoordinator, this.logger);\n    this.taskManager = new TaskManager(this.logger, this.configManager as any);\n\n    this.logger.info('TaskFlow AI MCP\u670D\u52A1\u521D\u59CB\u5316\u5B8C\u6210');\n  }\n\n  /**\n   * \u89E3\u6790PRD\u6587\u6863\u5185\u5BB9\n   * @param content PRD\u6587\u6863\u5185\u5BB9\n   * @param fileType \u6587\u4EF6\u7C7B\u578B\n   * @param options \u89E3\u6790\u9009\u9879\n   */\n  public async parsePRD(content: string, fileType: FileType = FileType.MARKDOWN, options?: ParseOptions): Promise<ServiceResponse<PRDParseResult>> {\n    try {\n      this.logger.info('\u5F00\u59CB\u89E3\u6790PRD\u5185\u5BB9');\n      const result = await this.prdParser.parseContent(content, fileType, options);\n      return { success: true, data: result };\n    } catch (error) {\n      this.logger.error(`\u89E3\u6790PRD\u5185\u5BB9\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u4ECE\u6587\u4EF6\u89E3\u6790PRD\n   * @param filePath PRD\u6587\u4EF6\u8DEF\u5F84\n   * @param options \u89E3\u6790\u9009\u9879\n   */\n  public async parsePRDFromFile(filePath: string, options?: ParseOptions) {\n    try {\n      this.logger.info(`\u5F00\u59CB\u89E3\u6790PRD\u6587\u4EF6: ${filePath}`);\n      const result = await this.prdParser.parseFromFile(filePath, options);\n      return { success: true, data: result };\n    } catch (error) {\n      this.logger.error(`\u89E3\u6790PRD\u6587\u4EF6\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u6839\u636EPRD\u751F\u6210\u4EFB\u52A1\u8BA1\u5212\n   * @param prdResult PRD\u89E3\u6790\u7ED3\u679C\n   * @param options \u89C4\u5212\u9009\u9879\n   */\n  public async generateTaskPlan(prdResult: any, options?: PlanningOptions) {\n    try {\n      this.logger.info('\u5F00\u59CB\u751F\u6210\u4EFB\u52A1\u8BA1\u5212');\n      const taskPlan = await this.taskPlanner.generateTaskPlan(prdResult, options);\n      return { success: true, data: taskPlan };\n    } catch (error) {\n      this.logger.error(`\u751F\u6210\u4EFB\u52A1\u8BA1\u5212\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u4FDD\u5B58\u4EFB\u52A1\u8BA1\u5212\n   * @param taskPlan \u4EFB\u52A1\u8BA1\u5212\n   * @param outputPath \u8F93\u51FA\u8DEF\u5F84\n   */\n  public async saveTaskPlan(taskPlan: any, outputPath: string) {\n    try {\n      await this.taskPlanner.saveTaskPlan(taskPlan, outputPath);\n      // \u540C\u65F6\u66F4\u65B0\u4EFB\u52A1\u7BA1\u7406\u5668\u7684\u4EFB\u52A1\u8BA1\u5212\n      this.taskManager.setTaskPlan(taskPlan);\n      return { success: true };\n    } catch (error) {\n      this.logger.error(`\u4FDD\u5B58\u4EFB\u52A1\u8BA1\u5212\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u52A0\u8F7D\u4EFB\u52A1\u8BA1\u5212\n   * @param filePath \u4EFB\u52A1\u8BA1\u5212\u6587\u4EF6\u8DEF\u5F84\n   */\n  public async loadTaskPlan(filePath: string) {\n    try {\n      const taskPlan = await this.taskManager.loadTaskPlan(filePath);\n      return { success: true, data: taskPlan };\n    } catch (error) {\n      this.logger.error(`\u52A0\u8F7D\u4EFB\u52A1\u8BA1\u5212\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u6240\u6709\u4EFB\u52A1\n   */\n  public getAllTasks() {\n    try {\n      const tasks = this.taskManager.getAllTasks();\n      return { success: true, data: tasks };\n    } catch (error) {\n      this.logger.error(`\u83B7\u53D6\u6240\u6709\u4EFB\u52A1\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u6839\u636EID\u83B7\u53D6\u4EFB\u52A1\n   * @param id \u4EFB\u52A1ID\n   */\n  public getTaskById(id: string) {\n    try {\n      const task = this.taskManager.getTaskById(id);\n      if (!task) {\n        return { success: false, error: `\u4EFB\u52A1 ${id} \u4E0D\u5B58\u5728` };\n      }\n      return { success: true, data: task };\n    } catch (error) {\n      this.logger.error(`\u83B7\u53D6\u4EFB\u52A1\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u8FC7\u6EE4\u4EFB\u52A1\n   * @param filter \u8FC7\u6EE4\u6761\u4EF6\n   */\n  public filterTasks(filter: TaskFilter) {\n    try {\n      const tasks = this.taskManager.filterTasks(filter);\n      return { success: true, data: tasks };\n    } catch (error) {\n      this.logger.error(`\u8FC7\u6EE4\u4EFB\u52A1\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u66F4\u65B0\u4EFB\u52A1\n   * @param id \u4EFB\u52A1ID\n   * @param data \u66F4\u65B0\u6570\u636E\n   */\n  public updateTask(id: string, data: TaskUpdateData) {\n    try {\n      const task = this.taskManager.updateTask(id, data);\n      if (!task) {\n        return { success: false, error: `\u4EFB\u52A1 ${id} \u4E0D\u5B58\u5728` };\n      }\n      return { success: true, data: task };\n    } catch (error) {\n      this.logger.error(`\u66F4\u65B0\u4EFB\u52A1\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u4E0B\u4E00\u4E2A\u8981\u5904\u7406\u7684\u4EFB\u52A1\n   */\n  public getNextTasks() {\n    try {\n      const tasks = this.taskManager.getNextTasks();\n      return { success: true, data: tasks };\n    } catch (error) {\n      this.logger.error(`\u83B7\u53D6\u4E0B\u4E00\u4E2A\u4EFB\u52A1\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u4F7F\u7528\u804A\u5929\u6A21\u578B\u8FDB\u884C\u5BF9\u8BDD\n   * @param messages \u6D88\u606F\u6570\u7EC4\n   * @param modelType \u6A21\u578B\u7C7B\u578B\n   * @param options \u8C03\u7528\u9009\u9879\n   */\n  public async chat(messages: any[], modelType?: ModelType, options?: any) {\n    try {\n      const response = await this.modelCoordinator.chat(messages, modelType, options);\n      return { success: true, data: response };\n    } catch (error) {\n      this.logger.error(`\u804A\u5929\u8BF7\u6C42\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u6240\u6709\u53EF\u7528\u7684\u6A21\u578B\u7C7B\u578B\n   */\n  public getAvailableModelTypes() {\n    try {\n      const modelTypes = this.modelCoordinator.getAvailableModelTypes();\n      return { success: true, data: modelTypes };\n    } catch (error) {\n      this.logger.error(`\u83B7\u53D6\u53EF\u7528\u6A21\u578B\u7C7B\u578B\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u9A8C\u8BC1\u6307\u5B9A\u7C7B\u578B\u6A21\u578B\u7684API\u5BC6\u94A5\n   * @param modelType \u6A21\u578B\u7C7B\u578B\n   */\n  public async validateModelApiKey(modelType: ModelType) {\n    try {\n      const isValid = await this.modelCoordinator.validateModelApiKey(modelType);\n      return { success: true, data: { valid: isValid } };\n    } catch (error) {\n      this.logger.error(`\u9A8C\u8BC1\u6A21\u578BAPI\u5BC6\u94A5\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u66F4\u65B0\u914D\u7F6E\n   * @param config \u914D\u7F6E\u5BF9\u8C61\n   * @param isProjectLevel \u662F\u5426\u4E3A\u9879\u76EE\u7EA7\u914D\u7F6E\n   */\n  public updateConfig(config: any, isProjectLevel = false) {\n    try {\n      this.configManager.updateConfig(config, isProjectLevel);\n\n      // \u66F4\u65B0\u65E5\u5FD7\u914D\u7F6E\n      if (config.logger) {\n        this.logger.updateConfig({\n          level: this.configManager.get('logger.level', LogLevel.INFO),\n          output: this.configManager.get('logger.output', 'console'),\n          file: this.configManager.get('logger.file')\n        });\n      }\n\n      return { success: true };\n    } catch (error) {\n      this.logger.error(`\u66F4\u65B0\u914D\u7F6E\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u5B8C\u6574\u914D\u7F6E\n   */\n  public getConfig() {\n    try {\n      const config = this.configManager.getConfig();\n      // \u79FB\u9664\u654F\u611F\u4FE1\u606F\n      const safeConfig = { ...config };\n      if (safeConfig.models) {\n        Object.keys(safeConfig.models).forEach(key => {\n          if (key !== 'default' && safeConfig.models[key as keyof typeof safeConfig.models]) {\n            const modelConfig = safeConfig.models[key as keyof typeof safeConfig.models] as any;\n            if (modelConfig && modelConfig.apiKey) {\n              modelConfig.apiKey = '******';\n            }\n            if (modelConfig && modelConfig.secretKey) {\n              modelConfig.secretKey = '******';\n            }\n          }\n        });\n      }\n      return { success: true, data: safeConfig };\n    } catch (error) {\n      this.logger.error(`\u83B7\u53D6\u914D\u7F6E\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u4EFB\u52A1\u72B6\u6001\u6982\u89C8\n   */\n  public getTaskStatus() {\n    try {\n      const allTasks = this.taskManager.getAllTasks();\n      const stats = {\n        total: allTasks.length,\n        pending: allTasks.filter(t => t.status === 'pending').length,\n        in_progress: allTasks.filter(t => t.status === 'in_progress').length,\n        completed: allTasks.filter(t => t.status === 'completed').length,\n        cancelled: allTasks.filter(t => t.status === 'cancelled').length\n      };\n      return { success: true, data: stats };\n    } catch (error) {\n      this.logger.error(`\u83B7\u53D6\u4EFB\u52A1\u72B6\u6001\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u66F4\u65B0\u4EFB\u52A1\u72B6\u6001\n   * @param taskId \u4EFB\u52A1ID\n   * @param status \u65B0\u72B6\u6001\n   * @param data \u989D\u5916\u6570\u636E\n   */\n  public updateTaskStatus(taskId: string, status: string, data?: any) {\n    try {\n      const updateData: TaskUpdateData = { status: status as any };\n      if (data) {\n        Object.assign(updateData, data);\n      }\n      const task = this.taskManager.updateTask(taskId, updateData);\n      if (!task) {\n        return { success: false, error: `\u4EFB\u52A1 ${taskId} \u4E0D\u5B58\u5728` };\n      }\n      return { success: true, data: task };\n    } catch (error) {\n      this.logger.error(`\u66F4\u65B0\u4EFB\u52A1\u72B6\u6001\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u63A8\u8350\u4EFB\u52A1\n   */\n  public getRecommendedTask() {\n    try {\n      const nextTasks = this.taskManager.getNextTasks();\n      const recommendedTask = nextTasks.length > 0 ? nextTasks[0] : null;\n      return { success: true, data: recommendedTask };\n    } catch (error) {\n      this.logger.error(`\u83B7\u53D6\u63A8\u8350\u4EFB\u52A1\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u751F\u6210\u53EF\u89C6\u5316\n   * @param type \u53EF\u89C6\u5316\u7C7B\u578B\n   * @param options \u9009\u9879\n   */\n  public async generateVisualization(type: string, options?: any) {\n    try {\n      // \u8FD9\u91CC\u5E94\u8BE5\u8C03\u7528\u53EF\u89C6\u5316\u6A21\u5757\uFF0C\u6682\u65F6\u8FD4\u56DE\u6A21\u62DF\u6570\u636E\n      const visualization = {\n        type,\n        data: this.taskManager.getAllTasks(),\n        options,\n        generatedAt: new Date().toISOString()\n      };\n      return { success: true, data: visualization };\n    } catch (error) {\n      this.logger.error(`\u751F\u6210\u53EF\u89C6\u5316\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  // Project Management Methods\n\n  /**\n   * \u521B\u5EFA\u9879\u76EE\n   * @param projectData \u9879\u76EE\u6570\u636E\n   */\n  public async createProject(projectData: any) {\n    try {\n      // \u6A21\u62DF\u9879\u76EE\u521B\u5EFA\u903B\u8F91\n      const project = {\n        id: `project_${Date.now()}`,\n        ...projectData,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        status: 'active'\n      };\n      return { success: true, data: project };\n    } catch (error) {\n      this.logger.error(`\u521B\u5EFA\u9879\u76EE\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u9879\u76EE\u5217\u8868\n   * @param options \u67E5\u8BE2\u9009\u9879\n   */\n  public async getProjects(options?: any) {\n    try {\n      // \u6A21\u62DF\u9879\u76EE\u5217\u8868\n      const projects = [\n        {\n          id: 'project_1',\n          name: '\u793A\u4F8B\u9879\u76EE',\n          description: '\u8FD9\u662F\u4E00\u4E2A\u793A\u4F8B\u9879\u76EE',\n          status: 'active',\n          createdAt: new Date().toISOString()\n        }\n      ];\n      return { success: true, data: projects };\n    } catch (error) {\n      this.logger.error(`\u83B7\u53D6\u9879\u76EE\u5217\u8868\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u9879\u76EE\u8BE6\u60C5\n   * @param id \u9879\u76EEID\n   */\n  public async getProject(id: string) {\n    try {\n      // \u6A21\u62DF\u9879\u76EE\u8BE6\u60C5\n      const project = {\n        id,\n        name: '\u793A\u4F8B\u9879\u76EE',\n        description: '\u8FD9\u662F\u4E00\u4E2A\u793A\u4F8B\u9879\u76EE',\n        status: 'active',\n        createdAt: new Date().toISOString(),\n        tasks: this.taskManager.getAllTasks()\n      };\n      return { success: true, data: project };\n    } catch (error) {\n      this.logger.error(`\u83B7\u53D6\u9879\u76EE\u8BE6\u60C5\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u66F4\u65B0\u9879\u76EE\n   * @param id \u9879\u76EEID\n   * @param updateData \u66F4\u65B0\u6570\u636E\n   */\n  public async updateProject(id: string, updateData: any) {\n    try {\n      const project = {\n        id,\n        ...updateData,\n        updatedAt: new Date().toISOString()\n      };\n      return { success: true, data: project };\n    } catch (error) {\n      this.logger.error(`\u66F4\u65B0\u9879\u76EE\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u5220\u9664\u9879\u76EE\n   * @param id \u9879\u76EEID\n   */\n  public async deleteProject(id: string) {\n    try {\n      return { success: true, message: `\u9879\u76EE ${id} \u5DF2\u5220\u9664` };\n    } catch (error) {\n      this.logger.error(`\u5220\u9664\u9879\u76EE\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u9879\u76EE\u4EFB\u52A1\n   * @param id \u9879\u76EEID\n   * @param options \u67E5\u8BE2\u9009\u9879\n   */\n  public async getProjectTasks(id: string, options?: any) {\n    try {\n      const tasks = this.taskManager.getAllTasks();\n      return { success: true, data: tasks };\n    } catch (error) {\n      this.logger.error(`\u83B7\u53D6\u9879\u76EE\u4EFB\u52A1\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u9879\u76EE\u7EDF\u8BA1\n   * @param id \u9879\u76EEID\n   */\n  public async getProjectStats(id: string) {\n    try {\n      const tasks = this.taskManager.getAllTasks();\n      const stats = {\n        totalTasks: tasks.length,\n        completedTasks: tasks.filter(t => t.status === 'completed').length,\n        inProgressTasks: tasks.filter(t => t.status === 'in_progress').length,\n        pendingTasks: tasks.filter(t => t.status === 'pending').length\n      };\n      return { success: true, data: stats };\n    } catch (error) {\n      this.logger.error(`\u83B7\u53D6\u9879\u76EE\u7EDF\u8BA1\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  // AI Controller Methods\n\n  /**\n   * \u751F\u6210\u4EFB\u52A1\n   * @param req \u8BF7\u6C42\u5BF9\u8C61\n   * @param res \u54CD\u5E94\u5BF9\u8C61\n   */\n  public async generateTasks(req: any, res: any) {\n    try {\n      const { requirements, options } = req.body;\n      // \u6A21\u62DF\u4EFB\u52A1\u751F\u6210\n      const tasks = [\n        {\n          id: `task_${Date.now()}`,\n          title: '\u793A\u4F8B\u4EFB\u52A1',\n          description: '\u57FA\u4E8E\u9700\u6C42\u751F\u6210\u7684\u793A\u4F8B\u4EFB\u52A1',\n          status: 'pending',\n          priority: 'medium'\n        }\n      ];\n      return { success: true, data: tasks };\n    } catch (error) {\n      this.logger.error(`\u751F\u6210\u4EFB\u52A1\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u7F16\u6392\u4EFB\u52A1\n   * @param req \u8BF7\u6C42\u5BF9\u8C61\n   * @param res \u54CD\u5E94\u5BF9\u8C61\n   */\n  public async orchestrateTasks(req: any, res: any) {\n    try {\n      const { tasks, options } = req.body;\n      // \u6A21\u62DF\u4EFB\u52A1\u7F16\u6392\n      const orchestratedTasks = tasks.map((task: any, index: number) => ({\n        ...task,\n        order: index + 1,\n        dependencies: index > 0 ? [tasks[index - 1].id] : []\n      }));\n      return { success: true, data: orchestratedTasks };\n    } catch (error) {\n      this.logger.error(`\u7F16\u6392\u4EFB\u52A1\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u751F\u6210\u6587\u6863\n   * @param req \u8BF7\u6C42\u5BF9\u8C61\n   * @param res \u54CD\u5E94\u5BF9\u8C61\n   */\n  public async generateDocuments(req: any, res: any) {\n    try {\n      const { type, content, options } = req.body;\n      // \u6A21\u62DF\u6587\u6863\u751F\u6210\n      const document = {\n        type,\n        content: `\u751F\u6210\u7684${type}\u6587\u6863\u5185\u5BB9`,\n        generatedAt: new Date().toISOString()\n      };\n      return { success: true, data: document };\n    } catch (error) {\n      this.logger.error(`\u751F\u6210\u6587\u6863\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u751F\u6210\u56FE\u8868\n   * @param req \u8BF7\u6C42\u5BF9\u8C61\n   * @param res \u54CD\u5E94\u5BF9\u8C61\n   */\n  public async generateCharts(req: any, res: any) {\n    try {\n      const { type, data, options } = req.body;\n      // \u6A21\u62DF\u56FE\u8868\u751F\u6210\n      const chart = {\n        type,\n        data: data || this.taskManager.getAllTasks(),\n        options,\n        generatedAt: new Date().toISOString()\n      };\n      return { success: true, data: chart };\n    } catch (error) {\n      this.logger.error(`\u751F\u6210\u56FE\u8868\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u804A\u5929\u6D41\u5F0F\u54CD\u5E94\n   * @param req \u8BF7\u6C42\u5BF9\u8C61\n   * @param res \u54CD\u5E94\u5BF9\u8C61\n   */\n  public async chatStream(req: any, res: any) {\n    try {\n      const { message, context } = req.body;\n      // \u6A21\u62DF\u6D41\u5F0F\u54CD\u5E94\n      res.writeHead(200, {\n        'Content-Type': 'text/plain',\n        'Transfer-Encoding': 'chunked'\n      });\n\n      const response = `AI\u56DE\u590D: ${message}`;\n      res.write(response);\n      res.end();\n    } catch (error) {\n      this.logger.error(`\u804A\u5929\u6D41\u5F0F\u54CD\u5E94\u5931\u8D25: ${(error as Error).message}`);\n      res.status(500).json({ success: false, error: (error as Error).message });\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u6A21\u578B\u5217\u8868\n   * @param req \u8BF7\u6C42\u5BF9\u8C61\n   * @param res \u54CD\u5E94\u5BF9\u8C61\n   */\n  public async getModels(req: any, res: any) {\n    try {\n      const models = this.modelCoordinator.getAvailableModelTypes();\n      return { success: true, data: models };\n    } catch (error) {\n      this.logger.error(`\u83B7\u53D6\u6A21\u578B\u5217\u8868\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u6A21\u578B\u72B6\u6001\n   * @param req \u8BF7\u6C42\u5BF9\u8C61\n   * @param res \u54CD\u5E94\u5BF9\u8C61\n   */\n  public async getModelStatus(req: any, res: any) {\n    try {\n      const { modelType } = req.params;\n      const isValid = await this.modelCoordinator.validateModelApiKey(modelType);\n      return { success: true, data: { modelType, status: isValid ? 'active' : 'inactive' } };\n    } catch (error) {\n      this.logger.error(`\u83B7\u53D6\u6A21\u578B\u72B6\u6001\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u9A8C\u8BC1\u9700\u6C42\n   * @param req \u8BF7\u6C42\u5BF9\u8C61\n   * @param res \u54CD\u5E94\u5BF9\u8C61\n   */\n  public async validateRequirements(req: any, res: any) {\n    try {\n      const { requirements } = req.body;\n      // \u6A21\u62DF\u9700\u6C42\u9A8C\u8BC1\n      const validation = {\n        valid: true,\n        issues: [],\n        suggestions: ['\u5EFA\u8BAE\u6DFB\u52A0\u66F4\u591A\u7EC6\u8282']\n      };\n      return { success: true, data: validation };\n    } catch (error) {\n      this.logger.error(`\u9A8C\u8BC1\u9700\u6C42\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u4F30\u7B97\u5DE5\u4F5C\u91CF\n   * @param req \u8BF7\u6C42\u5BF9\u8C61\n   * @param res \u54CD\u5E94\u5BF9\u8C61\n   */\n  public async estimateEffort(req: any, res: any) {\n    try {\n      const { tasks } = req.body;\n      // \u6A21\u62DF\u5DE5\u4F5C\u91CF\u4F30\u7B97\n      const estimation = {\n        totalHours: tasks.length * 8,\n        breakdown: tasks.map((task: any) => ({\n          taskId: task.id,\n          estimatedHours: 8\n        }))\n      };\n      return { success: true, data: estimation };\n    } catch (error) {\n      this.logger.error(`\u4F30\u7B97\u5DE5\u4F5C\u91CF\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u4F7F\u7528\u7EDF\u8BA1\n   * @param req \u8BF7\u6C42\u5BF9\u8C61\n   * @param res \u54CD\u5E94\u5BF9\u8C61\n   */\n  public async getUsageStats(req: any, res: any) {\n    try {\n      const stats = {\n        totalRequests: 100,\n        successfulRequests: 95,\n        failedRequests: 5,\n        averageResponseTime: 1.2\n      };\n      return { success: true, data: stats };\n    } catch (error) {\n      this.logger.error(`\u83B7\u53D6\u4F7F\u7528\u7EDF\u8BA1\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u5F52\u6863\u9879\u76EE\n   * @param req \u8BF7\u6C42\u5BF9\u8C61\n   * @param res \u54CD\u5E94\u5BF9\u8C61\n   */\n  public async archiveProject(req: any, res: any) {\n    try {\n      const { id } = req.params;\n      const project = {\n        id,\n        status: 'archived',\n        archivedAt: new Date().toISOString()\n      };\n      return { success: true, data: project };\n    } catch (error) {\n      this.logger.error(`\u5F52\u6863\u9879\u76EE\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u6062\u590D\u9879\u76EE\n   * @param id \u9879\u76EEID\n   */\n  public async restoreProject(id: string): Promise<any>;\n  /**\n   * \u6062\u590D\u9879\u76EE\n   * @param req \u8BF7\u6C42\u5BF9\u8C61\n   * @param res \u54CD\u5E94\u5BF9\u8C61\n   */\n  public async restoreProject(req: any, res: any): Promise<any>;\n  public async restoreProject(idOrReq: string | any, res?: any) {\n    try {\n      let id: string;\n      if (typeof idOrReq === 'string') {\n        id = idOrReq;\n      } else {\n        id = idOrReq.params.id;\n      }\n\n      const project = {\n        id,\n        status: 'active',\n        restoredAt: new Date().toISOString()\n      };\n      return { success: true, data: project };\n    } catch (error) {\n      this.logger.error(`\u6062\u590D\u9879\u76EE\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u751F\u6210\u9879\u76EE\u62A5\u544A\n   * @param id \u9879\u76EEID\n   * @param options \u62A5\u544A\u9009\u9879\n   */\n  public async generateProjectReport(id: string, options?: any) {\n    try {\n      const project = await this.getProject(id);\n      const tasks = this.taskManager.getAllTasks();\n      const stats = await this.getProjectStats(id);\n\n      const report = {\n        project: project.data,\n        tasks,\n        statistics: stats.data,\n        generatedAt: new Date().toISOString(),\n        format: options?.format || 'json'\n      };\n\n      return { success: true, data: report };\n    } catch (error) {\n      this.logger.error(`\u751F\u6210\u9879\u76EE\u62A5\u544A\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u5BFC\u51FA\u9879\u76EE\n   * @param id \u9879\u76EEID\n   * @param format \u5BFC\u51FA\u683C\u5F0F\n   */\n  public async exportProject(id: string, format: string) {\n    try {\n      const project = await this.getProject(id);\n      const tasks = this.taskManager.getAllTasks();\n\n      const exportData = {\n        project: project.data,\n        tasks,\n        exportedAt: new Date().toISOString(),\n        format\n      };\n\n      return { success: true, data: exportData };\n    } catch (error) {\n      this.logger.error(`\u5BFC\u51FA\u9879\u76EE\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n\n  /**\n   * \u514B\u9686\u9879\u76EE\n   * @param id \u9879\u76EEID\n   * @param options \u514B\u9686\u9009\u9879\n   */\n  public async cloneProject(id: string, options: any) {\n    try {\n      const originalProject = await this.getProject(id);\n      if (!originalProject.success || !originalProject.data) {\n        throw new Error('\u539F\u9879\u76EE\u4E0D\u5B58\u5728\u6216\u83B7\u53D6\u5931\u8D25');\n      }\n\n      const newProject = {\n        id: `project_${Date.now()}`,\n        name: options.name || `${originalProject.data.name} (\u526F\u672C)`,\n        description: options.description || originalProject.data.description,\n        clonedFrom: id,\n        createdAt: new Date().toISOString()\n      };\n\n      return { success: true, data: newProject };\n    } catch (error) {\n      this.logger.error(`\u514B\u9686\u9879\u76EE\u5931\u8D25: ${(error as Error).message}`);\n      return { success: false, error: (error as Error).message };\n    }\n  }\n}\n\n// \u5BFC\u51FA\u5355\u4F8B\u5B9E\u4F8B\nexport const taskFlowService = new TaskFlowService();\n\n// \u4FDD\u6301\u5411\u540E\u517C\u5BB9\u6027\nexport const yasiService = taskFlowService;", "/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * MCP (Model Context Protocol) \u534F\u8BAE\u5B9E\u73B0\n * \u4E3AAI\u7F16\u8F91\u5668\u63D0\u4F9B\u6807\u51C6\u5316\u7684MCP\u63A5\u53E3\n */\n\nimport { taskFlowService } from './index';\n\n/**\n * MCP\u5DE5\u5177\u5B9A\u4E49\n */\nexport const MCP_TOOLS = {\n  // PRD\u89E3\u6790\u76F8\u5173\u5DE5\u5177\n  parse_prd: {\n    name: 'parse_prd',\n    description: '\u89E3\u6790PRD\u6587\u6863\u5E76\u751F\u6210\u4EFB\u52A1\u8BA1\u5212',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        content: {\n          type: 'string',\n          description: 'PRD\u6587\u6863\u5185\u5BB9'\n        },\n        fileType: {\n          type: 'string',\n          enum: ['markdown', 'text', 'docx', 'pdf'],\n          description: '\u6587\u4EF6\u7C7B\u578B',\n          default: 'markdown'\n        },\n        modelType: {\n          type: 'string',\n          enum: ['deepseek', 'qwen', 'wenxin', 'zhipu'],\n          description: '\u4F7F\u7528\u7684AI\u6A21\u578B\u7C7B\u578B'\n        },\n        outputPath: {\n          type: 'string',\n          description: '\u4EFB\u52A1\u8BA1\u5212\u8F93\u51FA\u8DEF\u5F84\uFF08\u53EF\u9009\uFF09'\n        }\n      },\n      required: ['content']\n    }\n  },\n\n  parse_prd_file: {\n    name: 'parse_prd_file',\n    description: '\u4ECE\u6587\u4EF6\u89E3\u6790PRD\u6587\u6863\u5E76\u751F\u6210\u4EFB\u52A1\u8BA1\u5212',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        filePath: {\n          type: 'string',\n          description: 'PRD\u6587\u4EF6\u8DEF\u5F84'\n        },\n        modelType: {\n          type: 'string',\n          enum: ['deepseek', 'qwen', 'wenxin', 'zhipu'],\n          description: '\u4F7F\u7528\u7684AI\u6A21\u578B\u7C7B\u578B'\n        },\n        outputPath: {\n          type: 'string',\n          description: '\u4EFB\u52A1\u8BA1\u5212\u8F93\u51FA\u8DEF\u5F84\uFF08\u53EF\u9009\uFF09'\n        }\n      },\n      required: ['filePath']\n    }\n  },\n\n  // \u4EFB\u52A1\u7BA1\u7406\u76F8\u5173\u5DE5\u5177\n  get_all_tasks: {\n    name: 'get_all_tasks',\n    description: '\u83B7\u53D6\u6240\u6709\u4EFB\u52A1',\n    inputSchema: {\n      type: 'object',\n      properties: {}\n    }\n  },\n\n  get_task_by_id: {\n    name: 'get_task_by_id',\n    description: '\u6839\u636EID\u83B7\u53D6\u4EFB\u52A1\u8BE6\u60C5',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        id: {\n          type: 'string',\n          description: '\u4EFB\u52A1ID'\n        }\n      },\n      required: ['id']\n    }\n  },\n\n  get_next_tasks: {\n    name: 'get_next_tasks',\n    description: '\u83B7\u53D6\u4E0B\u4E00\u4E2A\u8981\u5904\u7406\u7684\u4EFB\u52A1',\n    inputSchema: {\n      type: 'object',\n      properties: {}\n    }\n  },\n\n  update_task_status: {\n    name: 'update_task_status',\n    description: '\u66F4\u65B0\u4EFB\u52A1\u72B6\u6001',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        id: {\n          type: 'string',\n          description: '\u4EFB\u52A1ID'\n        },\n        status: {\n          type: 'string',\n          enum: ['pending', 'in_progress', 'completed', 'blocked', 'cancelled'],\n          description: '\u65B0\u7684\u4EFB\u52A1\u72B6\u6001'\n        }\n      },\n      required: ['id', 'status']\n    }\n  },\n\n  // AI\u5BF9\u8BDD\u5DE5\u5177\n  chat: {\n    name: 'chat',\n    description: '\u4F7F\u7528AI\u6A21\u578B\u8FDB\u884C\u5BF9\u8BDD',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        messages: {\n          type: 'array',\n          items: {\n            type: 'object',\n            properties: {\n              role: {\n                type: 'string',\n                enum: ['user', 'assistant', 'system']\n              },\n              content: {\n                type: 'string'\n              }\n            },\n            required: ['role', 'content']\n          },\n          description: '\u5BF9\u8BDD\u6D88\u606F\u6570\u7EC4'\n        },\n        modelType: {\n          type: 'string',\n          enum: ['deepseek', 'qwen', 'wenxin', 'zhipu'],\n          description: '\u4F7F\u7528\u7684AI\u6A21\u578B\u7C7B\u578B'\n        }\n      },\n      required: ['messages']\n    }\n  },\n\n  // \u914D\u7F6E\u7BA1\u7406\u5DE5\u5177\n  get_config: {\n    name: 'get_config',\n    description: '\u83B7\u53D6\u5F53\u524D\u914D\u7F6E',\n    inputSchema: {\n      type: 'object',\n      properties: {}\n    }\n  },\n\n  update_config: {\n    name: 'update_config',\n    description: '\u66F4\u65B0\u914D\u7F6E',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        config: {\n          type: 'object',\n          description: '\u914D\u7F6E\u5BF9\u8C61'\n        },\n        isProjectLevel: {\n          type: 'boolean',\n          description: '\u662F\u5426\u4E3A\u9879\u76EE\u7EA7\u914D\u7F6E',\n          default: false\n        }\n      },\n      required: ['config']\n    }\n  },\n\n  // \u6A21\u578B\u7BA1\u7406\u5DE5\u5177\n  get_available_models: {\n    name: 'get_available_models',\n    description: '\u83B7\u53D6\u6240\u6709\u53EF\u7528\u7684AI\u6A21\u578B',\n    inputSchema: {\n      type: 'object',\n      properties: {}\n    }\n  },\n\n  validate_model_key: {\n    name: 'validate_model_key',\n    description: '\u9A8C\u8BC1AI\u6A21\u578BAPI\u5BC6\u94A5',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        modelType: {\n          type: 'string',\n          enum: ['deepseek', 'qwen', 'wenxin', 'zhipu'],\n          description: 'AI\u6A21\u578B\u7C7B\u578B'\n        }\n      },\n      required: ['modelType']\n    }\n  }\n};\n\n/**\n * MCP\u5DE5\u5177\u6267\u884C\u5668\n */\nexport async function executeMCPTool(toolName: string, args: any) {\n  try {\n    switch (toolName) {\n      case 'parse_prd':\n        return await taskFlowService.parsePRD(args.content, args.fileType, {\n          modelType: args.modelType,\n          outputPath: args.outputPath\n        });\n\n      case 'parse_prd_file':\n        return await taskFlowService.parsePRDFromFile(args.filePath, {\n          modelType: args.modelType,\n          outputPath: args.outputPath\n        });\n\n      case 'get_all_tasks':\n        return taskFlowService.getAllTasks();\n\n      case 'get_task_by_id':\n        return taskFlowService.getTaskById(args.id);\n\n      case 'get_next_tasks':\n        return taskFlowService.getNextTasks();\n\n      case 'update_task_status':\n        return taskFlowService.updateTask(args.id, { status: args.status });\n\n      case 'chat':\n        return await taskFlowService.chat(args.messages, args.modelType);\n\n      case 'get_config':\n        return taskFlowService.getConfig();\n\n      case 'update_config':\n        return taskFlowService.updateConfig(args.config, args.isProjectLevel);\n\n      case 'get_available_models':\n        return taskFlowService.getAvailableModelTypes();\n\n      case 'validate_model_key':\n        return await taskFlowService.validateModelApiKey(args.modelType);\n\n      default:\n        return {\n          success: false,\n          error: `\u672A\u77E5\u7684MCP\u5DE5\u5177: ${toolName}`\n        };\n    }\n  } catch (error) {\n    return {\n      success: false,\n      error: `\u6267\u884CMCP\u5DE5\u5177\u5931\u8D25: ${(error as Error).message}`\n    };\n  }\n}\n\n/**\n * \u83B7\u53D6MCP\u5DE5\u5177\u5217\u8868\n */\nexport function getMCPTools() {\n  return Object.values(MCP_TOOLS);\n}\n\n/**\n * MCP\u670D\u52A1\u5668\u4FE1\u606F\n */\nexport const MCP_SERVER_INFO = {\n  name: 'TaskFlow AI',\n  version: '1.2.0',\n  description: 'TaskFlow AI - \u667A\u80FDPRD\u89E3\u6790\u548C\u4EFB\u52A1\u7BA1\u7406\u52A9\u624B',\n  capabilities: {\n    tools: true,\n    resources: false,\n    prompts: false\n  }\n};\n", "/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { yasiService } from './index';\nimport { FileType, ModelCallOptions } from '../types/model';\nimport { ModelType } from '../types/config';\nimport { executeMCPTool, getMCPTools, MCP_SERVER_INFO } from './protocol';\n\n/**\n * MCP\u63A5\u53E3\u51FD\u6570\n * \u4E3AAI\u7F16\u8F91\u5668\u63D0\u4F9B\u6807\u51C6\u5316\u63A5\u53E3\n */\n\n/**\n * \u6267\u884CMCP\u5DE5\u5177\n * @param toolName \u5DE5\u5177\u540D\u79F0\n * @param args \u5DE5\u5177\u53C2\u6570\n */\nexport async function executeTool(toolName: string, args: any) {\n  return await executeMCPTool(toolName, args);\n}\n\n/**\n * \u83B7\u53D6\u6240\u6709\u53EF\u7528\u7684MCP\u5DE5\u5177\n */\nexport function getTools() {\n  return getMCPTools();\n}\n\n/**\n * \u83B7\u53D6MCP\u670D\u52A1\u5668\u4FE1\u606F\n */\nexport function getServerInfo() {\n  return MCP_SERVER_INFO;\n}\n\n/**\n * \u4ECE\u6587\u672C\u89E3\u6790PRD\u5E76\u751F\u6210\u4EFB\u52A1\n * @param text PRD\u6587\u672C\u5185\u5BB9\n * @param options \u89E3\u6790\u9009\u9879\n */\nexport async function parsePRD(text: string, options?: any) {\n  const fileType = options?.fileType || FileType.MARKDOWN;\n  const parseOptions = {\n    modelType: options?.modelType,\n    extractSections: options?.extractSections !== false,\n    extractFeatures: options?.extractFeatures !== false,\n    prioritize: options?.prioritize !== false,\n  };\n\n  try {\n    // \u89E3\u6790PRD\n    const parseResult = await yasiService.parsePRD(text, fileType, parseOptions);\n    if (!parseResult.success) {\n      return { error: parseResult.error };\n    }\n\n    // \u751F\u6210\u4EFB\u52A1\u8BA1\u5212\n    const planOptions = {\n      modelType: options?.modelType,\n      taskTemplate: options?.taskTemplate,\n      estimateDuration: options?.estimateDuration,\n      assignTasks: options?.assignTasks,\n    };\n    const planResult = await yasiService.generateTaskPlan(parseResult.data, planOptions);\n    if (!planResult.success) {\n      return { error: planResult.error };\n    }\n\n    // \u4FDD\u5B58\u4EFB\u52A1\u8BA1\u5212\uFF08\u5982\u679C\u6307\u5B9A\u4E86\u8F93\u51FA\u8DEF\u5F84\uFF09\n    if (options?.outputPath) {\n      const saveResult = await yasiService.saveTaskPlan(planResult.data, options.outputPath);\n      if (!saveResult.success) {\n        return { error: saveResult.error };\n      }\n    }\n\n    return {\n      success: true,\n      data: {\n        prd: parseResult.data,\n        taskPlan: planResult.data\n      }\n    };\n  } catch (error) {\n    return { error: (error as Error).message };\n  }\n}\n\n/**\n * \u4ECE\u6587\u4EF6\u89E3\u6790PRD\u5E76\u751F\u6210\u4EFB\u52A1\n * @param filePath PRD\u6587\u4EF6\u8DEF\u5F84\n * @param options \u89E3\u6790\u9009\u9879\n */\nexport async function parsePRDFromFile(filePath: string, options?: any) {\n  try {\n    // \u89E3\u6790PRD\u6587\u4EF6\n    const parseResult = await yasiService.parsePRDFromFile(filePath, {\n      modelType: options?.modelType,\n      extractSections: options?.extractSections !== false,\n      extractFeatures: options?.extractFeatures !== false,\n      prioritize: options?.prioritize !== false,\n    });\n\n    if (!parseResult.success) {\n      return { error: parseResult.error };\n    }\n\n    // \u751F\u6210\u4EFB\u52A1\u8BA1\u5212\n    const planOptions = {\n      modelType: options?.modelType,\n      taskTemplate: options?.taskTemplate,\n      estimateDuration: options?.estimateDuration,\n      assignTasks: options?.assignTasks,\n    };\n    const planResult = await yasiService.generateTaskPlan(parseResult.data, planOptions);\n    if (!planResult.success) {\n      return { error: planResult.error };\n    }\n\n    // \u4FDD\u5B58\u4EFB\u52A1\u8BA1\u5212\uFF08\u5982\u679C\u6307\u5B9A\u4E86\u8F93\u51FA\u8DEF\u5F84\uFF09\n    if (options?.outputPath) {\n      const saveResult = await yasiService.saveTaskPlan(planResult.data, options.outputPath);\n      if (!saveResult.success) {\n        return { error: saveResult.error };\n      }\n    }\n\n    return {\n      success: true,\n      data: {\n        prd: parseResult.data,\n        taskPlan: planResult.data\n      }\n    };\n  } catch (error) {\n    return { error: (error as Error).message };\n  }\n}\n\n/**\n * \u83B7\u53D6\u6240\u6709\u4EFB\u52A1\n */\nexport async function getAllTasks() {\n  return yasiService.getAllTasks();\n}\n\n/**\n * \u6839\u636EID\u83B7\u53D6\u4EFB\u52A1\n * @param id \u4EFB\u52A1ID\n */\nexport async function getTaskById(id: string) {\n  return yasiService.getTaskById(id);\n}\n\n/**\n * \u83B7\u53D6\u4E0B\u4E00\u4E2A\u8981\u5904\u7406\u7684\u4EFB\u52A1\n */\nexport async function getNextTasks() {\n  return yasiService.getNextTasks();\n}\n\n/**\n * \u66F4\u65B0\u4EFB\u52A1\u72B6\u6001\n * @param id \u4EFB\u52A1ID\n * @param status \u65B0\u72B6\u6001\n */\nexport async function updateTaskStatus(id: string, status: string) {\n  return yasiService.updateTask(id, { status: status as any });\n}\n\n/**\n * \u4F7F\u7528\u804A\u5929\u6A21\u578B\u8FDB\u884C\u5BF9\u8BDD\n * @param messages \u6D88\u606F\u6570\u7EC4\n * @param modelType \u6A21\u578B\u7C7B\u578B\n * @param options \u8C03\u7528\u9009\u9879\n */\nexport async function chat(messages: any[], modelType?: ModelType, options?: ModelCallOptions) {\n  return yasiService.chat(messages, modelType, options);\n}\n\n/**\n * \u83B7\u53D6\u6240\u6709\u53EF\u7528\u7684\u6A21\u578B\u7C7B\u578B\n */\nexport async function getAvailableModelTypes() {\n  return yasiService.getAvailableModelTypes();\n}\n\n/**\n * \u9A8C\u8BC1\u6A21\u578BAPI\u5BC6\u94A5\n * @param modelType \u6A21\u578B\u7C7B\u578B\n */\nexport async function validateModelApiKey(modelType: ModelType) {\n  return yasiService.validateModelApiKey(modelType);\n}\n\n/**\n * \u66F4\u65B0\u914D\u7F6E\n * @param config \u914D\u7F6E\u5BF9\u8C61\n * @param isProjectLevel \u662F\u5426\u4E3A\u9879\u76EE\u7EA7\u914D\u7F6E\n */\nexport async function updateConfig(config: any, isProjectLevel = false) {\n  return yasiService.updateConfig(config, isProjectLevel);\n}\n\n/**\n * \u83B7\u53D6\u914D\u7F6E\n */\nexport async function getConfig() {\n  return yasiService.getConfig();\n}\n\n/**\n * \u6839\u636EPRD\u89E3\u6790\u7ED3\u679C\u751F\u6210\u4EFB\u52A1\u8BA1\u5212\n * @param prdResult PRD\u89E3\u6790\u7ED3\u679C\n * @param options \u89C4\u5212\u9009\u9879\n */\nexport async function generateTaskPlan(prdResult: any, options?: any) {\n  try {\n    const planResult = await yasiService.generateTaskPlan(prdResult, {\n      modelType: options?.modelType,\n      taskTemplate: options?.taskTemplate,\n      estimateDuration: options?.estimateDuration,\n      assignTasks: options?.assignTasks,\n    });\n\n    if (!planResult.success) {\n      return { error: planResult.error };\n    }\n\n    return {\n      success: true,\n      data: planResult.data\n    };\n  } catch (error) {\n    return { error: (error as Error).message };\n  }\n}\n\n/**\n * \u751F\u6210\u6D4B\u8BD5\u7528\u4F8B\n * @param taskDescription \u4EFB\u52A1\u63CF\u8FF0\n * @param options \u6D4B\u8BD5\u751F\u6210\u9009\u9879\n */\nexport async function generateTests(taskDescription: string, options?: any) {\n  try {\n    const modelCoordinator = yasiService['modelCoordinator'];\n    const response = await modelCoordinator.generateTests(taskDescription, {\n      modelType: options?.modelType,\n      framework: options?.framework || 'jest',\n      coverage: options?.coverage !== false,\n      includeEdgeCases: options?.includeEdgeCases !== false,\n      mockDependencies: options?.mockDependencies !== false,\n    });\n\n    return { success: true, data: response };\n  } catch (error) {\n    return { error: (error as Error).message };\n  }\n}"],
  "mappings": "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,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,aAAa,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,aAAa,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE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EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,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EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,gBAAgB,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,YAA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OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,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",
  "names": ["require_index_cjs", "__commonJSMin", "exports", "decodeCache", "getDecodeCache", "exclude", "cache", "i", "ch", "decode", "string", "seq", "result", "l", "b1", "b2", "chr", "b3", "b4", "encodeCache", "getEncodeCache", "encode", "keepEscaped", "code", "nextCode", "format", "url", "Url", "protocolPattern", "portPattern", "simplePathPattern", "delims", "unwise", "autoEscape", "nonHostChars", "hostEndingChars", "hostnameMaxLen", "hostnamePartPattern", "hostnamePartStart", "hostlessProtocol", "slashedProtocol", "urlParse", "slashesDenoteHost", "u", "lowerProto", "hec", "slashes", "rest", "simplePath", "proto", "hostEnd", "auth", "atSign", "host", "ipv6Hostname", "hostparts", "part", "newpart", "j", "k", "validParts", "notHost", "bit", "hash", "qm", "port", "require_index_cjs", "__commonJSMin", "exports", "regex$5", "regex$4", "regex$3", "regex$2", "regex$1", "regex", "exports", "c", "exports", "c", "decodeMap", "exports", "_a", "codePoint", "output", "replaceCodePoint", "decodeCodePoint", "decode_data_html_js_1", "__importDefault", "exports", "decode_data_xml_js_1", "decode_codepoint_js_1", "__importStar", "decode_codepoint_js_2", "CharCodes", "TO_LOWER_BIT", "BinTrieFlags", "isNumber", "code", "isHexadecimalCharacter", "isAsciiAlphaNumeric", "isEntityInAttributeInvalidEnd", "EntityDecoderState", "DecodingMode", "EntityDecoder", "decodeTree", "emitCodePoint", "errors", "decodeMode", "str", "offset", "start", "end", "base", "digitCount", "startIdx", "char", "lastCp", "expectedLength", "_a", "current", "valueLength", "determineBranch", "_b", "result", "consumed", "getDecoder", "ret", "decoder", "lastIndex", "len", "nodeIdx", "branchCount", "jumpOffset", "value", "lo", "hi", "mid", "midVal", "htmlDecoder", "xmlDecoder", "decodeHTML", "mode", "decodeHTMLAttribute", "decodeHTMLStrict", "decodeXML", "restoreDiff", "arr", "i", "exports", "exports", "xmlCodeMap", "str", "index", "c", "encodeXML", "ret", "lastIdx", "match", "i", "char", "next", "getEscaper", "regex", "map", "data", "result", "encode_html_js_1", "__importDefault", "escape_js_1", "htmlReplacer", "encodeHTML", "data", "encodeHTMLTrieRe", "exports", "encodeNonAsciiHTML", "regExp", "str", "ret", "lastIdx", "match", "char", "next", "nextChar", "value", "cp", "decode_js_1", "encode_js_1", "escape_js_1", "EntityLevel", "exports", "EncodingMode", "decode", "data", "options", "level", "mode", "decodeStrict", "opts", "_a", "encode", "escape_js_2", "encode_js_2", "decode_js_2", "require_index_cjs", "__commonJSMin", "exports", "module", "uc_micro", "reFactory", "opts", "re", "text_separators", "assign", "obj", "source", "key", "_class", "isString", "isObject", "isRegExp", "isFunction", "escapeRE", "str", "defaultOptions", "isOptionsObj", "acc", "k", "defaultSchemas", "text", "pos", "self", "tail", "tlds_2ch_src_re", "tlds_default", "resetScanCache", "createValidator", "createNormalizer", "match", "compile", "tlds", "untpl", "tpl", "aliases", "schemaError", "name", "val", "compiled", "alias", "slist", "Match", "shift", "start", "end", "createMatch", "LinkifyIt", "schemas", "options", "schema", "definition", "m", "ml", "me", "len", "next", "tld_pos", "at_pos", "result", "list", "keepOld", "el", "idx", "arr", "require_punycode", "__commonJSMin", "exports", "module", "delimiter", "regexPunycode", "regexNonASCII", "regexSeparators", "errors", "baseMinusTMin", "floor", "stringFromCharCode", "error", "type", "map", "array", "callback", "result", "length", "mapDomain", "domain", "parts", "labels", "encoded", "ucs2decode", "string", "output", "counter", "value", "extra", "ucs2encode", "codePoints", "basicToDigit", "codePoint", "digitToBasic", "digit", "flag", "adapt", "delta", "numPoints", "firstTime", "k", "decode", "input", "inputLength", "i", "bias", "basic", "j", "index", "oldi", "w", "t", "baseMinusT", "out", "encode", "n", "currentValue", "basicLength", "handledCPCount", "m", "handledCPCountPlusOne", "q", "qMinusT", "toUnicode", "toASCII", "punycode", "require_index_cjs", "__commonJSMin", "exports", "module", "mdurl", "ucmicro", "entities", "LinkifyIt", "punycode", "_interopNamespaceDefault", "e", "n", "k", "d", "mdurl__namespace", "ucmicro__namespace", "_class", "obj", "isString", "_hasOwnProperty", "has", "object", "key", "assign", "source", "arrayReplaceAt", "src", "pos", "newElements", "isValidEntityCode", "c", "fromCodePoint", "surrogate1", "surrogate2", "UNESCAPE_MD_RE", "ENTITY_RE", "UNESCAPE_ALL_RE", "DIGITAL_ENTITY_TEST_RE", "replaceEntityPattern", "match", "name", "code", "decoded", "unescapeMd", "str", "unescapeAll", "escaped", "entity", "HTML_ESCAPE_TEST_RE", "HTML_ESCAPE_REPLACE_RE", "HTML_REPLACEMENTS", "replaceUnsafeChar", "ch", "escapeHtml", "REGEXP_ESCAPE_RE", "escapeRE", "isSpace", "isWhiteSpace", "isPunctChar", "isMdAsciiPunct", "normalizeReference", "lib", "utils", "parseLinkLabel", "state", "start", "disableNested", "level", "found", "marker", "prevPos", "max", "oldPos", "labelEnd", "parseLinkDestination", "result", "parseLinkTitle", "prev_state", "helpers", "default_rules", "tokens", "idx", "options", "env", "slf", "token", "info", "langName", "langAttrs", "arr", "highlighted", "i", "tmpAttrs", "tmpToken", "Renderer", "l", "needLf", "nextToken", "rules", "len", "type", "Ruler", "self", "chains", "rule", "altName", "chain", "fn", "index", "opt", "beforeName", "ruleName", "afterName", "list", "ignoreInvalid", "chainName", "Token", "tag", "nesting", "attrs", "attrData", "value", "StateCore", "md", "NEWLINES_RE", "NULL_RE", "normalize", "block", "inline", "tok", "isLinkOpen$1", "isLinkClose$1", "linkify$1", "blockTokens", "j", "htmlLinkLevel", "currentToken", "text", "links", "nodes", "lastPos", "ln", "url", "fullUrl", "urlText", "token_o", "token_t", "token_c", "RARE_RE", "SCOPED_ABBR_TEST_RE", "SCOPED_ABBR_RE", "SCOPED_ABBR", "replaceFn", "replace_scoped", "inlineTokens", "inside_autolink", "replace_rare", "replace", "blkIdx", "QUOTE_TEST_RE", "QUOTE_RE", "APOSTROPHE", "replaceAt", "process_inlines", "stack", "thisLevel", "OUTER", "t", "canOpen", "canClose", "isSingle", "lastChar", "nextChar", "isLastPunctChar", "isNextPunctChar", "isLastWhiteSpace", "isNextWhiteSpace", "item", "openQuote", "closeQuote", "smartquotes", "text_join", "curr", "last", "_rules$2", "Core", "StateBlock", "s", "indent", "offset", "indent_found", "line", "from", "min", "begin", "end", "keepLastLF", "queue", "lineIndent", "lineStart", "first", "MAX_AUTOCOMPLETED_CELLS", "getLine", "escapedSplit", "isEscaped", "current", "table", "startLine", "endLine", "silent", "nextLine", "firstCh", "secondCh", "lineText", "columns", "aligns", "columnCount", "oldParentType", "terminatorRules", "token_to", "tableLines", "token_tho", "token_htro", "token_ho", "token_il", "tbodyLines", "autocompletedCells", "terminate", "token_tbo", "token_tro", "token_tdo", "fence", "mem", "markup", "params", "haveEndMarker", "blockquote", "oldLineMax", "oldBMarks", "oldBSCount", "oldSCount", "oldTShift", "lastLineEmpty", "isOutdented", "initial", "spaceAfterMarker", "adjustTab", "oldIndent", "lines", "hr", "cnt", "skipBulletListMarker", "skipOrderedListMarker", "markTightParagraphs", "tight", "isTerminatingParagraph", "isOrdered", "markerValue", "posAfterMarker", "markerCharCode", "listTokIdx", "listLines", "prevEmptyEnd", "contentStart", "indentAfterMarker", "itemLines", "oldTight", "oldListIndent", "reference", "_endLine", "getNextLine", "isContinuation", "lineContent", "destRes", "href", "destEndPos", "destEndLineNo", "titleRes", "title", "label", "block_names", "attr_name", "unquoted", "single_quoted", "double_quoted", "attr_value", "attribute", "open_tag", "close_tag", "comment", "processing", "declaration", "cdata", "HTML_TAG_RE", "HTML_OPEN_CLOSE_TAG_RE", "HTML_SEQUENCES", "html_block", "heading", "tmp", "token_i", "lheading", "content", "paragraph", "_rules$1", "ParserBlock", "maxNesting", "hasEmptyLines", "prevLine", "ok", "outTokens", "StateInline", "token_meta", "canSplitWord", "count", "left_flanking", "right_flanking", "isTerminatorChar", "SCHEME_RE", "linkify", "proto", "link", "newline", "pmax", "ws", "ESCAPED", "escape", "ch1", "escapedStr", "ch2", "origStr", "backtick", "openerLength", "matchEnd", "matchStart", "closerLength", "strikethrough_tokenize", "scanned", "postProcess$1", "delimiters", "loneMarkers", "startDelim", "endDelim", "strikethrough_postProcess", "tokens_meta", "r_strikethrough", "emphasis_tokenize", "postProcess", "isStrong", "emphasis_post_process", "r_emphasis", "res", "ref", "parseReference", "labelStart", "image", "EMAIL_RE", "AUTOLINK_RE", "autolink", "isLinkOpen", "isLinkClose", "isLetter", "lc", "html_inline", "DIGITAL_RE", "NAMED_RE", "processDelimiters", "openersBottom", "headerIdx", "lastTokenIdx", "jumps", "closerIdx", "closer", "minOpenerIdx", "openerIdx", "newMinOpenerIdx", "opener", "isOddMatch", "lastJump", "link_pairs", "fragments_join", "_rules", "_rules2", "ParserInline", "cache", "cfg_default", "cfg_zero", "cfg_commonmark", "config", "BAD_PROTO_RE", "GOOD_DATA_RE", "validateLink", "RECODE_HOSTNAME_FOR", "normalizeLink", "parsed", "normalizeLinkText", "MarkdownIt", "presetName", "presets", "missed", "plugin", "args", "require_format", "__commonJSMin", "exports", "module", "InvalidFormatError", "_InvalidFormatError", "formatFn", "Format", "options", "createFormatWrap", "opts", "require_styles", "__commonJSMin", "exports", "module", "styles", "codes", "key", "val", "style", "require_has_flag", "__commonJSMin", "exports", "module", "flag", "argv", "terminatorPos", "prefix", "pos", "require_supports_colors", "__commonJSMin", "exports", "module", "os", "hasFlag", "env", "forceColor", "translateLevel", "level", "supportsColor", "stream", "min", "osRelease", "sign", "version", "getSupportLevel", "require_trap", "__commonJSMin", "exports", "module", "text", "options", "result", "trap", "c", "chars", "rand", "require_zalgo", "__commonJSMin", "exports", "module", "text", "options", "soul", "all", "randomNumber", "range", "r", "isChar", "character", "bool", "i", "heComes", "result", "counts", "l", "arr", "d", "index", "require_america", "__commonJSMin", "exports", "module", "colors", "letter", "i", "exploded", "require_zebra", "__commonJSMin", "exports", "module", "colors", "letter", "i", "exploded", "require_rainbow", "__commonJSMin", "exports", "module", "colors", "rainbowColors", "letter", "i", "exploded", "require_random", "__commonJSMin", "exports", "module", "colors", "available", "letter", "i", "exploded", "require_colors", "__commonJSMin", "exports", "module", "colors", "util", "ansiStyles", "defineProps", "newLineRegex", "str", "stylize", "style", "styleMap", "matchOperatorsRe", "escapeStringRegexp", "build", "_styles", "builder", "applyStyle", "proto", "styles", "ret", "key", "args", "arg", "newLinesPresent", "nestedStyles", "i", "code", "match", "theme", "out", "init", "name", "sequencer", "map", "exploded", "require_safe", "__commonJSMin", "exports", "module", "colors", "require_cli", "__commonJSMin", "exports", "require_npm", "__commonJSMin", "exports", "require_syslog", "__commonJSMin", "exports", "require_config", "__commonJSMin", "exports", "require_triple_beam", "__commonJSMin", "exports", "require_colorize", "__commonJSMin", "exports", "module", "colors", "LEVEL", "MESSAGE", "hasSpace", "Colorizer", "_Colorizer", "opts", "clrs", "nextColors", "acc", "level", "lookup", "message", "i", "len", "info", "require_levels", "__commonJSMin", "exports", "module", "Colorizer", "config", "require_align", "__commonJSMin", "exports", "module", "format", "info", "require_errors", "__commonJSMin", "exports", "module", "format", "LEVEL", "MESSAGE", "einfo", "stack", "cause", "info", "err", "require_pad_levels", "__commonJSMin", "exports", "module", "configs", "LEVEL", "MESSAGE", "Padder", "_Padder", "opts", "levels", "lvls", "level", "filler", "maxLength", "targetLen", "rep", "acc", "info", "require_cli", "__commonJSMin", "exports", "module", "Colorizer", "Padder", "configs", "MESSAGE", "CliFormat", "opts", "info", "require_combine", "__commonJSMin", "exports", "module", "format", "cascade", "formats", "isValidFormat", "info", "obj", "i", "fmt", "combinedFormat", "instance", "require_safe_stable_stringify", "__commonJSMin", "exports", "module", "hasOwnProperty", "stringify", "configure", "strEscapeSequencesRegExp", "strEscape", "str", "sort", "array", "comparator", "i", "currentValue", "position", "typedArrayPrototypeGetSymbolToStringTag", "isTypedArrayWithEntries", "value", "stringifyTypedArray", "separator", "maximumBreadth", "whitespace", "res", "getCircularValueOption", "options", "circularValue", "getDeterministicOption", "getBooleanOption", "key", "getPositiveIntegerOption", "getItemCount", "number", "getUniqueReplacerSet", "replacerArray", "replacerSet", "getStrictOption", "message", "fail", "bigint", "deterministic", "maximumDepth", "stringifyFnReplacer", "parent", "stack", "replacer", "spacer", "indentation", "join", "originalIndentation", "maximumValuesToStringify", "tmp", "removedKeys", "keys", "keyLength", "maximumPropertiesToStringify", "stringifyArrayReplacer", "stringifyIndent", "stringifySimple", "hasLength", "space", "require_json", "__commonJSMin", "exports", "module", "format", "MESSAGE", "stringify", "replacer", "key", "value", "info", "opts", "jsonStringify", "require_label", "__commonJSMin", "exports", "module", "format", "info", "opts", "require_logstash", "__commonJSMin", "exports", "module", "format", "MESSAGE", "jsonStringify", "info", "logstash", "require_metadata", "__commonJSMin", "exports", "module", "format", "fillExcept", "info", "fillExceptKeys", "metadataKey", "savedKeys", "acc", "key", "metadata", "fillWith", "fillWithKeys", "opts", "require_ms", "__commonJSMin", "exports", "module", "s", "m", "h", "d", "w", "y", "val", "options", "type", "parse", "fmtLong", "fmtShort", "str", "match", "n", "ms", "msAbs", "plural", "name", "isPlural", "require_ms", "__commonJSMin", "exports", "module", "format", "ms", "info", "curr", "require_pretty_print", "__commonJSMin", "exports", "module", "inspect", "format", "LEVEL", "MESSAGE", "SPLAT", "info", "opts", "stripped", "require_printf", "__commonJSMin", "exports", "module", "MESSAGE", "Printf", "templateFn", "info", "opts", "require_simple", "__commonJSMin", "exports", "module", "format", "MESSAGE", "jsonStringify", "info", "stringifiedRest", "padding", "require_splat", "__commonJSMin", "exports", "module", "util", "SPLAT", "formatRegExp", "escapedPercent", "Splatter", "opts", "info", "tokens", "msg", "splat", "percents", "escapes", "extraSplat", "metas", "metalen", "i", "token", "twoDigitsOptional", "twoDigits", "threeDigits", "fourDigits", "word", "literal", "shorten", "arr", "sLen", "newArr", "i", "len", "monthUpdate", "arrName", "v", "i18n", "lowerCaseArr", "index", "assign", "origObj", "args", "_i", "_a", "args_1", "obj", "key", "dayNames", "monthNames", "monthNamesShort", "dayNamesShort", "defaultI18n", "dayOfMonth", "globalI18n", "setGlobalDateI18n", "regexEscape", "str", "pad", "val", "formatFlags", "dateObj", "offset", "monthParse", "emptyDigits", "emptyWord", "amPm", "timezoneOffset", "parts", "minutes", "parseFlags", "now", "cent", "globalMasks", "setGlobalDateMasks", "masks", "format", "mask", "literals", "$0", "$1", "combinedI18nSettings", "parse", "dateStr", "today", "dateInfo", "parseInfo", "newFormat", "specifiedFields", "requiredFields", "info", "field", "regex", "requiredField", "matches", "parser", "value", "dateTZ", "validateFields", "fecha", "require_timestamp", "__commonJSMin", "exports", "module", "fecha", "format", "info", "opts", "require_uncolorize", "__commonJSMin", "exports", "module", "colors", "format", "MESSAGE", "info", "opts", "require_logform", "__commonJSMin", "exports", "format", "exposeFormat", "name", "requireFormat", "require_common", "__commonJSMin", "exports", "format", "prop", "obj", "type", "props", "notice", "require_package", "__commonJSMin", "exports", "module", "require_node", "__commonJSMin", "exports", "module", "require_stream", "__commonJSMin", "exports", "module", "require_destroy", "__commonJSMin", "exports", "module", "destroy", "err", "cb", "_this", "readableDestroyed", "writableDestroyed", "emitErrorNT", "emitCloseNT", "emitErrorAndCloseNT", "self", "undestroy", "errorOrDestroy", "stream", "rState", "wState", "require_errors", "__commonJSMin", "exports", "module", "codes", "createErrorType", "code", "message", "Base", "getMessage", "arg1", "arg2", "arg3", "NodeError", "oneOf", "expected", "thing", "len", "i", "startsWith", "str", "search", "pos", "endsWith", "this_len", "includes", "start", "name", "value", "actual", "determiner", "msg", "type", "arg", "require_state", "__commonJSMin", "exports", "module", "ERR_INVALID_OPT_VALUE", "highWaterMarkFrom", "options", "isDuplex", "duplexKey", "getHighWaterMark", "state", "hwm", "name", "require_inherits_browser", "__commonJSMin", "exports", "module", "ctor", "superCtor", "TempCtor", "require_inherits", "__commonJSMin", "exports", "module", "util", "require_buffer_list", "__commonJSMin", "exports", "module", "ownKeys", "object", "enumerableOnly", "keys", "symbols", "sym", "_objectSpread", "target", "i", "source", "key", "_defineProperty", "obj", "value", "_toPropertyKey", "_classCallCheck", "instance", "Constructor", "_defineProperties", "props", "descriptor", "_createClass", "protoProps", "staticProps", "arg", "_toPrimitive", "input", "hint", "prim", "res", "_require", "Buffer", "_require2", "inspect", "custom", "copyBuffer", "src", "offset", "BufferList", "v", "entry", "ret", "s", "p", "n", "hasStrings", "c", "str", "nb", "buf", "_", "options", "require_end_of_stream", "__commonJSMin", "exports", "module", "ERR_STREAM_PREMATURE_CLOSE", "once", "callback", "called", "_len", "args", "_key", "noop", "isRequest", "stream", "eos", "opts", "readable", "writable", "onlegacyfinish", "onfinish", "writableEnded", "readableEnded", "onend", "onerror", "err", "onclose", "onrequest", "require_async_iterator", "__commonJSMin", "exports", "module", "_Object$setPrototypeO", "_defineProperty", "obj", "key", "value", "_toPropertyKey", "arg", "_toPrimitive", "input", "hint", "prim", "res", "finished", "kLastResolve", "kLastReject", "kError", "kEnded", "kLastPromise", "kHandlePromise", "kStream", "createIterResult", "done", "readAndResolve", "iter", "resolve", "data", "onReadable", "wrapForNext", "lastPromise", "reject", "AsyncIteratorPrototype", "ReadableStreamAsyncIteratorPrototype", "_this", "error", "promise", "_this2", "err", "createReadableStreamAsyncIterator", "stream", "_Object$create", "iterator", "require_from", "__commonJSMin", "exports", "module", "asyncGeneratorStep", "gen", "resolve", "reject", "_next", "_throw", "key", "arg", "info", "value", "error", "_asyncToGenerator", "fn", "self", "args", "err", "ownKeys", "object", "enumerableOnly", "keys", "symbols", "sym", "_objectSpread", "target", "i", "source", "_defineProperty", "obj", "_toPropertyKey", "_toPrimitive", "input", "hint", "prim", "res", "ERR_INVALID_ARG_TYPE", "from", "Readable", "iterable", "opts", "iterator", "readable", "reading", "next", "_next2", "_yield$iterator$next", "done", "require_stream_readable", "__commonJSMin", "exports", "module", "Readable", "Duplex", "ReadableState", "EE", "EElistenerCount", "emitter", "type", "Stream", "Buffer", "OurUint8Array", "_uint8ArrayToBuffer", "chunk", "_isUint8Array", "obj", "debugUtil", "debug", "BufferList", "destroyImpl", "_require", "getHighWaterMark", "_require$codes", "ERR_INVALID_ARG_TYPE", "ERR_STREAM_PUSH_AFTER_EOF", "ERR_METHOD_NOT_IMPLEMENTED", "ERR_STREAM_UNSHIFT_AFTER_END_EVENT", "StringDecoder", "createReadableStreamAsyncIterator", "from", "errorOrDestroy", "kProxyEvents", "prependListener", "event", "fn", "options", "stream", "isDuplex", "value", "err", "cb", "encoding", "state", "skipChunkCheck", "readableAddChunk", "addToFront", "onEofChunk", "er", "chunkInvalid", "addChunk", "maybeReadMore", "emitReadable", "enc", "decoder", "p", "content", "MAX_HWM", "computeNewHighWaterMark", "n", "howMuchToRead", "nOrig", "endReadable", "doRead", "ret", "fromList", "emitReadable_", "flow", "maybeReadMore_", "len", "dest", "pipeOpts", "src", "doEnd", "endFn", "onend", "unpipe", "onunpipe", "readable", "unpipeInfo", "cleanup", "ondrain", "pipeOnDrain", "cleanedUp", "onclose", "onfinish", "onerror", "ondata", "indexOf", "dests", "index", "ev", "res", "nReadingNextTick", "updateReadableListening", "self", "resume", "resume_", "_this", "paused", "i", "method", "endReadableNT", "wState", "iterable", "opts", "xs", "x", "l", "require_stream_duplex", "__commonJSMin", "exports", "module", "objectKeys", "obj", "keys", "key", "Duplex", "Readable", "Writable", "v", "method", "options", "onend", "onEndNT", "self", "value", "require_stream_writable", "__commonJSMin", "exports", "module", "Writable", "CorkedRequest", "state", "_this", "onCorkedFinish", "Duplex", "WritableState", "internalUtil", "Stream", "Buffer", "OurUint8Array", "_uint8ArrayToBuffer", "chunk", "_isUint8Array", "obj", "destroyImpl", "_require", "getHighWaterMark", "_require$codes", "ERR_INVALID_ARG_TYPE", "ERR_METHOD_NOT_IMPLEMENTED", "ERR_MULTIPLE_CALLBACK", "ERR_STREAM_CANNOT_PIPE", "ERR_STREAM_DESTROYED", "ERR_STREAM_NULL_VALUES", "ERR_STREAM_WRITE_AFTER_END", "ERR_UNKNOWN_ENCODING", "errorOrDestroy", "nop", "options", "stream", "isDuplex", "noDecode", "er", "onwrite", "current", "out", "realHasInstance", "object", "writeAfterEnd", "cb", "validChunk", "encoding", "ret", "isBuf", "writeOrBuffer", "clearBuffer", "decodeChunk", "newChunk", "len", "last", "doWrite", "writev", "onwriteError", "sync", "finishMaybe", "onwriteStateUpdate", "finished", "needFinish", "afterWrite", "onwriteDrain", "entry", "l", "buffer", "holder", "count", "allBuffers", "endWritable", "callFinal", "err", "prefinish", "need", "rState", "corkReq", "value", "require_modern", "__commonJSMin", "exports", "module", "util", "Writable", "LEVEL", "TransportStream", "options", "logger", "src", "info", "enc", "callback", "level", "errState", "transformed", "err", "chunks", "infos", "i", "write", "require_legacy", "__commonJSMin", "exports", "module", "util", "LEVEL", "TransportStream", "LegacyTransportStream", "options", "transportError", "err", "info", "enc", "callback", "chunks", "i", "require_winston_transport", "__commonJSMin", "exports", "module", "require_console", "__commonJSMin", "exports", "module", "os", "LEVEL", "MESSAGE", "TransportStream", "options", "info", "callback", "strArray", "errMsg", "set", "el", "require_isArrayLike", "__commonJSMin", "exports", "module", "isArrayLike", "value", "require_initialParams", "__commonJSMin", "exports", "module", "fn", "args", "callback", "require_setImmediate", "__commonJSMin", "exports", "fallback", "wrap", "hasQueueMicrotask", "hasSetImmediate", "hasNextTick", "fn", "defer", "args", "_defer", "require_asyncify", "__commonJSMin", "exports", "module", "asyncify", "_initialParams", "_initialParams2", "_interopRequireDefault", "_setImmediate", "_setImmediate2", "_wrapAsync", "obj", "func", "args", "callback", "promise", "handlePromise", "result", "e", "value", "invokeCallback", "err", "error", "require_wrapAsync", "__commonJSMin", "exports", "_asyncify", "_asyncify2", "_interopRequireDefault", "obj", "isAsync", "fn", "isAsyncGenerator", "isAsyncIterable", "wrapAsync", "asyncFn", "require_awaitify", "__commonJSMin", "exports", "module", "awaitify", "asyncFn", "arity", "awaitable", "args", "resolve", "reject", "err", "cbArgs", "require_parallel", "__commonJSMin", "exports", "module", "_isArrayLike", "_isArrayLike2", "_interopRequireDefault", "_wrapAsync", "_wrapAsync2", "_awaitify", "_awaitify2", "obj", "eachfn", "tasks", "callback", "results", "task", "key", "taskCb", "err", "result", "require_once", "__commonJSMin", "exports", "module", "once", "fn", "wrapper", "args", "callFn", "require_getIterator", "__commonJSMin", "exports", "module", "coll", "require_iterator", "__commonJSMin", "exports", "module", "createIterator", "_isArrayLike", "_isArrayLike2", "_interopRequireDefault", "_getIterator", "_getIterator2", "obj", "createArrayIterator", "coll", "i", "len", "createES2015Iterator", "iterator", "item", "createObjectIterator", "okeys", "next", "key", "require_onlyOnce", "__commonJSMin", "exports", "module", "onlyOnce", "fn", "args", "callFn", "require_breakLoop", "__commonJSMin", "exports", "module", "breakLoop", "require_asyncEachOfLimit", "__commonJSMin", "exports", "module", "asyncEachOfLimit", "_breakLoop", "_breakLoop2", "_interopRequireDefault", "obj", "generator", "limit", "iteratee", "callback", "done", "canceled", "awaiting", "running", "idx", "replenish", "value", "iterDone", "iterateeCallback", "handleError", "err", "result", "require_eachOfLimit", "__commonJSMin", "exports", "module", "_once", "_once2", "_interopRequireDefault", "_iterator", "_iterator2", "_onlyOnce", "_onlyOnce2", "_wrapAsync", "_asyncEachOfLimit", "_asyncEachOfLimit2", "_breakLoop", "_breakLoop2", "obj", "limit", "iteratee", "callback", "nextElem", "done", "canceled", "running", "looping", "iterateeCallback", "err", "value", "replenish", "elem", "require_eachOfLimit", "__commonJSMin", "exports", "module", "_eachOfLimit2", "_eachOfLimit3", "_interopRequireDefault", "_wrapAsync", "_wrapAsync2", "_awaitify", "_awaitify2", "obj", "eachOfLimit", "coll", "limit", "iteratee", "callback", "require_eachOfSeries", "__commonJSMin", "exports", "module", "_eachOfLimit", "_eachOfLimit2", "_interopRequireDefault", "_awaitify", "_awaitify2", "obj", "eachOfSeries", "coll", "iteratee", "callback", "require_series", "__commonJSMin", "exports", "module", "series", "_parallel2", "_parallel3", "_interopRequireDefault", "_eachOfSeries", "_eachOfSeries2", "obj", "tasks", "callback", "require_stream_transform", "__commonJSMin", "exports", "module", "Transform", "_require$codes", "ERR_METHOD_NOT_IMPLEMENTED", "ERR_MULTIPLE_CALLBACK", "ERR_TRANSFORM_ALREADY_TRANSFORMING", "ERR_TRANSFORM_WITH_LENGTH_0", "Duplex", "afterTransform", "er", "data", "ts", "cb", "rs", "options", "prefinish", "_this", "done", "chunk", "encoding", "n", "err", "err2", "stream", "require_stream_passthrough", "__commonJSMin", "exports", "module", "PassThrough", "Transform", "options", "chunk", "encoding", "cb", "require_pipeline", "__commonJSMin", "exports", "module", "eos", "once", "callback", "called", "_require$codes", "ERR_MISSING_ARGS", "ERR_STREAM_DESTROYED", "noop", "err", "isRequest", "stream", "destroyer", "reading", "writing", "closed", "destroyed", "call", "fn", "pipe", "from", "to", "popCallback", "streams", "pipeline", "_len", "_key", "error", "destroys", "i", "require_readable", "__commonJSMin", "exports", "module", "Stream", "require_diagnostics", "__commonJSMin", "exports", "module", "adapters", "modifiers", "logger", "use", "adapter", "set", "custom", "enabled", "namespace", "async", "i", "resolve", "fn", "values", "modify", "write", "process", "message", "introduce", "options", "has", "key", "nope", "yep", "diagnostics", "args", "require_production", "__commonJSMin", "exports", "module", "create", "diagnostics", "prod", "namespace", "options", "require_node", "__commonJSMin", "exports", "module", "require_tail_file", "__commonJSMin", "exports", "module", "fs", "StringDecoder", "Stream", "noop", "options", "iter", "buffer", "decode", "stream", "buff", "pos", "row", "err", "fd", "read", "error", "bytes", "data", "i", "require_file", "__commonJSMin", "exports", "module", "fs", "path", "asyncSeries", "zlib", "MESSAGE", "Stream", "PassThrough", "TransportStream", "debug", "os", "tailFile", "options", "throwIf", "target", "args", "name", "info", "callback", "output", "bytes", "logged", "written", "normalizeQuery", "file", "buff", "results", "row", "stream", "err", "data", "l", "i", "add", "attempt", "log", "check", "push", "e", "obj", "key", "time", "tail", "line", "size", "fullpath", "stat", "cb", "source", "dest", "ext", "basename", "tasks", "num", "isRotation", "oldest", "isOldest", "isZipped", "filePath", "x", "fileName", "tmppath", "exists", "src", "gzip", "inp", "out", "dirPath", "require_http", "__commonJSMin", "exports", "module", "http", "https", "Stream", "TransportStream", "configure", "options", "info", "callback", "err", "res", "auth", "path", "body", "e", "stream", "buff", "req", "data", "l", "i", "me", "batchOptionsCopy", "headers", "jsonStringify", "require_is_stream", "__commonJSMin", "exports", "module", "isStream", "stream", "require_stream", "__commonJSMin", "exports", "module", "isStream", "MESSAGE", "os", "TransportStream", "options", "info", "callback", "require_transports", "__commonJSMin", "exports", "require_config", "__commonJSMin", "exports", "logform", "configs", "require_eachOf", "__commonJSMin", "exports", "module", "_isArrayLike", "_isArrayLike2", "_interopRequireDefault", "_breakLoop", "_breakLoop2", "_eachOfLimit", "_eachOfLimit2", "_once", "_once2", "_onlyOnce", "_onlyOnce2", "_wrapAsync", "_wrapAsync2", "_awaitify", "_awaitify2", "obj", "eachOfArrayLike", "coll", "iteratee", "callback", "index", "completed", "length", "canceled", "iteratorCallback", "err", "value", "eachOfGeneric", "eachOf", "eachOfImplementation", "require_withoutIndex", "__commonJSMin", "exports", "module", "_withoutIndex", "iteratee", "value", "index", "callback", "require_forEach", "__commonJSMin", "exports", "module", "_eachOf", "_eachOf2", "_interopRequireDefault", "_withoutIndex", "_withoutIndex2", "_wrapAsync", "_wrapAsync2", "_awaitify", "_awaitify2", "obj", "eachLimit", "coll", "iteratee", "callback", "require_fn", "__commonJSMin", "exports", "module", "toString", "fn", "named", "type", "require_one_time", "__commonJSMin", "exports", "module", "name", "fn", "called", "value", "onetime", "require_stack_trace", "__commonJSMin", "exports", "belowFn", "oldLimit", "dummyObject", "v8Handler", "v8StackTrace", "err", "self", "lines", "line", "lineMatch", "object", "method", "functionName", "typeName", "methodName", "isNative", "methodStart", "objectEnd", "properties", "callSite", "CallSite", "property", "strProperties", "boolProperties", "require_exception_stream", "__commonJSMin", "exports", "module", "Writable", "transport", "info", "enc", "callback", "require_exception_handler", "__commonJSMin", "exports", "module", "os", "asyncForEach", "debug", "once", "stackTrace", "ExceptionStream", "logger", "args", "arg", "handler", "wrapper", "err", "message", "site", "info", "handlers", "doExit", "timeout", "gracefulExit", "next", "done", "transport", "onDone", "event", "wrap", "require_rejection_stream", "__commonJSMin", "exports", "module", "Writable", "transport", "info", "enc", "callback", "require_rejection_handler", "__commonJSMin", "exports", "module", "os", "asyncForEach", "debug", "once", "stackTrace", "RejectionStream", "logger", "args", "arg", "handler", "wrapper", "err", "message", "site", "info", "handlers", "doExit", "timeout", "gracefulExit", "next", "done", "transport", "onDone", "event", "wrap", "require_profiler", "__commonJSMin", "exports", "module", "Profiler", "logger", "Logger", "args", "info", "require_logger", "__commonJSMin", "exports", "module", "Stream", "Transform", "asyncForEach", "LEVEL", "SPLAT", "isStream", "ExceptionHandler", "RejectionHandler", "LegacyTransportStream", "Profiler", "warn", "config", "formatRegExp", "Logger", "options", "defaultRequestMetadata", "logger", "info", "infoClone", "silent", "format", "defaultMeta", "levels", "level", "exitOnError", "transports", "colors", "emitErrs", "formatters", "padLevels", "rewriters", "stripColors", "exceptionHandlers", "rejectionHandlers", "transport", "givenLevelValue", "getLevelValue", "configuredLevelValue", "transportLevelValue", "msg", "splat", "meta", "enc", "callback", "next", "target", "match", "results", "queryObject", "queryTransport", "err", "res", "addResults", "result", "out", "streams", "i", "str", "log", "id", "args", "time", "timeEnd", "event", "transportEvent", "value", "pipes", "require_create_logger", "__commonJSMin", "exports", "module", "LEVEL", "config", "Logger", "debug", "isLevelEnabledFunctionName", "level", "opts", "DerivedLogger", "options", "logger", "args", "self", "msg", "info", "require_container", "__commonJSMin", "exports", "module", "createLogger", "options", "id", "existing", "logger", "val", "key", "require_winston", "__commonJSMin", "exports", "logform", "warn", "defaultLogger", "method", "args", "val", "prop", "index_exports", "__export", "FileType", "LogLevel", "MessageRole", "ModelType", "PRDParser", "TaskFlowEngine", "TaskFlowService", "TaskManager", "TaskPlanner", "TaskPriority", "TaskStatus", "TaskType", "TaskVisualizer", "VERSION", "VisualizationType", "chat", "executeTool", "generateTaskPlan", "generateTests", "getAllTasks", "getAvailableModelTypes", "getConfig", "getNextTasks", "getServerInfo", "getTaskById", "getTools", "parsePRD", "parsePRDFromFile", "taskFlowService", "updateConfig", "updateTaskStatus", "validateModelApiKey", "__toCommonJS", "fs", "path", "MessageRole", "FileType", "fs", "path", "import_markdown_it", "DocumentProcessor", "logger", "MarkdownIt", "filePath", "options", "stats", "documentType", "content", "metadata", "sections", "documentStructure", "error", "lines", "currentSection", "sectionCounter", "i", "line", "headerMatch", "level", "title", "section", "p", "paragraph", "index", "_options", "data", "item", "key", "value", "headerRegex", "match", "obj", "id", "result", "stack", "titleLower", "text", "words", "word", "wordCount", "a", "b", "score", "importantKeywords", "keyword", "contentLength", "mdTitleMatch", "htmlTitleMatch", "firstLine", "chineseChars", "totalChars", "englishWords", "chineseCount", "englishCount", "TaskStatus", "TaskPriority", "TaskType", "RequirementExtractor", "logger", "documentStructure", "options", "requirements", "warnings", "suggestions", "section", "sectionRequirements", "summary", "error", "content", "subsection", "subRequirements", "reqCounter", "pattern", "match", "description", "lines", "line", "trimmedLine", "storyCounter", "techKeywords", "keyword", "id", "title", "type", "_content", "text", "textLower", "priority", "keywords", "complexity", "baseHours", "value", "valueKeywords", "risk", "riskKeywords", "_type", "confidence", "criteria", "tags", "tagKeywords", "tag", "stakeholders", "matches", "req", "otherReq", "desc1", "desc2", "functionalCount", "r", "nonFunctionalCount", "userStoryCount", "highPriorityCount", "totalEffort", "sum", "complexityScores", "avgComplexityScore", "score", "avgComplexity", "avgConfidence", "coverageScore", "indicator", "PRDParser", "modelCoordinator", "logger", "DocumentProcessor", "RequirementExtractor", "filePath", "options", "processingOptions", "documentStructure", "extractionOptions", "extractionResult", "error", "content", "fileType", "processedContent", "response", "result", "parsed", "section", "index", "features", "req", "overviewSection", "sections", "maxDepth", "calculateDepth", "sectionList", "currentDepth", "fs", "path", "TaskPlanner", "modelCoordinator", "logger", "prdResult", "options", "response", "taskPlan", "error", "outputPath", "task", "index", "taskIds", "newId", "depId", "baseId", "existingIds", "counter", "graph", "visited", "recStack", "node", "neighbors", "neighbor", "deps", "d", "optimizedDeps", "dependencies", "taskMap", "result", "isRedundant", "otherId", "fromId", "toId", "queue", "currentId", "currentTask", "_options", "dependents", "taskId", "t", "maxDepth", "avgDepth", "dfs", "id", "depths", "sum", "depth", "group", "maxGroupSize", "groups", "processed", "parallelTasks", "parallel", "otherTask", "task1", "task2", "teamSize", "avgHoursPerPerson", "estimatedHours", "fs", "path", "TaskManager", "logger", "configManager", "taskSettings", "filePath", "targetPath", "content", "error", "taskPlan", "id", "parentId", "subtaskId", "parentTask", "task", "fullSubtaskId", "subtask", "st", "filter", "t", "data", "parentTaskIndex", "subtaskIndex", "taskIndex", "depId", "depTask", "taskId", "dependsOnId", "index", "task1Id", "task2Id", "graph", "task1Deps", "visited", "recStack", "hasCycle", "node", "neighbors", "neighbor", "interval", "TaskFlowEngine", "logger", "configManager", "modelCoordinator", "PRDParser", "TaskPlanner", "TaskManager", "prdFilePath", "parseOptions", "planningOptions", "parseResult", "planResult", "optimizeResult", "error", "options", "prdData", "result", "taskPlan", "taskId", "status", "task", "stats", "VisualizationType", "TaskVisualizer", "logger", "taskPlan", "options", "ganttTasks", "currentDate", "task", "ganttTask", "ganttData", "mermaid", "progress", "status", "duration", "nodes", "edges", "depId", "graph", "node", "shape", "style", "edge", "priority", "_options", "columns", "kanbanTask", "column", "col", "index", "stats", "completionRate", "date", "startDate", "fs", "path", "os", "ModelType", "LogLevel", "SimpleConfigManager", "configData", "error", "configDir", "key", "defaultValue", "keys", "value", "k", "current", "newConfig", "config", "_isProjectLevel", "import_winston", "import_path", "import_fs_extra", "Logger", "_Logger", "config", "logDir", "path", "fs", "logFile", "consoleFormat", "winston", "timestamp", "level", "message", "fileFormat", "transports", "meta", "import_axios", "BaseModelAdapter", "modelType", "error", "response", "statusCode", "data", "message", "BaiduModelAdapter", "BaseModelAdapter", "configManager", "config", "params", "options", "requestBody", "url", "response", "axios", "error", "onData", "stream", "resolve", "reject", "buffer", "chunk", "chunkString", "lines", "line", "data", "parsedData", "err", "msg", "role", "currentTime", "tokenUrl", "import_axios", "DeepseekModelAdapter", "BaseModelAdapter", "configManager", "config", "params", "options", "requestBody", "response", "axios", "error", "onData", "stream", "resolve", "reject", "buffer", "chunk", "chunkString", "lines", "line", "data", "parsedData", "content", "done", "err", "messages", "msg", "choice", "role", "import_axios", "crypto", "ZhipuModelAdapter", "BaseModelAdapter", "configManager", "config", "params", "options", "requestBody", "headers", "response", "axios", "error", "onData", "stream", "resolve", "reject", "buffer", "chunk", "chunkString", "lines", "line", "data", "parsedData", "delta", "done", "err", "messages", "msg", "choice", "role", "id", "secret", "date", "signString", "signature", "import_axios", "QwenModelAdapter", "BaseModelAdapter", "configManager", "config", "axios", "params", "_options", "requestData", "response", "error", "onData", "buffer", "chunk", "lines", "line", "data", "parsed", "testParams", "messages", "msg", "ModelFactory", "configManager", "modelType", "type", "cached", "adapter", "BaiduModelAdapter", "DeepseekModelAdapter", "ZhipuModelAdapter", "QwenModelAdapter", "ModelCoordinator", "configManager", "ModelFactory", "messages", "modelType", "options", "onData", "content", "systemPrompt", "userPrompt", "parsedPRD", "taskDescription", "TaskFlowService", "SimpleConfigManager", "Logger", "ModelCoordinator", "PRDParser", "TaskPlanner", "TaskManager", "content", "fileType", "options", "error", "filePath", "prdResult", "taskPlan", "outputPath", "id", "task", "filter", "data", "messages", "modelType", "config", "isProjectLevel", "safeConfig", "key", "modelConfig", "allTasks", "t", "taskId", "status", "updateData", "nextTasks", "type", "projectData", "tasks", "req", "res", "requirements", "index", "message", "context", "response", "isValid", "idOrReq", "project", "stats", "format", "originalProject", "taskFlowService", "yasiService", "MCP_TOOLS", "executeMCPTool", "toolName", "args", "taskFlowService", "error", "getMCPTools", "MCP_SERVER_INFO", "executeTool", "toolName", "args", "executeMCPTool", "getTools", "getMCPTools", "getServerInfo", "MCP_SERVER_INFO", "parsePRD", "text", "options", "fileType", "parseOptions", "parseResult", "yasiService", "planOptions", "planResult", "saveResult", "error", "parsePRDFromFile", "filePath", "getAllTasks", "getTaskById", "id", "getNextTasks", "updateTaskStatus", "status", "chat", "messages", "modelType", "getAvailableModelTypes", "validateModelApiKey", "updateConfig", "config", "isProjectLevel", "getConfig", "generateTaskPlan", "prdResult", "generateTests", "taskDescription", "VERSION"]
}
